!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(2),n(5);var c=n(302),l=n(303),u=r(l),h=n(459),p=r(h);n(461),n(462),n(506),n(510);var d=n(511),f=r(d),m=n(519),v=r(m),y=n(520),g=r(y),x=n(521),_=r(x),b=n(522),w=r(b),E=n(517),S=(r(E),n(462));AFRAME.registerComponent("velocity",S.math.velocity),S.physics.registerAll(),S.registerAll();var M=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.handleChangeSeatClick=n.handleChangeSeatClick.bind(n),n}return a(e,t),s(e,[{key:"handleChangeSeatClick",value:function(){this.refs.camera.fadeCanvasTextIn(),this.refs.camera.refs.cursor.cursorAnimation(),this.refs.camera.refs.seats.fadeIn()}},{key:"render",value:function(){return u["default"].createElement(c.Scene,null,u["default"].createElement(v["default"],{introAnimation:this.introAnimation}),u["default"].createElement(f["default"],{handleChangeSeatClick:this.handleChangeSeatClick,ref:"camera"}),u["default"].createElement(w["default"],null),u["default"].createElement(g["default"],null),u["default"].createElement(_["default"],{ref:"movie"}))}}]),e}(u["default"].Component);p["default"].render(u["default"].createElement(M,null),document.getElementById("scene-container"))},function(t,n,r){var i,i;(function(n,r){!function(e){t.exports=e()}(function(){var t;return function o(t,e,n){function r(s,c){if(!e[s]){if(!t[s]){var l="function"==typeof i&&i;if(!c&&l)return i(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return r(n?n:e)},h,h.exports,o,t,e,n)}return e[s].exports}for(var a="function"==typeof i&&i,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,n){"use strict";e.exports={createLink:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");r.href=t,r.rel="stylesheet";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];r.setAttribute("data-"+i,o)}n.appendChild(r)},createStyle:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];r.setAttribute("data-"+i,o)}r.sheet?(r.innerHTML=t,r.sheet.cssText=t,n.appendChild(r)):r.styleSheet?(n.appendChild(r),r.styleSheet.cssText=t):(r.appendChild(document.createTextNode(t)),n.appendChild(r))}}},{}],2:[function(t,e,n){function r(){u=!1,s.length?l=s.concat(l):h=-1,l.length&&i()}function i(){if(!u){var t=setTimeout(r);u=!0;for(var e=l.length;e;){for(s=l,l=[];++h<e;)s&&s[h].run();h=-1,e=l.length}s=null,u=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,c=e.exports={},l=[],u=!1,h=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new o(t,e)),1!==l.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],3:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}}function s(){var t;try{t=n.storage.debug}catch(e){}return t}function c(){try{return window.localStorage}catch(t){}}n=e.exports=t("./debug"),n.log=o,n.formatArgs=i,n.save=a,n.load=s,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(s())},{"./debug":4}],4:[function(t,e,n){function r(){return n.colors[u++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(l||e);t.diff=o,t.prev=l,t.curr=e,l=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;s++;var i=n.formatters[r];if("function"==typeof i){var o=a[s];e=i.call(t,o),a.splice(s,1),s--}return e}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(t,a));var c=i.log||n.log||console.log.bind(console);c.apply(t,a)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function a(){n.enable("")}function s(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=c,n.disable=a,n.enable=o,n.enabled=s,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var l,u=0},{ms:5}],5:[function(t,e,n){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=u?Math.round(t/u)+"d":t>=l?Math.round(t/l)+"h":t>=c?Math.round(t/c)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return a(t,u,"day")||a(t,l,"hour")||a(t,c,"minute")||a(t,s,"second")||t+" ms"}function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,c=60*s,l=60*c,u=24*l,h=365.25*u;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?o(t):i(t)}},{}],6:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function i(t,e,n){var r=e[n];if(void 0!==r&&null!==r){if(s.call(t,n)&&(void 0===t[n]||null===t[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");s.call(t,n)&&a(r)?t[n]=o(Object(t[n]),e[n]):t[n]=r}}function o(t,e){if(t===e)return t;e=Object(e);for(var n in e)s.call(e,n)&&i(t,e,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)c.call(e,r[o])&&i(t,e,r[o]);return t}var a=t("is-obj"),s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(t){t=r(t);for(var e=1;e<arguments.length;e++)o(t,arguments[e]);return t}},{"is-obj":7}],7:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],8:[function(t,n,r){!function(t,n,r,i){"use strict";function o(t,e){for(var n=0,r=t.length;n<r;n++)y(t[n],e)}function a(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],S(e,F[c(e)])}function s(t){return function(e){it(e)&&(y(e,t),o(e.querySelectorAll(z),t))}}function c(t){var e=st.call(t,"is"),n=t.nodeName.toUpperCase(),r=j.call(V,e?I+e.toUpperCase():D+n);return e&&-1<r&&!l(n,e)?-1:r}function l(t,e){return-1<z.indexOf(t+'[is="'+e+'"]')}function u(t){var e=t.currentTarget,n=t.attrChange,r=t.attrName,i=t.target;yt&&(!i||i===e)&&e.attributeChangedCallback&&"style"!==r&&t.prevValue!==t.newValue&&e.attributeChangedCallback(r,n===t[N]?null:t.prevValue,n===t[O]?null:t.newValue)}function h(t){var e=s(t);return function(t){g.push(e,t.target)}}function p(t){vt&&(vt=!1,t.currentTarget.removeEventListener(P,p)),o((t.target||n).querySelectorAll(z),t.detail===C?C:A),rt&&m()}function d(t,e){var n=this;ct.call(n,t,e),x.call(n,{target:n})}function f(t,e){tt(t,e),w?w.observe(t,ht):(mt&&(t.setAttribute=d,t[M]=b(t),t.addEventListener(k,x)),t.addEventListener(L,u)),t.createdCallback&&yt&&(t.created=!0,t.createdCallback(),t.created=!1)}function m(){for(var t,e=0,n=ot.length;e<n;e++)t=ot[e],U.contains(t)||(n--,ot.splice(e--,1),y(t,C))}function v(t){throw new Error("A "+t+" type is already registered")}function y(t,e){var n,r=c(t);-1<r&&(E(t,F[r]),r=0,e!==A||t[A]?e===C&&!t[C]&&(t[A]=!1,t[C]=!0,r=1):(t[C]=!1,t[A]=!0,r=1,rt&&j.call(ot,t)<0&&ot.push(t)),r&&(n=t[e+"Callback"])&&n.call(t))}if(!(i in n)){var g,x,_,b,w,E,S,M="__"+i+(1e5*Math.random()>>0),A="attached",C="detached",T="extends",N="ADDITION",R="MODIFICATION",O="REMOVAL",L="DOMAttrModified",P="DOMContentLoaded",k="DOMSubtreeModified",D="<",I="=",q=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,B=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],V=[],F=[],z="",U=n.documentElement,j=V.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},H=r.prototype,G=H.hasOwnProperty,W=H.isPrototypeOf,X=r.defineProperty,Z=r.getOwnPropertyDescriptor,K=r.getOwnPropertyNames,Y=r.getPrototypeOf,Q=r.setPrototypeOf,J=!!r.__proto__,$=r.create||function gt(t){return t?(gt.prototype=t,new gt):this},tt=Q||(J?function(t,e){return t.__proto__=e,t}:K&&Z?function(){function t(t,e){for(var n,r=K(e),i=0,o=r.length;i<o;i++)n=r[i],G.call(t,n)||X(t,n,Z(e,n))}return function(e,n){do t(e,n);while((n=Y(n))&&!W.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),et=t.MutationObserver||t.WebKitMutationObserver,nt=(t.HTMLElement||t.Element||t.Node).prototype,rt=!W.call(nt,U),it=rt?function(t){return 1===t.nodeType}:function(t){return W.call(nt,t)},ot=rt&&[],at=nt.cloneNode,st=nt.getAttribute,ct=nt.setAttribute,lt=nt.removeAttribute,ut=n.createElement,ht=et&&{attributes:!0,characterData:!0,attributeOldValue:!0},pt=et||function(t){mt=!1,U.removeEventListener(L,pt)},dt=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},ft=!1,mt=!0,vt=!0,yt=!0;Q||J?(E=function(t,e){W.call(e,t)||f(t,e)},S=f):(E=function(t,e){t[M]||(t[M]=r(!0),f(t,e))},S=E),rt?(mt=!1,function(){var t=Z(nt,"addEventListener"),n=t.value,r=function(t){var e=new CustomEvent(L,{bubbles:!0});e.attrName=t,e.prevValue=st.call(this,t),e.newValue=null,e[O]=e.attrChange=2,lt.call(this,t),this.dispatchEvent(e)},i=function(t,n){var r=this.hasAttribute(t),i=r&&st.call(this,t);e=new CustomEvent(L,{bubbles:!0}),ct.call(this,t,n),e.attrName=t,e.prevValue=r?i:null,e.newValue=n,r?e[R]=e.attrChange=1:e[N]=e.attrChange=0,this.dispatchEvent(e)},o=function(t){var e,n=t.currentTarget,r=n[M],i=t.propertyName;r.hasOwnProperty(i)&&(r=r[i],e=new CustomEvent(L,{bubbles:!0}),e.attrName=r.name,e.prevValue=r.value||null,e.newValue=r.value=n[i]||null,null==e.prevValue?e[N]=e.attrChange=0:e[R]=e.attrChange=1,n.dispatchEvent(e))};t.value=function(t,e,a){t===L&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[M]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=r,n.call(this,"propertychange",o)),n.call(this,t,e,a)},X(nt,"addEventListener",t)}()):et||(U.addEventListener(L,pt),U.setAttribute(M,1),U.removeAttribute(M),mt&&(x=function(t){var e,n,r,i=this;if(i===t.target){e=i[M],i[M]=n=b(i);for(r in n){if(!(r in e))return _(0,i,r,e[r],n[r],N);if(n[r]!==e[r])return _(1,i,r,e[r],n[r],R)}for(r in e)if(!(r in n))return _(2,i,r,e[r],n[r],O)}},_=function(t,e,n,r,i,o){var a={attrChange:t,currentTarget:e,attrName:n,prevValue:r,newValue:i};a[o]=t,u(a)},b=function(t){for(var e,n,r={},i=t.attributes,o=0,a=i.length;o<a;o++)e=i[o],n=e.name,"setAttribute"!==n&&(r[n]=e.value);return r})),n[i]=function(t,e){if(r=t.toUpperCase(),ft||(ft=!0,et?(w=function(t,e){function n(t,e){for(var n=0,r=t.length;n<r;e(t[n++]));}return new et(function(r){for(var i,o,a,s=0,c=r.length;s<c;s++)i=r[s],"childList"===i.type?(n(i.addedNodes,t),n(i.removedNodes,e)):(o=i.target,yt&&o.attributeChangedCallback&&"style"!==i.attributeName&&(a=st.call(o,i.attributeName),a!==i.oldValue&&o.attributeChangedCallback(i.attributeName,i.oldValue,a)))})}(s(A),s(C)),w.observe(n,{childList:!0,subtree:!0})):(g=[],dt(function y(){for(;g.length;)g.shift().call(null,g.shift());dt(y)}),n.addEventListener("DOMNodeInserted",h(A)),n.addEventListener("DOMNodeRemoved",h(C))),n.addEventListener(P,p),n.addEventListener("readystatechange",p),n.createElement=function(t,e){var r=ut.apply(n,arguments),i=""+t,o=j.call(V,(e?I:D)+(e||i).toUpperCase()),a=-1<o;return e&&(r.setAttribute("is",e=e.toLowerCase()),a&&(a=l(i.toUpperCase(),e))),yt=!n.createElement.innerHTMLHelper,a&&S(r,F[o]),r},nt.cloneNode=function(t){var e=at.call(this,!!t),n=c(e);return-1<n&&S(e,F[n]),t&&a(e.querySelectorAll(z)),e}),-2<j.call(V,I+r)+j.call(V,D+r)&&v(t),!q.test(r)||-1<j.call(B,r))throw new Error("The type "+t+" is invalid");var r,i,u=function(){return f?n.createElement(m,r):n.createElement(m)},d=e||H,f=G.call(d,T),m=f?e[T].toUpperCase():r;return f&&-1<j.call(V,D+m)&&v(m),i=V.push((f?I:D)+r)-1,z=z.concat(z.length?",":"",f?m+'[is="'+t.toLowerCase()+'"]':m),u.prototype=F[i]=G.call(d,"prototype")?d.prototype:$(nt),o(n.querySelectorAll(z),A),u}}}(window,document,Object,"registerElement")},{}],9:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var n,a,s=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)i.call(n,l)&&(s[l]=n[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},{}],10:[function(t,e,r){(function(t){var n=t.performance||{},r=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"];t.length;){var e=t.shift();if(e in n)return n[e].bind(n)}var r=Date.now||function(){return(new Date).getTime()},i=(n.timing||{}).navigationStart||r();return function(){return r()-i}}();r.performanceNow=n.now,r.noConflict=function(){n.now=r.performanceNow},r.conflict=function(){n.now=r},r.conflict(),e.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,n){!function(t){function n(t,e){return function(){t.apply(e,arguments)}}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,n(a,this),n(s,this))}function o(t){var e=this;return null===this._state?void this._deferreds.push(t):void p(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var r;try{r=n(e._value)}catch(i){return void t.reject(i)}t.resolve(r)})}function a(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void u(n(e,t),n(a,this),n(s,this))}this._state=!0,this._value=t,c.call(this)}catch(r){s.call(this,r)}}function s(t){this._state=!1,this._value=t,c.call(this)}function c(){for(var t=0,e=this._deferreds.length;t<e;t++)o.call(this,this._deferreds[t]);this._deferreds=null}function l(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function u(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(i){if(r)return;r=!0,n(i)}}var h=setTimeout,p="function"==typeof r&&r||function(t){h(t,1)},d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=this;return new i(function(r,i){o.call(n,new l(t,e,r,i))})},i.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new i(function(e,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(o,t)},n)}t[o]=a,0===--i&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},i._setImmediateFn=function(t){p=t},"undefined"!=typeof e&&e.exports?e.exports=i:t.Promise||(t.Promise=i)}(this)},{}],12:[function(t,e,n){"use strict";function r(t,e,n){function r(){s.id=o(r),a()-i>=t&&(e.call(n),i=a())}var i=a(),s=Object.create(null);return s.id=o(r),s}function i(t){o.cancel(t.id)}var o=t("raf"),a=t("time-now");n=e.exports=r,n.clear=i},{raf:13,"time-now":14}],13:[function(t,e,n){function r(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-i)),r=setTimeout(t,n);return i=e,r}n=e.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||r;var i=(new Date).getTime(),o=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;n.cancel=function(t){o.call(window,t)}},{}],14:[function(t,e,n){"use strict";e.exports=function(){var t=window&&window.performance;return t&&t.now?t.now.bind(t):function(){return(new Date).getTime()}}()},{}],15:[function(t,e,n){function r(t){var e=function(t){return t.trim()},n={};return i(t).map(e).filter(Boolean).forEach(function(t){var e=t.indexOf(":"),r=t.substr(0,e).trim(),i=t.substr(e+1).trim();n[r]=i}),n}function i(t){for(var e,n=[],r=0,i=";",o=/url\([^\)]+$/,a="";r<t.length;)e=t.indexOf(i,r),e===-1&&(e=t.length),a+=t.substring(r,e),o.test(a)?(a+=";",r=e+1):(n.push(a),a="",r=e+1);return n}function o(t){return Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")}function a(t){return o(r(t))}e.exports.parse=r,e.exports.stringify=o,e.exports.normalize=a},{}],16:[function(t,e,n){THREE.VRControls=function(t,e){function n(t){for(var n=0;n<t.length;n++)t[n]instanceof PositionSensorVRDevice&&i.push(t[n]);0===i.length&&e&&e("PositionSensorVRDevice not available")}var r=this,i=[];navigator.getVRDevices&&navigator.getVRDevices().then(n),this.scale=1,this.update=function(){for(var e=0;e<i.length;e++){var n=i[e],o=n.getState();null!==o.orientation&&t.quaternion.copy(o.orientation),null!==o.position&&t.position.copy(o.position).multiplyScalar(r.scale)}},this.resetSensor=function(){for(var t=0;t<i.length;t++){var e=i[t];void 0!==e.resetSensor?e.resetSensor():void 0!==e.zeroSensor&&e.zeroSensor()}},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetSensor()."),this.resetSensor()},this.dispose=function(){i=[]}}},{}],17:[function(t,e,n){THREE.VREffect=function(t,e){function n(t){for(var n=0;n<t.length;n++)if(t[n]instanceof HMDVRDevice){a=t[n];break}void 0===a&&e&&e("HMD not available")}function r(t){var e=2/(t.leftTan+t.rightTan),n=(t.leftTan-t.rightTan)*e*.5,r=2/(t.upTan+t.downTan),i=(t.upTan-t.downTan)*r*.5;return{scale:[e,r],offset:[n,i]}}function i(t,e,n,i){e=void 0===e||e,n=void 0===n?.01:n,i=void 0===i?1e4:i;var o=e?-1:1,a=new THREE.Matrix4,s=a.elements,c=r(t);return s[0]=c.scale[0],s[1]=0,s[2]=c.offset[0]*o,s[3]=0,s[4]=0,s[5]=c.scale[1],s[6]=-c.offset[1]*o,s[7]=0,s[8]=0,s[9]=0,s[10]=i/(n-i)*-o,s[11]=i*n/(n-i),s[12]=0,s[13]=0,s[14]=o,s[15]=0,a.transpose(),a}function o(t,e,n,r){var o=Math.PI/180,a={upTan:Math.tan(t.upDegrees*o),downTan:Math.tan(t.downDegrees*o),leftTan:Math.tan(t.leftDegrees*o),rightTan:Math.tan(t.rightDegrees*o)};return i(a,e,n,r)}var a,s,c,l,u;navigator.getVRDevices&&navigator.getVRDevices().then(n),this.scale=1,this.setSize=function(e,n){t.setSize(e,n)};var h=!1,p=t.domElement,d=p.mozRequestFullScreen?"mozfullscreenchange":"webkitfullscreenchange";document.addEventListener(d,function(t){h=document.mozFullScreenElement||document.webkitFullscreenElement},!1),this.setFullScreen=function(t){void 0!==a&&h!==t&&(p.mozRequestFullScreen?p.mozRequestFullScreen({vrDisplay:a}):p.webkitRequestFullscreen&&p.webkitRequestFullscreen({vrDisplay:a}))};var f=new THREE.PerspectiveCamera;f.layers.enable(1);var m=new THREE.PerspectiveCamera;m.layers.enable(2),this.render=function(e,n){if(a){var r=a.getEyeParameters("left"),i=a.getEyeParameters("right");s=r.eyeTranslation,l=i.eyeTranslation,c=r.recommendedFieldOfView,u=i.recommendedFieldOfView,Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var h=t.getSize();return t.setScissorTest(!0),t.clear(),null===n.parent&&n.updateMatrixWorld(),f.projectionMatrix=o(c,!0,n.near,n.far),m.projectionMatrix=o(u,!0,n.near,n.far),n.matrixWorld.decompose(f.position,f.quaternion,f.scale),n.matrixWorld.decompose(m.position,m.quaternion,m.scale),f.translateX(s.x*this.scale),m.translateX(l.x*this.scale),t.setViewport(0,0,h.width/2,h.height),t.setScissor(0,0,h.width/2,h.height),t.render(e,f),t.setViewport(h.width/2,0,h.width/2,h.height),t.setScissor(h.width/2,0,h.width/2,h.height),t.render(e,m),void t.setScissorTest(!1)}t.render(e,n)}}},{}],18:[function(t,e,n){THREE.ColladaLoader=function(){function t(t,n,r,i){var o=0;if(document.implementation&&document.implementation.createDocument){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState?0!==a.status&&200!==a.status||(a.response?(Bt=n,e(a.response,void 0,t)):i?i():console.error("ColladaLoader: Empty or non-existing file ("+t+")")):3===a.readyState&&r&&(0===o&&(o=a.getResponseHeader("Content-Length")),r({total:o,loaded:a.responseText.length}))},a.open("GET",t,!0),a.send(null)}else alert("Don't know how to parse XML!")}function e(t,e,n){if(It=(new DOMParser).parseFromString(t,"text/xml"),e=e||Bt,void 0!==n){var c=n.split("/");c.pop(),Pt=(c.length<1?".":c.join("/"))+"/"}r(),_t(),Ft=i("library_images image",A,"image"),Ht=i("library_materials material",W,"material"),Gt=i("library_effects effect",Q,"effect"),jt=i("library_geometries geometry",I,"geometry"),Wt=i("library_cameras camera",rt,"camera"),Xt=i("library_lights light",ot,"light"),Ut=i("library_controllers controller",C,"controller"),zt=i("library_animations animation",$,"animation"),Ot=i("library_visual_scenes visual_scene",R,"visual_scene"),Lt=i("library_kinematics_models kinematics_model",st,"kinematics_model"),kt=[],Dt=[],Ct=o(),qt=new THREE.Group;for(var l=0;l<Ct.nodes.length;l++)qt.add(y(Ct.nodes[l]));qt.scale.multiplyScalar(Yt),s(),Tt=a(),v();var u={scene:qt,morphs:kt,skins:Dt,animations:Nt,kinematics:Rt,dae:{images:Ft,materials:Ht,cameras:Wt,lights:Xt,effects:Gt,geometries:jt,controllers:Ut,animations:zt,visualScenes:Ot,visualScene:Ct,scene:Ct,kinematicsModels:Lt,kinematicsModel:Tt}};return e&&e(u),u}function n(t){Zt=t}function r(){var t=It.querySelectorAll("asset"),e=t[0];if(e&&e.childNodes)for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"unit":var i=r.getAttribute("meter");i&&(Yt=parseFloat(i));break;case"up_axis":Qt=r.textContent.charAt(0)}}}function i(t,e,n){for(var r=It.querySelectorAll(t),i={},o=0,a=r.length,s=0;s<a;s++){var c=r[s],l=(new e).parse(c);l.id&&0!==l.id.length||(l.id=n+o++),i[l.id]=l}return i}function o(){var t=It.querySelectorAll("scene instance_visual_scene")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return Ot[e.length>0?e:"visual_scene0"]}return null}function a(){var t=It.querySelectorAll("instance_kinematics_model")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return Lt[e.length>0?e:"kinematics_model0"]}return null}function s(){Nt=[],c(qt)}function c(t){var e=Ct.getChildById(t.colladaId,!0),n=null;if(e&&e.keys){n={fps:60,hierarchy:[{node:e,keys:e.keys,sids:e.sids}],node:t,name:"animation_"+t.name,length:0},Nt.push(n);for(var r=0,i=e.keys.length;r<i;r++)n.length=Math.max(n.length,e.keys[r].time)}else n={hierarchy:[{keys:[],sids:[]}]};for(var r=0,i=t.children.length;r<i;r++)for(var o=c(t.children[r]),a=0,s=o.hierarchy.length;a<s;a++)n.hierarchy.push({keys:[],sids:[]});return n}function l(){var t,e=1e6,n=-e,r=0;for(var i in zt){var o=zt[i];t=t||o.id;for(var a=0;a<o.sampler.length;a++){var s=o.sampler[a];s.create(),e=Math.min(e,s.startTime),n=Math.max(n,s.endTime),r=Math.max(r,s.input.length)}}return{start:e,end:n,frames:r,ID:t}}function u(t,e){var n=e instanceof P?Ut[e.url]:e;if(!n||!n.morph)return void console.log("could not find morph controller!");for(var r=n.morph,i=0;i<r.targets.length;i++){var o=r.targets[i],a=jt[o];if(a.mesh&&a.mesh.primitives&&a.mesh.primitives.length){var s=a.mesh.primitives[0].geometry;s.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:s.vertices})}}t.morphTargets.push({name:"target_Z",vertices:t.vertices})}function h(t,e,n,r){if(t.world=t.world||new THREE.Matrix4,t.localworld=t.localworld||new THREE.Matrix4,t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var i=t.channels[0],o=i.sampler.output[n];o instanceof THREE.Matrix4&&(t.world.copy(o),t.localworld.copy(o),0===n&&t.matrix.copy(o))}r&&t.world.multiplyMatrices(r,t.world),e.push(t);for(var a=0;a<t.nodes.length;a++)h(t.nodes[a],e,n,t.world)}function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=-1;if("JOINT"==r.type){for(var o=0;o<e.joints.length;o++)if(r.sid===e.joints[o]){i=o;break}if(i>=0){var a=e.invBindMatrices[i];r.invBindMatrix=a,r.skinningMatrix=new THREE.Matrix4,r.skinningMatrix.multiplyMatrices(r.world,a),r.animatrix=new THREE.Matrix4,r.animatrix.copy(r.localworld),r.weights=[];for(var o=0;o<e.weights.length;o++)for(var s=0;s<e.weights[o].length;s++){var c=e.weights[o][s];c.joint===i&&r.weights.push(c)}}else console.warn("ColladaLoader: Could not find joint '"+r.sid+"'."),r.skinningMatrix=new THREE.Matrix4,r.weights=[]}}}function d(t){var e=[],n=function(t,e,r){var i={};i.name=e.sid,i.parent=t,i.matrix=e.matrix;var o=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];i.matrix.decompose(o[0],o[1],o[2]),i.pos=[o[0].x,o[0].y,o[0].z],i.scl=[o[2].x,o[2].y,o[2].z],i.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],r.push(i);for(var a in e.nodes)n(e.sid,e.nodes[a],r)};return n(-1,t,e),e}function f(t,e,n){var r=[];h(e,r,-1),p(r,n.skin);for(var i=new THREE.Vector3,o=[],a=0;a<t.vertices.length;a++)o.push(new THREE.Vector3);for(a=0;a<r.length;a++)if("JOINT"==r[a].type)for(var s=0;s<r[a].weights.length;s++){var c=r[a].weights[s],l=c.index,u=c.weight,d=t.vertices[l],f=o[l];i.x=d.x,i.y=d.y,i.z=d.z,i.applyMatrix4(r[a].skinningMatrix),f.x+=i.x*u,f.y+=i.y*u,f.z+=i.z*u}for(var a=0;a<t.vertices.length;a++)t.vertices[a]=o[a]}function m(t,e,n){var r=Ut[e.url];if(n=void 0!==n?n:40,!r||!r.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!e.skeleton||!e.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var i=l(),o=Ct.getChildById(e.skeleton[0],!0)||Ct.getChildBySid(e.skeleton[0],!0),a=d(o),s=r.skin.joints,c=[],u=0;u<s.length;u++)for(var m=0;m<a.length;m++)a[m].name===s[u]&&(c[u]=a[m]);for(var u=0;u<c.length;u++)for(var m=0;m<c.length;m++)c[u].parent===c[m].name&&(c[u].parent=m);var u,m,v;new THREE.Vector3;for(u=0;u<t.vertices.length;u++)t.vertices[u].applyMatrix4(r.skin.bindShapeMatrix);for(var y=[],g=[],x=r.skin.weights,u=0;u<x.length;u++){var _=new THREE.Vector4(x[u][0]?x[u][0].joint:0,x[u][1]?x[u][1].joint:0,x[u][2]?x[u][2].joint:0,x[u][3]?x[u][3].joint:0),v=new THREE.Vector4(x[u][0]?x[u][0].weight:0,x[u][1]?x[u][1].weight:0,x[u][2]?x[u][2].weight:0,x[u][3]?x[u][3].weight:0);y.push(_),g.push(v)}t.skinIndices=y,t.skinWeights=g,t.bones=c;for(var b={name:i.ID,fps:30,length:i.frames/30,hierarchy:[]},m=0;m<c.length;m++)b.hierarchy.push({parent:c[m].parent,name:c[m].name,keys:[]});for(console.log("ColladaLoader:",i.ID+" has "+c.length+" bones."),f(t,o,r),n=0;n<i.frames;n++){var w=[];h(o,w,n),p(w,r.skin);for(var u=0;u<w.length;u++)for(var m=0;m<b.hierarchy.length;m++)if(b.hierarchy[m].name===w[u].sid){var E={};E.time=n/30,E.matrix=w[u].animatrix,0===n&&(w[u].matrix=E.matrix);var S=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];E.matrix.decompose(S[0],S[1],S[2]),E.pos=[S[0].x,S[0].y,S[0].z],E.scl=[S[2].x,S[2].y,S[2].z],E.rot=S[1],b.hierarchy[m].keys.push(E)}t.animation=b}}function v(){if(Tt&&0===Tt.joints.length)return void(Rt=void 0);var t={},e=function(e,n){var r=n.getAttribute("id"),i=Ct.getChildById(r,!0),o=Tt.joints[e];qt.traverse(function(n){n.colladaId==r&&(t[e]={node:n,transforms:i.transforms,joint:o,position:o.zeroPosition})})};Rt={joints:Tt&&Tt.joints,getJointValue:function(e){var n=t[e];return n?n.position:void console.log("getJointValue: joint "+e+" doesn't exist")},setJointValue:function(e,n){var i=t[e];if(i){var o=i.joint;if(n>o.limits.max||n<o.limits.min)console.log("setJointValue: joint "+e+" value "+n+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+")");else if(o["static"])console.log("setJointValue: joint "+e+" is static");else{var a=i.node,s=o.axis,c=i.transforms,l=new THREE.Matrix4;for(r=0;r<c.length;r++){var u=c[r];if(u.sid&&u.sid.indexOf("joint"+e)!==-1)switch(o.type){case"revolute":l.multiply(h.makeRotationAxis(s,THREE.Math.degToRad(n)));break;case"prismatic":l.multiply(h.makeTranslation(s.x*n,s.y*n,s.z*n));break;default:console.warn("setJointValue: unknown joint type: "+o.type)}else{var h=new THREE.Matrix4;switch(u.type){case"matrix":l.multiply(u.obj);break;case"translate":l.multiply(h.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"rotate":l.multiply(h.makeRotationAxis(u.obj,u.angle))}}}var p=l.elements,d=Array.prototype.slice.call(p),f=[d[0],d[4],d[8],d[12],d[1],d[5],d[9],d[13],d[2],d[6],d[10],d[14],d[3],d[7],d[11],d[15]];a.matrix.set.apply(a.matrix,f),a.matrix.decompose(a.position,a.quaternion,a.scale)}}else console.log("setJointValue: joint "+e+" doesn't exist");
}};var n=It.querySelector("scene instance_kinematics_scene");if(n)for(var r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"bind_joint_axis":var o=i.getAttribute("target").split("/").pop(),a=i.querySelector("axis param").textContent,s=parseInt(a.split("joint").pop().split(".")[0]),c=It.querySelector('[sid="'+o+'"]');if(c){var l=c.parentElement;e(s,l)}}}}function y(t,e){var n,r,i,o,a=new THREE.Object3D,s=!1;for(i=0;i<t.controllers.length;i++){var c=Ut[t.controllers[i].url];switch(c.type){case"skin":if(jt[c.skin.source]){var l=new D;l.url=c.skin.source,l.instance_material=t.controllers[i].instance_material,t.geometries.push(l),s=!0,n=t.controllers[i]}else if(Ut[c.skin.source]){var h=Ut[c.skin.source];if(r=h,h.morph&&jt[h.morph.source]){var l=new D;l.url=h.morph.source,l.instance_material=t.controllers[i].instance_material,t.geometries.push(l)}}break;case"morph":if(jt[c.morph.source]){var l=new D;l.url=c.morph.source,l.instance_material=t.controllers[i].instance_material,t.geometries.push(l),r=t.controllers[i]}console.log("ColladaLoader: Morph-controller partially supported.")}}var p={};for(i=0;i<t.geometries.length;i++){var d,f=t.geometries[i],v=f.instance_material,g=jt[f.url],x={},_=[],b=0;if(g){if(!g.mesh||!g.mesh.primitives)continue;if(0===a.name.length&&(a.name=g.id),v)for(o=0;o<v.length;o++){var w=v[o],E=Ht[w.target],S=E.instance_effect.url,M=Gt[S].shader,A=M.material;if(g.doubleSided){if(!(w.symbol in p)){var C=A.clone();C.side=THREE.DoubleSide,p[w.symbol]=C}A=p[w.symbol]}A.opacity=A.opacity?A.opacity:1,x[w.symbol]=b,_.push(A),d=A,d.name=null===E.name||""===E.name?E.id:E.name,b++}var T,N=d||new THREE.MeshLambertMaterial({color:14540253,side:g.doubleSided?THREE.DoubleSide:THREE.FrontSide}),R=g.mesh.geometry3js;b>1&&(N=new THREE.MultiMaterial(_)),void 0!==n?(m(R,n),R.morphTargets.length>0?(N.morphTargets=!0,N.skinning=!1):(N.morphTargets=!1,N.skinning=!0),T=new THREE.SkinnedMesh(R,N,(!1)),T.name="skin_"+Dt.length,Dt.push(T)):void 0!==r?(u(R,r),N.morphTargets=!0,T=new THREE.Mesh(R,N),T.name="morph_"+kt.length,kt.push(T)):T=R.isLineStrip===!0?new THREE.Line(R):new THREE.Mesh(R,N),a.add(T)}}for(i=0;i<t.cameras.length;i++){var O=t.cameras[i],L=Wt[O.url],P=new THREE.PerspectiveCamera(L.yfov,parseFloat(L.aspect_ratio),parseFloat(L.znear),parseFloat(L.zfar));a.add(P)}for(i=0;i<t.lights.length;i++){var k=null,I=t.lights[i],q=Xt[I.url];if(q&&q.technique){var B,V=q.color.getHex(),F=q.intensity,z=q.distance,U=q.falloff_angle;switch(q.technique){case"directional":k=new THREE.DirectionalLight(V,F,z),k.position.set(0,0,1);break;case"point":k=new THREE.PointLight(V,F,z);break;case"spot":k=new THREE.SpotLight(V,F,z,U,B),k.position.set(0,0,1);break;case"ambient":k=new THREE.AmbientLight(V)}}k&&a.add(k)}if(a.name=t.name||t.id||"",a.colladaId=t.id||"",a.layer=t.layer||"",a.matrix=t.matrix,a.matrix.decompose(a.position,a.quaternion,a.scale),Kt.centerGeometry&&a.geometry){var j=a.geometry.center();j.multiply(a.scale),j.applyQuaternion(a.quaternion),a.position.sub(j)}for(i=0;i<t.nodes.length;i++)a.add(y(t.nodes[i],t));return a}function g(t){for(var e=It.querySelectorAll("library_nodes node"),n=0;n<e.length;n++){var r=e[n].attributes.getNamedItem("id");if(r&&r.value===t)return e[n]}}function x(t){var e=[],n=1e6,r=-1e6;for(var i in zt)for(var o=zt[i],a=0;a<o.channel.length;a++){var s=o.channel[a],c=o.sampler[a],i=s.target.split("/")[0];i==t.id&&(c.create(),s.sampler=c,n=Math.min(n,c.startTime),r=Math.max(r,c.endTime),e.push(s))}return e.length&&(t.startTime=n,t.endTime=r),e}function _(t){if(t.channels&&t.channels.length){for(var e=[],n=[],r=0,i=t.channels.length;r<i;r++){var o,a=t.channels[r],s=a.fullSid,c=a.sampler,l=c.input,u=t.getTransformBySid(a.sid);if(a.arrIndices){o=[];for(var h=0,p=a.arrIndices.length;h<p;h++)o[h]=Mt(a.arrIndices[h])}else o=At(a.member);if(u){n.indexOf(s)===-1&&n.push(s);for(var h=0,p=l.length;h<p;h++){var d=l[h],f=c.getData(u.type,h,o),m=b(e,d);if(!m){m=new nt(d);var v=w(e,d);e.splice(v===-1?e.length:v,0,m)}m.addTarget(s,u,o,f)}}else console.log('Could not find transform "'+a.sid+'" in node '+t.id)}for(var r=0;r<n.length;r++)for(var y=n[r],h=0;h<e.length;h++){var m=e[h];m.hasTarget(y)||E(e,m,h,y)}t.keys=e,t.sids=n}}function b(t,e){for(var n=null,r=0,i=t.length;r<i&&null===n;r++){var o=t[r];if(o.time===e)n=o;else if(o.time>e)break}return n}function w(t,e){for(var n=-1,r=0,i=t.length;r<i&&n===-1;r++){var o=t[r];o.time>=e&&(n=r)}return n}function E(t,e,n,r){var i=M(t,r,n?n-1:0),o=S(t,r,n+1);if(i&&o){var a,s=(e.time-i.time)/(o.time-i.time),c=i.getTarget(r),l=o.getTarget(r).data,u=c.data;if("matrix"===c.type)a=u;else if(u.length){a=[];for(var h=0;h<u.length;++h)a[h]=u[h]+(l[h]-u[h])*s}else a=u+(l-u)*s;e.addTarget(r,c.transform,c.member,a)}}function S(t,e,n){for(;n<t.length;n++){var r=t[n];if(r.hasTarget(e))return r}return null}function M(t,e,n){for(n=n>=0?n:n+t.length;n>=0;n--){var r=t[n];if(r.hasTarget(e))return r}return null}function A(){this.id="",this.init_from=""}function C(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function T(){this.method=null,this.source=null,this.targets=null,this.weights=null}function N(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function R(){this.id="",this.name="",this.nodes=[],this.scene=new THREE.Group}function O(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function L(){this.sid="",this.type="",this.data=[],this.obj=null}function P(){this.url="",this.skeleton=[],this.instance_material=[]}function k(){this.symbol="",this.target=""}function D(){this.url="",this.instance_material=[]}function I(){this.id="",this.mesh=null}function q(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function B(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function V(){B.call(this),this.vcount=[]}function F(){B.call(this),this.vcount=1}function z(){B.call(this),this.vcount=3}function U(){this.source="",this.count=0,this.stride=0,this.params=[]}function j(){this.input={}}function H(){this.semantic="",this.offset=0,this.source="",this.set=0}function G(t){this.id=t,this.type=null}function W(){this.id="",this.name="",this.instance_effect=null}function X(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function Z(t,e){this.type=t,this.effect=e,this.material=null}function K(t){this.effect=t,this.init_from=null,this.format=null}function Y(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function Q(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function J(){this.url=""}function $(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function tt(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function et(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function nt(t){this.targets=[],this.time=t}function rt(){this.id="",this.name="",this.technique=""}function it(){this.url=""}function ot(){this.id="",this.name="",this.technique=""}function at(){this.url=""}function st(){this.id="",this.name="",this.joints=[],this.links=[]}function ct(){this.sid="",this.name="",this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this["static"]=!1,this.zeroPosition=0,this.middlePosition=0}function lt(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function ut(){this.joint="",this.transforms=[],this.links=[]}function ht(t){var e=t.getAttribute("id");return void 0!=Vt[e]?Vt[e]:(Vt[e]=new G(e).parse(t),Vt[e])}function pt(t){for(var e=mt(t),n=[],r=0,i=e.length;r<i;r++)n.push("true"===e[r]||"1"===e[r]);return n}function dt(t){for(var e=mt(t),n=[],r=0,i=e.length;r<i;r++)n.push(parseFloat(e[r]));return n}function ft(t){for(var e=mt(t),n=[],r=0,i=e.length;r<i;r++)n.push(parseInt(e[r],10));return n}function mt(t){return t.length>0?vt(t).split(/\s+/):[]}function vt(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function yt(t,e,n){return t.hasAttribute(e)?parseInt(t.getAttribute(e),10):n}function gt(t,e){var n=new THREE.ImageLoader;n.load(e,function(e){t.image=e,t.needsUpdate=!0})}function xt(t,e){t.doubleSided=!1;var n=e.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(t.doubleSided=!0)}function _t(){if(Kt.convertUpAxis!==!0||Qt===Kt.upAxis)Jt=null;else switch(Qt){case"X":Jt="Y"===Kt.upAxis?"XtoY":"XtoZ";break;case"Y":Jt="X"===Kt.upAxis?"YtoX":"YtoZ";break;case"Z":Jt="X"===Kt.upAxis?"ZtoX":"ZtoY"}}function bt(t,e){if(Kt.convertUpAxis===!0&&Qt!==Kt.upAxis)switch(Jt){case"XtoY":var n=t[0];t[0]=e*t[1],t[1]=n;break;case"XtoZ":var n=t[2];t[2]=t[1],t[1]=t[0],t[0]=n;break;case"YtoX":var n=t[0];t[0]=t[1],t[1]=e*n;break;case"YtoZ":var n=t[1];t[1]=e*t[2],t[2]=n;break;case"ZtoX":var n=t[0];t[0]=t[1],t[1]=t[2],t[2]=n;break;case"ZtoY":var n=t[1];t[1]=t[2],t[2]=e*n}}function wt(t,e){if(Kt.convertUpAxis!==!0||Qt===Kt.upAxis)return e;switch(t){case"X":e="XtoY"===Jt?e*-1:e;break;case"Y":e="YtoZ"===Jt||"YtoX"===Jt?e*-1:e;break;case"Z":e="ZtoY"===Jt?e*-1:e}return e}function Et(t,e){var n=[t[e],t[e+1],t[e+2]];return bt(n,-1),new THREE.Vector3(n[0],n[1],n[2])}function St(t){if(Kt.convertUpAxis){var e=[t[0],t[4],t[8]];bt(e,-1),t[0]=e[0],t[4]=e[1],t[8]=e[2],e=[t[1],t[5],t[9]],bt(e,-1),t[1]=e[0],t[5]=e[1],t[9]=e[2],e=[t[2],t[6],t[10]],bt(e,-1),t[2]=e[0],t[6]=e[1],t[10]=e[2],e=[t[0],t[1],t[2]],bt(e,-1),t[0]=e[0],t[1]=e[1],t[2]=e[2],e=[t[4],t[5],t[6]],bt(e,-1),t[4]=e[0],t[5]=e[1],t[6]=e[2],e=[t[8],t[9],t[10]],bt(e,-1),t[8]=e[0],t[9]=e[1],t[10]=e[2],e=[t[3],t[7],t[11]],bt(e,-1),t[3]=e[0],t[7]=e[1],t[11]=e[2]}return(new THREE.Matrix4).set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Mt(t){if(t>-1&&t<3){var e=["X","Y","Z"],n={X:0,Y:1,Z:2};t=At(e[t]),t=n[t]}return t}function At(t){if(Kt.convertUpAxis)switch(t){case"X":switch(Jt){case"XtoY":case"XtoZ":case"YtoX":t="Y";break;case"ZtoX":t="Z"}break;case"Y":switch(Jt){case"XtoY":case"YtoX":case"ZtoX":t="X";break;case"XtoZ":case"YtoZ":case"ZtoY":t="Z"}break;case"Z":switch(Jt){case"XtoZ":t="X";break;case"YtoZ":case"ZtoX":case"ZtoY":t="Y"}}return t}var Ct,Tt,Nt,Rt,Ot,Lt,Pt,kt,Dt,It=null,qt=null,Bt=null,Vt={},Ft={},zt={},Ut={},jt={},Ht={},Gt={},Wt={},Xt={},Zt=THREE.SmoothShading,Kt={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Yt=1,Qt="Y",Jt=null;return A.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];"init_from"===n.nodeName&&(this.init_from=n.textContent)}return this},C.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"skin":this.skin=(new N).parse(n),this.type=n.nodeName;break;case"morph":this.morph=(new T).parse(n),this.type=n.nodeName}}return this},T.prototype.parse=function(t){var e,n={},r=[];for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];if(1==i.nodeType)switch(i.nodeName){case"source":var o=(new G).parse(i);n[o.id]=o;break;case"targets":r=this.parseInputs(i);break;default:console.log(i.nodeName)}}for(e=0;e<r.length;e++){var a=r[e],o=n[a.source];switch(a.semantic){case"MORPH_TARGET":this.targets=o.read();break;case"MORPH_WEIGHT":this.weights=o.read()}}return this},T.prototype.parseInputs=function(t){for(var e=[],n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":e.push((new H).parse(r))}}return e},N.prototype.parse=function(t){var e,n,r={};this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var a=dt(o.textContent);this.bindShapeMatrix=St(a);break;case"source":var s=(new G).parse(o);r[s.id]=s;break;case"joints":e=o;break;case"vertex_weights":n=o;break;default:console.log(o.nodeName)}}return this.parseJoints(e,r),this.parseWeights(n,r),this},N.prototype.parseJoints=function(t,e){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":var i=(new H).parse(r),o=e[i.source];"JOINT"===i.semantic?this.joints=o.read():"INV_BIND_MATRIX"===i.semantic&&(this.invBindMatrices=o.read())}}},N.prototype.parseWeights=function(t,e){for(var n,r,i=[],o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1==a.nodeType)switch(a.nodeName){case"input":i.push((new H).parse(a));break;case"v":n=ft(a.textContent);break;case"vcount":r=ft(a.textContent)}}for(var s=0,o=0;o<r.length;o++){for(var c=r[o],l=[],u=0;u<c;u++){for(var h={},p=0;p<i.length;p++){var d=i[p],f=n[s+d.offset];switch(d.semantic){case"JOINT":h.joint=f;break;case"WEIGHT":h.weight=e[d.source].data[f]}}l.push(h),s+=i.length}for(var u=0;u<l.length;u++)l[u].index=o;this.weights.push(l)}},R.prototype.getChildById=function(t,e){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(t,e);if(r)return r}return null},R.prototype.getChildBySid=function(t,e){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(t,e);if(r)return r}return null},R.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new O).parse(n))}}return this},O.prototype.getChannelForTransform=function(t){for(var e=0;e<this.channels.length;e++){var n,r,i=this.channels[e],o=i.target.split("/"),a=(o.shift(),o.shift()),s=a.indexOf(".")>=0,c=a.indexOf("(")>=0;if(s)o=a.split("."),a=o.shift(),r=o.shift();else if(c){n=a.split("("),a=n.shift();for(var l=0;l<n.length;l++)n[l]=parseInt(n[l].replace(/\)/,""))}if(a===t)return i.info={sid:a,dotSyntax:s,arrSyntax:c,arrIndices:n},i}return null},O.prototype.getChildById=function(t,e){if(this.id===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(t,e);if(r)return r}return null},O.prototype.getChildBySid=function(t,e){if(this.sid===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(t,e);if(r)return r}return null},O.prototype.getTransformBySid=function(t){for(var e=0;e<this.transforms.length;e++)if(this.transforms[e].sid===t)return this.transforms[e];return null},O.prototype.parse=function(t){var e;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"node":this.nodes.push((new O).parse(r));break;case"instance_camera":this.cameras.push((new it).parse(r));break;case"instance_controller":this.controllers.push((new P).parse(r));break;case"instance_geometry":this.geometries.push((new D).parse(r));break;case"instance_light":this.lights.push((new at).parse(r));break;case"instance_node":e=r.getAttribute("url").replace(/^#/,"");var i=g(e);i&&this.nodes.push((new O).parse(i));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new L).parse(r));break;case"extra":break;default:console.log(r.nodeName)}}return this.channels=x(this),_(this),this.updateMatrix(),this},O.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},L.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=dt(t.textContent),this.convert(),this},L.prototype.convert=function(){switch(this.type){case"matrix":this.obj=St(this.data);break;case"rotate":this.angle=THREE.Math.degToRad(this.data[3]);case"translate":bt(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":bt(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},L.prototype.apply=function(){var t=new THREE.Matrix4;return function(e){switch(this.type){case"matrix":e.multiply(this.obj);break;case"translate":e.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":e.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":e.scale(this.obj)}}}(),L.prototype.update=function(t,e){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(e)if(1===e.length)switch(e[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3]}else if(2===e.length){var r="n"+(e[0]+1)+(e[1]+1);this.obj[r]=t}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(t);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=THREE.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=THREE.Math.degToRad(t[3])}}},P.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var o=r[i];this.instance_material.push((new k).parse(o))}break;case"extra":}}return this},k.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},D.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var o=r[i];this.instance_material.push((new k).parse(o))}break}}return this},I.prototype.parse=function(t){this.id=t.getAttribute("id"),xt(this,t);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"mesh":this.mesh=new q(this).parse(n);break;case"extra":}}return this},q.prototype.parse=function(t){this.primitives=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"source":ht(n);break;case"vertices":this.vertices=(new j).parse(n);break;case"linestrips":this.primitives.push((new F).parse(n));break;case"triangles":this.primitives.push((new z).parse(n));break;case"polygons":this.primitives.push((new B).parse(n));break;case"polylist":this.primitives.push((new V).parse(n))}}if(this.geometry3js=new THREE.Geometry,null===this.vertices)return this;for(var r=Vt[this.vertices.input.POSITION.source].data,e=0;e<r.length;e+=3)this.geometry3js.vertices.push(Et(r,e).clone());for(var e=0;e<this.primitives.length;e++){var i=this.primitives[e];i.setVertices(this.vertices),this.handlePrimitive(i,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},q.prototype.handlePrimitive=function(t,e){if(t instanceof F)return void(e.isLineStrip=!0);var n,r,i,o,a,s,c,l=t.p,u=t.inputs,h=0,p=3,d=0,f=[];for(n=0;n<u.length;n++){i=u[n];var m=i.offset+1;switch(d=d<m?m:d,i.semantic){case"TEXCOORD":f.push(i.set)}}for(var v=0;v<l.length;++v)for(var y=l[v],g=0;g<y.length;){var x=[],_=[],b=null,w=[];for(p=t.vcount?t.vcount.length?t.vcount[h++]:t.vcount:y.length/d,n=0;n<p;n++)for(r=0;r<u.length;r++)switch(i=u[r],s=Vt[i.source],o=y[g+n*d+i.offset],c=s.accessor.params.length,a=o*c,i.semantic){case"VERTEX":x.push(o);break;case"NORMAL":_.push(Et(s.data,a));break;case"TEXCOORD":b=b||{},void 0===b[i.set]&&(b[i.set]=[]),b[i.set].push(new THREE.Vector2(s.data[a],s.data[a+1]));break;case"COLOR":w.push((new THREE.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]))}if(0===_.length)if(i=this.vertices.input.NORMAL){s=Vt[i.source],c=s.accessor.params.length;for(var E=0,S=x.length;E<S;E++)_.push(Et(s.data,x[E]*c))}else e.calcNormals=!0;if(!b&&(b={},i=this.vertices.input.TEXCOORD)){f.push(i.set),s=Vt[i.source],c=s.accessor.params.length;for(var E=0,S=x.length;E<S;E++)a=x[E]*c,void 0===b[i.set]&&(b[i.set]=[]),b[i.set].push(new THREE.Vector2(s.data[a],1-s.data[a+1]))}if(0===w.length&&(i=this.vertices.input.COLOR)){s=Vt[i.source],c=s.accessor.params.length;for(var E=0,S=x.length;E<S;E++)a=x[E]*c,w.push((new THREE.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]))}var M,A,C=null,T=[];if(3===p)T.push(new THREE.Face3(x[0],x[1],x[2],_,w.length?w:new THREE.Color));else if(4===p)T.push(new THREE.Face3(x[0],x[1],x[3],_.length?[_[0].clone(),_[1].clone(),_[3].clone()]:[],w.length?[w[0],w[1],w[3]]:new THREE.Color)),T.push(new THREE.Face3(x[1],x[2],x[3],_.length?[_[1].clone(),_[2].clone(),_[3].clone()]:[],w.length?[w[1],w[2],w[3]]:new THREE.Color));else if(p>4&&Kt.subdivideFaces){var N=w.length?w:new THREE.Color;for(r=1;r<p-1;)T.push(new THREE.Face3(x[0],x[r],x[r+1],_.length?[_[0].clone(),_[r++].clone(),_[r].clone()]:[],N))}if(T.length)for(var E=0,S=T.length;E<S;E++)for(C=T[E],C.daeMaterial=t.material,e.faces.push(C),r=0;r<f.length;r++)M=b[f[r]],A=p>4?[M[0],M[E+1],M[E+2]]:4===p?0===E?[M[0],M[1],M[3]]:[M[1].clone(),M[2],M[3].clone()]:[M[0],M[1],M[2]],void 0===e.faceVertexUvs[r]&&(e.faceVertexUvs[r]=[]),e.faceVertexUvs[r].push(A);else console.log("dropped face with vcount "+p+" for geometry with id: "+e.id);g+=d*p}},B.prototype.setVertices=function(t){for(var e=0;e<this.inputs.length;e++)this.inputs[e].source===t.id&&(this.inputs[e].source=t.input.POSITION.source)},B.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=yt(t,"count",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"input":this.inputs.push((new H).parse(t.childNodes[e]));break;case"vcount":this.vcount=ft(n.textContent);break;case"p":this.p.push(ft(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},V.prototype=Object.create(B.prototype),V.prototype.constructor=V,F.prototype=Object.create(B.prototype),F.prototype.constructor=F,z.prototype=Object.create(B.prototype),z.prototype.constructor=z,U.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=yt(t,"count",0),this.stride=yt(t,"stride",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if("param"===n.nodeName){var r={};r.name=n.getAttribute("name"),r.type=n.getAttribute("type"),this.params.push(r)}}return this},j.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++)if("input"===t.childNodes[e].nodeName){var n=(new H).parse(t.childNodes[e]);this.input[n.semantic]=n}return this},H.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=yt(t,"set",-1),this.offset=yt(t,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},G.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"bool_array":this.data=pt(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=dt(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=ft(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=mt(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var r=0;r<n.childNodes.length;r++)if("accessor"===n.childNodes[r].nodeName){this.accessor=(new U).parse(n.childNodes[r]);break}}}return this},G.prototype.read=function(){var t=[],e=this.accessor.params[0];switch(e.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var r=this.data.slice(n,n+16),i=St(r);t.push(i)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+e.type+".")}return t},W.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++)if("instance_effect"===t.childNodes[e].nodeName){this.instance_effect=(new J).parse(t.childNodes[e]);break}return this},X.prototype.isColor=function(){return null===this.texture},X.prototype.isTexture=function(){return null!=this.texture},X.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"color":var r=dt(n.textContent);this.color=new THREE.Color,this.color.setRGB(r[0],r[1],r[2]),this.color.a=r[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n)}}return this},X.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1],t.childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent}}return this},Z.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=(new X).parse(n);break;case"bump":var r=n.getAttribute("bumptype");r?"heightfield"===r.toLowerCase()?this.bump=(new X).parse(n):"normalmap"===r.toLowerCase()?this.normal=(new X).parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+r+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new X).parse(n)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new X).parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var i=n.querySelectorAll("float");i.length>0&&(this[n.nodeName]=parseFloat(i[0].textContent))}}return this.create(),this},Z.prototype.create=function(){var t={},e=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=(this.transparent,(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency);n>0&&(e=!0,t.transparent=!0,t.opacity=1-n)}var r={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var i in this)switch(i){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[i];if(o instanceof X)if(o.isTexture()){var a=o.texture,s=this.effect.sampler[a];if(void 0!==s&&void 0!==s.source){var c=this.effect.surface[s.source];if(void 0!==c){var l=Ft[c.init_from];if(l){var u,h=Pt+l.init_from,p=THREE.Loader.Handlers.get(h);null!==p?u=p.load(h):(u=new THREE.Texture,gt(u,h)),u.wrapS=o.texOpts.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,u.wrapT=o.texOpts.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,u.offset.x=o.texOpts.offsetU,u.offset.y=o.texOpts.offsetV,u.repeat.x=o.texOpts.repeatU,u.repeat.y=o.texOpts.repeatV,t[r[i]]=u,"emission"===i&&(t.emissive=16777215)}}}}else"diffuse"!==i&&e||("emission"===i?t.emissive=o.color.getHex():t[i]=o.color.getHex());break;case"shininess":t[i]=this[i];break;case"reflectivity":t[i]=this[i],t[i]>0&&(t.envMap=Kt.defaultEnvMap),t.combine=THREE.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[i],1!==this[i]&&(t.envMap=Kt.defaultEnvMap);break;case"transparency":}switch(t.shading=Zt,t.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,void 0!==t.diffuse&&(t.color=t.diffuse,delete t.diffuse),this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new THREE.MeshBasicMaterial(t);break;case"phong":case"blinn":this.material=new THREE.MeshPhongMaterial(t);break;case"lambert":default:this.material=new THREE.MeshLambertMaterial(t)}return this.material},K.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName)}}return this},Y.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName)}}return this},Q.prototype.create=function(){if(null===this.shader)return null},Q.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),xt(this,t),this.shader=null;for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n))}}return this},Q.prototype.parseNewparam=function(t){for(var e=t.getAttribute("sid"),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"surface":this.surface[e]=new K(this).parse(r);break;case"sampler2D":this.sampler[e]=new Y(this).parse(r);break;case"extra":break;default:console.log(r.nodeName)}}},Q.prototype.parseProfileCOMMON=function(t){for(var e,n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"profile_COMMON":this.parseProfileCOMMON(r);break;case"technique":e=r;break;case"newparam":this.parseNewparam(r);break;case"image":var i=(new A).parse(r);Ft[i.id]=i;break;case"extra":break;default:console.log(r.nodeName)}}return e},Q.prototype.parseTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new Z(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n)}}},Q.prototype.parseExtra=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n)}}},Q.prototype.parseExtraTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];
if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(t)}}},J.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},$.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"animation":var r=(new $).parse(n);for(var i in r.source)this.source[i]=r.source[i];for(var o=0;o<r.channel.length;o++)this.channel.push(r.channel[o]),this.sampler.push(r.sampler[o]);break;case"source":var i=(new G).parse(n);this.source[i.id]=i;break;case"sampler":this.sampler.push(new et(this).parse(n));break;case"channel":this.channel.push(new tt(this).parse(n))}}return this},tt.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var e=this.target.split("/"),n=(e.shift(),e.shift()),r=n.indexOf(".")>=0,i=n.indexOf("(")>=0;if(r)e=n.split("."),this.sid=e.shift(),this.member=e.shift();else if(i){var o=n.split("(");this.sid=o.shift();for(var a=0;a<o.length;a++)o[a]=parseInt(o[a].replace(/\)/,""));this.arrIndices=o}else this.sid=n;return this.fullSid=n,this.dotSyntax=r,this.arrSyntax=i,this},et.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push((new H).parse(n))}}return this},et.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.animation.source[e.source];switch(e.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":break;case"OUT_TANGENT":break;default:console.log(e.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var t=0;t<this.input.length;t++)this.startTime=Math.min(this.startTime,this.input[t]),this.endTime=Math.max(this.endTime,this.input[t]);this.duration=this.endTime-this.startTime}},et.prototype.getData=function(t,e,n){var r;if("matrix"===t&&16===this.strideOut)r=this.output[e];else if(this.strideOut>1){r=[],e*=this.strideOut;for(var i=0;i<this.strideOut;++i)r[i]=this.output[e+i];if(3===this.strideOut)switch(t){case"rotate":case"translate":bt(r,-1);break;case"scale":bt(r,1)}else 4===this.strideOut&&"matrix"===t&&bt(r,-1)}else r=this.output[e],n&&"translate"===t&&(r=wt(n,r));return r},nt.prototype.addTarget=function(t,e,n,r){this.targets.push({sid:t,member:n,transform:e,data:r})},nt.prototype.apply=function(t){for(var e=0;e<this.targets.length;++e){var n=this.targets[e];t&&n.sid!==t||n.transform.update(n.data,n.member)}},nt.prototype.getTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return this.targets[e];return null},nt.prototype.hasTarget=function(t){for(var e=0;e<this.targets.length;++e)if(this.targets[e].sid===t)return!0;return!1},nt.prototype.interpolate=function(t,e){for(var n=0,r=this.targets.length;n<r;n++){var i,o=this.targets[n],a=t.getTarget(o.sid);if("matrix"!==o.transform.type&&a){var s=(e-this.time)/(t.time-this.time),c=a.data,l=o.data;if(s<0&&(s=0),s>1&&(s=1),l.length){i=[];for(var u=0;u<l.length;++u)i[u]=l[u]+(c[u]-l[u])*s}else i=l+(c-l)*s}else i=o.data;o.transform.update(i,o.member)}},rt.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n)}}return this},rt.prototype.parseOptics=function(t){for(var e=0;e<t.childNodes.length;e++)if("technique_common"===t.childNodes[e].nodeName)for(var n=t.childNodes[e],r=0;r<n.childNodes.length;r++)if(this.technique=n.childNodes[r].nodeName,"perspective"===this.technique)for(var i=n.childNodes[r],o=0;o<i.childNodes.length;o++){var a=i.childNodes[o];switch(a.nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}else if("orthographic"===this.technique)for(var s=n.childNodes[r],o=0;o<s.childNodes.length;o++){var a=s.childNodes[o];switch(a.nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}return this},it.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},ot.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n)}}return this},ot.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++)switch(t.childNodes[e].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[e].nodeName;for(var n=t.childNodes[e],r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];switch(i.nodeName){case"color":var o=dt(i.textContent);this.color=new THREE.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(i.textContent);break;case"quadratic_attenuation":var a=parseFloat(i.textContent);this.distance=a?Math.sqrt(1/a):0}}}return this},ot.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent)}}return this},at.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},st.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n)}}return this},st.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(t.childNodes[e].nodeName){case"joint":this.joints.push((new ct).parse(n));break;case"link":this.links.push((new lt).parse(n))}}return this},ct.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this["static"]=!1,this.zeroPosition=0,this.middlePosition=0;var e=t.querySelector("axis"),n=dt(e.textContent);this.axis=Et(n,0);var r=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,i=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:r,max:i};for(var o=["prismatic","revolute"],a=0;a<o.length;a++){var s=o[a],c=t.querySelector(s);c&&(this.type=s)}return this.limits.min>=this.limits.max&&(this["static"]=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},lt.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push((new ut).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new L).parse(n))}}return this},ut.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push((new lt).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new L).parse(n))}}return this},{load:t,parse:e,setPreferredShading:n,applySkin:m,geometries:jt,options:Kt}}},{}],19:[function(t,e,n){THREE.MTLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,e,n,r){var i=this,o=new THREE.XHRLoader(this.manager);o.setPath(this.path),o.load(t,function(t){e(i.parse(t))},n,r)},setPath:function(t){this.path=t},setBaseUrl:function(t){this.baseUrl=t},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),n={},r=/\s+/,i={},o=0;o<e.length;o++){var a=e[o];if(a=a.trim(),0!==a.length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),c=s>=0?a.substring(0,s):a;c=c.toLowerCase();var l=s>=0?a.substring(s+1):"";if(l=l.trim(),"newmtl"===c)n={name:l},i[l]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var u=l.split(r,3);n[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else n[c]=l}}var h=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},THREE.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var r=t[n],i={};e[n]=i;for(var o in r){var a=!0,s=r[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1)}a&&(i[c]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this.materialsInfo[t],n={name:t,side:this.side};for(var r in e){var i=e[r];if(""!==i)switch(r.toLowerCase()){case"kd":n.color=(new THREE.Color).fromArray(i);break;case"ks":n.specular=(new THREE.Color).fromArray(i);break;case"map_kd":n.map=this.loadTexture(this.baseUrl+i),n.map.wrapS=this.wrap,n.map.wrapT=this.wrap;break;case"ns":n.shininess=parseFloat(i);break;case"d":i<1&&(n.opacity=i,n.transparent=!0);break;case"Tr":i>0&&(n.opacity=1-i,n.transparent=!0);break;case"map_bump":case"bump":if(n.bumpMap)break;n.bumpMap=this.loadTexture(this.baseUrl+i),n.bumpMap.wrapS=this.wrap,n.bumpMap.wrapT=this.wrap}}return this.materials[t]=new THREE.MeshPhongMaterial(n),this.materials[t]},loadTexture:function(t,e,n,r,i){var o,a=THREE.Loader.Handlers.get(t),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(t,n,r,i),void 0!==e&&(o.mapping=e),o}},THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype)},{}],20:[function(t,e,n){THREE.OBJLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.materials=null},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(t,e,n,r){var i=this,o=new THREE.XHRLoader(i.manager);o.setPath(this.path),o.load(t,function(t){e(i.parse(t))},n,r)},setPath:function(t){this.path=t},setMaterials:function(t){this.materials=t},parse:function(t){function e(t){var e={vertices:[],normals:[],uvs:[]},n={name:"",smooth:!0};l={name:t,geometry:e,material:n},u.push(l)}function n(t){var e=parseInt(t);return 3*(e>=0?e-1:e+p.length/3)}function r(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function i(t){var e=parseInt(t);return 2*(e>=0?e-1:e+f.length/2)}function o(t,e,n){l.geometry.vertices.push(p[t],p[t+1],p[t+2],p[e],p[e+1],p[e+2],p[n],p[n+1],p[n+2])}function a(t,e,n){l.geometry.normals.push(d[t],d[t+1],d[t+2],d[e],d[e+1],d[e+2],d[n],d[n+1],d[n+2])}function s(t,e,n){l.geometry.uvs.push(f[t],f[t+1],f[e],f[e+1],f[n],f[n+1])}function c(t,e,c,l,u,h,p,d,f,m,v,y){var g,x=n(t),_=n(e),b=n(c);void 0===l?o(x,_,b):(g=n(l),o(x,_,g),o(_,b,g)),void 0!==u&&(x=i(u),_=i(h),b=i(p),void 0===l?s(x,_,b):(g=i(d),s(x,_,g),s(_,b,g))),void 0!==f&&(x=r(f),_=r(m),b=r(v),void 0===l?a(x,_,b):(g=r(y),a(x,_,g),a(_,b,g)))}console.time("OBJLoader");var l,u=[],h=!1,p=[],d=[],f=[];e("");for(var m=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,v=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,y=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,x=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,_=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,b=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,w=/^[og]\s+(.+)/,E=/^s\s+([01]|on|off)/,S=t.split("\n"),M=0;M<S.length;M++){var A=S[M];A=A.trim();var C;if(0!==A.length&&"#"!==A.charAt(0))if(null!==(C=m.exec(A)))p.push(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));else if(null!==(C=v.exec(A)))d.push(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));else if(null!==(C=y.exec(A)))f.push(parseFloat(C[1]),parseFloat(C[2]));else if(null!==(C=g.exec(A)))c(C[1],C[2],C[3],C[4]);else if(null!==(C=x.exec(A)))c(C[2],C[5],C[8],C[11],C[3],C[6],C[9],C[12]);else if(null!==(C=_.exec(A)))c(C[2],C[6],C[10],C[14],C[3],C[7],C[11],C[15],C[4],C[8],C[12],C[16]);else if(null!==(C=b.exec(A)))c(C[2],C[5],C[8],C[11],void 0,void 0,void 0,void 0,C[3],C[6],C[9],C[12]);else if(null!==(C=w.exec(A))){var T=C[1].trim();h===!1?(h=!0,l.name=T):e(T)}else if(/^usemtl /.test(A))l.material.name=A.substring(7).trim();else if(/^mtllib /.test(A));else{if(null===(C=E.exec(A)))throw new Error("Unexpected line: "+A);l.material.smooth="1"===C[1]||"on"===C[1]}}for(var N=new THREE.Group,M=0,R=u.length;M<R;M++){l=u[M];var O=l.geometry,L=new THREE.BufferGeometry;L.addAttribute("position",new THREE.BufferAttribute(new Float32Array(O.vertices),3)),O.normals.length>0?L.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(O.normals),3)):L.computeVertexNormals(),O.uvs.length>0&&L.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(O.uvs),2));var P;null!==this.materials&&(P=this.materials.create(l.material.name)),P||(P=new THREE.MeshPhongMaterial,P.name=l.material.name),P.shading=l.material.smooth?THREE.SmoothShading:THREE.FlatShading;var k=new THREE.Mesh(L,P);k.name=l.name,N.add(k)}return console.timeEnd("OBJLoader"),N}}},{}],21:[function(e,n,r){var i={REVISION:"74"};"function"==typeof t&&t.amd?t("three",i):"undefined"!=typeof r&&"undefined"!=typeof n&&(n.exports=i),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&Object.defineProperty(Object,"assign",{writable:!0,configurable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1,r=arguments.length;n!==r;++n){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var o=Object.keys(i),a=0,s=o.length;a!==s;++a){var c=o[a],l=Object.getOwnPropertyDescriptor(i,c);void 0!==l&&l.enumerable&&(e[c]=i[c])}}}return e}}),i.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},i.CullFaceNone=0,i.CullFaceBack=1,i.CullFaceFront=2,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=0,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=1,i.PCFSoftShadowMap=2,i.FrontSide=0,i.BackSide=1,i.DoubleSide=2,i.FlatShading=1,i.SmoothShading=2,i.NoColors=0,i.FaceColors=1,i.VertexColors=2,i.NoBlending=0,i.NormalBlending=1,i.AdditiveBlending=2,i.SubtractiveBlending=3,i.MultiplyBlending=4,i.CustomBlending=5,i.AddEquation=100,i.SubtractEquation=101,i.ReverseSubtractEquation=102,i.MinEquation=103,i.MaxEquation=104,i.ZeroFactor=200,i.OneFactor=201,i.SrcColorFactor=202,i.OneMinusSrcColorFactor=203,i.SrcAlphaFactor=204,i.OneMinusSrcAlphaFactor=205,i.DstAlphaFactor=206,i.OneMinusDstAlphaFactor=207,i.DstColorFactor=208,i.OneMinusDstColorFactor=209,i.SrcAlphaSaturateFactor=210,i.NeverDepth=0,i.AlwaysDepth=1,i.LessDepth=2,i.LessEqualDepth=3,i.EqualDepth=4,i.GreaterEqualDepth=5,i.GreaterDepth=6,i.NotEqualDepth=7,i.MultiplyOperation=0,i.MixOperation=1,i.AddOperation=2,i.UVMapping=300,i.CubeReflectionMapping=301,i.CubeRefractionMapping=302,i.EquirectangularReflectionMapping=303,i.EquirectangularRefractionMapping=304,i.SphericalReflectionMapping=305,i.RepeatWrapping=1e3,i.ClampToEdgeWrapping=1001,i.MirroredRepeatWrapping=1002,i.NearestFilter=1003,i.NearestMipMapNearestFilter=1004,i.NearestMipMapLinearFilter=1005,i.LinearFilter=1006,i.LinearMipMapNearestFilter=1007,i.LinearMipMapLinearFilter=1008,i.UnsignedByteType=1009,i.ByteType=1010,i.ShortType=1011,i.UnsignedShortType=1012,i.IntType=1013,i.UnsignedIntType=1014,i.FloatType=1015,i.HalfFloatType=1025,i.UnsignedShort4444Type=1016,i.UnsignedShort5551Type=1017,i.UnsignedShort565Type=1018,i.AlphaFormat=1019,i.RGBFormat=1020,i.RGBAFormat=1021,i.LuminanceFormat=1022,i.LuminanceAlphaFormat=1023,i.RGBEFormat=i.RGBAFormat,i.RGB_S3TC_DXT1_Format=2001,i.RGBA_S3TC_DXT1_Format=2002,i.RGBA_S3TC_DXT3_Format=2003,i.RGBA_S3TC_DXT5_Format=2004,i.RGB_PVRTC_4BPPV1_Format=2100,i.RGB_PVRTC_2BPPV1_Format=2101,i.RGBA_PVRTC_4BPPV1_Format=2102,i.RGBA_PVRTC_2BPPV1_Format=2103,i.RGB_ETC1_Format=2151,i.LoopOnce=2200,i.LoopRepeat=2201,i.LoopPingPong=2202,i.InterpolateDiscrete=2300,i.InterpolateLinear=2301,i.InterpolateSmooth=2302,i.ZeroCurvatureEnding=2400,i.ZeroSlopeEnding=2401,i.WrapAroundEnding=2402,i.TrianglesDrawMode=0,i.TriangleStripDrawMode=1,i.TriangleFanDrawMode=2,i.Color=function(t){return 3===arguments.length?this.fromArray(arguments):this.set(t)},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(t){return t instanceof i.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=i.Math.euclideanModulo(e,1),n=i.Math.clamp(n,0,1),r=i.Math.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=t(a,o,e+1/3),this.g=t(a,o,e),this.b=t(a,o,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(s,c,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=n[1],h=u.length;if(3===h)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(t&&t.length>0){var u=i.ColorKeywords[t];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),c=Math.min(i,o,a),l=(c+s)/2;if(c===s)e=0,n=0;else{var u=s-c;switch(n=l<=.5?u/(s+c):u/(2-s-c),s){case i:e=(o-a)/u+(o<a?6:0);break;case o:e=(a-i)/u+2;break;case a:e=(i-o)/u+4}e/=6}return r.h=e,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},i.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},i.Quaternion.prototype={constructor:i.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof i.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),o=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),c=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=a*r*o+n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o-a*s*c):"YXZ"===l?(this._x=a*r*o+n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o+a*s*c):"ZXY"===l?(this._x=a*r*o-n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o-a*s*c):"ZYX"===l?(this._x=a*r*o-n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o+a*s*c):"YZX"===l?(this._x=a*r*o+n*s*c,this._y=n*s*o+a*r*c,this._z=n*r*c-a*s*o,this._w=n*r*o-a*s*c):"XZY"===l&&(this._x=a*r*o-n*s*c,this._y=n*s*o-a*r*c,this._z=n*r*c+a*s*o,this._w=n*r*o+a*s*c),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],p=r+s+h;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(u-c)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(r,o){return void 0===t&&(t=new i.Vector3),e=r.dot(o)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,o),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(s,a),l=Math.sin((1-e)*c)/s,u=Math.sin(e*c)/s;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(i.Quaternion,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3],h=i[o+0],p=i[o+1],d=i[o+2],f=i[o+3];if(u!==f||s!==h||c!==p||l!==d){var m=1-a,v=s*h+c*p+l*d+u*f,y=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var x=Math.sqrt(g),_=Math.atan2(x,v*y);m=Math.sin(m*_)/x,a=Math.sin(a*_)/x}var b=a*y;if(s=s*m+h*b,c=c*m+p*b,l=l*m+d*b,u=u*m+f*b,m===1-a){var w=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=w,c*=w,l*=w,u*=w}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}}),i.Vector2=function(t,e){this.x=t||0,this.y=e||0},i.Vector2.prototype={constructor:i.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,
this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector2,e=new i.Vector2),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}},i.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},i.Vector3.prototype={constructor:i.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof i.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n)),this}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*r-a*n,l=s*n+a*e-i*r,u=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector3,e=new i.Vector3),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(){var t,e;return function(n){return void 0===t&&(t=new i.Vector3),t.copy(n).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(i.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){var n=4*t,r=e.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},i.Vector4=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1},i.Vector4.prototype={constructor:i.Vector4,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,c=s[0],l=s[4],u=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(u-f)<o&&Math.abs(d-m)<o){if(Math.abs(l+h)<a&&Math.abs(u+f)<a&&Math.abs(d+m)<a&&Math.abs(c+p+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var y=(c+1)/2,g=(p+1)/2,x=(v+1)/2,_=(l+h)/4,b=(u+f)/4,w=(d+m)/4;return y>g&&y>x?y<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(y),r=_/n,i=b/n):g>x?g<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(g),n=_/r,i=w/r):x<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(x),n=b/i,r=w/i),this.set(n,r,i,e),this}var E=Math.sqrt((m-d)*(m-d)+(u-f)*(u-f)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-d)/E,this.y=(u-f)/E,this.z=(h-l)/E,this.w=Math.acos((c+p+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i.Vector4,e=new i.Vector4),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},i.Euler=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||i.Euler.DefaultOrder},i.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=i.Math.clamp,o=t.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],p=o[2],d=o[6],f=o[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(c,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-r(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===e?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(c,f))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-h,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new i.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},i.Line3=function(t,e){this.start=void 0!==t?t:new i.Vector3,this.end=void 0!==e?e:new i.Vector3},i.Line3.prototype={constructor:i.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new i.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new i.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new i.Vector3;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new i.Vector3,e=new i.Vector3;return function(n,r){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var o=e.dot(e),a=e.dot(t),s=a/o;return r&&(s=i.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e),o=n||new i.Vector3;return this.delta(o).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},i.Box2=function(t,e){this.min=void 0!==t?t:new i.Vector2((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new i.Vector2((-(1/0)),(-(1/0)))},i.Box2.prototype={constructor:i.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i.Vector2;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new i.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new i.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new i.Vector2;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var n=e||new i.Vector2;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i.Vector2;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},i.Box3=function(t,e){this.min=void 0!==t?t:new i.Vector3((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new i.Vector3((-(1/0)),(-(1/0)),(-(1/0)))},i.Box3.prototype={constructor:i.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){this.makeEmpty();for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,c=t.length;s<c;s+=3){var l=t[s],u=t[s+1],h=t[s+2];l<e&&(e=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>o&&(o=u),h>a&&(a=h)}this.min.set(e,n,r),this.max.set(i,o,a)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i.Vector3;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t;return function(e){void 0===t&&(t=new i.Box3);var n=this;return this.makeEmpty(),e.updateMatrixWorld(!0),e.traverse(function(e){var r=e.geometry;void 0!==r&&(null===r.boundingBox&&r.computeBoundingBox(),t.copy(r.boundingBox),t.applyMatrix4(e.matrixWorld),n.union(t))}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new i.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new i.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new i.Vector3;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){var n=e||new i.Vector3;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i.Vector3;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new i.Vector3;return function(e){var n=e||new i.Sphere;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},i.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},i.Matrix3.prototype={constructor:i.Matrix3,set:function(t,e,n,r,i,o,a,s,c){var l=this.elements;return l[0]=t,l[3]=e,l[6]=n,l[1]=r,l[4]=i,l[7]=o,l[2]=a,l[5]=s,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var o=0,a=n;o<r;o+=3,a+=3)t.fromArray(e,a),t.applyMatrix3(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var o=0,a=n;o<r;o++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*i*l+n*a*s+r*i*c-r*o*s},getInverse:function(t,e){var n=t.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===i){var o="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},i.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},i.Matrix4.prototype={constructor:i.Matrix4,set:function(t,e,n,r,i,o,a,s,c,l,u,h,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){var r=this.elements;return t.set(r[0],r[1],r[2]),e.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new i.Vector3);var n=this.elements,r=e.elements,o=1/t.set(r[0],r[1],r[2]).length(),a=1/t.set(r[4],r[5],r[6]).length(),s=1/t.set(r[8],r[9],r[10]).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,this}}(),makeRotationFromEuler:function(t){t instanceof i.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),s=Math.sin(n),c=Math.cos(r),l=Math.sin(r),u=Math.cos(o),h=Math.sin(o);if("XYZ"===t.order){var p=a*u,d=a*h,f=s*u,m=s*h;e[0]=c*u,e[4]=-c*h,e[8]=l,e[1]=d+f*l,e[5]=p-m*l,e[9]=-s*c,e[2]=m-p*l,e[6]=f+d*l,e[10]=a*c}else if("YXZ"===t.order){var v=c*u,y=c*h,g=l*u,x=l*h;e[0]=v+x*s,e[4]=g*s-y,e[8]=a*l,e[1]=a*h,e[5]=a*u,e[9]=-s,e[2]=y*s-g,e[6]=x+v*s,e[10]=a*c}else if("ZXY"===t.order){var v=c*u,y=c*h,g=l*u,x=l*h;e[0]=v-x*s,e[4]=-a*h,e[8]=g+y*s,e[1]=y+g*s,e[5]=a*u,e[9]=x-v*s,e[2]=-a*l,e[6]=s,e[10]=a*c}else if("ZYX"===t.order){var p=a*u,d=a*h,f=s*u,m=s*h;e[0]=c*u,e[4]=f*l-d,e[8]=p*l+m,e[1]=c*h,e[5]=m*l+p,e[9]=d*l-f,e[2]=-l,e[6]=s*c,e[10]=a*c}else if("YZX"===t.order){var _=a*c,b=a*l,w=s*c,E=s*l;e[0]=c*u,e[4]=E-_*h,e[8]=w*h+b,e[1]=h,e[5]=a*u,e[9]=-s*u,e[2]=-l*u,e[6]=b*h+w,e[10]=_-E*h}else if("XZY"===t.order){var _=a*c,b=a*l,w=s*c,E=s*l;e[0]=c*u,e[4]=-h,e[8]=l*u,e[1]=_*h+E,e[5]=a*u,e[9]=b*h-w,e[2]=w*h-b,e[6]=s*u,e[10]=E*h+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){
var e=this.elements,n=t.x,r=t.y,i=t.z,o=t.w,a=n+n,s=r+r,c=i+i,l=n*a,u=n*s,h=n*c,p=r*s,d=r*c,f=i*c,m=o*a,v=o*s,y=o*c;return e[0]=1-(p+f),e[4]=u-y,e[8]=h+v,e[1]=u+y,e[5]=1-(l+f),e[9]=d-m,e[2]=h-v,e[6]=d+m,e[10]=1-(l+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(r,o,a){void 0===t&&(t=new i.Vector3),void 0===e&&(e=new i.Vector3),void 0===n&&(n=new i.Vector3);var s=this.elements;return n.subVectors(r,o).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(a,n).normalize(),0===t.lengthSq()&&(n.x+=1e-4,t.crossVectors(a,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],y=n[3],g=n[7],x=n[11],_=n[15],b=r[0],w=r[4],E=r[8],S=r[12],M=r[1],A=r[5],C=r[9],T=r[13],N=r[2],R=r[6],O=r[10],L=r[14],P=r[3],k=r[7],D=r[11],I=r[15];return i[0]=o*b+a*M+s*N+c*P,i[4]=o*w+a*A+s*R+c*k,i[8]=o*E+a*C+s*O+c*D,i[12]=o*S+a*T+s*L+c*I,i[1]=l*b+u*M+h*N+p*P,i[5]=l*w+u*A+h*R+p*k,i[9]=l*E+u*C+h*O+p*D,i[13]=l*S+u*T+h*L+p*I,i[2]=d*b+f*M+m*N+v*P,i[6]=d*w+f*A+m*R+v*k,i[10]=d*E+f*C+m*O+v*D,i[14]=d*S+f*T+m*L+v*I,i[3]=y*b+g*M+x*N+_*P,i[7]=y*w+g*A+x*R+_*k,i[11]=y*E+g*C+x*O+_*D,i[15]=y*S+g*T+x*L+_*I,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var o=0,a=n;o<r;o+=3,a+=3)t.fromArray(e,a),t.applyMatrix4(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new i.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var o=0,a=n;o<r;o++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],p=t[14],d=t[3],f=t[7],m=t[11],v=t[15];return d*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*p-n*s*p)+f*(+e*s*p-e*c*h+i*o*h-r*o*p+r*c*l-i*s*l)+m*(+e*c*u-e*a*p-i*o*u+n*o*p+i*a*l-n*c*l)+v*(-r*a*l-e*s*u+e*a*h+r*o*u-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},getPosition:function(){var t;return function(){void 0===t&&(t=new i.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[12],c=r[1],l=r[5],u=r[9],h=r[13],p=r[2],d=r[6],f=r[10],m=r[14],v=r[3],y=r[7],g=r[11],x=r[15];n[0]=u*m*y-h*f*y+h*d*g-l*m*g-u*d*x+l*f*x,n[4]=s*f*y-a*m*y-s*d*g+o*m*g+a*d*x-o*f*x,n[8]=a*h*y-s*u*y+s*l*g-o*h*g-a*l*x+o*u*x,n[12]=s*u*d-a*h*d-s*l*f+o*h*f+a*l*m-o*u*m,n[1]=h*f*v-u*m*v-h*p*g+c*m*g+u*p*x-c*f*x,n[5]=a*m*v-s*f*v+s*p*g-i*m*g-a*p*x+i*f*x,n[9]=s*u*v-a*h*v-s*c*g+i*h*g+a*c*x-i*u*x,n[13]=a*h*p-s*u*p+s*c*f-i*h*f-a*c*m+i*u*m,n[2]=l*m*v-h*d*v+h*p*y-c*m*y-l*p*x+c*d*x,n[6]=s*d*v-o*m*v-s*p*y+i*m*y+o*p*x-i*d*x,n[10]=o*h*v-s*l*v+s*c*y-i*h*y-o*c*x+i*l*x,n[14]=s*l*p-o*h*p-s*c*d+i*h*d+o*c*m-i*l*m,n[3]=u*d*v-l*f*v-u*p*y+c*f*y+l*p*g-c*d*g,n[7]=o*f*v-a*d*v+a*p*y-i*f*y-o*p*g+i*d*g,n[11]=a*l*v-o*u*v-a*c*y+i*u*y+o*c*g-i*l*g,n[15]=o*u*p-a*l*p+a*c*d-i*u*d-o*c*f+i*l*f;var _=i*n[0]+c*n[4]+p*n[8]+v*n[12];if(0===_){var b="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(b);return console.warn(b),this.identity(),this}return this.multiplyScalar(1/_),this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,r,o){void 0===t&&(t=new i.Vector3),void 0===e&&(e=new i.Matrix4);var a=this.elements,s=t.set(a[0],a[1],a[2]).length(),c=t.set(a[4],a[5],a[6]).length(),l=t.set(a[8],a[9],a[10]).length(),u=this.determinant();u<0&&(s=-s),n.x=a[12],n.y=a[13],n.z=a[14],e.elements.set(this.elements);var h=1/s,p=1/c,d=1/l;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=p,e.elements[5]*=p,e.elements[6]*=p,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,r.setFromRotationMatrix(e),o.x=s,o.y=c,o.z=l,this}}(),makeFrustum:function(t,e,n,r,i,o){var a=this.elements,s=2*i/(e-t),c=2*i/(r-n),l=(e+t)/(e-t),u=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,r){var o=n*Math.tan(i.Math.degToRad(.5*t)),a=-o,s=a*e,c=o*e;return this.makeFrustum(s,c,a,o,n,r)},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=e-t,c=n-r,l=o-i,u=(e+t)/s,h=(n+r)/c,p=(o+i)/l;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2/c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2/l,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}},i.Ray=function(t,e){this.origin=void 0!==t?t:new i.Vector3,this.direction=void 0!==e?e:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var n=e||new i.Vector3;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){this.direction.copy(t).sub(this.origin).normalize()},recast:function(){var t=new i.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new i.Vector3;n.subVectors(t,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new i.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,c,l,u,h=.5*r.distanceTo(i),p=-this.direction.dot(e),d=n.dot(this.direction),f=-n.dot(e),m=n.lengthSq(),v=Math.abs(1-p*p);if(v>0)if(s=p*f-d,c=p*d-f,u=h*v,s>=0)if(c>=-u)if(c<=u){var y=1/v;s*=y,c*=y,l=s*(s+p*c+2*d)+c*(p*s+c+2*f)+m}else c=h,s=Math.max(0,-(p*c+d)),l=-s*s+c*(c+2*f)+m;else c=-h,s=Math.max(0,-(p*c+d)),l=-s*s+c*(c+2*f)+m;else c<=-u?(s=Math.max(0,-(-p*h+d)),c=s>0?-h:Math.min(Math.max(-h,-f),h),l=-s*s+c*(c+2*f)+m):c<=u?(s=0,c=Math.min(Math.max(-h,-f),h),l=c*(c+2*f)+m):(s=Math.max(0,-(p*h+d)),c=s>0?h:Math.min(Math.max(-h,-f),h),l=-s*s+c*(c+2*f)+m);else c=p>0?-h:h,s=Math.max(0,-(p*c+d)),l=-s*s+c*(c+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new i.Vector3;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new i.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3,r=new i.Vector3;return function(i,o,a,s,c){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var l,u=this.direction.dot(r);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var p=l*this.direction.dot(e.cross(t));if(p<0)return null;if(h+p>u)return null;var d=-l*t.dot(r);return d<0?null:this.at(d/u,c)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},i.Sphere=function(t,e){this.center=void 0!==t?t:new i.Vector3,this.radius=void 0!==e?e:0},i.Sphere.prototype={constructor:i.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new i.Box3;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).center(r);for(var i=0,o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new i.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new i.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},i.Frustum=function(t,e,n,r,o,a){this.planes=[void 0!==t?t:new i.Plane,void 0!==e?e:new i.Plane,void 0!==n?n:new i.Plane,void 0!==r?r:new i.Plane,void 0!==o?o:new i.Plane,void 0!==a?a:new i.Plane]},i.Frustum.prototype={constructor:i.Frustum,set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],y=n[14],g=n[15];return e[0].setComponents(a-r,u-s,f-h,g-m).normalize(),e[1].setComponents(a+r,u+s,f+h,g+m).normalize(),e[2].setComponents(a+i,u+c,f+p,g+v).normalize(),e[3].setComponents(a-i,u-c,f-p,g-v).normalize(),e[4].setComponents(a-o,u-l,f-d,g-y).normalize(),e[5].setComponents(a+o,u+l,f+d,g+y).normalize(),this},intersectsObject:function(){var t=new i.Sphere;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere),t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},i.Plane=function(t,e){this.normal=void 0!==t?t:new i.Vector3(1,0,0),this.constant=void 0!==e?e:0},i.Plane.prototype={constructor:i.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new i.Vector3,e=new i.Vector3;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t),r=e||new i.Vector3;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new i.Vector3;return function(e,n){var r=n||new i.Vector3,o=e.delta(t),a=this.normal.dot(o);if(0!==a){var s=-(e.start.dot(this.normal)+this.constant)/a;if(!(s<0||s>1))return r.copy(o).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return r.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new i.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Matrix3;return function(r,i){var o=i||n.getNormalMatrix(r),a=t.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(e);return s.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},i.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19===i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},i.Spline=function(t){function e(t,e,n,r,i,o,a){var s=.5*(n-t),c=.5*(r-e);return(2*(e-n)+s+c)*a+(-3*(e-n)-2*s-c)*o+s*i+e}this.points=t;var n,r,o,a,s,c,l,u,h,p=[],d={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,r=Math.floor(n),o=n-r,p[0]=0===r?r:r-1,p[1]=r,p[2]=r>this.points.length-2?this.points.length-1:r+1,p[3]=r>this.points.length-3?this.points.length-1:r+2,c=this.points[p[0]],l=this.points[p[1]],u=this.points[p[2]],h=this.points[p[3]],a=o*o,s=o*a,d.x=e(c.x,l.x,u.x,h.x,o,a,s),d.y=e(c.y,l.y,u.y,h.y,o,a,s),d.z=e(c.z,l.z,u.z,h.z,o,a,s),d},this.getControlPointsArray=function(){var t,e,n=this.points.length,r=[];for(t=0;t<n;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,n,r,o,a=0,s=0,c=0,l=new i.Vector3,u=new i.Vector3,h=[],p=0;for(h[0]=0,t||(t=100),r=this.points.length*t,l.copy(this.points[0]),e=1;e<r;e++)n=e/r,o=this.getPoint(n),u.copy(o),p+=u.distanceTo(l),l.copy(o),a=(this.points.length-1)*n,s=Math.floor(a),s!==c&&(h[s]=p,c=s);return h[h.length]=p,{chunks:h,total:p}},this.reparametrizeByArcLength=function(t){var e,n,r,o,a,s,c,l,u=[],h=new i.Vector3,p=this.getLength();for(u.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=p.chunks[e]-p.chunks[e-1],c=Math.ceil(t*s/p.total),o=(e-1)/(this.points.length-1),a=e/(this.points.length-1),n=1;n<c-1;n++)r=o+n*(1/c)*(a-o),l=this.getPoint(r),u.push(h.copy(l).clone());u.push(h.copy(this.points[e]).clone())}this.points=u}},i.Triangle=function(t,e,n){this.a=void 0!==t?t:new i.Vector3,this.b=void 0!==e?e:new i.Vector3,this.c=void 0!==n?n:new i.Vector3},i.Triangle.normal=function(){var t=new i.Vector3;return function(e,n,r,o){var a=o||new i.Vector3;a.subVectors(r,n),t.subVectors(e,n),a.cross(t);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),i.Triangle.barycoordFromPoint=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(r,o,a,s,c){t.subVectors(s,o),e.subVectors(a,o),n.subVectors(r,o);var l=t.dot(t),u=t.dot(e),h=t.dot(n),p=e.dot(e),d=e.dot(n),f=l*p-u*u,m=c||new i.Vector3;if(0===f)return m.set(-2,-1,-1);var v=1/f,y=(p*h-u*d)*v,g=(l*d-u*h)*v;return m.set(1-y-g,g,y)}}(),i.Triangle.containsPoint=function(){var t=new i.Vector3;return function(e,n,r,o){var a=i.Triangle.barycoordFromPoint(e,n,r,o,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),i.Triangle.prototype={constructor:i.Triangle,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new i.Vector3,e=new i.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new i.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return i.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new i.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return i.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return i.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},i.Interpolant=function(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n},i.Interpolant.prototype={constructor:i.Interpolant,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}{if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(t,e,n,r){throw new Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(i.Interpolant.prototype,{beforeStart_:i.Interpolant.prototype.copySampleValue_,afterEnd_:i.Interpolant.prototype.copySampleValue_}),i.CubicInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0},i.CubicInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.CubicInterpolant,DefaultSettings_:{endingStart:i.ZeroCurvatureEnding,endingEnd:i.ZeroCurvatureEnding},intervalChanged_:function(t,e,n){var r=this.parameterPositions,o=t-2,a=t+1,s=r[o],c=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case i.ZeroSlopeEnding:o=t,s=2*e-n;break;case i.WrapAroundEnding:o=r.length-2,s=e+r[o]-r[o+1];break;default:o=t,s=n}if(void 0===c)switch(this.getSettings_().endingEnd){case i.ZeroSlopeEnding:a=t,c=2*n-e;break;case i.WrapAroundEnding:a=1,c=n+r[1]-r[0];break;default:a=t-1,c=e}var l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(c-n),this._offsetPrev=o*u,this._offsetNext=a*u},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-e)/(r-e),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,g=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,_=0;_!==a;++_)i[_]=v*o[l+_]+y*o[c+_]+g*o[s+_]+x*o[u+_];return i}}),i.DiscreteInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.DiscreteInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.DiscreteInterpolant,interpolate_:function(t,e,n,r){return this.copySampleValue_(t-1)}}),i.LinearInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.LinearInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.LinearInterpolant,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=(n-e)/(r-e),u=1-l,h=0;h!==a;++h)i[h]=o[c+h]*u+o[s+h]*l;return i}}),i.QuaternionLinearInterpolant=function(t,e,n,r){i.Interpolant.call(this,t,e,n,r)},i.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(i.Interpolant.prototype),{constructor:i.QuaternionLinearInterpolant,interpolate_:function(t,e,n,r){for(var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,c=t*s,l=(n-e)/(r-e),u=c+s;c!==u;c+=4)i.Quaternion.slerpFlat(o,0,a,c-s,a,c,l);return o}}),i.Clock=function(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},i.Clock.prototype={constructor:i.Clock,start:function(){this.startTime=performance.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=performance.now();t=.001*(e-this.oldTime),this.oldTime=e,this.elapsedTime+=t}return t}},i.EventDispatcher=function(){},i.EventDispatcher.prototype={constructor:i.EventDispatcher,apply:function(t){t.addEventListener=i.EventDispatcher.prototype.addEventListener,t.hasEventListener=i.EventDispatcher.prototype.hasEventListener,t.removeEventListener=i.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=i.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=[],i=n.length,o=0;o<i;o++)r[o]=n[o];for(var o=0;o<i;o++)r[o].call(this,t)}}}},i.Layers=function(){this.mask=1},i.Layers.prototype={constructor:i.Layers,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},function(t){function e(t,e){return t.distance-e.distance}function n(t,e,r,i){if(t.visible!==!1&&(t.raycast(e,r),i===!0))for(var o=t.children,a=0,s=o.length;a<s;a++)n(o[a],e,r,!0)}t.Raycaster=function(e,n,r,i){this.ray=new t.Ray(e,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.Raycaster.prototype={constructor:t.Raycaster,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,n){n instanceof t.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var i=[];return n(t,this,i,r),i.sort(e),i},intersectObjects:function(t,r){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=t.length;o<a;o++)n(t[o],this,i,r);return i.sort(e),i}}}(i),i.Object3D=function(){function t(){o.setFromEuler(r,!1)}function e(){r.setFromQuaternion(o,void 0,!1)}Object.defineProperty(this,"id",{value:i.Object3DIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.Object3D.DefaultUp.clone();var n=new i.Vector3,r=new i.Euler,o=new i.Quaternion,a=new i.Vector3(1,1,1);r.onChange(t),o.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:o},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new i.Matrix4},normalMatrix:{value:new i.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.matrixAutoUpdate=i.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new i.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},i.Object3D.DefaultUp=new i.Vector3(0,1,0),i.Object3D.DefaultMatrixAutoUpdate=!0,i.Object3D.prototype={constructor:i.Object3D,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new i.Vector3;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new i.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new i.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t);
}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof i.Object3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new i.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){var r=n||new i.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldRotation:function(){var t=new i.Quaternion;return function(e){var n=e||new i.Euler;return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new i.Vector3,e=new i.Quaternion;return function(n){var r=n||new i.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new i.Quaternion;return function(e){var n=e||new i.Vector3;return this.getWorldQuaternion(t),n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,n=this.children.length;e<n;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(n){var a=e(t.geometries),s=e(t.materials),c=e(t.textures),l=e(t.images);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),c.length>0&&(r.textures=c),l.length>0&&(r.images=l)}return r.object=i,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.rotationAutoUpdate=t.rotationAutoUpdate,this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}},i.EventDispatcher.prototype.apply(i.Object3D.prototype),i.Object3DIdCount=0,i.Face3=function(t,e,n,r,o,a){this.a=t,this.b=e,this.c=n,this.normal=r instanceof i.Vector3?r:new i.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=o instanceof i.Color?o:new i.Color,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==a?a:0},i.Face3.prototype={constructor:i.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},i.BufferAttribute=function(t,e){this.uuid=i.Math.generateUUID(),this.array=t,this.itemSize=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},i.BufferAttribute.prototype={constructor:i.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new i.Color),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i.Vector2),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new i.Vector3),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new i.Vector4),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},i.Int8Attribute=function(t,e){return new i.BufferAttribute(new Int8Array(t),e)},i.Uint8Attribute=function(t,e){return new i.BufferAttribute(new Uint8Array(t),e)},i.Uint8ClampedAttribute=function(t,e){return new i.BufferAttribute(new Uint8ClampedArray(t),e)},i.Int16Attribute=function(t,e){return new i.BufferAttribute(new Int16Array(t),e)},i.Uint16Attribute=function(t,e){return new i.BufferAttribute(new Uint16Array(t),e)},i.Int32Attribute=function(t,e){return new i.BufferAttribute(new Int32Array(t),e)},i.Uint32Attribute=function(t,e){return new i.BufferAttribute(new Uint32Array(t),e)},i.Float32Attribute=function(t,e){return new i.BufferAttribute(new Float32Array(t),e)},i.Float64Attribute=function(t,e){return new i.BufferAttribute(new Float64Array(t),e)},i.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new i.BufferAttribute(t,e).setDynamic(!0)},i.InstancedBufferAttribute=function(t,e,n){i.BufferAttribute.call(this,t,e),this.meshPerAttribute=n||1},i.InstancedBufferAttribute.prototype=Object.create(i.BufferAttribute.prototype),i.InstancedBufferAttribute.prototype.constructor=i.InstancedBufferAttribute,i.InstancedBufferAttribute.prototype.copy=function(t){return i.BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},i.InterleavedBuffer=function(t,e){this.uuid=i.Math.generateUUID(),this.array=t,this.stride=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},i.InterleavedBuffer.prototype={constructor:i.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},i.InstancedInterleavedBuffer=function(t,e,n){i.InterleavedBuffer.call(this,t,e),this.meshPerAttribute=n||1},i.InstancedInterleavedBuffer.prototype=Object.create(i.InterleavedBuffer.prototype),i.InstancedInterleavedBuffer.prototype.constructor=i.InstancedInterleavedBuffer,i.InstancedInterleavedBuffer.prototype.copy=function(t){return i.InterleavedBuffer.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},i.InterleavedBufferAttribute=function(t,e,n){this.uuid=i.Math.generateUUID(),this.data=t,this.itemSize=e,this.offset=n},i.InterleavedBufferAttribute.prototype={constructor:i.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},i.Geometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},i.Geometry.prototype={constructor:i.Geometry,applyMatrix:function(t){for(var e=(new i.Matrix3).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var o=this.vertices[n];o.applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(e).normalize();for(var s=0,c=a.vertexNormals.length;s<c;s++)a.vertexNormals[s].applyMatrix3(e).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},rotateX:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new i.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r){var o=void 0!==s?[h[t].clone(),h[e].clone(),h[r].clone()]:[],a=void 0!==c?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],f=new i.Face3(t,e,r,o,a);n.faces.push(f),void 0!==l&&n.faceVertexUvs[0].push([p[t].clone(),p[e].clone(),p[r].clone()]),void 0!==u&&n.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[r].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,o=t.attributes,a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var h=[],p=[],d=[],f=0,m=0;f<a.length;f+=3,m+=2)n.vertices.push(new i.Vector3(a[f],a[f+1],a[f+2])),void 0!==s&&h.push(new i.Vector3(s[f],s[f+1],s[f+2])),void 0!==c&&n.colors.push(new i.Color(c[f],c[f+1],c[f+2])),void 0!==l&&p.push(new i.Vector2(l[m],l[m+1])),void 0!==u&&d.push(new i.Vector2(u[m],u[m+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var f=0;f<v.length;f++)for(var y=v[f],g=y.start,x=y.count,m=g,_=g+x;m<_;m+=3)e(r[m],r[m+1],r[m+2]);else for(var f=0;f<r.length;f+=3)e(r[f],r[f+1],r[f+2])}else for(var f=0;f<a.length/3;f+=3)e(f,f+1,f+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new i.Matrix4;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new i.Vector3,e=new i.Vector3,n=0,r=this.faces.length;n<r;n++){var o=this.faces[n],a=this.vertices[o.a],s=this.vertices[o.b],c=this.vertices[o.c];t.subVectors(c,s),e.subVectors(a,s),t.cross(e),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,o,a,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new i.Vector3;if(t){var c,l,u,h=new i.Vector3,p=new i.Vector3;for(r=0,o=this.faces.length;r<o;r++)a=this.faces[r],c=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],h.subVectors(u,l),p.subVectors(c,l),h.cross(p),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(r=0,o=this.faces.length;r<o;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(r=0,o=this.faces.length;r<o;r++){a=this.faces[r];var d=a.vertexNormals;3===d.length?(d[0].copy(s[a.a]),d[1].copy(s[a.b]),d[2].copy(s[a.c])):(d[0]=s[a.a].clone(),d[1]=s[a.b].clone(),d[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,o;for(n=0,r=this.faces.length;n<r;n++)for(o=this.faces[n],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),t=0,e=o.vertexNormals.length;t<e;t++)o.__originalVertexNormals[t]?o.__originalVertexNormals[t].copy(o.vertexNormals[t]):o.__originalVertexNormals[t]=o.vertexNormals[t].clone();var a=new i.Geometry;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,c,l=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},l.push(s),u.push(c)}var h=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,c;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],s=h.faceNormals[n],c=h.vertexNormals[n],s.copy(o.normal),c.a.copy(o.vertexNormals[0]),c.b.copy(o.vertexNormals[1]),c.c.copy(o.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;n<r;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t instanceof i.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,o=this.vertices.length,a=this.vertices,s=t.vertices,c=this.faces,l=t.faces,u=this.faceVertexUvs[0],h=t.faceVertexUvs[0];void 0===n&&(n=0),void 0!==e&&(r=(new i.Matrix3).getNormalMatrix(e));for(var p=0,d=s.length;p<d;p++){var f=s[p],m=f.clone();void 0!==e&&m.applyMatrix4(e),a.push(m)}for(p=0,d=l.length;p<d;p++){var v,y,g,x=l[p],_=x.vertexNormals,b=x.vertexColors;v=new i.Face3(x.a+o,x.b+o,x.c+o),v.normal.copy(x.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,E=_.length;w<E;w++)y=_[w].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),v.vertexNormals.push(y);v.color.copy(x.color);for(var w=0,E=b.length;w<E;w++)g=b[w],v.vertexColors.push(g.clone());v.materialIndex=x.materialIndex+n,c.push(v)}for(p=0,d=h.length;p<d;p++){var S=h[p],M=[];if(void 0!==S){for(var w=0,E=S.length;w<E;w++)M.push(S[w].clone());u.push(M)}}},mergeMesh:function(t){return t instanceof i.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r,i,o,a,s,c={},l=[],u=[],h=4,p=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===c[e]?(c[e]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[e]];var d=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var f=-1,m=0;m<3;m++)if(o[m]===o[(m+1)%3]){f=m,d.push(n);break}}for(n=d.length-1;n>=0;n--){var v=d[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var y=this.vertices.length-l.length;return this.vertices=l,y},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var c=e[r]._id;i&&i.push(a[c]),o&&o.push(s[c])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=h.length/3,h.push(t.x,t.y,t.z),p[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==f[e]?f[e]:(f[e]=d.length,d.push(t.getHex()),f[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];s.push(l.x,l.y,l.z)}for(var u=[],h=[],p={},d=[],f={},m=[],v={},c=0;c<this.faces.length;c++){var y=this.faces[c],g=!0,x=!1,_=void 0!==this.faceVertexUvs[0][c],b=y.normal.length()>0,w=y.vertexNormals.length>0,E=1!==y.color.r||1!==y.color.g||1!==y.color.b,S=y.vertexColors.length>0,M=0;if(M=t(M,0,0),M=t(M,1,g),M=t(M,2,x),M=t(M,3,_),M=t(M,4,b),M=t(M,5,w),M=t(M,6,E),M=t(M,7,S),u.push(M),u.push(y.a,y.b,y.c),u.push(y.materialIndex),_){var A=this.faceVertexUvs[0][c];u.push(r(A[0]),r(A[1]),r(A[2]))}if(b&&u.push(e(y.normal)),w){var C=y.vertexNormals;u.push(e(C[0]),e(C[1]),e(C[2]))}if(E&&u.push(n(y.color)),S){var T=y.vertexColors;u.push(n(T[0]),n(T[1]),n(T[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,d.length>0&&(i.data.colors=d),m.length>0&&(i.data.uvs=[m]),i.data.faces=u,i},clone:function(){return(new i.Geometry).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.faces,n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=t.faceVertexUvs.length;n<r;n++){var o=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var a=0,s=o.length;a<s;a++){for(var c=o[a],l=[],u=0,h=c.length;u<h;u++){var p=c[u];l.push(p.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Geometry.prototype),i.GeometryIdCount=0,i.DirectGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},i.DirectGeometry.prototype={constructor:i.DirectGeometry,computeBoundingBox:i.Geometry.prototype.computeBoundingBox,computeBoundingSphere:i.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,n,r=[],i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,r.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,o=t.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var h,p=t.morphNormals,d=p.length;if(d>0){h=[];for(var u=0;u<d;u++)h[u]=[];this.morphTargets.normal=h}for(var f=t.skinIndices,m=t.skinWeights,v=f.length===r.length,y=m.length===r.length,u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var x=g.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}if(a===!0){var E=o[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new i.Vector2,new i.Vector2,new i.Vector2))}if(s===!0){var E=o[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new i.Vector2,new i.Vector2,new i.Vector2))}for(var S=0;S<l;S++){var M=c[S].vertices;e[S].push(M[g.a],M[g.b],M[g.c])}for(var S=0;S<d;S++){var A=p[S].vertexNormals[u];h[S].push(A.a,A.b,A.c)}v&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),y&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.DirectGeometry.prototype),i.BufferGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},i.BufferGeometry.prototype={constructor:i.BufferGeometry,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return e instanceof i.BufferAttribute==!1&&e instanceof i.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new i.BufferAttribute(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new i.Matrix3).getNormalMatrix(t);r.applyToVector3Array(n.array),n.needsUpdate=!0}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new i.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new i.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new i.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t instanceof i.Points||t instanceof i.Line){var n=new i.Float32Attribute(3*e.vertices.length,3),r=new i.Float32Attribute(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var o=new i.Float32Attribute(e.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t instanceof i.Mesh&&e instanceof i.Geometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t instanceof i.Mesh){var n=e.__directGeometry;if(void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var r=this.attributes.color;void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var r=this.attributes.uv;void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var r=this.attributes.lineDistance;void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new i.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new i.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new i.BufferAttribute(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new i.BufferAttribute(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var o=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new i.BufferAttribute(o,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new i.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,c=new s(3*t.indices.length);this.setIndex(new i.BufferAttribute(c,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var u=[],h=t.morphTargets[l],p=0,d=h.length;p<d;p++){var f=h[p],m=new i.Float32Attribute(3*f.length,3);u.push(m.copyVector3sArray(f))}this.morphAttributes[l]=u}if(t.skinIndices.length>0){var v=new i.Float32Attribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var y=new i.Float32Attribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",y.copyVector4sArray(t.skinWeights));
}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){new i.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new i.Box3);var t=this.attributes.position.array;t&&this.boundingBox.setFromArray(t),void 0!==t&&0!==t.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new i.Box3,e=new i.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere);var n=this.attributes.position.array;if(n){var r=this.boundingSphere.center;t.setFromArray(n),t.center(r);for(var o=0,a=0,s=n.length;a<s;a+=3)e.fromArray(n,a),o=Math.max(o,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(r.length),3));else for(var o=e.normal.array,a=0,s=o.length;a<s;a++)o[a]=0;var c,l,u,h=e.normal.array,p=new i.Vector3,d=new i.Vector3,f=new i.Vector3,m=new i.Vector3,v=new i.Vector3;if(t){var y=t.array;0===n.length&&this.addGroup(0,y.length);for(var g=0,x=n.length;g<x;++g)for(var _=n[g],b=_.start,w=_.count,a=b,s=b+w;a<s;a+=3)c=3*y[a+0],l=3*y[a+1],u=3*y[a+2],p.fromArray(r,c),d.fromArray(r,l),f.fromArray(r,u),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z}else for(var a=0,s=r.length;a<s;a+=9)p.fromArray(r,a),d.fromArray(r,a+3),f.fromArray(r,a+6),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t instanceof i.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var o=n[r],a=o.array,s=t.attributes[r],c=s.array,l=s.itemSize,u=0,h=l*e;u<c.length;u++,h++)a[h]=c[u];return this},normalizeNormals:function(){for(var t,e,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)t=i[o],e=i[o+1],n=i[o+2],r=1/Math.sqrt(t*t+e*e+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new i.BufferGeometry,e=this.index.array,n=this.attributes;for(var r in n){for(var o=n[r],a=o.array,s=o.itemSize,c=new a.constructor(e.length*s),l=0,u=0,h=0,p=e.length;h<p;h++){l=e[h]*s;for(var d=0;d<s;d++)c[u++]=a[l++]}t.addAttribute(r,new i.BufferAttribute(c,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new i.BufferGeometry).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.BufferGeometry.prototype),i.BufferGeometry.MaxIndex=65535,i.InstancedBufferGeometry=function(){i.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},i.InstancedBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.InstancedBufferGeometry.prototype.constructor=i.InstancedBufferGeometry,i.InstancedBufferGeometry.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},i.InstancedBufferGeometry.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,a=0,s=o.length;a<s;a++){var c=o[a];this.addGroup(c.start,c.count,c.instances)}return this},i.EventDispatcher.prototype.apply(i.InstancedBufferGeometry.prototype),i.Uniform=function(t,e){this.type=t,this.value=e,this.dynamic=!1},i.Uniform.prototype={constructor:i.Uniform,onUpdate:function(t){return this.dynamic=!0,this.onUpdateCallback=t,this}},i.AnimationClip=function(t,e,n){this.name=t||i.Math.generateUUID(),this.tracks=n,this.duration=void 0!==e?e:-1,this.duration<0&&this.resetDuration(),this.trim(),this.optimize()},i.AnimationClip.prototype={constructor:i.AnimationClip,resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(i.AnimationClip,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),o=0,a=n.length;o!==a;++o)e.push(i.KeyframeTrack.parse(n[o]).scale(r));return new i.AnimationClip(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},o=0,a=n.length;o!==a;++o)e.push(i.KeyframeTrack.toJSON(n[o]));return r},CreateFromMorphTargetSequence:function(t,e,n){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],c=[];s.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);var l=i.AnimationUtils.getKeyframeOrder(s);s=i.AnimationUtils.sortedArray(s,1,l),c=i.AnimationUtils.sortedArray(c,1,l),0===s[0]&&(s.push(r),c.push(c[0])),o.push(new i.NumberKeyframeTrack(".morphTargetInfluences["+e[a].name+"]",s,c).scale(1/n))}return new i.AnimationClip(t,(-1),o)},findByName:function(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return t[n];return null},CreateClipsFromMorphTargetSequences:function(t,e){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],c=s.name.match(r);if(c&&c.length>1){var l=c[1],u=n[l];u||(n[l]=u=[]),u.push(s)}}var h=[];for(var l in n)h.push(i.AnimationClip.CreateFromMorphTargetSequence(l,n[l],e));return h},parseAnimation:function(t,e,n){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var r=function(t,e,n,r,o){if(0!==n.length){var a=[],s=[];i.AnimationUtils.flattenJSON(n,a,s,r),0!==a.length&&o.push(new t(e,a,s))}},o=[],a=t.name||"default",s=t.length||-1,c=t.fps||30,l=t.hierarchy||[],u=0;u<l.length;u++){var h=l[u].keys;if(h&&0!=h.length)if(h[0].morphTargets){for(var p={},d=0;d<h.length;d++)if(h[d].morphTargets)for(var f=0;f<h[d].morphTargets.length;f++)p[h[d].morphTargets[f]]=-1;for(var m in p){for(var v=[],y=[],f=0;f!==h[d].morphTargets.length;++f){var g=h[d];v.push(g.time),y.push(g.morphTarget===m?1:0)}o.push(new i.NumberKeyframeTrack(".morphTargetInfluence["+m+"]",v,y))}s=p.length*(c||1)}else{var x=".bones["+e[u].name+"]";r(i.VectorKeyframeTrack,x+".position",h,"pos",o),r(i.QuaternionKeyframeTrack,x+".quaternion",h,"rot",o),r(i.VectorKeyframeTrack,x+".scale",h,"scl",o)}}if(0===o.length)return null;var _=new i.AnimationClip(a,s,o);return _}}),i.AnimationMixer=function(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},i.AnimationMixer.prototype={constructor:i.AnimationMixer,clipAction:function(t,e){var n,r=e||this._root,o=r.uuid,a="string"==typeof t?t:t.name,s=t!==a?t:null,c=this._actionsByClip[a];if(void 0!==c){var l=c.actionByRoot[o];if(void 0!==l)return l;if(n=c.knownActions[0],s=n._clip,t!==a&&t!==s)throw new Error("Different clips with the same name detected!")}if(null===s)return null;var u=new i.AnimationMixer._Action(this,s,e);return this._bindAction(u,n),this._addInactiveAction(u,a,o),u},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?t:t.name,o=this._actionsByClip[i];return void 0!==o?o.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s.enabled&&s._update(r,t,i,o)}for(var c=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a)c[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.name,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var c in s){var l=s[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},i.EventDispatcher.prototype.apply(i.AnimationMixer.prototype),i.AnimationMixer._Action=function(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,o=r.length,a=new Array(o),s={endingStart:i.ZeroCurvatureEnding,endingEnd:i.ZeroCurvatureEnding},c=0;c!==o;++c){var l=r[c].createInterpolant(null);a[c]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=i.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},i.AnimationMixer._Action.prototype={constructor:i.AnimationMixer._Action,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){this._startTime;return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){this._mixer;if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._currentTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=t/a,c[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(a),l[u].accumulate(r,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.pause=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,o=this._loopCount,a=!1;switch(r){case i.LoopOnce:if(o===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1)),e>=n)e=n;else{if(!(e<0))break;e=0}this.clampWhenFinished?this.pause=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1});break;case i.LoopPingPong:a=!0;case i.LoopRepeat:if(o===-1&&(t>0?(o=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,o+=Math.abs(s);var c=this.repetitions-o;if(c<0){this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});break}if(0===c){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}if(r===i.LoopPingPong&&1===(1&o))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=i.ZeroSlopeEnding,r.endingEnd=i.ZeroSlopeEnding):(t?r.endingStart=this.zeroSlopeAtStart?i.ZeroSlopeEnding:i.ZeroCurvatureEnding:r.endingStart=i.WrapAroundEnding,e?r.endingEnd=this.zeroSlopeAtEnd?i.ZeroSlopeEnding:i.ZeroCurvatureEnding:r.endingEnd=i.WrapAroundEnding)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}},Object.assign(i.AnimationMixer.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,a=t._propertyBindings,s=t._interpolants,c=n.uuid,l=this._bindingsByRootAndName,u=l[c];void 0===u&&(u={},l[c]=u);for(var h=0;h!==o;++h){var p=r[h],d=p.name,f=u[d];if(void 0!==f)a[h]=f;else{if(f=a[h],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,c,d));continue}var m=e&&e._propertyBindings[h].binding.parsedPath;f=new i.PropertyMixer(i.PropertyBinding.create(n,d,m),p.ValueTypeName,p.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,c,d),a[h]=f}s[h].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.name,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.name,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null;var u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete a[i];t:{for(var l in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new i.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),i.AnimationObjectGroup=function(t){this.uuid=i.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}},i.AnimationObjectGroup.prototype={constructor:i.AnimationObjectGroup,add:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,o=this._indicesByUUID,a=this._paths,s=this._parsedPaths,c=this._bindings,l=c.length,u=0,h=arguments.length;u!==h;++u){var p=arguments[u],d=p.uuid,f=o[d];if(void 0===f){f=n++,o[d]=f,e.push(p);for(var m=0,v=l;m!==v;++m)c[m].push(new i.PropertyBinding(p,a[m],s[m]))}else if(f<r){var y=e[f],g=--r,x=e[g];o[x.uuid]=f,e[f]=x,o[d]=g,e[g]=p;for(var m=0,v=l;m!==v;++m){var _=c[m],b=_[g],w=_[f];_[f]=b,void 0===w&&(w=new i.PropertyBinding(p,a[m],s[m])),_[g]=w}}else e[f]!==y&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(t){for(var e=this._objects,n=(e.length,this.nCachedObjects_),r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],l=c.uuid,u=r[l];if(void 0!==u&&u>=n){var h=n++,p=e[h];r[p.uuid]=u,e[u]=p,r[l]=h,e[h]=c;for(var d=0,f=o;d!==f;++d){var m=i[d],v=m[h],y=m[u];m[u]=v,m[h]=y}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,c=arguments.length;s!==c;++s){var l=arguments[s],u=l.uuid,h=i[u];if(void 0!==h)if(delete i[u],h<r){var p=--r,d=e[p],f=--n,m=e[f];i[d.uuid]=h,e[h]=d,i[m.uuid]=p,e[p]=m,e.pop();for(var v=0,y=a;v!==y;++v){var g=o[v],x=g[p],_=g[f];g[h]=x,g[p]=_,g.pop()}}else{var f=--n,m=e[f];i[m.uuid]=h,e[h]=m,e.pop();for(var v=0,y=a;v!==y;++v){var g=o[v];g[h]=g[f],g.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],o=this._bindings;if(void 0!==r)return o[r];var a=this._paths,s=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,h=new Array(l);r=o.length,n[t]=r,a.push(t),s.push(e),o.push(h);for(var p=u,d=c.length;p!==d;++p){var f=c[p];h[p]=new i.PropertyBinding(f,t,e)}return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],c=t[a];e[c]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},i.AnimationUtils={arraySlice:function(t,e,n){return i.AnimationUtils.isTypedArray(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,c=0;c!==e;++c)i[a++]=t[s+c];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a)){do a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++];while(void 0!==o)}else do a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++];while(void 0!==o)}}},i.KeyframeTrack=function(t,e,n,r){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=i.AnimationUtils.convertArray(e,this.TimeBufferType),this.values=i.AnimationUtils.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()},i.KeyframeTrack.prototype={constructor:i.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:i.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(t){return new i.DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new i.LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new i.CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e=void 0;switch(t){case i.InterpolateDiscrete:e=this.InterpolantFactoryMethodDiscrete;break;case i.InterpolateLinear:e=this.InterpolantFactoryMethodLinear;break;case i.InterpolateSmooth:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return i.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return i.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return i.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,o=0,a=r-1;o!==r&&n[o]<t;)++o;for(;a!==-1&&n[a]>e;)--a;if(++a,0!==o||a!==r){o>=a&&(a=Math.max(a,1),o=a-1);var s=this.getValueSize();this.times=i.AnimationUtils.arraySlice(n,o,a),this.values=i.AnimationUtils.arraySlice(this.values,o*s,a*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("track is empty",this),t=!1);for(var a=null,s=0;s!==o;s++){var c=n[s];if("number"==typeof c&&isNaN(c)){console.error("time is not a valid number",this,s,c),t=!1;break}if(null!==a&&a>c){console.error("out of order keys",this,s,c,a),t=!1;break}a=c}if(void 0!==r&&i.AnimationUtils.isTypedArray(r))for(var s=0,l=r.length;s!==l;++s){var u=r[s];if(isNaN(u)){console.error("value is not a valid number",this,s,u),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=1,o=1,a=t.length-1;o<=a;++o){var s=!1,c=t[o],l=t[o+1];if(c!==l&&(1!==o||c!==c[0]))for(var u=o*n,h=u-n,p=u+n,d=0;d!==n;++d){var f=e[u+d];if(f!==e[h+d]||f!==e[p+d]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];for(var m=o*n,v=r*n,d=0;d!==n;++d)e[v+d]=e[m+d]}++r}}return r!==t.length&&(this.times=i.AnimationUtils.arraySlice(t,0,r),this.values=i.AnimationUtils.arraySlice(e,0,r*n)),this}},Object.assign(i.KeyframeTrack,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=i.KeyframeTrack._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){console.warn("legacy JSON format detected, converting");var n=[],r=[];i.AnimationUtils.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:i.AnimationUtils.convertArray(t.times,Array),values:i.AnimationUtils.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return i.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return i.VectorKeyframeTrack;case"color":return i.ColorKeyframeTrack;case"quaternion":return i.QuaternionKeyframeTrack;case"bool":case"boolean":return i.BooleanKeyframeTrack;case"string":return i.StringKeyframeTrack}throw new Error("Unsupported typeName: "+t)}}),i.PropertyBinding=function(t,e,n){this.path=e,this.parsedPath=n||i.PropertyBinding.parseTrackName(e),this.node=i.PropertyBinding.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t},i.PropertyBinding.prototype={constructor:i.PropertyBinding,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,o=e.propertyIndex;if(t||(t=i.PropertyBinding.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===a){a=s;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[a]}}var c=t[r];if(!c){var l=e.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",t)}var u=this.Versioning.None;void 0!==t.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===o){o=s;break}}h=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else void 0!==c.fromArray&&void 0!==c.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=c):void 0!==c.length?(h=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(i.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:i.PropertyBinding.prototype.getValue,_setValue_unbound:i.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){
this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),i.PropertyBinding.Composite=function(t,e,n){var r=n||i.PropertyBinding.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)},i.PropertyBinding.Composite.prototype={constructor:i.PropertyBinding.Composite,getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},i.PropertyBinding.create=function(t,e,n){return t instanceof i.AnimationObjectGroup?new i.PropertyBinding.Composite(t,e,n):new i.PropertyBinding(t,e,n)},i.PropertyBinding.parseTrackName=function(t){var e=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=e.exec(t);if(!n)throw new Error("cannot parse trackName at all: "+t);n.index===e.lastIndex&&e.lastIndex++;var r={nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return r},i.PropertyBinding.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var r=t.bones[n];if(r.name===e)return r}return null},r=n(t.skeleton);if(r)return r}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},o=i(t.children);if(o)return o}return null},i.PropertyMixer=function(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0},i.PropertyMixer.prototype={constructor:i.PropertyMixer,accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r,o){i.Quaternion.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}},i.BooleanKeyframeTrack=function(t,e,n){i.KeyframeTrack.call(this,t,e,n)},i.BooleanKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:i.IntepolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),i.NumberKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.NumberKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.NumberKeyframeTrack,ValueTypeName:"number"}),i.QuaternionKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:i.InterpolateLinear,InterpolantFactoryMethodLinear:function(t){return new i.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),i.StringKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.StringKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:i.IntepolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),i.VectorKeyframeTrack=function(t,e,n,r){i.KeyframeTrack.call(this,t,e,n,r)},i.VectorKeyframeTrack.prototype=Object.assign(Object.create(i.KeyframeTrack.prototype),{constructor:i.VectorKeyframeTrack,ValueTypeName:"vector"}),i.Audio=function(t){i.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filter=null},i.Audio.prototype=Object.create(i.Object3D.prototype),i.Audio.prototype.constructor=i.Audio,i.Audio.prototype.getOutput=function(){return this.gain},i.Audio.prototype.load=function(t){var e=new i.AudioBuffer(this.context);return e.load(t),this.setBuffer(e),this},i.Audio.prototype.setNodeSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},i.Audio.prototype.setBuffer=function(t){var e=this;return t.onReady(function(t){e.source.buffer=t,e.sourceType="buffer",e.autoplay&&e.play()}),this},i.Audio.prototype.play=function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},i.Audio.prototype.pause=function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),void(this.startTime=this.context.currentTime))},i.Audio.prototype.stop=function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),void(this.startTime=0))},i.Audio.prototype.connect=function(){null!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.getOutput())):this.source.connect(this.getOutput())},i.Audio.prototype.disconnect=function(){null!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.getOutput())):this.source.disconnect(this.getOutput())},i.Audio.prototype.getFilter=function(){return this.filter},i.Audio.prototype.setFilter=function(t){void 0===t&&(t=null),this.isPlaying===!0?(this.disconnect(),this.filter=t,this.connect()):this.filter=t},i.Audio.prototype.setPlaybackRate=function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,void(this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate)))},i.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},i.Audio.prototype.onEnded=function(){this.isPlaying=!1},i.Audio.prototype.setLoop=function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},i.Audio.prototype.getLoop=function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},i.Audio.prototype.setVolume=function(t){this.gain.gain.value=t},i.Audio.prototype.getVolume=function(){return this.gain.gain.value},i.AudioAnalyser=function(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)},i.AudioAnalyser.prototype={constructor:i.AudioAnalyser,getData:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},i.AudioBuffer=function(t){this.context=t,this.ready=!1,this.readyCallbacks=[]},i.AudioBuffer.prototype.load=function(t){var e=this,n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(t){e.context.decodeAudioData(this.response,function(t){e.buffer=t,e.ready=!0;for(var n=0;n<e.readyCallbacks.length;n++)e.readyCallbacks[n](e.buffer);e.readyCallbacks=[]})},n.send(),this},i.AudioBuffer.prototype.onReady=function(t){this.ready?t(this.buffer):this.readyCallbacks.push(t)},i.PositionalAudio=function(t){i.Audio.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},i.PositionalAudio.prototype=Object.create(i.Audio.prototype),i.PositionalAudio.prototype.constructor=i.PositionalAudio,i.PositionalAudio.prototype.getOutput=function(){return this.panner},i.PositionalAudio.prototype.setRefDistance=function(t){this.panner.refDistance=t},i.PositionalAudio.prototype.getRefDistance=function(){return this.panner.refDistance},i.PositionalAudio.prototype.setRolloffFactor=function(t){this.panner.rolloffFactor=t},i.PositionalAudio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},i.PositionalAudio.prototype.setDistanceModel=function(t){this.panner.distanceModel=t},i.PositionalAudio.prototype.getDistanceModel=function(){return this.panner.distanceModel},i.PositionalAudio.prototype.setMaxDistance=function(t){this.panner.maxDistance=t},i.PositionalAudio.prototype.getMaxDistance=function(){return this.panner.maxDistance},i.PositionalAudio.prototype.updateMatrixWorld=function(){var t=new i.Vector3;return function(e){i.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}(),i.AudioListener=function(){i.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},i.AudioListener.prototype=Object.create(i.Object3D.prototype),i.AudioListener.prototype.constructor=i.AudioListener,i.AudioListener.prototype.getInput=function(){return this.gain},i.AudioListener.prototype.removeFilter=function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},i.AudioListener.prototype.setFilter=function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},i.AudioListener.prototype.getFilter=function(){return this.filter},i.AudioListener.prototype.setMasterVolume=function(t){this.gain.gain.value=t},i.AudioListener.prototype.getMasterVolume=function(){return this.gain.gain.value},i.AudioListener.prototype.updateMatrixWorld=function(){var t=new i.Vector3,e=new i.Quaternion,n=new i.Vector3,r=new i.Vector3;return function(o){i.Object3D.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),a.setPosition(t.x,t.y,t.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}(),i.Camera=function(){i.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.constructor=i.Camera,i.Camera.prototype.getWorldDirection=function(){var t=new i.Quaternion;return function(e){var n=e||new i.Vector3;return this.getWorldQuaternion(t),n.set(0,0,-1).applyQuaternion(t)}}(),i.Camera.prototype.lookAt=function(){var t=new i.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),i.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},i.Camera.prototype.copy=function(t){return i.Object3D.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},i.CubeCamera=function(t,e,n){i.Object3D.call(this),this.type="CubeCamera";var r=90,o=1,a=new i.PerspectiveCamera(r,o,t,e);a.up.set(0,-1,0),a.lookAt(new i.Vector3(1,0,0)),this.add(a);var s=new i.PerspectiveCamera(r,o,t,e);s.up.set(0,-1,0),s.lookAt(new i.Vector3((-1),0,0)),this.add(s);var c=new i.PerspectiveCamera(r,o,t,e);c.up.set(0,0,1),c.lookAt(new i.Vector3(0,1,0)),this.add(c);var l=new i.PerspectiveCamera(r,o,t,e);l.up.set(0,0,-1),l.lookAt(new i.Vector3(0,(-1),0)),this.add(l);var u=new i.PerspectiveCamera(r,o,t,e);u.up.set(0,-1,0),u.lookAt(new i.Vector3(0,0,1)),this.add(u);var h=new i.PerspectiveCamera(r,o,t,e);h.up.set(0,-1,0),h.lookAt(new i.Vector3(0,0,(-1))),this.add(h);var p={format:i.RGBFormat,magFilter:i.LinearFilter,minFilter:i.LinearFilter};this.renderTarget=new i.WebGLRenderTargetCube(n,n,p),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,a,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,c,n),n.activeCubeFace=3,t.render(e,l,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(null)}},i.CubeCamera.prototype=Object.create(i.Object3D.prototype),i.CubeCamera.prototype.constructor=i.CubeCamera,i.OrthographicCamera=function(t,e,n,r,o,a){i.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==o?o:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},i.OrthographicCamera.prototype=Object.create(i.Camera.prototype),i.OrthographicCamera.prototype.constructor=i.OrthographicCamera,i.OrthographicCamera.prototype.updateProjectionMatrix=function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-t,n+t,r+e,r-e,this.near,this.far)},i.OrthographicCamera.prototype.copy=function(t){return i.Camera.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this},i.OrthographicCamera.prototype.toJSON=function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,e},i.PerspectiveCamera=function(t,e,n,r){i.Camera.call(this),this.type="PerspectiveCamera",this.focalLength=10,this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.create(i.Camera.prototype),i.PerspectiveCamera.prototype.constructor=i.PerspectiveCamera,i.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*i.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.setViewOffset=function(t,e,n,r,i,o){this.fullWidth=t,this.fullHeight=e,this.x=n,this.y=r,this.width=i,this.height=o,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=i.Math.radToDeg(2*Math.atan(Math.tan(.5*i.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,n=Math.tan(i.Math.degToRad(.5*t))*this.near,r=-n,o=e*r,a=e*n,s=Math.abs(a-o),c=Math.abs(n-r);this.projectionMatrix.makeFrustum(o+this.x*s/this.fullWidth,o+(this.x+this.width)*s/this.fullWidth,n-(this.y+this.height)*c/this.fullHeight,n-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},i.PerspectiveCamera.prototype.copy=function(t){return i.Camera.prototype.copy.call(this,t),this.focalLength=t.focalLength,this.zoom=t.zoom,this.fov=t.fov,this.aspect=t.aspect,this.near=t.near,this.far=t.far,this},i.PerspectiveCamera.prototype.toJSON=function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.focalLength=this.focalLength,e.object.zoom=this.zoom,e.object.fov=this.fov,e.object.aspect=this.aspect,e.object.near=this.near,e.object.far=this.far,e},i.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.cameraL=new i.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new i.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1},i.StereoCamera.prototype={constructor:i.StereoCamera,update:function(){var t,e,n,r,o,a=new i.Matrix4,s=new i.Matrix4;return function(c){var l=t!==c.focalLength||e!==c.fov||n!==c.aspect*this.aspect||r!==c.near||o!==c.far;if(l){t=c.focalLength,e=c.fov,n=c.aspect*this.aspect,r=c.near,o=c.far;var u,h,p=c.projectionMatrix.clone(),d=.032,f=d*r/t,m=r*Math.tan(i.Math.degToRad(.5*e));s.elements[12]=-d,a.elements[12]=d,u=-m*n+f,h=m*n+f,p.elements[0]=2*r/(h-u),p.elements[8]=(h+u)/(h-u),this.cameraL.projectionMatrix.copy(p),u=-m*n-f,h=m*n-f,p.elements[0]=2*r/(h-u),p.elements[8]=(h+u)/(h-u),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(s),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(a)}}()},i.Light=function(t,e){i.Object3D.call(this),this.type="Light",this.color=new i.Color(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0},i.Light.prototype=Object.create(i.Object3D.prototype),i.Light.prototype.constructor=i.Light,i.Light.prototype.copy=function(t){return i.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},i.Light.prototype.toJSON=function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.exponent&&(e.object.exponent=this.exponent),e},i.LightShadow=function(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i.Vector2(512,512),this.map=null,this.matrix=new i.Matrix4},i.LightShadow.prototype={constructor:i.LightShadow,copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)}},i.AmbientLight=function(t,e){i.Light.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0},i.AmbientLight.prototype=Object.create(i.Light.prototype),i.AmbientLight.prototype.constructor=i.AmbientLight,i.DirectionalLight=function(t,e){i.Light.call(this,t,e),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,this.shadow=new i.LightShadow(new i.OrthographicCamera((-5),5,5,(-5),.5,500))},i.DirectionalLight.prototype=Object.create(i.Light.prototype),i.DirectionalLight.prototype.constructor=i.DirectionalLight,i.DirectionalLight.prototype.copy=function(t){return i.Light.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this},i.HemisphereLight=function(t,e,n){i.Light.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new i.Color(e)},i.HemisphereLight.prototype=Object.create(i.Light.prototype),i.HemisphereLight.prototype.constructor=i.HemisphereLight,i.HemisphereLight.prototype.copy=function(t){return i.Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this},i.PointLight=function(t,e,n,r){i.Light.call(this,t,e),this.type="PointLight",this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new i.LightShadow(new i.PerspectiveCamera(90,1,.5,500))},i.PointLight.prototype=Object.create(i.Light.prototype),i.PointLight.prototype.constructor=i.PointLight,i.PointLight.prototype.copy=function(t){return i.Light.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this},i.SpotLight=function(t,e,n,r,o,a){i.Light.call(this,t,e),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==o?o:10,this.decay=void 0!==a?a:1,this.shadow=new i.LightShadow(new i.PerspectiveCamera(50,1,.5,500))},i.SpotLight.prototype=Object.create(i.Light.prototype),i.SpotLight.prototype.constructor=i.SpotLight,i.SpotLight.prototype.copy=function(t){return i.Light.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.exponent=t.exponent,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this},i.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},i.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},i.Loader.prototype={constructor:i.Loader,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t,e,n;return function(r,o,a){function s(t,n,r,s,l){var u,h=o+t,p=i.Loader.Handlers.get(h);null!==p?u=p.load(h):(e.setCrossOrigin(a),u=e.load(h)),void 0!==n&&(u.repeat.fromArray(n),1!==n[0]&&(u.wrapS=i.RepeatWrapping),1!==n[1]&&(u.wrapT=i.RepeatWrapping)),void 0!==r&&u.offset.fromArray(r),void 0!==s&&("repeat"===s[0]&&(u.wrapS=i.RepeatWrapping),"mirror"===s[0]&&(u.wrapS=i.MirroredRepeatWrapping),"repeat"===s[1]&&(u.wrapT=i.RepeatWrapping),"mirror"===s[1]&&(u.wrapT=i.MirroredRepeatWrapping)),void 0!==l&&(u.anisotropy=l);var d=i.Math.generateUUID();return c[d]=u,d}void 0===t&&(t=new i.Color),void 0===e&&(e=new i.TextureLoader),void 0===n&&(n=new i.MaterialLoader);var c={},l={uuid:i.Math.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=i[h];break;case"colorAmbient":console.warn("THREE.Loader.createMaterial: colorAmbient is no longer supported");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=i.BackSide;break;case"doubleSided":l.side=i.DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":h===!0&&(l.vertexColors=i.VertexColors),"face"===h&&(l.vertexColors=i.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(c),n.parse(l)}}()},i.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},i.XHRLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.XHRLoader.prototype={constructor:i.XHRLoader,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t);var o=this,a=i.Cache.get(t);if(void 0!==a)return e&&setTimeout(function(){e(a)},0),a;var s=new XMLHttpRequest;return s.overrideMimeType("text/plain"),s.open("GET",t,!0),s.addEventListener("load",function(n){var a=n.target.response;i.Cache.add(t,a),200===this.status?(e&&e(a),o.manager.itemEnd(t)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),e&&e(a),o.manager.itemEnd(t)):(r&&r(n),o.manager.itemError(t))},!1),void 0!==n&&s.addEventListener("progress",function(t){n(t)},!1),s.addEventListener("error",function(e){r&&r(e),o.manager.itemError(t)},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),o.manager.itemStart(t),s},setPath:function(t){this.path=t},setResponseType:function(t){this.responseType=t},setWithCredentials:function(t){this.withCredentials=t}},i.FontLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.FontLoader.prototype={constructor:i.FontLoader,load:function(t,e,n,r){var o=new i.XHRLoader(this.manager);o.load(t,function(t){e(new i.Font(JSON.parse(t.substring(65,t.length-2))))},n,r)}},i.ImageLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.ImageLoader.prototype={constructor:i.ImageLoader,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t);var o=this,a=i.Cache.get(t);if(void 0!==a)return o.manager.itemStart(t),e?setTimeout(function(){e(a),o.manager.itemEnd(t)},0):o.manager.itemEnd(t),a;var s=document.createElement("img");return s.addEventListener("load",function(n){i.Cache.add(t,this),e&&e(this),o.manager.itemEnd(t)},!1),void 0!==n&&s.addEventListener("progress",function(t){n(t)},!1),s.addEventListener("error",function(e){r&&r(e),o.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){this.crossOrigin=t},setPath:function(t){this.path=t}},i.JSONLoader=function(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:i.DefaultLoadingManager,this.withCredentials=!1},i.JSONLoader.prototype={constructor:i.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(t,e,n,r){var o=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:i.Loader.prototype.extractUrlBase(t),s=new i.XHRLoader(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var r=JSON.parse(n),i=r.metadata;if(void 0!==i){var s=i.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var c=o.parse(r,a);e(c.geometry,c.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var r,o,a,c,l,u,h,p,d,f,m,v,y,g,x,_,b,w,E,S,M,A,C,T,N,R,O,L=t.faces,P=t.vertices,k=t.normals,D=t.colors,I=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&I++;for(r=0;r<I;r++)s.faceVertexUvs[r]=[]}for(c=0,l=P.length;c<l;)w=new i.Vector3,w.x=P[c++]*e,w.y=P[c++]*e,w.z=P[c++]*e,s.vertices.push(w);for(c=0,l=L.length;c<l;)if(f=L[c++],m=n(f,0),v=n(f,1),y=n(f,3),g=n(f,4),x=n(f,5),_=n(f,6),b=n(f,7),m){if(S=new i.Face3,S.a=L[c],S.b=L[c+1],S.c=L[c+3],M=new i.Face3,M.a=L[c+1],M.b=L[c+2],M.c=L[c+3],c+=4,v&&(d=L[c++],S.materialIndex=d,M.materialIndex=d),a=s.faces.length,y)for(r=0;r<I;r++)for(T=t.uvs[r],s.faceVertexUvs[r][a]=[],s.faceVertexUvs[r][a+1]=[],o=0;o<4;o++)p=L[c++],R=T[2*p],O=T[2*p+1],N=new i.Vector2(R,O),2!==o&&s.faceVertexUvs[r][a].push(N),0!==o&&s.faceVertexUvs[r][a+1].push(N);if(g&&(h=3*L[c++],S.normal.set(k[h++],k[h++],k[h]),M.normal.copy(S.normal)),x)for(r=0;r<4;r++)h=3*L[c++],C=new i.Vector3(k[h++],k[h++],k[h]),2!==r&&S.vertexNormals.push(C),0!==r&&M.vertexNormals.push(C);if(_&&(u=L[c++],A=D[u],S.color.setHex(A),M.color.setHex(A)),b)for(r=0;r<4;r++)u=L[c++],A=D[u],2!==r&&S.vertexColors.push(new i.Color(A)),0!==r&&M.vertexColors.push(new i.Color(A));s.faces.push(S),s.faces.push(M)}else{if(E=new i.Face3,E.a=L[c++],E.b=L[c++],E.c=L[c++],v&&(d=L[c++],E.materialIndex=d),a=s.faces.length,y)for(r=0;r<I;r++)for(T=t.uvs[r],s.faceVertexUvs[r][a]=[],o=0;o<3;o++)p=L[c++],R=T[2*p],O=T[2*p+1],N=new i.Vector2(R,O),s.faceVertexUvs[r][a].push(N);if(g&&(h=3*L[c++],E.normal.set(k[h++],k[h++],k[h])),x)for(r=0;r<3;r++)h=3*L[c++],C=new i.Vector3(k[h++],k[h++],k[h]),E.vertexNormals.push(C);if(_&&(u=L[c++],E.color.setHex(D[u])),b)for(r=0;r<3;r++)u=L[c++],E.vertexColors.push(new i.Color(D[u]));s.faces.push(E)}}function r(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=e){var o=t.skinWeights[n],a=e>1?t.skinWeights[n+1]:0,c=e>2?t.skinWeights[n+2]:0,l=e>3?t.skinWeights[n+3]:0;s.skinWeights.push(new i.Vector4(o,a,c,l))}if(t.skinIndices)for(var n=0,r=t.skinIndices.length;n<r;n+=e){var u=t.skinIndices[n],h=e>1?t.skinIndices[n+1]:0,p=e>2?t.skinIndices[n+2]:0,d=e>3?t.skinIndices[n+3]:0;
s.skinIndices.push(new i.Vector4(u,h,p,d))}s.bones=t.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function o(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){s.morphTargets[n]={},s.morphTargets[n].name=t.morphTargets[n].name,s.morphTargets[n].vertices=[];for(var o=s.morphTargets[n].vertices,a=t.morphTargets[n].vertices,c=0,l=a.length;c<l;c+=3){var u=new i.Vector3;u.x=a[c]*e,u.y=a[c+1]*e,u.z=a[c+2]*e,o.push(u)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=s.faces,p=t.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(p,3*n)}}function a(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var o=i.AnimationClip.parseAnimation(n[r],s.bones);o&&e.push(o)}if(s.morphTargets){var a=i.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);e=e.concat(a)}e.length>0&&(s.animations=e)}var s=new i.Geometry,c=void 0!==t.scale?1/t.scale:1;if(n(c),r(),o(c),a(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:s};var l=i.Loader.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:s,materials:l}}},i.LoadingManager=function(t,e,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,i===!1&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)}},i.DefaultLoadingManager=new i.LoadingManager,i.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.BufferGeometryLoader.prototype={constructor:i.BufferGeometryLoader,load:function(t,e,n,r){var o=this,a=new i.XHRLoader(o.manager);a.load(t,function(t){e(o.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new i.BufferGeometry,n=t.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var o=new r[n.type](n.array);e.setIndex(new i.BufferAttribute(o,1))}var a=t.data.attributes;for(var s in a){var c=a[s],o=new r[c.type](c.array);e.addAttribute(s,new i.BufferAttribute(o,c.itemSize))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var u=0,h=l.length;u!==h;++u){var p=l[u];e.addGroup(p.start,p.count,p.materialIndex)}var d=t.data.boundingSphere;if(void 0!==d){var f=new i.Vector3;void 0!==d.center&&f.fromArray(d.center),e.boundingSphere=new i.Sphere(f,d.radius)}return e}},i.MaterialLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.textures={}},i.MaterialLoader.prototype={constructor:i.MaterialLoader,load:function(t,e,n,r){var o=this,a=new i.XHRLoader(o.manager);a.load(t,function(t){e(o.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},getTexture:function(t){var e=this.textures;return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]},parse:function(t){var e=new i[t.type];if(void 0!==t.uuid&&(e.uuid=t.uuid),void 0!==t.name&&(e.name=t.name),void 0!==t.color&&e.color.setHex(t.color),void 0!==t.roughness&&(e.roughness=t.roughness),void 0!==t.metalness&&(e.metalness=t.metalness),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.alphaTest&&(e.alphaTest=t.alphaTest),void 0!==t.depthTest&&(e.depthTest=t.depthTest),void 0!==t.depthWrite&&(e.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(e.colorWrite=t.colorWrite),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(e.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.size&&(e.size=t.size),void 0!==t.sizeAttenuation&&(e.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(e.map=this.getTexture(t.map)),void 0!==t.alphaMap&&(e.alphaMap=this.getTexture(t.alphaMap),e.transparent=!0),void 0!==t.bumpMap&&(e.bumpMap=this.getTexture(t.bumpMap)),void 0!==t.bumpScale&&(e.bumpScale=t.bumpScale),void 0!==t.normalMap&&(e.normalMap=this.getTexture(t.normalMap)),void 0!==t.normalScale){var n=t.normalScale;Array.isArray(n)===!1&&(n=[n,n]),e.normalScale=(new i.Vector2).fromArray(n)}if(void 0!==t.displacementMap&&(e.displacementMap=this.getTexture(t.displacementMap)),void 0!==t.displacementScale&&(e.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(e.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(e.roughnessMap=this.getTexture(t.roughnessMap)),void 0!==t.metalnessMap&&(e.metalnessMap=this.getTexture(t.metalnessMap)),void 0!==t.emissiveMap&&(e.emissiveMap=this.getTexture(t.emissiveMap)),void 0!==t.emissiveIntensity&&(e.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(e.specularMap=this.getTexture(t.specularMap)),void 0!==t.envMap&&(e.envMap=this.getTexture(t.envMap),e.combine=i.MultiplyOperation),t.reflectivity&&(e.reflectivity=t.reflectivity),void 0!==t.lightMap&&(e.lightMap=this.getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(e.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(e.aoMap=this.getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(e.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var r=0,o=t.materials.length;r<o;r++)e.materials.push(this.parse(t.materials[r]));return e}},i.ObjectLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.texturePath=""},i.ObjectLoader.prototype={constructor:i.ObjectLoader,load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var o=this,a=new i.XHRLoader(o.manager);a.load(t,function(t){o.parse(JSON.parse(t),e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),r=this.parseImages(t.images,function(){void 0!==e&&e(a)}),i=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,i),a=this.parseObject(t.object,n,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new i.JSONLoader,r=new i.BufferGeometryLoader,o=0,a=t.length;o<a;o++){var s,c=t[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new i[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new i.BoxGeometry(c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleBufferGeometry":s=new i.CircleBufferGeometry(c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CircleGeometry":s=new i.CircleGeometry(c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":s=new i.CylinderGeometry(c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":s=new i.SphereGeometry(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"SphereBufferGeometry":s=new i.SphereBufferGeometry(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":s=new i.DodecahedronGeometry(c.radius,c.detail);break;case"IcosahedronGeometry":s=new i.IcosahedronGeometry(c.radius,c.detail);break;case"OctahedronGeometry":s=new i.OctahedronGeometry(c.radius,c.detail);break;case"TetrahedronGeometry":s=new i.TetrahedronGeometry(c.radius,c.detail);break;case"RingGeometry":s=new i.RingGeometry(c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":s=new i.TorusGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":s=new i.TorusKnotGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.p,c.q,c.heightScale);break;case"LatheGeometry":s=new i.LatheGeometry(c.points,c.segments,c.phiStart,c.phiLength);break;case"BufferGeometry":s=r.parse(c);break;case"Geometry":s=n.parse(c.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),e[c.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new i.MaterialLoader;r.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=r.parse(t[o]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=i.AnimationClip.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),s.load(t,function(){r.manager.itemEnd(t)})}var r=this,o={};if(void 0!==t&&t.length>0){var a=new i.LoadingManager(e),s=new i.ImageLoader(a);s.setCrossOrigin(this.crossOrigin);for(var c=0,l=t.length;c<l;c++){var u=t[c],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;o[u.uuid]=n(h)}}return o},parseTextures:function(t,e){function n(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),i[t])}var r={};if(void 0!==t)for(var o=0,a=t.length;o<a;o++){var s=t[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=new i.Texture(e[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=n(s.mapping)),void 0!==s.offset&&(c.offset=new i.Vector2(s.offset[0],s.offset[1])),void 0!==s.repeat&&(c.repeat=new i.Vector2(s.repeat[0],s.repeat[1])),void 0!==s.minFilter&&(c.minFilter=n(s.minFilter)),void 0!==s.magFilter&&(c.magFilter=n(s.magFilter)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),Array.isArray(s.wrap)&&(c.wrapS=n(s.wrap[0]),c.wrapT=n(s.wrap[1])),r[s.uuid]=c}return r},parseObject:function(){var t=new i.Matrix4;return function(e,n,r){function o(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function a(t){if(void 0!==t)return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}var s;switch(e.type){case"Scene":s=new i.Scene;break;case"PerspectiveCamera":s=new i.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);break;case"OrthographicCamera":s=new i.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new i.AmbientLight(e.color,e.intensity);break;case"DirectionalLight":s=new i.DirectionalLight(e.color,e.intensity);break;case"PointLight":s=new i.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new i.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);break;case"HemisphereLight":s=new i.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":var c=o(e.geometry),l=a(e.material);s=c.bones&&c.bones.length>0?new i.SkinnedMesh(c,l):new i.Mesh(c,l);break;case"LOD":s=new i.LOD;break;case"Line":s=new i.Line(o(e.geometry),a(e.material),e.mode);break;case"PointCloud":case"Points":s=new i.Points(o(e.geometry),a(e.material));break;case"Sprite":s=new i.Sprite(a(e.material));break;case"Group":s=new i.Group;break;default:s=new i.Object3D}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var u in e.children)s.add(this.parseObject(e.children[u],n,r));if("LOD"===e.type)for(var h=e.levels,p=0;p<h.length;p++){var d=h[p],u=s.getObjectByProperty("uuid",d.object);void 0!==u&&s.addLevel(u,d.distance)}return s}}()},i.TextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.TextureLoader.prototype={constructor:i.TextureLoader,load:function(t,e,n,r){var o=new i.Texture,a=new i.ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(t){o.image=t,o.needsUpdate=!0,void 0!==e&&e(o)},n,r),o},setCrossOrigin:function(t){this.crossOrigin=t},setPath:function(t){this.path=t}},i.CubeTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.CubeTextureLoader.prototype={constructor:i.CubeTextureLoader,load:function(t,e,n,r){function o(n){s.load(t[n],function(t){a.images[n]=t,c++,6===c&&(a.needsUpdate=!0,e&&e(a))},void 0,r)}var a=new i.CubeTexture([]),s=new i.ImageLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var c=0,l=0;l<t.length;++l)o(l);return a},setCrossOrigin:function(t){this.crossOrigin=t},setPath:function(t){this.path=t}},i.DataTextureLoader=i.BinaryTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this._parser=null},i.BinaryTextureLoader.prototype={constructor:i.BinaryTextureLoader,load:function(t,e,n,r){var o=this,a=new i.DataTexture,s=new i.XHRLoader(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=o._parser(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:i.ClampToEdgeWrapping,a.wrapT=void 0!==n.wrapT?n.wrapT:i.ClampToEdgeWrapping,a.magFilter=void 0!==n.magFilter?n.magFilter:i.LinearFilter,a.minFilter=void 0!==n.minFilter?n.minFilter:i.LinearMipMapLinearFilter,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=i.LinearFilter),a.needsUpdate=!0,e&&e(a,n))},n,r),a}},i.CompressedTextureLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this._parser=null},i.CompressedTextureLoader.prototype={constructor:i.CompressedTextureLoader,load:function(t,e,n,r){function o(o){l.load(t[o],function(t){var n=a._parser(t,!0);s[o]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(c.minFilter=i.LinearFilter),c.format=n.format,c.needsUpdate=!0,e&&e(c))},n,r)}var a=this,s=[],c=new i.CompressedTexture;c.image=s;var l=new i.XHRLoader(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,h=0,p=t.length;h<p;++h)o(h);else l.load(t,function(t){var n=a._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,o=0;o<r;o++){s[o]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+l]),s[o].format=n.format,s[o].width=n.width,s[o].height=n.height}else c.image.width=n.width,c.image.height=n.height,c.mipmaps=n.mipmaps;1===n.mipmapCount&&(c.minFilter=i.LinearFilter),c.format=n.format,c.needsUpdate=!0,e&&e(c)},n,r);return c},setPath:function(t){this.path=t}},i.Material=function(){Object.defineProperty(this,"id",{value:i.MaterialIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Material",this.side=i.FrontSide,this.opacity=1,this.transparent=!1,this.blending=i.NormalBlending,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},i.Material.prototype={constructor:i.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r?r instanceof i.Color?r.set(n):r instanceof i.Vector3&&n instanceof i.Vector3?r.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color instanceof i.Color&&(r.color=this.color.getHex()),.5!==this.roughness&&(r.roughness=this.roughness),.5!==this.metalness&&(r.metalness=this.metalness),this.emissive instanceof i.Color&&(r.emissive=this.emissive.getHex()),this.specular instanceof i.Color&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map instanceof i.Texture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap instanceof i.Texture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap instanceof i.Texture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap instanceof i.Texture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap instanceof i.Texture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap instanceof i.Texture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap instanceof i.Texture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap instanceof i.Texture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap instanceof i.Texture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap instanceof i.Texture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap instanceof i.Texture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==i.NoColors&&(r.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==i.SmoothShading&&(r.shading=this.shading),void 0!==this.blending&&this.blending!==i.NormalBlending&&(r.blending=this.blending),void 0!==this.side&&this.side!==i.FrontSide&&(r.side=this.side),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),n){var o=e(t.textures),a=e(t.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.side=t.side,this.opacity=t.opacity,this.transparent=t.transparent,this.blending=t.blending,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.overdraw=t.overdraw,this.visible=t.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Material.prototype),i.MaterialIdCount=0,i.LineBasicMaterial=function(t){i.Material.call(this),this.type="LineBasicMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=i.NoColors,this.fog=!0,this.setValues(t)},i.LineBasicMaterial.prototype=Object.create(i.Material.prototype),i.LineBasicMaterial.prototype.constructor=i.LineBasicMaterial,i.LineBasicMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.vertexColors=t.vertexColors,this.fog=t.fog,this},i.LineDashedMaterial=function(t){i.Material.call(this),this.type="LineDashedMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=i.NoColors,this.fog=!0,this.setValues(t)},i.LineDashedMaterial.prototype=Object.create(i.Material.prototype),i.LineDashedMaterial.prototype.constructor=i.LineDashedMaterial,i.LineDashedMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this.vertexColors=t.vertexColors,this.fog=t.fog,this},i.MeshBasicMaterial=function(t){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new i.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(t)},i.MeshBasicMaterial.prototype=Object.create(i.Material.prototype),i.MeshBasicMaterial.prototype.constructor=i.MeshBasicMaterial,i.MeshBasicMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},i.MeshLambertMaterial=function(t){i.Material.call(this),this.type="MeshLambertMaterial",this.color=new i.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshLambertMaterial.prototype=Object.create(i.Material.prototype),i.MeshLambertMaterial.prototype.constructor=i.MeshLambertMaterial,i.MeshLambertMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshPhongMaterial=function(t){i.Material.call(this),this.type="MeshPhongMaterial",this.color=new i.Color(16777215),this.specular=new i.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshPhongMaterial.prototype=Object.create(i.Material.prototype),i.MeshPhongMaterial.prototype.constructor=i.MeshPhongMaterial,i.MeshPhongMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshStandardMaterial=function(t){i.Material.call(this),this.type="MeshStandardMaterial",this.color=new i.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},i.MeshStandardMaterial.prototype=Object.create(i.Material.prototype),i.MeshStandardMaterial.prototype.constructor=i.MeshStandardMaterial,i.MeshStandardMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},i.MeshDepthMaterial=function(t){i.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)},i.MeshDepthMaterial.prototype=Object.create(i.Material.prototype),i.MeshDepthMaterial.prototype.constructor=i.MeshDepthMaterial,i.MeshDepthMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},i.MeshNormalMaterial=function(t){i.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},i.MeshNormalMaterial.prototype=Object.create(i.Material.prototype),i.MeshNormalMaterial.prototype.constructor=i.MeshNormalMaterial,i.MeshNormalMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},i.MultiMaterial=function(t){this.uuid=i.Math.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0},i.MultiMaterial.prototype={constructor:i.MultiMaterial,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(t);delete o.metadata,e.materials.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},i.PointsMaterial=function(t){i.Material.call(this),this.type="PointsMaterial",this.color=new i.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=i.NoColors,this.fog=!0,this.setValues(t)},i.PointsMaterial.prototype=Object.create(i.Material.prototype),i.PointsMaterial.prototype.constructor=i.PointsMaterial,i.PointsMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.vertexColors=t.vertexColors,this.fog=t.fog,this},i.ShaderMaterial=function(t){i.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=i.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,
void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))},i.ShaderMaterial.prototype=Object.create(i.Material.prototype),i.ShaderMaterial.prototype.constructor=i.ShaderMaterial,i.ShaderMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=i.UniformsUtils.clone(t.uniforms),this.defines=t.defines,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},i.ShaderMaterial.prototype.toJSON=function(t){var e=i.Material.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},i.RawShaderMaterial=function(t){i.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},i.RawShaderMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.RawShaderMaterial.prototype.constructor=i.RawShaderMaterial,i.SpriteMaterial=function(t){i.Material.call(this),this.type="SpriteMaterial",this.color=new i.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(t)},i.SpriteMaterial.prototype=Object.create(i.Material.prototype),i.SpriteMaterial.prototype.constructor=i.SpriteMaterial,i.SpriteMaterial.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.fog=t.fog,this},i.Texture=function(t,e,n,r,o,a,s,c,l){Object.defineProperty(this,"id",{value:i.TextureIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:i.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:i.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:i.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:i.ClampToEdgeWrapping,this.magFilter=void 0!==o?o:i.LinearFilter,this.minFilter=void 0!==a?a:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:i.RGBAFormat,this.type=void 0!==c?c:i.UnsignedByteType,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},i.Texture.DEFAULT_IMAGE=void 0,i.Texture.DEFAULT_MAPPING=i.UVMapping,i.Texture.prototype={constructor:i.Texture,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=i.Math.generateUUID()),void 0===t.images[r.uuid]&&(t.images[r.uuid]={uuid:r.uuid,url:e(r)}),n.image=r.uuid}return t.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===i.UVMapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case i.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case i.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case i.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case i.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},i.EventDispatcher.prototype.apply(i.Texture.prototype),i.TextureIdCount=0,i.CanvasTexture=function(t,e,n,r,o,a,s,c,l){i.Texture.call(this,t,e,n,r,o,a,s,c,l),this.needsUpdate=!0},i.CanvasTexture.prototype=Object.create(i.Texture.prototype),i.CanvasTexture.prototype.constructor=i.CanvasTexture,i.CubeTexture=function(t,e,n,r,o,a,s,c,l){e=void 0!==e?e:i.CubeReflectionMapping,i.Texture.call(this,t,e,n,r,o,a,s,c,l),this.images=t,this.flipY=!1},i.CubeTexture.prototype=Object.create(i.Texture.prototype),i.CubeTexture.prototype.constructor=i.CubeTexture,i.CubeTexture.prototype.copy=function(t){return i.Texture.prototype.copy.call(this,t),this.images=t.images,this},i.CompressedTexture=function(t,e,n,r,o,a,s,c,l,u,h){i.Texture.call(this,null,a,s,c,l,u,r,o,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},i.CompressedTexture.prototype=Object.create(i.Texture.prototype),i.CompressedTexture.prototype.constructor=i.CompressedTexture,i.DataTexture=function(t,e,n,r,o,a,s,c,l,u,h){i.Texture.call(this,null,a,s,c,l,u,r,o,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:i.NearestFilter,this.minFilter=void 0!==u?u:i.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},i.DataTexture.prototype=Object.create(i.Texture.prototype),i.DataTexture.prototype.constructor=i.DataTexture,i.VideoTexture=function(t,e,n,r,o,a,s,c,l){function u(){requestAnimationFrame(u),t.readyState===t.HAVE_ENOUGH_DATA&&(h.needsUpdate=!0)}i.Texture.call(this,t,e,n,r,o,a,s,c,l),this.generateMipmaps=!1;var h=this;u()},i.VideoTexture.prototype=Object.create(i.Texture.prototype),i.VideoTexture.prototype.constructor=i.VideoTexture,i.Group=function(){i.Object3D.call(this),this.type="Group"},i.Group.prototype=Object.create(i.Object3D.prototype),i.Group.prototype.constructor=i.Group,i.Points=function(t,e){i.Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new i.Geometry,this.material=void 0!==e?e:new i.PointsMaterial({color:16777215*Math.random()})},i.Points.prototype=Object.create(i.Object3D.prototype),i.Points.prototype.constructor=i.Points,i.Points.prototype.raycast=function(){var t=new i.Matrix4,e=new i.Ray,n=new i.Sphere;return function(r,o){function a(t,n){var i=e.distanceSqToPoint(t);if(i<p){var a=e.closestPointToPoint(t);a.applyMatrix4(l);var c=r.ray.origin.distanceTo(a);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(i),point:a.clone(),index:n,face:null,object:s})}}var s=this,c=this.geometry,l=this.matrixWorld,u=r.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,d=new i.Vector3;if(c instanceof i.BufferGeometry){var f=c.index,m=c.attributes,v=m.position.array;if(null!==f)for(var y=f.array,g=0,x=y.length;g<x;g++){var _=y[g];d.fromArray(v,3*_),a(d,_)}else for(var g=0,b=v.length/3;g<b;g++)d.fromArray(v,3*g),a(d,g)}else for(var w=c.vertices,g=0,b=w.length;g<b;g++)a(w[g],g)}}}(),i.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.Line=function(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new i.LineSegments(t,e)):(i.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new i.Geometry,void(this.material=void 0!==e?e:new i.LineBasicMaterial({color:16777215*Math.random()})))},i.Line.prototype=Object.create(i.Object3D.prototype),i.Line.prototype.constructor=i.Line,i.Line.prototype.raycast=function(){var t=new i.Matrix4,e=new i.Ray,n=new i.Sphere;return function(r,o){var a=r.linePrecision,s=a*a,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var u=new i.Vector3,h=new i.Vector3,p=new i.Vector3,d=new i.Vector3,f=this instanceof i.LineSegments?2:1;if(c instanceof i.BufferGeometry){var m=c.index,v=c.attributes,y=v.position.array;if(null!==m)for(var g=m.array,x=0,_=g.length-1;x<_;x+=f){var b=g[x],w=g[x+1];u.fromArray(y,3*b),h.fromArray(y,3*w);var E=e.distanceSqToSegment(u,h,d,p);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||o.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(var x=0,_=y.length/3-1;x<_;x+=f){u.fromArray(y,3*x),h.fromArray(y,3*x+3);var E=e.distanceSqToSegment(u,h,d,p);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||o.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(c instanceof i.Geometry)for(var M=c.vertices,A=M.length,x=0;x<A-1;x+=f){var E=e.distanceSqToSegment(M[x],M[x+1],d,p);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(d);S<r.near||S>r.far||o.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}}(),i.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.LineStrip=0,i.LinePieces=1,i.LineSegments=function(t,e){i.Line.call(this,t,e),this.type="LineSegments"},i.LineSegments.prototype=Object.create(i.Line.prototype),i.LineSegments.prototype.constructor=i.LineSegments,i.Mesh=function(t,e){i.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new i.Geometry,this.material=void 0!==e?e:new i.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=i.TrianglesDrawMode,this.updateMorphTargets()},i.Mesh.prototype=Object.create(i.Object3D.prototype),i.Mesh.prototype.constructor=i.Mesh,i.Mesh.prototype.setDrawMode=function(t){this.drawMode=t},i.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;t<e;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},i.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},i.Mesh.prototype.raycast=function(){function t(t,e,n,r,o,a,s){return i.Triangle.barycoordFromPoint(t,e,n,r,v),o.multiplyScalar(v.x),a.multiplyScalar(v.y),s.multiplyScalar(v.z),o.add(a).add(s),o.clone()}function e(t,e,n,r,o,a,s){var c,l=t.material;if(c=l.side===i.BackSide?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,l.side!==i.DoubleSide,s),null===c)return null;g.copy(s),g.applyMatrix4(t.matrixWorld);var u=e.ray.origin.distanceTo(g);return u<e.near||u>e.far?null:{distance:u,point:g.clone(),object:t}}function n(n,r,o,a,u,h,p,v){s.fromArray(a,3*h),c.fromArray(a,3*p),l.fromArray(a,3*v);var g=e(n,r,o,s,c,l,y);return g&&(u&&(d.fromArray(u,2*h),f.fromArray(u,2*p),m.fromArray(u,2*v),g.uv=t(y,s,c,l,d,f,m)),g.face=new i.Face3(h,p,v,i.Triangle.normal(s,c,l)),g.faceIndex=h),g}var r=new i.Matrix4,o=new i.Ray,a=new i.Sphere,s=new i.Vector3,c=new i.Vector3,l=new i.Vector3,u=new i.Vector3,h=new i.Vector3,p=new i.Vector3,d=new i.Vector2,f=new i.Vector2,m=new i.Vector2,v=new i.Vector3,y=new i.Vector3,g=new i.Vector3;return function(v,g){var x=this.geometry,_=this.material,b=this.matrixWorld;if(void 0!==_&&(null===x.boundingSphere&&x.computeBoundingSphere(),a.copy(x.boundingSphere),a.applyMatrix4(b),v.ray.intersectsSphere(a)!==!1&&(r.getInverse(b),o.copy(v.ray).applyMatrix4(r),null===x.boundingBox||o.intersectsBox(x.boundingBox)!==!1))){var w,E;if(x instanceof i.BufferGeometry){var S,M,A,C=x.index,T=x.attributes,N=T.position.array;if(void 0!==T.uv&&(w=T.uv.array),null!==C)for(var R=C.array,O=0,L=R.length;O<L;O+=3)S=R[O],M=R[O+1],A=R[O+2],E=n(this,v,o,N,w,S,M,A),E&&(E.faceIndex=Math.floor(O/3),g.push(E));else for(var O=0,L=N.length;O<L;O+=9)S=O/3,M=S+1,A=S+2,E=n(this,v,o,N,w,S,M,A),E&&(E.index=S,g.push(E))}else if(x instanceof i.Geometry){var P,k,D,I=_ instanceof i.MultiMaterial,q=I===!0?_.materials:null,B=x.vertices,V=x.faces,F=x.faceVertexUvs[0];F.length>0&&(w=F);for(var z=0,U=V.length;z<U;z++){var j=V[z],H=I===!0?q[j.materialIndex]:_;if(void 0!==H){if(P=B[j.a],k=B[j.b],D=B[j.c],H.morphTargets===!0){var G=x.morphTargets,W=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),l.set(0,0,0);for(var X=0,Z=G.length;X<Z;X++){var K=W[X];if(0!==K){var Y=G[X].vertices;s.addScaledVector(u.subVectors(Y[j.a],P),K),c.addScaledVector(h.subVectors(Y[j.b],k),K),l.addScaledVector(p.subVectors(Y[j.c],D),K)}}s.add(P),c.add(k),l.add(D),P=s,k=c,D=l}if(E=e(this,v,o,P,k,D,y)){if(w){var Q=w[z];d.copy(Q[0]),f.copy(Q[1]),m.copy(Q[2]),E.uv=t(y,P,k,D,d,f,m)}E.face=j,E.faceIndex=z,g.push(E)}}}}}}}(),i.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.Bone=function(t){i.Object3D.call(this),this.type="Bone",this.skin=t},i.Bone.prototype=Object.create(i.Object3D.prototype),i.Bone.prototype.constructor=i.Bone,i.Bone.prototype.copy=function(t){return i.Object3D.prototype.copy.call(this,t),this.skin=t.skin,this},i.Skeleton=function(t,e,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new i.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=i.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new i.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,i.RGBAFormat,i.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var o=0,a=this.bones.length;o<a;o++)this.boneInverses.push(new i.Matrix4)}},i.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new i.Matrix4;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},i.Skeleton.prototype.pose=function(){for(var t,e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},i.Skeleton.prototype.update=function(){var t=new i.Matrix4;return function(){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(r,this.boneInverses[e]),t.flattenToArrayOffset(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),i.Skeleton.prototype.clone=function(){return new i.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},i.SkinnedMesh=function(t,e,n){i.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i.Matrix4,this.bindMatrixInverse=new i.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var o,a,s=0,c=this.geometry.bones.length;s<c;++s)a=this.geometry.bones[s],o=new i.Bone(this),r.push(o),o.name=a.name,o.position.fromArray(a.pos),o.quaternion.fromArray(a.rotq),void 0!==a.scl&&o.scale.fromArray(a.scl);for(var s=0,c=this.geometry.bones.length;s<c;++s)a=this.geometry.bones[s],a.parent!==-1&&null!==a.parent?r[a.parent].add(r[s]):this.add(r[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new i.Skeleton(r,(void 0),n),this.matrixWorld)},i.SkinnedMesh.prototype=Object.create(i.Mesh.prototype),i.SkinnedMesh.prototype.constructor=i.SkinnedMesh,i.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},i.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},i.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof i.Geometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry instanceof i.BufferGeometry)for(var r=new i.Vector4,o=this.geometry.attributes.skinWeight,t=0;t<o.count;t++){r.x=o.getX(t),r.y=o.getY(t),r.z=o.getZ(t),r.w=o.getW(t);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),o.setXYZW(t,r.x,r.y,r.z,r.w)}},i.SkinnedMesh.prototype.updateMatrixWorld=function(t){i.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},i.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},i.LOD=function(){i.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},i.LOD.prototype=Object.create(i.Object3D.prototype),i.LOD.prototype.constructor=i.LOD,i.LOD.prototype.addLevel=function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},i.LOD.prototype.getObjectForDistance=function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},i.LOD.prototype.raycast=function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),i.LOD.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),i.LOD.prototype.copy=function(t){i.Object3D.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var o=e[n];this.addLevel(o.object.clone(),o.distance)}return this},i.LOD.prototype.toJSON=function(t){var e=i.Object3D.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,o=n.length;r<o;r++){var a=n[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e},i.Sprite=function(){var t=new Uint16Array([0,1,2,0,2,3]),e=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new i.BufferGeometry;return r.setIndex(new i.BufferAttribute(t,1)),r.addAttribute("position",new i.BufferAttribute(e,3)),r.addAttribute("uv",new i.BufferAttribute(n,2)),function(t){i.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==t?t:new i.SpriteMaterial}}(),i.Sprite.prototype=Object.create(i.Object3D.prototype),i.Sprite.prototype.constructor=i.Sprite,i.Sprite.prototype.raycast=function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceSqToPoint(t),i=this.scale.x*this.scale.y;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),i.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},i.Particle=i.Sprite,i.LensFlare=function(t,e,n,r,o){i.Object3D.call(this),this.lensFlares=[],this.positionScreen=new i.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,r,o)},i.LensFlare.prototype=Object.create(i.Object3D.prototype),i.LensFlare.prototype.constructor=i.LensFlare,i.LensFlare.prototype.add=function(t,e,n,r,o,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===o&&(o=new i.Color(16777215)),void 0===r&&(r=i.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:o,blending:r})},i.LensFlare.prototype.updateLensFlares=function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},i.LensFlare.prototype.copy=function(t){i.Object3D.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},i.Scene=function(){i.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},i.Scene.prototype=Object.create(i.Object3D.prototype),i.Scene.prototype.constructor=i.Scene,i.Scene.prototype.copy=function(t){return i.Object3D.prototype.copy.call(this,t),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},i.Fog=function(t,e,n){this.name="",this.color=new i.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3},i.Fog.prototype.clone=function(){return new i.Fog(this.color.getHex(),this.near,this.far)},i.FogExp2=function(t,e){this.name="",this.color=new i.Color(t),this.density=void 0!==e?e:25e-5},i.FogExp2.prototype.clone=function(){return new i.FogExp2(this.color.getHex(),this.density)},i.ShaderChunk={},i.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",i.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",i.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",i.ShaderChunk.ambient_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\treturn PI * ambientLightColor;\n}\n",i.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\treflectedLight.indirectDiffuse *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n#endif\n",i.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",i.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",i.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",i.ShaderChunk.bsdfs="float calcLightAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif ( decayExponent > 0.0 ) {\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = alpha * alpha;\n\tfloat gl = dotNL + pow( a2 + ( 1.0 - a2 ) * dotNL * dotNL, 0.5 );\n\tfloat gv = dotNV + pow( a2 + ( 1.0 - a2 ) * dotNV * dotNV, 0.5 );\n\treturn 1.0 / ( gl * gv );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = alpha * alpha;\n\tfloat denom = dotNH * dotNH * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / ( denom * denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = roughness * roughness;\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_Smith( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / square( ggxRoughness + 0.0001 ) - 2.0 );\n}",i.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",i.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",i.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",i.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",i.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",i.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat square( const in float x ) { return x*x; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nvec3 inputToLinear( in vec3 a ) {\n\t#ifdef GAMMA_INPUT\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n\t#ifdef GAMMA_OUTPUT\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\n",i.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",i.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",i.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",i.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\ttotalEmissiveLight *= emissiveColor.rgb;\n#endif\n",i.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",i.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
i.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( STANDARD )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",i.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvarying vec3 vReflect;\n\tuniform float refractionRatio;\n#endif\n",i.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t#ifdef ENVMAP_MODE_REFLECTION\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t#else\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t#endif\n#endif\n",i.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n#endif",i.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",i.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",i.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",i.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tdirectLight = getPointDirectLight( pointLights[ i ], geometry );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tdirectLight = getSpotDirectLight( spotLights[ i ], geometry );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectLight = getDirectionalDirectLight( directionalLights[ i ], geometry );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",i.ShaderChunk.lights_pars="#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tIncidentLight getDirectionalDirectLight( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\n\t\tIncidentLight directLight;\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\treturn directLight;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tIncidentLight getPointDirectLight( const in PointLight pointLight, const in GeometricContext geometry ) {\n\t\tIncidentLight directLight;\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= calcLightAttenuation( length( lVector ), pointLight.distance, pointLight.decay );\n\t\treturn directLight;\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat angleCos;\n\t\tfloat exponent;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tIncidentLight getSpotDirectLight( const in SpotLight spotLight, const in GeometricContext geometry ) {\n\t\tIncidentLight directLight;\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat spotEffect = dot( directLight.direction, spotLight.direction );\n\t\tif ( spotEffect > spotLight.angleCos ) {\n\t\t\tfloat spotEffect = dot( spotLight.direction, directLight.direction );\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLight.exponent ) );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= ( spotEffect * calcLightAttenuation( length( lVector ), spotLight.distance, spotLight.decay ) );\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t}\n\t\treturn directLight;\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\treturn PI * mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( STANDARD )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t#else\n\t\t\tvec3 envMapColor = vec3( 0.0 );\n\t\t#endif\n\t\tenvMapColor.rgb = inputToLinear( envMapColor.rgb );\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( square( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal = 1.0;\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t#endif\n\t\tenvMapColor.rgb = inputToLinear( envMapColor.rgb );\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",i.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",i.ShaderChunk.lights_phong_pars_fragment="#ifdef USE_ENVMAP\n\tvarying vec3 vWorldPosition;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * PI * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",i.ShaderChunk.lights_phong_pars_vertex="#ifdef USE_ENVMAP\n\tvarying vec3 vWorldPosition;\n#endif\n",i.ShaderChunk.lights_phong_vertex="#ifdef USE_ENVMAP\n\tvWorldPosition = worldPosition.xyz;\n#endif\n",i.ShaderChunk.lights_standard_fragment="StandardMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n",i.ShaderChunk.lights_standard_pars_fragment="struct StandardMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n};\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * PI * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Standard\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Standard\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Standard\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n",i.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tdirectLight = getPointDirectLight( pointLight, geometry );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tdirectLight = getSpotDirectLight( spotLight, geometry );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tdirectLight = getDirectionalDirectLight( directionalLight, geometry );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tirradiance += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n",i.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n",i.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",i.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",i.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",i.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",i.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\tdiffuseColor *= texelColor;\n#endif\n",i.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",i.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n#endif\n",i.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",i.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",i.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",i.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",i.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",i.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",i.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",i.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",i.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",i.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",i.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",i.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\treturn dot( rgba_depth, bit_shift );\n\t}\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec3 offset = vec3( - 1, 0, 1 ) * shadowRadius * 2.0 * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zzy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xzy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zyz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.zyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yzz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxz, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yzx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 21.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",i.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",i.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",i.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",i.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
i.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",i.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",i.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",i.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",i.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",i.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",i.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",i.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",i.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",i.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",i.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",i.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",i.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var o=t[n][r];o instanceof i.Color||o instanceof i.Vector2||o instanceof i.Vector3||o instanceof i.Vector4||o instanceof i.Matrix3||o instanceof i.Matrix4||o instanceof i.Texture?e[n][r]=o.clone():Array.isArray(o)?e[n][r]=o.slice():e[n][r]=o}}return e}},i.UniformsLib={common:{diffuse:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new i.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},ambient:{ambientLightColor:{type:"fv",value:[]}},lights:{directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},distance:{type:"f"},angleCos:{type:"f"},exponent:{type:"f"},decay:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"f"},distance:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)}}},i.ShaderLib={basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.fog]),vertexShader:[i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"\t#endif",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,"\tReflectedLight reflectedLight;","\treflectedLight.directDiffuse = vec3( 0.0 );","\treflectedLight.directSpecular = vec3( 0.0 );","\treflectedLight.indirectDiffuse = diffuseColor.rgb;","\treflectedLight.indirectSpecular = vec3( 0.0 );",i.ShaderChunk.aomap_fragment,"\tvec3 outgoingLight = reflectedLight.indirectDiffuse;",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.fog,i.UniformsLib.ambient,i.UniformsLib.lights,{emissive:{type:"c",value:new i.Color(0)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.bsdfs,i.ShaderChunk.lights_pars,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_lambert_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.emissivemap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.bsdfs,i.ShaderChunk.ambient_pars,i.ShaderChunk.lights_pars,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.shadowmask_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveLight = emissive;",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.emissivemap_fragment,"\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",i.ShaderChunk.lightmap_fragment,"\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );","\t#ifdef DOUBLE_SIDED","\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;","\t#else","\t\treflectedLight.directDiffuse = vLightFront;","\t#endif","\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();",i.ShaderChunk.aomap_fragment,"\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveLight;",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.bumpmap,i.UniformsLib.normalmap,i.UniformsLib.displacementmap,i.UniformsLib.fog,i.UniformsLib.ambient,i.UniformsLib.lights,{emissive:{type:"c",value:new i.Color(0)},specular:{type:"c",value:new i.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.displacementmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_phong_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif",i.ShaderChunk.begin_vertex,i.ShaderChunk.displacementmap_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_phong_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.emissivemap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.bsdfs,i.ShaderChunk.ambient_pars,i.ShaderChunk.lights_pars,i.ShaderChunk.lights_phong_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.bumpmap_pars_fragment,i.ShaderChunk.normalmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveLight = emissive;",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.normal_fragment,i.ShaderChunk.emissivemap_fragment,i.ShaderChunk.lights_phong_fragment,i.ShaderChunk.lights_template,i.ShaderChunk.aomap_fragment,"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},standard:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.bumpmap,i.UniformsLib.normalmap,i.UniformsLib.displacementmap,i.UniformsLib.roughnessmap,i.UniformsLib.metalnessmap,i.UniformsLib.fog,i.UniformsLib.ambient,i.UniformsLib.lights,{emissive:{type:"c",value:new i.Color(0)},roughness:{type:"f",value:.5},metalness:{type:"f",value:0},envMapIntensity:{type:"f",value:1}}]),vertexShader:["#define STANDARD","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.displacementmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif",i.ShaderChunk.begin_vertex,i.ShaderChunk.displacementmap_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define STANDARD","uniform vec3 diffuse;","uniform vec3 emissive;","uniform float roughness;","uniform float metalness;","uniform float opacity;","uniform float envMapIntensity;","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.emissivemap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.bsdfs,i.ShaderChunk.ambient_pars,i.ShaderChunk.lights_pars,i.ShaderChunk.lights_standard_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.bumpmap_pars_fragment,i.ShaderChunk.normalmap_pars_fragment,i.ShaderChunk.roughnessmap_pars_fragment,i.ShaderChunk.metalnessmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveLight = emissive;",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.roughnessmap_fragment,i.ShaderChunk.metalnessmap_fragment,i.ShaderChunk.normal_fragment,i.ShaderChunk.emissivemap_fragment,i.ShaderChunk.lights_standard_fragment,i.ShaderChunk.lights_template,i.ShaderChunk.aomap_fragment,"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;",i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},points:{uniforms:i.UniformsUtils.merge([i.UniformsLib.points,i.UniformsLib.fog]),vertexShader:["uniform float size;","uniform float scale;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.project_vertex,"\t#ifdef USE_SIZEATTENUATION","\t\tgl_PointSize = size * ( scale / - mvPosition.z );","\t#else","\t\tgl_PointSize = size;","\t#endif",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_particle_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_particle_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphatest_fragment,"\toutgoingLight = diffuseColor.rgb;",i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tif ( mod( vLineDistance, totalSize ) > dashSize ) {","\t\tdiscard;","\t}","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",i.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",i.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );","\tgl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvNormal = normalize( normalMatrix * normal );",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","\tres -= res.xxyz * bit_mask;","\treturn res;","}","void main() {",i.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","\t#else","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","\t#endif","}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new i.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;","}"].join("\n"),fragmentShader:["uniform vec3 lightPos;","varying vec4 vWorldPosition;",i.ShaderChunk.common,"vec4 pack1K ( float depth ) {","\tdepth /= 1000.0;","\tconst vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","\tvec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","\tres -= res.xxyz * bitMsk;","\treturn res; ","}","float unpack1K ( vec4 color ) {","\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","\treturn dot( color, bitSh ) * 1000.0;","}","void main () {","\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );","}"].join("\n")}},i.WebGLRenderer=function(t){function e(){return null===gt?Ot:1}function n(t,e,n,r){at===!0&&(t*=r,e*=r,n*=r),Wt.clearColor(t,e,n,r)}function r(){Wt.init(),Wt.scissor(Et.copy(Lt).multiplyScalar(Ot)),Wt.viewport(Mt.copy(kt).multiplyScalar(Ot)),n(Ct.r,Ct.g,Ct.b,Tt)}function o(){yt=null,wt=null,bt="",_t=-1,Wt.reset()}function a(t){t.preventDefault(),o(),r(),Xt.clear()}function s(t){var e=t.target;e.removeEventListener("dispose",s),u(e),Vt.textures--}function c(t){var e=t.target;e.removeEventListener("dispose",c),h(e),Vt.textures--}function l(t){var e=t.target;e.removeEventListener("dispose",l),p(e)}function u(t){var e=Xt.get(t);if(t.image&&e.__image__webglTextureCube)zt.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)return;zt.deleteTexture(e.__webglTexture)}Xt["delete"](t)}function h(t){var e=Xt.get(t),n=Xt.get(t.texture);if(t&&void 0!==n.__webglTexture){if(zt.deleteTexture(n.__webglTexture),t instanceof i.WebGLRenderTargetCube)for(var r=0;r<6;r++)zt.deleteFramebuffer(e.__webglFramebuffer[r]),zt.deleteRenderbuffer(e.__webglDepthbuffer[r]);else zt.deleteFramebuffer(e.__webglFramebuffer),zt.deleteRenderbuffer(e.__webglDepthbuffer);Xt["delete"](t.texture),Xt["delete"](t)}}function p(t){d(t),Xt["delete"](t)}function d(t){var e=Xt.get(t).program;t.program=void 0,void 0!==e&&Kt.releaseProgram(e)}function f(t,e,n,r){var o;if(n instanceof i.InstancedBufferGeometry&&(o=Ht.get("ANGLE_instanced_arrays"),null===o))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Wt.initAttributes();var a=n.attributes,s=e.getAttributes(),c=t.defaultAttributeValues;for(var l in s){var u=s[l];if(u>=0){var h=a[l];if(void 0!==h){var p=h.itemSize,d=Zt.getAttributeBuffer(h);if(h instanceof i.InterleavedBufferAttribute){var f=h.data,m=f.stride,v=h.offset;f instanceof i.InstancedInterleavedBuffer?(Wt.enableAttributeAndDivisor(u,f.meshPerAttribute,o),void 0===n.maxInstancedCount&&(n.maxInstancedCount=f.meshPerAttribute*f.count)):Wt.enableAttribute(u),zt.bindBuffer(zt.ARRAY_BUFFER,d),zt.vertexAttribPointer(u,p,zt.FLOAT,!1,m*f.array.BYTES_PER_ELEMENT,(r*m+v)*f.array.BYTES_PER_ELEMENT)}else h instanceof i.InstancedBufferAttribute?(Wt.enableAttributeAndDivisor(u,h.meshPerAttribute,o),void 0===n.maxInstancedCount&&(n.maxInstancedCount=h.meshPerAttribute*h.count)):Wt.enableAttribute(u),zt.bindBuffer(zt.ARRAY_BUFFER,d),zt.vertexAttribPointer(u,p,zt.FLOAT,!1,0,r*p*4)}else if(void 0!==c){var y=c[l];if(void 0!==y)switch(y.length){case 2:zt.vertexAttrib2fv(u,y);break;case 3:zt.vertexAttrib3fv(u,y);break;case 4:zt.vertexAttrib4fv(u,y);break;default:zt.vertexAttrib1fv(u,y)}}}}Wt.disableUnusedAttributes()}function m(t,e){return Math.abs(e[0])-Math.abs(t[0])}function v(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function y(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function g(t,e,n,r,i){var o,a;n.transparent?(o=ht,a=++pt):(o=lt,a=++ut);var s=o[a];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.z=qt.z,s.group=i):(s={id:t.id,object:t,geometry:e,material:n,z:qt.z,group:i},o.push(s))}function x(t,e){if(t.visible!==!1){if(t.layers.test(e.layers))if(t instanceof i.Light)ct.push(t);else if(t instanceof i.Sprite)t.frustumCulled!==!1&&Dt.intersectsObject(t)!==!0||ft.push(t);else if(t instanceof i.LensFlare)mt.push(t);else if(t instanceof i.ImmediateRenderObject)vt.sortObjects===!0&&(qt.setFromMatrixPosition(t.matrixWorld),qt.applyProjection(It)),g(t,null,t.material,qt.z,null);else if((t instanceof i.Mesh||t instanceof i.Line||t instanceof i.Points)&&(t instanceof i.SkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||Dt.intersectsObject(t)===!0)){var n=t.material;if(n.visible===!0){vt.sortObjects===!0&&(qt.setFromMatrixPosition(t.matrixWorld),qt.applyProjection(It));var r=Zt.update(t);if(n instanceof i.MultiMaterial)for(var o=r.groups,a=n.materials,s=0,c=o.length;s<c;s++){var l=o[s],u=a[l.materialIndex];u.visible===!0&&g(t,r,u,qt.z,l)}else g(t,r,n,qt.z,null)}}for(var h=t.children,s=0,c=h.length;s<c;s++)x(h[s],e)}}function _(t,e,n,r){for(var o=0,a=t.length;o<a;o++){var s=t[o],c=s.object,l=s.geometry,u=void 0===r?s.material:r,h=s.group;if(c.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,c.matrixWorld),c.normalMatrix.getNormalMatrix(c.modelViewMatrix),c instanceof i.ImmediateRenderObject){w(u);var p=S(e,n,u,c);bt="",c.render(function(t){vt.renderBufferImmediate(t,p,u)})}else vt.renderBufferDirect(e,n,l,u,c,h)}}function b(t,e,n){var r=Xt.get(t),o=Kt.getParameters(t,Bt,e,n),a=Kt.getProgramCode(t,o),s=r.program,c=!0;if(void 0===s)t.addEventListener("dispose",l);else if(s.code!==a)d(t);else{if(void 0!==o.shaderID)return;c=!1}if(c){if(o.shaderID){var u=i.ShaderLib[o.shaderID];r.__webglShader={name:t.type,uniforms:i.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else r.__webglShader={
name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=r.__webglShader,s=Kt.acquireProgram(t,o,a),r.program=s,t.program=s}var h=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<vt.maxMorphTargets;p++)h["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<vt.maxMorphNormals;p++)h["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}r.uniformsList=[];var f=r.__webglShader.uniforms,m=r.program.getUniforms();for(var v in f){var y=m[v];y&&r.uniformsList.push([r.__webglShader.uniforms[v],y])}(t instanceof i.MeshPhongMaterial||t instanceof i.MeshLambertMaterial||t instanceof i.MeshStandardMaterial||t.lights)&&(r.lightsHash=Bt.hash,f.ambientLightColor.value=Bt.ambient,f.directionalLights.value=Bt.directional,f.spotLights.value=Bt.spot,f.pointLights.value=Bt.point,f.hemisphereLights.value=Bt.hemi,f.directionalShadowMap.value=Bt.directionalShadowMap,f.directionalShadowMatrix.value=Bt.directionalShadowMatrix,f.spotShadowMap.value=Bt.spotShadowMap,f.spotShadowMatrix.value=Bt.spotShadowMatrix,f.pointShadowMap.value=Bt.pointShadowMap,f.pointShadowMatrix.value=Bt.pointShadowMatrix),r.hasDynamicUniforms=!1;for(var g=0,x=r.uniformsList.length;g<x;g++){var _=r.uniformsList[g][0];if(_.dynamic===!0){r.hasDynamicUniforms=!0;break}}}function w(t){E(t),t.transparent===!0?Wt.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha):Wt.setBlending(i.NoBlending),Wt.setDepthFunc(t.depthFunc),Wt.setDepthTest(t.depthTest),Wt.setDepthWrite(t.depthWrite),Wt.setColorWrite(t.colorWrite),Wt.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function E(t){t.side!==i.DoubleSide?Wt.enable(zt.CULL_FACE):Wt.disable(zt.CULL_FACE),Wt.setFlipSided(t.side===i.BackSide)}function S(t,e,n,r){At=0;var o=Xt.get(n);void 0===o.program&&(n.needsUpdate=!0),void 0!==o.lightsHash&&o.lightsHash!==Bt.hash&&(n.needsUpdate=!0),n.needsUpdate&&(b(n,e,r),n.needsUpdate=!1);var a=!1,s=!1,c=!1,l=o.program,u=l.getUniforms(),h=o.__webglShader.uniforms;if(l.id!==yt&&(zt.useProgram(l.program),yt=l.id,a=!0,s=!0,c=!0),n.id!==_t&&(_t=n.id,s=!0),(a||t!==wt)&&(zt.uniformMatrix4fv(u.projectionMatrix,!1,t.projectionMatrix.elements),Gt.logarithmicDepthBuffer&&zt.uniform1f(u.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==wt&&(wt=t,s=!0,c=!0),(n instanceof i.ShaderMaterial||n instanceof i.MeshPhongMaterial||n instanceof i.MeshStandardMaterial||n.envMap)&&void 0!==u.cameraPosition&&(qt.setFromMatrixPosition(t.matrixWorld),zt.uniform3f(u.cameraPosition,qt.x,qt.y,qt.z)),(n instanceof i.MeshPhongMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshBasicMaterial||n instanceof i.MeshStandardMaterial||n instanceof i.ShaderMaterial||n.skinning)&&void 0!==u.viewMatrix&&zt.uniformMatrix4fv(u.viewMatrix,!1,t.matrixWorldInverse.elements)),n.skinning)if(r.bindMatrix&&void 0!==u.bindMatrix&&zt.uniformMatrix4fv(u.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&void 0!==u.bindMatrixInverse&&zt.uniformMatrix4fv(u.bindMatrixInverse,!1,r.bindMatrixInverse.elements),Gt.floatVertexTextures&&r.skeleton&&r.skeleton.useVertexTexture){if(void 0!==u.boneTexture){var p=I();zt.uniform1i(u.boneTexture,p),vt.setTexture(r.skeleton.boneTexture,p)}void 0!==u.boneTextureWidth&&zt.uniform1i(u.boneTextureWidth,r.skeleton.boneTextureWidth),void 0!==u.boneTextureHeight&&zt.uniform1i(u.boneTextureHeight,r.skeleton.boneTextureHeight)}else r.skeleton&&r.skeleton.boneMatrices&&void 0!==u.boneGlobalMatrices&&zt.uniformMatrix4fv(u.boneGlobalMatrices,!1,r.skeleton.boneMatrices);return s&&((n instanceof i.MeshPhongMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshStandardMaterial||n.lights)&&k(h,c),e&&n.fog&&R(h,e),(n instanceof i.MeshBasicMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshPhongMaterial||n instanceof i.MeshStandardMaterial)&&A(h,n),n instanceof i.LineBasicMaterial?C(h,n):n instanceof i.LineDashedMaterial?(C(h,n),T(h,n)):n instanceof i.PointsMaterial?N(h,n):n instanceof i.MeshLambertMaterial?O(h,n):n instanceof i.MeshPhongMaterial?L(h,n):n instanceof i.MeshStandardMaterial?P(h,n):n instanceof i.MeshDepthMaterial?(h.mNear.value=t.near,h.mFar.value=t.far,h.opacity.value=n.opacity):n instanceof i.MeshNormalMaterial&&(h.opacity.value=n.opacity),q(o.uniformsList)),D(u,r),void 0!==u.modelMatrix&&zt.uniformMatrix4fv(u.modelMatrix,!1,r.matrixWorld.elements),o.hasDynamicUniforms===!0&&M(o.uniformsList,r,t),l}function M(t,e,n){for(var r=[],i=0,o=t.length;i<o;i++){var a=t[i][0],s=a.onUpdateCallback;void 0!==s&&(s.bind(a)(e,n),r.push(t[i]))}q(r)}function A(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n instanceof i.WebGLRenderTarget&&(n=n.texture);var r=n.offset,o=n.repeat;t.offsetRepeat.value.set(r.x,r.y,o.x,o.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof i.WebGLRenderTargetCube?1:-1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function C(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function T(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function N(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Ot,t.scale.value=tt.clientHeight/2,t.map.value=e.map,null!==e.map){var n=e.map.offset,r=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function R(t,e){t.fogColor.value=e.color,e instanceof i.Fog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e instanceof i.FogExp2&&(t.fogDensity.value=e.density)}function O(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function L(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function P(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function k(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function D(t,e){zt.uniformMatrix4fv(t.modelViewMatrix,!1,e.modelViewMatrix.elements),t.normalMatrix&&zt.uniformMatrix3fv(t.normalMatrix,!1,e.normalMatrix.elements)}function I(){var t=At;return t>=Gt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Gt.maxTextures),At+=1,t}function q(t){for(var e,n,r=0,o=t.length;r<o;r++){var a=t[r][0];if(a.needsUpdate!==!1){var s=a.type,c=a.value,l=t[r][1];switch(s){case"1i":zt.uniform1i(l,c);break;case"1f":zt.uniform1f(l,c);break;case"2f":zt.uniform2f(l,c[0],c[1]);break;case"3f":zt.uniform3f(l,c[0],c[1],c[2]);break;case"4f":zt.uniform4f(l,c[0],c[1],c[2],c[3]);break;case"1iv":zt.uniform1iv(l,c);break;case"3iv":zt.uniform3iv(l,c);break;case"1fv":zt.uniform1fv(l,c);break;case"2fv":zt.uniform2fv(l,c);break;case"3fv":zt.uniform3fv(l,c);break;case"4fv":zt.uniform4fv(l,c);break;case"Matrix2fv":zt.uniformMatrix2fv(l,!1,c);break;case"Matrix3fv":zt.uniformMatrix3fv(l,!1,c);break;case"Matrix4fv":zt.uniformMatrix4fv(l,!1,c);break;case"i":zt.uniform1i(l,c);break;case"f":zt.uniform1f(l,c);break;case"v2":zt.uniform2f(l,c.x,c.y);break;case"v3":zt.uniform3f(l,c.x,c.y,c.z);break;case"v4":zt.uniform4f(l,c.x,c.y,c.z,c.w);break;case"c":zt.uniform3f(l,c.r,c.g,c.b);break;case"sa":for(var u=0;u<c.length;u++)for(var h in a.properties){var p=a.properties[h],d=l[u][h],f=c[u][h];switch(p.type){case"i":zt.uniform1i(d,f);break;case"f":zt.uniform1f(d,f);break;case"v2":zt.uniform2f(d,f.x,f.y);break;case"v3":zt.uniform3f(d,f.x,f.y,f.z);break;case"v4":zt.uniform4f(d,f.x,f.y,f.z,f.w);break;case"c":zt.uniform3f(d,f.r,f.g,f.b);break;case"m4":zt.uniformMatrix4fv(d,!1,f.elements)}}break;case"iv1":zt.uniform1iv(l,c);break;case"iv":zt.uniform3iv(l,c);break;case"fv1":zt.uniform1fv(l,c);break;case"fv":zt.uniform3fv(l,c);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*c.length));for(var u=0,m=0,v=c.length;u<v;u++,m+=2)a._array[m+0]=c[u].x,a._array[m+1]=c[u].y;zt.uniform2fv(l,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*c.length));for(var u=0,y=0,v=c.length;u<v;u++,y+=3)a._array[y+0]=c[u].x,a._array[y+1]=c[u].y,a._array[y+2]=c[u].z;zt.uniform3fv(l,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*c.length));for(var u=0,g=0,v=c.length;u<v;u++,g+=4)a._array[g+0]=c[u].x,a._array[g+1]=c[u].y,a._array[g+2]=c[u].z,a._array[g+3]=c[u].w;zt.uniform4fv(l,a._array);break;case"m2":zt.uniformMatrix2fv(l,!1,c.elements);break;case"m3":zt.uniformMatrix3fv(l,!1,c.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*c.length));for(var u=0,v=c.length;u<v;u++)c[u].flattenToArrayOffset(a._array,9*u);zt.uniformMatrix3fv(l,!1,a._array);break;case"m4":zt.uniformMatrix4fv(l,!1,c.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*c.length));for(var u=0,v=c.length;u<v;u++)c[u].flattenToArrayOffset(a._array,16*u);zt.uniformMatrix4fv(l,!1,a._array);break;case"t":if(e=c,n=I(),zt.uniform1i(l,n),!e)continue;e instanceof i.CubeTexture||Array.isArray(e.image)&&6===e.image.length?G(e,n):e instanceof i.WebGLRenderTargetCube?W(e.texture,n):e instanceof i.WebGLRenderTarget?vt.setTexture(e.texture,n):vt.setTexture(e,n);break;case"tv":void 0===a._array&&(a._array=[]);for(var u=0,v=a.value.length;u<v;u++)a._array[u]=I();zt.uniform1iv(l,a._array);for(var u=0,v=a.value.length;u<v;u++)e=a.value[u],n=a._array[u],e&&(e instanceof i.CubeTexture||e.image instanceof Array&&6===e.image.length?G(e,n):e instanceof i.WebGLRenderTarget?vt.setTexture(e.texture,n):e instanceof i.WebGLRenderTargetCube?W(e.texture,n):vt.setTexture(e,n));break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}function B(t,e){var n,r,o,a,s,c,l=0,u=0,h=0,p=e.matrixWorldInverse,d=0,f=0,m=0,v=0,y=0;for(Bt.shadowsPointLight=0,n=0,r=t.length;n<r;n++)if(o=t[n],a=o.color,s=o.intensity,c=o.distance,o instanceof i.AmbientLight)l+=a.r*s,u+=a.g*s,h+=a.b*s;else if(o instanceof i.DirectionalLight){var g=Yt.get(o);g.color.copy(o.color).multiplyScalar(o.intensity),g.direction.setFromMatrixPosition(o.matrixWorld),qt.setFromMatrixPosition(o.target.matrixWorld),g.direction.sub(qt),g.direction.transformDirection(p),g.shadow=o.castShadow,o.castShadow&&(g.shadowBias=o.shadow.bias,g.shadowRadius=o.shadow.radius,g.shadowMapSize=o.shadow.mapSize,Bt.shadows[y++]=o),Bt.directionalShadowMap[d]=o.shadow.map,Bt.directionalShadowMatrix[d]=o.shadow.matrix,Bt.directional[d++]=g}else if(o instanceof i.SpotLight){var g=Yt.get(o);g.position.setFromMatrixPosition(o.matrixWorld),g.position.applyMatrix4(p),g.color.copy(a).multiplyScalar(s),g.distance=c,g.direction.setFromMatrixPosition(o.matrixWorld),qt.setFromMatrixPosition(o.target.matrixWorld),g.direction.sub(qt),g.direction.transformDirection(p),g.angleCos=Math.cos(o.angle),g.exponent=o.exponent,g.decay=0===o.distance?0:o.decay,g.shadow=o.castShadow,o.castShadow&&(g.shadowBias=o.shadow.bias,g.shadowRadius=o.shadow.radius,g.shadowMapSize=o.shadow.mapSize,Bt.shadows[y++]=o),Bt.spotShadowMap[m]=o.shadow.map,Bt.spotShadowMatrix[m]=o.shadow.matrix,Bt.spot[m++]=g}else if(o instanceof i.PointLight){var g=Yt.get(o);g.position.setFromMatrixPosition(o.matrixWorld),g.position.applyMatrix4(p),g.color.copy(o.color).multiplyScalar(o.intensity),g.distance=o.distance,g.decay=0===o.distance?0:o.decay,g.shadow=o.castShadow,o.castShadow&&(g.shadowBias=o.shadow.bias,g.shadowRadius=o.shadow.radius,g.shadowMapSize=o.shadow.mapSize,Bt.shadows[y++]=o),Bt.pointShadowMap[f]=o.shadow.map,void 0===Bt.pointShadowMatrix[f]&&(Bt.pointShadowMatrix[f]=new i.Matrix4),qt.setFromMatrixPosition(o.matrixWorld).negate(),Bt.pointShadowMatrix[f].identity().setPosition(qt),Bt.point[f++]=g}else if(o instanceof i.HemisphereLight){var g=Yt.get(o);g.direction.setFromMatrixPosition(o.matrixWorld),g.direction.transformDirection(p),g.direction.normalize(),g.skyColor.copy(o.color).multiplyScalar(s),g.groundColor.copy(o.groundColor).multiplyScalar(s),Bt.hemi[v++]=g}Bt.ambient[0]=l,Bt.ambient[1]=u,Bt.ambient[2]=h,Bt.directional.length=d,Bt.spot.length=m,Bt.point.length=f,Bt.hemi.length=v,Bt.shadows.length=y,Bt.hash=d+","+f+","+m+","+v+","+y}function V(t,e,n){var r;if(n?(zt.texParameteri(t,zt.TEXTURE_WRAP_S,$(e.wrapS)),zt.texParameteri(t,zt.TEXTURE_WRAP_T,$(e.wrapT)),zt.texParameteri(t,zt.TEXTURE_MAG_FILTER,$(e.magFilter)),zt.texParameteri(t,zt.TEXTURE_MIN_FILTER,$(e.minFilter))):(zt.texParameteri(t,zt.TEXTURE_WRAP_S,zt.CLAMP_TO_EDGE),zt.texParameteri(t,zt.TEXTURE_WRAP_T,zt.CLAMP_TO_EDGE),e.wrapS===i.ClampToEdgeWrapping&&e.wrapT===i.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",e),zt.texParameteri(t,zt.TEXTURE_MAG_FILTER,J(e.magFilter)),zt.texParameteri(t,zt.TEXTURE_MIN_FILTER,J(e.minFilter)),e.minFilter!==i.NearestFilter&&e.minFilter!==i.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",e)),r=Ht.get("EXT_texture_filter_anisotropic")){if(e.type===i.FloatType&&null===Ht.get("OES_texture_float_linear"))return;if(e.type===i.HalfFloatType&&null===Ht.get("OES_texture_half_float_linear"))return;(e.anisotropy>1||Xt.get(e).__currentAnisotropy)&&(zt.texParameterf(t,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,vt.getMaxAnisotropy())),Xt.get(e).__currentAnisotropy=e.anisotropy)}}function F(t,e,n){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",s),t.__webglTexture=zt.createTexture(),Vt.textures++),Wt.activeTexture(zt.TEXTURE0+n),Wt.bindTexture(zt.TEXTURE_2D,t.__webglTexture),zt.pixelStorei(zt.UNPACK_FLIP_Y_WEBGL,e.flipY),zt.pixelStorei(zt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),zt.pixelStorei(zt.UNPACK_ALIGNMENT,e.unpackAlignment);var r=z(e.image,Gt.maxTextureSize);j(e)&&U(r)===!1&&(r=H(r));var o=U(r),a=$(e.format),c=$(e.type);V(zt.TEXTURE_2D,e,o);var l,u=e.mipmaps;if(e instanceof i.DataTexture)if(u.length>0&&o){for(var h=0,p=u.length;h<p;h++)l=u[h],Wt.texImage2D(zt.TEXTURE_2D,h,a,l.width,l.height,0,a,c,l.data);e.generateMipmaps=!1}else Wt.texImage2D(zt.TEXTURE_2D,0,a,r.width,r.height,0,a,c,r.data);else if(e instanceof i.CompressedTexture)for(var h=0,p=u.length;h<p;h++)l=u[h],e.format!==i.RGBAFormat&&e.format!==i.RGBFormat?Wt.getCompressedTextureFormats().indexOf(a)>-1?Wt.compressedTexImage2D(zt.TEXTURE_2D,h,a,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt.texImage2D(zt.TEXTURE_2D,h,a,l.width,l.height,0,a,c,l.data);else if(u.length>0&&o){for(var h=0,p=u.length;h<p;h++)l=u[h],Wt.texImage2D(zt.TEXTURE_2D,h,a,a,c,l);e.generateMipmaps=!1}else Wt.texImage2D(zt.TEXTURE_2D,0,a,a,c,r);e.generateMipmaps&&o&&zt.generateMipmap(zt.TEXTURE_2D),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function z(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElement("canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function U(t){return i.Math.isPowerOfTwo(t.width)&&i.Math.isPowerOfTwo(t.height)}function j(t){return t.wrapS!==i.ClampToEdgeWrapping||t.wrapT!==i.ClampToEdgeWrapping||t.minFilter!==i.NearestFilter&&t.minFilter!==i.LinearFilter}function H(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElement("canvas");e.width=i.Math.nearestPowerOfTwo(t.width),e.height=i.Math.nearestPowerOfTwo(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function G(t,e){var n=Xt.get(t);if(6===t.image.length)if(t.version>0&&n.__version!==t.version){n.__image__webglTextureCube||(t.addEventListener("dispose",s),n.__image__webglTextureCube=zt.createTexture(),Vt.textures++),Wt.activeTexture(zt.TEXTURE0+e),Wt.bindTexture(zt.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),zt.pixelStorei(zt.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var r=t instanceof i.CompressedTexture,o=t.image[0]instanceof i.DataTexture,a=[],c=0;c<6;c++)!vt.autoScaleCubemaps||r||o?a[c]=o?t.image[c].image:t.image[c]:a[c]=z(t.image[c],Gt.maxCubemapSize);var l=a[0],u=U(l),h=$(t.format),p=$(t.type);V(zt.TEXTURE_CUBE_MAP,t,u);for(var c=0;c<6;c++)if(r)for(var d,f=a[c].mipmaps,m=0,v=f.length;m<v;m++)d=f[m],t.format!==i.RGBAFormat&&t.format!==i.RGBFormat?Wt.getCompressedTextureFormats().indexOf(h)>-1?Wt.compressedTexImage2D(zt.TEXTURE_CUBE_MAP_POSITIVE_X+c,m,h,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Wt.texImage2D(zt.TEXTURE_CUBE_MAP_POSITIVE_X+c,m,h,d.width,d.height,0,h,p,d.data);else o?Wt.texImage2D(zt.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,h,a[c].width,a[c].height,0,h,p,a[c].data):Wt.texImage2D(zt.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,h,h,p,a[c]);t.generateMipmaps&&u&&zt.generateMipmap(zt.TEXTURE_CUBE_MAP),n.__version=t.version,t.onUpdate&&t.onUpdate(t)}else Wt.activeTexture(zt.TEXTURE0+e),Wt.bindTexture(zt.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)}function W(t,e){Wt.activeTexture(zt.TEXTURE0+e),Wt.bindTexture(zt.TEXTURE_CUBE_MAP,Xt.get(t).__webglTexture)}function X(t,e,n,r){var i=$(e.texture.format),o=$(e.texture.type);Wt.texImage2D(r,0,i,e.width,e.height,0,i,o,null),zt.bindFramebuffer(zt.FRAMEBUFFER,t),zt.framebufferTexture2D(zt.FRAMEBUFFER,n,r,Xt.get(e.texture).__webglTexture,0),zt.bindFramebuffer(zt.FRAMEBUFFER,null)}function Z(t,e){zt.bindRenderbuffer(zt.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(zt.renderbufferStorage(zt.RENDERBUFFER,zt.DEPTH_COMPONENT16,e.width,e.height),zt.framebufferRenderbuffer(zt.FRAMEBUFFER,zt.DEPTH_ATTACHMENT,zt.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(zt.renderbufferStorage(zt.RENDERBUFFER,zt.DEPTH_STENCIL,e.width,e.height),zt.framebufferRenderbuffer(zt.FRAMEBUFFER,zt.DEPTH_STENCIL_ATTACHMENT,zt.RENDERBUFFER,t)):zt.renderbufferStorage(zt.RENDERBUFFER,zt.RGBA4,e.width,e.height),zt.bindRenderbuffer(zt.RENDERBUFFER,null)}function K(t){var e=Xt.get(t),n=t instanceof i.WebGLRenderTargetCube;if(n){e.__webglDepthbuffer=[];for(var r=0;r<6;r++)zt.bindFramebuffer(zt.FRAMEBUFFER,e.__webglFramebuffer[r]),e.__webglDepthbuffer[r]=zt.createRenderbuffer(),Z(e.__webglDepthbuffer[r],t)}else zt.bindFramebuffer(zt.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=zt.createRenderbuffer(),Z(e.__webglDepthbuffer,t);zt.bindFramebuffer(zt.FRAMEBUFFER,null)}function Y(t){var e=Xt.get(t),n=Xt.get(t.texture);t.addEventListener("dispose",c),n.__webglTexture=zt.createTexture(),Vt.textures++;var r=t instanceof i.WebGLRenderTargetCube,o=i.Math.isPowerOfTwo(t.width)&&i.Math.isPowerOfTwo(t.height);if(r){e.__webglFramebuffer=[];for(var a=0;a<6;a++)e.__webglFramebuffer[a]=zt.createFramebuffer()}else e.__webglFramebuffer=zt.createFramebuffer();if(r){Wt.bindTexture(zt.TEXTURE_CUBE_MAP,n.__webglTexture),V(zt.TEXTURE_CUBE_MAP,t.texture,o);for(var a=0;a<6;a++)X(e.__webglFramebuffer[a],t,zt.COLOR_ATTACHMENT0,zt.TEXTURE_CUBE_MAP_POSITIVE_X+a);t.texture.generateMipmaps&&o&&zt.generateMipmap(zt.TEXTURE_CUBE_MAP),Wt.bindTexture(zt.TEXTURE_CUBE_MAP,null)}else Wt.bindTexture(zt.TEXTURE_2D,n.__webglTexture),V(zt.TEXTURE_2D,t.texture,o),X(e.__webglFramebuffer,t,zt.COLOR_ATTACHMENT0,zt.TEXTURE_2D),t.texture.generateMipmaps&&o&&zt.generateMipmap(zt.TEXTURE_2D),Wt.bindTexture(zt.TEXTURE_2D,null);t.depthBuffer&&K(t)}function Q(t){var e=t instanceof i.WebGLRenderTargetCube?zt.TEXTURE_CUBE_MAP:zt.TEXTURE_2D,n=Xt.get(t.texture).__webglTexture;Wt.bindTexture(e,n),zt.generateMipmap(e),Wt.bindTexture(e,null)}function J(t){return t===i.NearestFilter||t===i.NearestMipMapNearestFilter||t===i.NearestMipMapLinearFilter?zt.NEAREST:zt.LINEAR}function $(t){var e;if(t===i.RepeatWrapping)return zt.REPEAT;if(t===i.ClampToEdgeWrapping)return zt.CLAMP_TO_EDGE;if(t===i.MirroredRepeatWrapping)return zt.MIRRORED_REPEAT;if(t===i.NearestFilter)return zt.NEAREST;if(t===i.NearestMipMapNearestFilter)return zt.NEAREST_MIPMAP_NEAREST;if(t===i.NearestMipMapLinearFilter)return zt.NEAREST_MIPMAP_LINEAR;if(t===i.LinearFilter)return zt.LINEAR;if(t===i.LinearMipMapNearestFilter)return zt.LINEAR_MIPMAP_NEAREST;if(t===i.LinearMipMapLinearFilter)return zt.LINEAR_MIPMAP_LINEAR;if(t===i.UnsignedByteType)return zt.UNSIGNED_BYTE;if(t===i.UnsignedShort4444Type)return zt.UNSIGNED_SHORT_4_4_4_4;if(t===i.UnsignedShort5551Type)return zt.UNSIGNED_SHORT_5_5_5_1;if(t===i.UnsignedShort565Type)return zt.UNSIGNED_SHORT_5_6_5;if(t===i.ByteType)return zt.BYTE;if(t===i.ShortType)return zt.SHORT;if(t===i.UnsignedShortType)return zt.UNSIGNED_SHORT;if(t===i.IntType)return zt.INT;if(t===i.UnsignedIntType)return zt.UNSIGNED_INT;if(t===i.FloatType)return zt.FLOAT;if(e=Ht.get("OES_texture_half_float"),null!==e&&t===i.HalfFloatType)return e.HALF_FLOAT_OES;if(t===i.AlphaFormat)return zt.ALPHA;if(t===i.RGBFormat)return zt.RGB;if(t===i.RGBAFormat)return zt.RGBA;if(t===i.LuminanceFormat)return zt.LUMINANCE;if(t===i.LuminanceAlphaFormat)return zt.LUMINANCE_ALPHA;if(t===i.AddEquation)return zt.FUNC_ADD;if(t===i.SubtractEquation)return zt.FUNC_SUBTRACT;if(t===i.ReverseSubtractEquation)return zt.FUNC_REVERSE_SUBTRACT;if(t===i.ZeroFactor)return zt.ZERO;if(t===i.OneFactor)return zt.ONE;if(t===i.SrcColorFactor)return zt.SRC_COLOR;if(t===i.OneMinusSrcColorFactor)return zt.ONE_MINUS_SRC_COLOR;if(t===i.SrcAlphaFactor)return zt.SRC_ALPHA;if(t===i.OneMinusSrcAlphaFactor)return zt.ONE_MINUS_SRC_ALPHA;if(t===i.DstAlphaFactor)return zt.DST_ALPHA;if(t===i.OneMinusDstAlphaFactor)return zt.ONE_MINUS_DST_ALPHA;if(t===i.DstColorFactor)return zt.DST_COLOR;if(t===i.OneMinusDstColorFactor)return zt.ONE_MINUS_DST_COLOR;if(t===i.SrcAlphaSaturateFactor)return zt.SRC_ALPHA_SATURATE;if(e=Ht.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===i.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===i.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===i.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===i.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=Ht.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===i.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===i.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===i.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===i.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=Ht.get("WEBGL_compressed_texture_etc1"),null!==e&&t===i.RGB_ETC1_Format)return e.COMPRESSED_RGB_ETC1_WEBGL;if(e=Ht.get("EXT_blend_minmax"),null!==e){if(t===i.MinEquation)return e.MIN_EXT;if(t===i.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",i.REVISION),t=t||{};var tt=void 0!==t.canvas?t.canvas:document.createElement("canvas"),et=void 0!==t.context?t.context:null,nt=void 0!==t.alpha&&t.alpha,rt=void 0===t.depth||t.depth,it=void 0===t.stencil||t.stencil,ot=void 0!==t.antialias&&t.antialias,at=void 0===t.premultipliedAlpha||t.premultipliedAlpha,st=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,ct=[],lt=[],ut=-1,ht=[],pt=-1,dt=new Float32Array(8),ft=[],mt=[];this.domElement=tt,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var vt=this,yt=null,gt=null,xt=null,_t=-1,bt="",wt=null,Et=new i.Vector4,St=null,Mt=new i.Vector4,At=0,Ct=new i.Color(0),Tt=0,Nt=tt.width,Rt=tt.height,Ot=1,Lt=new i.Vector4(0,0,Nt,Rt),Pt=!1,kt=new i.Vector4(0,0,Nt,Rt),Dt=new i.Frustum,It=new i.Matrix4,qt=new i.Vector3,Bt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[],shadowsPointLight:0},Vt={geometries:0,textures:0},Ft={calls:0,vertices:0,faces:0,points:0};this.info={render:Ft,memory:Vt,programs:null};var zt;try{var Ut={alpha:nt,depth:rt,stencil:it,antialias:ot,premultipliedAlpha:at,preserveDrawingBuffer:st};if(zt=et||tt.getContext("webgl",Ut)||tt.getContext("experimental-webgl",Ut),null===zt)throw null!==tt.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";tt.addEventListener("webglcontextlost",a,!1)}catch(jt){console.error("THREE.WebGLRenderer: "+jt)}var Ht=new i.WebGLExtensions(zt);Ht.get("OES_texture_float"),Ht.get("OES_texture_float_linear"),Ht.get("OES_texture_half_float"),Ht.get("OES_texture_half_float_linear"),Ht.get("OES_standard_derivatives"),Ht.get("ANGLE_instanced_arrays"),Ht.get("OES_element_index_uint")&&(i.BufferGeometry.MaxIndex=4294967296);var Gt=new i.WebGLCapabilities(zt,Ht,t),Wt=new i.WebGLState(zt,Ht,$),Xt=new i.WebGLProperties,Zt=new i.WebGLObjects(zt,Xt,this.info),Kt=new i.WebGLPrograms(this,Gt),Yt=new i.WebGLLights;this.info.programs=Kt.programs;var Qt=new i.WebGLBufferRenderer(zt,Ht,Ft),Jt=new i.WebGLIndexedBufferRenderer(zt,Ht,Ft);r(),this.context=zt,this.capabilities=Gt,this.extensions=Ht,this.properties=Xt,this.state=Wt;var $t=new i.WebGLShadowMap(this,Bt,Zt);this.shadowMap=$t;var te=new i.SpritePlugin(this,ft),ee=new i.LensFlarePlugin(this,mt);this.getContext=function(){return zt},this.getContextAttributes=function(){return zt.getContextAttributes()},this.forceContextLoss=function(){Ht.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){var t;return function(){if(void 0!==t)return t;var e=Ht.get("EXT_texture_filter_anisotropic");return t=null!==e?zt.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return Gt.precision},this.getPixelRatio=function(){return Ot},this.setPixelRatio=function(t){void 0!==t&&(Ot=t,this.setSize(kt.z,kt.w,!1))},this.getSize=function(){return{width:Nt,height:Rt}},this.setSize=function(t,e,n){Nt=t,Rt=e,tt.width=t*Ot,tt.height=e*Ot,n!==!1&&(tt.style.width=t+"px",tt.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,r){Wt.viewport(kt.set(t,e,n,r))},this.setScissor=function(t,e,n,r){Wt.scissor(Lt.set(t,e,n,r))},this.setScissorTest=function(t){Wt.setScissorTest(Pt=t)},this.getClearColor=function(){return Ct},this.setClearColor=function(t,e){Ct.set(t),Tt=void 0!==e?e:1,n(Ct.r,Ct.g,Ct.b,Tt)},this.getClearAlpha=function(){return Tt},this.setClearAlpha=function(t){Tt=t,n(Ct.r,Ct.g,Ct.b,Tt)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=zt.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=zt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=zt.STENCIL_BUFFER_BIT),zt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=o,this.dispose=function(){tt.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,n){Wt.initAttributes();var r=Xt.get(t);t.hasPositions&&!r.position&&(r.position=zt.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=zt.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=zt.createBuffer()),t.hasColors&&!r.color&&(r.color=zt.createBuffer());var o=e.getAttributes();if(t.hasPositions&&(zt.bindBuffer(zt.ARRAY_BUFFER,r.position),zt.bufferData(zt.ARRAY_BUFFER,t.positionArray,zt.DYNAMIC_DRAW),Wt.enableAttribute(o.position),zt.vertexAttribPointer(o.position,3,zt.FLOAT,!1,0,0)),t.hasNormals){if(zt.bindBuffer(zt.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&n.shading===i.FlatShading)for(var a=0,s=3*t.count;a<s;a+=9){var c=t.normalArray,l=(c[a+0]+c[a+3]+c[a+6])/3,u=(c[a+1]+c[a+4]+c[a+7])/3,h=(c[a+2]+c[a+5]+c[a+8])/3;c[a+0]=l,c[a+1]=u,c[a+2]=h,c[a+3]=l,c[a+4]=u,c[a+5]=h,c[a+6]=l,c[a+7]=u,c[a+8]=h}zt.bufferData(zt.ARRAY_BUFFER,t.normalArray,zt.DYNAMIC_DRAW),Wt.enableAttribute(o.normal),zt.vertexAttribPointer(o.normal,3,zt.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(zt.bindBuffer(zt.ARRAY_BUFFER,r.uv),zt.bufferData(zt.ARRAY_BUFFER,t.uvArray,zt.DYNAMIC_DRAW),Wt.enableAttribute(o.uv),zt.vertexAttribPointer(o.uv,2,zt.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==i.NoColors&&(zt.bindBuffer(zt.ARRAY_BUFFER,r.color),zt.bufferData(zt.ARRAY_BUFFER,t.colorArray,zt.DYNAMIC_DRAW),Wt.enableAttribute(o.color),zt.vertexAttribPointer(o.color,3,zt.FLOAT,!1,0,0)),Wt.disableUnusedAttributes(),zt.drawArrays(zt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,r,o,a,s){w(o);var c=S(t,n,o,a),l=!1,u=r.id+"_"+c.id+"_"+o.wireframe;u!==bt&&(bt=u,l=!0);var h=a.morphTargetInfluences;if(void 0!==h){for(var p=[],d=0,v=h.length;d<v;d++){var y=h[d];p.push([y,d])}p.sort(m),p.length>8&&(p.length=8);for(var g=r.morphAttributes,d=0,v=p.length;d<v;d++){var y=p[d];if(dt[d]=y[0],0!==y[0]){var x=y[1];o.morphTargets===!0&&g.position&&r.addAttribute("morphTarget"+d,g.position[x]),o.morphNormals===!0&&g.normal&&r.addAttribute("morphNormal"+d,g.normal[x])}else o.morphTargets===!0&&r.removeAttribute("morphTarget"+d),o.morphNormals===!0&&r.removeAttribute("morphNormal"+d)}var _=c.getUniforms();null!==_.morphTargetInfluences&&zt.uniform1fv(_.morphTargetInfluences,dt),l=!0}var x=r.index,b=r.attributes.position;o.wireframe===!0&&(x=Zt.getWireframeAttribute(r));var E;null!==x?(E=Jt,E.setIndex(x)):E=Qt,l&&(f(o,c,r),null!==x&&zt.bindBuffer(zt.ELEMENT_ARRAY_BUFFER,Zt.getAttributeBuffer(x)));var M=0,A=1/0;null!==x?A=x.count:void 0!==b&&(A=b.count);var C=r.drawRange.start,T=r.drawRange.count,N=null!==s?s.start:0,R=null!==s?s.count:1/0,O=Math.max(M,C,N),L=Math.min(M+A,C+T,N+R)-1,P=Math.max(0,L-O+1);if(a instanceof i.Mesh)if(o.wireframe===!0)Wt.setLineWidth(o.wireframeLinewidth*e()),E.setMode(zt.LINES);else switch(a.drawMode){case i.TrianglesDrawMode:E.setMode(zt.TRIANGLES);break;case i.TriangleStripDrawMode:E.setMode(zt.TRIANGLE_STRIP);break;case i.TriangleFanDrawMode:E.setMode(zt.TRIANGLE_FAN)}else if(a instanceof i.Line){var k=o.linewidth;void 0===k&&(k=1),Wt.setLineWidth(k*e()),a instanceof i.LineSegments?E.setMode(zt.LINES):E.setMode(zt.LINE_STRIP)}else a instanceof i.Points&&E.setMode(zt.POINTS);
r instanceof i.InstancedBufferGeometry&&r.maxInstancedCount>0?E.renderInstances(r,O,P):E.render(O,P)},this.render=function(t,e,n,r){if(e instanceof i.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=t.fog;if(bt="",_t=-1,wt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),It.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Dt.setFromMatrix(It),ct.length=0,ut=-1,pt=-1,ft.length=0,mt.length=0,x(t,e),lt.length=ut+1,ht.length=pt+1,vt.sortObjects===!0&&(lt.sort(v),ht.sort(y)),B(ct,e),$t.render(t,e),Ft.calls=0,Ft.vertices=0,Ft.faces=0,Ft.points=0,void 0===n&&(n=null),this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),t.overrideMaterial){var a=t.overrideMaterial;_(lt,e,o,a),_(ht,e,o,a)}else Wt.setBlending(i.NoBlending),_(lt,e,o),_(ht,e,o);if(te.render(t,e),ee.render(t,e,Mt),n){var s=n.texture;s.generateMipmaps&&U(n)&&s.minFilter!==i.NearestFilter&&s.minFilter!==i.LinearFilter&&Q(n)}Wt.setDepthTest(!0),Wt.setDepthWrite(!0),Wt.setColorWrite(!0)},this.setFaceCulling=function(t,e){t===i.CullFaceNone?Wt.disable(zt.CULL_FACE):(e===i.FrontFaceDirectionCW?zt.frontFace(zt.CW):zt.frontFace(zt.CCW),t===i.CullFaceBack?zt.cullFace(zt.BACK):t===i.CullFaceFront?zt.cullFace(zt.FRONT):zt.cullFace(zt.FRONT_AND_BACK),Wt.enable(zt.CULL_FACE))},this.setTexture=function(t,e){var n=Xt.get(t);if(t.version>0&&n.__version!==t.version){var r=t.image;return void 0===r?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t):r.complete===!1?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t):void F(n,t,e)}Wt.activeTexture(zt.TEXTURE0+e),Wt.bindTexture(zt.TEXTURE_2D,n.__webglTexture)},this.setRenderTarget=function(t){gt=t,t&&void 0===Xt.get(t).__webglFramebuffer&&Y(t);var e,n=t instanceof i.WebGLRenderTargetCube;if(t){var r=Xt.get(t);e=n?r.__webglFramebuffer[t.activeCubeFace]:r.__webglFramebuffer,Et.copy(t.scissor),St=t.scissorTest,Mt.copy(t.viewport)}else e=null,Et.copy(Lt).multiplyScalar(Ot),St=Pt,Mt.copy(kt).multiplyScalar(Ot);if(xt!==e&&(zt.bindFramebuffer(zt.FRAMEBUFFER,e),xt=e),Wt.scissor(Et),Wt.setScissorTest(St),Wt.viewport(Mt),n){var o=Xt.get(t.texture);zt.framebufferTexture2D(zt.FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,o.__webglTexture,0)}},this.readRenderTargetPixels=function(t,e,n,r,o,a){if(t instanceof i.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Xt.get(t).__webglFramebuffer;if(s){var c=!1;s!==xt&&(zt.bindFramebuffer(zt.FRAMEBUFFER,s),c=!0);try{var l=t.texture;if(l.format!==i.RGBAFormat&&$(l.format)!==zt.getParameter(zt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l.type===i.UnsignedByteType||$(l.type)===zt.getParameter(zt.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===i.FloatType&&Ht.get("WEBGL_color_buffer_float")||l.type===i.HalfFloatType&&Ht.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");zt.checkFramebufferStatus(zt.FRAMEBUFFER)===zt.FRAMEBUFFER_COMPLETE?zt.readPixels(e,n,r,o,$(l.format),$(l.type),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&zt.bindFramebuffer(zt.FRAMEBUFFER,xt)}}}},i.WebGLRenderTarget=function(t,e,n){this.uuid=i.Math.generateUUID(),this.width=t,this.height=e,this.scissor=new i.Vector4(0,0,t,e),this.scissorTest=!1,this.viewport=new i.Vector4(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=i.LinearFilter),this.texture=new i.Texture((void 0),(void 0),n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer},i.WebGLRenderTarget.prototype={constructor:i.WebGLRenderTarget,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.shareDepthFrom=t.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube=function(t,e,n){i.WebGLRenderTarget.call(this,t,e,n),this.activeCubeFace=0},i.WebGLRenderTargetCube.prototype=Object.create(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube.prototype.constructor=i.WebGLRenderTargetCube,i.WebGLBufferRenderer=function(t,e,n){function r(t){s=t}function o(e,r){t.drawArrays(s,e,r),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function a(r){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=r.attributes.position,c=0;a instanceof i.InterleavedBufferAttribute?(c=a.data.count,o.drawArraysInstancedANGLE(s,0,c,r.maxInstancedCount)):(c=a.count,o.drawArraysInstancedANGLE(s,0,c,r.maxInstancedCount)),n.calls++,n.vertices+=c*r.maxInstancedCount,s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*c/3)}var s;this.setMode=r,this.render=o,this.renderInstances=a},i.WebGLIndexedBufferRenderer=function(t,e,n){function r(t){s=t}function i(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(c=t.UNSIGNED_INT,l=4):(c=t.UNSIGNED_SHORT,l=2)}function o(e,r){t.drawElements(s,r,c,e*l),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function a(r,i,o){var a=e.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,c,i*l,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var s,c,l;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a},i.WebGLExtensions=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}},i.WebGLCapabilities=function(t,e,n){function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}this.getMaxPrecision=r,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubemapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=t.getParameter(t.MAX_VARYING_VECTORS),this.maxFragmentUniforms=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!e.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var i=r(this.precision);i!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",i,"instead."),this.precision=i),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!e.get("EXT_frag_depth"))},i.WebGLGeometries=function(t,e,n){function r(t){var e=t.geometry;if(void 0!==u[e.id])return u[e.id];e.addEventListener("dispose",o);var r;return e instanceof i.BufferGeometry?r=e:e instanceof i.Geometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new i.BufferGeometry).setFromObject(t)),r=e._bufferGeometry),u[e.id]=r,n.memory.geometries++,r}function o(t){var r=t.target,i=u[r.id];null!==i.index&&s(i.index),c(i.attributes),r.removeEventListener("dispose",o),delete u[r.id];var a=e.get(r);a.wireframe&&s(a.wireframe),e["delete"](r);var l=e.get(i);l.wireframe&&s(l.wireframe),e["delete"](i),n.memory.geometries--}function a(t){return t instanceof i.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var n=a(e);void 0!==n&&(t.deleteBuffer(n),l(e))}function c(t){for(var e in t)s(t[e])}function l(t){t instanceof i.InterleavedBufferAttribute?e["delete"](t.data):e["delete"](t)}var u={};this.get=r},i.WebGLLights=function(){var t={};this.get=function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new i.Vector3,color:new i.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"SpotLight":n={position:new i.Vector3,direction:new i.Vector3,color:new i.Color,distance:0,angleCos:0,exponent:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"PointLight":n={position:new i.Vector3,color:new i.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i.Vector2};break;case"HemisphereLight":n={direction:new i.Vector3,skyColor:new i.Color,groundColor:new i.Color}}return t[e.id]=n,n}},i.WebGLObjects=function(t,e,n){function r(e){var n=h.get(e);e.geometry instanceof i.Geometry&&n.updateFromObject(e);var r=n.index,a=n.attributes;null!==r&&o(r,t.ELEMENT_ARRAY_BUFFER);for(var s in a)o(a[s],t.ARRAY_BUFFER);var c=n.morphAttributes;for(var s in c)for(var l=c[s],u=0,p=l.length;u<p;u++)o(l[u],t.ARRAY_BUFFER);return n}function o(t,n){var r=t instanceof i.InterleavedBufferAttribute?t.data:t,o=e.get(r);void 0===o.__webglBuffer?a(o,r,n):o.version!==r.version&&s(o,r,n)}function a(e,n,r){e.__webglBuffer=t.createBuffer(),t.bindBuffer(r,e.__webglBuffer);var i=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(r,n.array,i),e.version=n.version}function s(e,n,r){t.bindBuffer(r,e.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?t.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}function c(t){return t instanceof i.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function l(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var a=[],s=n.index,c=n.attributes,l=c.position;if(null!==s)for(var h={},p=s.array,d=0,f=p.length;d<f;d+=3){var m=p[d+0],v=p[d+1],y=p[d+2];u(h,m,v)&&a.push(m,v),u(h,v,y)&&a.push(v,y),u(h,y,m)&&a.push(y,m)}else for(var p=c.position.array,d=0,f=p.length/3-1;d<f;d+=3){var m=d+0,v=d+1,y=d+2;a.push(m,v,v,y,y,m)}var g=l.count>65535?Uint32Array:Uint16Array,x=new i.BufferAttribute(new g(a),1);return o(x,t.ELEMENT_ARRAY_BUFFER),r.wireframe=x,x}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];return void 0===i?(t[e]=[n],!0):i.indexOf(n)===-1&&(i.push(n),!0)}var h=new i.WebGLGeometries(t,e,n);this.getAttributeBuffer=c,this.getWireframeAttribute=l,this.update=r},i.WebGLProgram=function(){function t(t,e,n){t=t||{};var r=[t.derivatives||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(o).join("\n")}function e(t){var e=[];for(var n in t){var r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join("\n")}function n(t,e,n){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<i;o++){var a=t.getActiveUniform(e,o),s=a.name,c=t.getUniformLocation(e,s),p=l.exec(s);if(p){var d=p[1],f=p[2],m=r[d];m||(m=r[d]={}),m[f]=c}else if(p=u.exec(s)){var v=p[1],y=p[2],g=p[3],x=r[v];x||(x=r[v]=[]);var _=x[y];_||(_=x[y]={}),_[g]=c}else if(p=h.exec(s)){var v=p[1];r[v]=c}else r[s]=c}return r}function r(t,e,n){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=t.getActiveAttrib(e,o),s=a.name;r[s]=t.getAttribLocation(e,s)}return r}function o(t){return""!==t}function a(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function s(t){function e(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}var c=0,l=/^([\w\d_]+)\.([\w\d_]+)$/,u=/^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/,h=/^([\w\d_]+)\[0\]$/;return function(l,u,h,p){var d=l.context,f=h.extensions,m=h.defines,v=h.__webglShader.vertexShader,y=h.__webglShader.fragmentShader,g="SHADOWMAP_TYPE_BASIC";p.shadowMapType===i.PCFShadowMap?g="SHADOWMAP_TYPE_PCF":p.shadowMapType===i.PCFSoftShadowMap&&(g="SHADOWMAP_TYPE_PCF_SOFT");var x="ENVMAP_TYPE_CUBE",_="ENVMAP_MODE_REFLECTION",b="ENVMAP_BLENDING_MULTIPLY";if(p.envMap){switch(h.envMap.mapping){case i.CubeReflectionMapping:case i.CubeRefractionMapping:x="ENVMAP_TYPE_CUBE";break;case i.EquirectangularReflectionMapping:case i.EquirectangularRefractionMapping:x="ENVMAP_TYPE_EQUIREC";break;case i.SphericalReflectionMapping:x="ENVMAP_TYPE_SPHERE"}switch(h.envMap.mapping){case i.CubeRefractionMapping:case i.EquirectangularRefractionMapping:_="ENVMAP_MODE_REFRACTION"}switch(h.combine){case i.MultiplyOperation:b="ENVMAP_BLENDING_MULTIPLY";break;case i.MixOperation:b="ENVMAP_BLENDING_MIX";break;case i.AddOperation:b="ENVMAP_BLENDING_ADD"}}var w,E,S=l.gammaFactor>0?l.gammaFactor:1,M=t(f,p,l.extensions),A=e(m),C=d.createProgram();h instanceof i.RawShaderMaterial?(w="",E=""):(w=["precision "+p.precision+" float;","precision "+p.precision+" int;","#define SHADER_NAME "+h.__webglShader.name,A,p.supportsVertexTextures?"#define VERTEX_TEXTURES":"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+S,"#define MAX_BONES "+p.maxBones,p.map?"#define USE_MAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+_:"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.displacementMap&&p.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.vertexColors?"#define USE_COLOR":"",p.flatShading?"#define FLAT_SHADED":"",p.skinning?"#define USE_SKINNING":"",p.useVertexTexture?"#define BONE_TEXTURE":"",p.morphTargets?"#define USE_MORPHTARGETS":"",p.morphNormals&&p.flatShading===!1?"#define USE_MORPHNORMALS":"",p.doubleSided?"#define DOUBLE_SIDED":"",p.flipSided?"#define FLIP_SIDED":"",p.shadowMapEnabled?"#define USE_SHADOWMAP":"",p.shadowMapEnabled?"#define "+g:"",p.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",p.sizeAttenuation?"#define USE_SIZEATTENUATION":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&l.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(o).join("\n"),E=[M,"precision "+p.precision+" float;","precision "+p.precision+" int;","#define SHADER_NAME "+h.__webglShader.name,A,p.alphaTest?"#define ALPHATEST "+p.alphaTest:"",l.gammaInput?"#define GAMMA_INPUT":"",l.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+S,p.useFog&&p.fog?"#define USE_FOG":"",p.useFog&&p.fogExp?"#define FOG_EXP2":"",p.map?"#define USE_MAP":"",p.envMap?"#define USE_ENVMAP":"",p.envMap?"#define "+x:"",p.envMap?"#define "+_:"",p.envMap?"#define "+b:"",p.lightMap?"#define USE_LIGHTMAP":"",p.aoMap?"#define USE_AOMAP":"",p.emissiveMap?"#define USE_EMISSIVEMAP":"",p.bumpMap?"#define USE_BUMPMAP":"",p.normalMap?"#define USE_NORMALMAP":"",p.specularMap?"#define USE_SPECULARMAP":"",p.roughnessMap?"#define USE_ROUGHNESSMAP":"",p.metalnessMap?"#define USE_METALNESSMAP":"",p.alphaMap?"#define USE_ALPHAMAP":"",p.vertexColors?"#define USE_COLOR":"",p.flatShading?"#define FLAT_SHADED":"",p.doubleSided?"#define DOUBLE_SIDED":"",p.flipSided?"#define FLIP_SIDED":"",p.shadowMapEnabled?"#define USE_SHADOWMAP":"",p.shadowMapEnabled?"#define "+g:"",p.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",p.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",p.logarithmicDepthBuffer&&l.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",p.envMap&&l.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(o).join("\n")),v=a(v,p),y=a(y,p),h instanceof i.ShaderMaterial==!1&&(v=s(v),y=s(y));var T=w+v,N=E+y,R=i.WebGLShader(d,d.VERTEX_SHADER,T),O=i.WebGLShader(d,d.FRAGMENT_SHADER,N);d.attachShader(C,R),d.attachShader(C,O),void 0!==h.index0AttributeName?d.bindAttribLocation(C,0,h.index0AttributeName):p.morphTargets===!0&&d.bindAttribLocation(C,0,"position"),d.linkProgram(C);var L=d.getProgramInfoLog(C),P=d.getShaderInfoLog(R),k=d.getShaderInfoLog(O),D=!0,I=!0;d.getProgramParameter(C,d.LINK_STATUS)===!1?(D=!1,console.error("THREE.WebGLProgram: shader error: ",d.getError(),"gl.VALIDATE_STATUS",d.getProgramParameter(C,d.VALIDATE_STATUS),"gl.getProgramInfoLog",L,P,k)):""!==L?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):""!==P&&""!==k||(I=!1),I&&(this.diagnostics={runnable:D,material:h,programLog:L,vertexShader:{log:P,prefix:w},fragmentShader:{log:k,prefix:E}}),d.deleteShader(R),d.deleteShader(O);var q;this.getUniforms=function(){return void 0===q&&(q=n(d,C)),q};var B;return this.getAttributes=function(){return void 0===B&&(B=r(d,C)),B},this.destroy=function(){d.deleteProgram(C),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=c++,this.code=u,this.usedTimes=1,this.program=C,this.vertexShader=R,this.fragmentShader=O,this}}(),i.WebGLPrograms=function(t,e){function n(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,r=Math.floor((n-20)/4),o=r;return void 0!==t&&t instanceof i.SkinnedMesh&&(o=Math.min(t.skeleton.bones.length,o),o<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+o+" (try OpenGL instead of ANGLE)")),o}var r=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"standard",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","envMap","envMapMode","lightMap","aoMap","emissiveMap","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","pointLightShadows","shadowMapType","alphaTest","doubleSided","flipSided"];this.getParameters=function(r,a,s,c){var l=o[r.type],u=n(c),h=t.getPrecision();null!==r.precision&&(h=e.getMaxPrecision(r.precision),h!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",h,"instead."));var p={shaderID:l,precision:h,supportsVertexTextures:e.vertexTextures,map:!!r.map,envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,combine:r.combine,vertexColors:r.vertexColors,fog:s,useFog:r.fog,fogExp:s instanceof i.FogExp2,flatShading:r.shading===i.FlatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:u,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numHemiLights:a.hemi.length,pointLightShadows:a.shadowsPointLight,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&a.shadows.length>0,shadowMapType:t.shadowMap.type,alphaTest:r.alphaTest,doubleSided:r.side===i.DoubleSide,flipSided:r.side===i.BackSide};return p},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var i=0;i<a.length;i++){var o=a[i];n.push(o),n.push(e[o])}return n.join()},this.acquireProgram=function(e,n,o){for(var a,s=0,c=r.length;s<c;s++){var l=r[s];if(l.code===o){a=l,++a.usedTimes;break}}return void 0===a&&(a=new i.WebGLProgram(t,o,e,n),r.push(a)),a},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r},i.WebGLProperties=function(){var t={};this.get=function(e){var n=e.uuid,r=t[n];return void 0===r&&(r={},t[n]=r),r},this["delete"]=function(e){delete t[e.uuid]},this.clear=function(){t={}}},i.WebGLShader=function(){function t(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}return function(e,n,r){var i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),t(r)),i}}(),i.WebGLShadowMap=function(t,e,n){function r(t,e,n,r){var o=t.geometry,a=null,s=v,c=t.customDepthMaterial;if(n&&(s=y,c=t.customDistanceMaterial),c)a=c;else{var l=void 0!==o.morphTargets&&o.morphTargets.length>0&&e.morphTargets,u=t instanceof i.SkinnedMesh&&e.skinning,h=0;l&&(h|=d),u&&(h|=f),a=s[h]}return a.visible=e.visible,a.wireframe=e.wireframe,a.wireframeLinewidth=e.wireframeLinewidth,n&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(r),a}function o(t,e,n){if(t.visible!==!1){if(t.layers.test(e.layers)&&(t instanceof i.Mesh||t instanceof i.Line||t instanceof i.Points)&&t.castShadow&&(t.frustumCulled===!1||c.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),p.push(t))}for(var a=t.children,s=0,l=a.length;s<l;s++)o(a[s],e,n)}}for(var a=t.context,s=t.state,c=new i.Frustum,l=new i.Matrix4,u=new i.Vector3,h=new i.Vector3,p=[],d=1,f=2,m=(d|f)+1,v=new Array(m),y=new Array(m),g=[new i.Vector3(1,0,0),new i.Vector3((-1),0,0),new i.Vector3(0,0,1),new i.Vector3(0,0,(-1)),new i.Vector3(0,1,0),new i.Vector3(0,(-1),0)],x=[new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,0,1),new i.Vector3(0,0,(-1))],_=[new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4],b=i.ShaderLib.depthRGBA,w=i.UniformsUtils.clone(b.uniforms),E=i.ShaderLib.distanceRGBA,S=i.UniformsUtils.clone(E.uniforms),M=0;M!==m;++M){var A=0!==(M&d),C=0!==(M&f),T=new i.ShaderMaterial({uniforms:w,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:A,skinning:C});T._shadowPass=!0,v[M]=T;var N=new i.ShaderMaterial({uniforms:S,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,morphTargets:A,skinning:C});N._shadowPass=!0,y[M]=N}var R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.PCFShadowMap,this.cullFace=i.CullFaceFront,this.render=function(d,f){var m,v;if(R.enabled!==!1&&(R.autoUpdate!==!1||R.needsUpdate!==!1)){s.clearColor(1,1,1,1),s.disable(a.BLEND),s.enable(a.CULL_FACE),a.frontFace(a.CCW),a.cullFace(R.cullFace===i.CullFaceFront?a.FRONT:a.BACK),s.setDepthTest(!0),s.setScissorTest(!1);for(var y=e.shadows,b=0,w=y.length;b<w;b++){var E=y[b],S=E.shadow,M=S.camera,A=S.mapSize;if(E instanceof i.PointLight){m=6,v=!0;var C=A.x/4,T=A.y/2;_[0].set(2*C,T,C,T),_[1].set(0,T,C,T),_[2].set(3*C,T,C,T),_[3].set(C,T,C,T),_[4].set(3*C,0,C,T),_[5].set(C,0,C,T)}else m=1,v=!1;if(null===S.map){var N={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat};S.map=new i.WebGLRenderTarget(A.x,A.y,N),E instanceof i.SpotLight&&(M.aspect=A.x/A.y),M.updateProjectionMatrix()}var O=S.map,L=S.matrix;h.setFromMatrixPosition(E.matrixWorld),M.position.copy(h),t.setRenderTarget(O),t.clear();for(var P=0;P<m;P++){if(v){u.copy(M.position),u.add(g[P]),M.up.copy(x[P]),M.lookAt(u);var k=_[P];s.viewport(k)}else u.setFromMatrixPosition(E.target.matrixWorld),M.lookAt(u);M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(M.projectionMatrix),L.multiply(M.matrixWorldInverse),l.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),c.setFromMatrix(l),p.length=0,o(d,f,M);for(var D=0,I=p.length;D<I;D++){var q=p[D],B=n.update(q),V=q.material;if(V instanceof i.MultiMaterial)for(var F=B.groups,z=V.materials,U=0,j=F.length;U<j;U++){var H=F[U],G=z[H.materialIndex];if(G.visible===!0){var W=r(q,G,v,h);t.renderBufferDirect(M,null,B,W,q,H)}}else{var W=r(q,V,v,h);t.renderBufferDirect(M,null,B,W,q,null)}}}t.resetGLState()}var X=t.getClearColor(),Z=t.getClearAlpha();t.setClearColor(X,Z),s.enable(a.BLEND),R.cullFace===i.CullFaceFront&&a.cullFace(a.BACK),t.resetGLState(),R.needsUpdate=!1}}},i.WebGLState=function(t,e,n){var r=this,o=new i.Vector4,a=new Uint8Array(16),s=new Uint8Array(16),c=new Uint8Array(16),l={},u=null,h=null,p=null,d=null,f=null,m=null,v=null,y=null,g=null,x=null,_=null,b=null,w=null,E=null,S=null,M=null,A=null,C=null,T=null,N=null,R=null,O=null,L=null,P=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),k=void 0,D={},I=new i.Vector4,q=null,B=null,V=new i.Vector4,F=new i.Vector4;this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.frontFace(t.CCW),t.cullFace(t.BACK),this.enable(t.CULL_FACE),this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var t=0,e=a.length;t<e;t++)a[t]=0},this.enableAttribute=function(n){if(a[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),0!==c[n]){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),c[n]=0}},this.enableAttributeAndDivisor=function(e,n,r){a[e]=1,0===s[e]&&(t.enableVertexAttribArray(e),s[e]=1),c[e]!==n&&(r.vertexAttribDivisorANGLE(e,n),c[e]=n)},this.disableUnusedAttributes=function(){for(var e=0,n=s.length;e<n;e++)s[e]!==a[e]&&(t.disableVertexAttribArray(e),s[e]=0)},this.enable=function(e){l[e]!==!0&&(t.enable(e),l[e]=!0)},this.disable=function(e){l[e]!==!1&&(t.disable(e),l[e]=!1)},this.getCompressedTextureFormats=function(){if(null===u&&(u=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)u.push(n[r]);return u},this.setBlending=function(e,r,o,a,s,c,l){e===i.NoBlending?this.disable(t.BLEND):this.enable(t.BLEND),e!==h&&(e===i.AdditiveBlending?(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===i.SubtractiveBlending?(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===i.MultiplyBlending?(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),h=e),e===i.CustomBlending?(s=s||r,c=c||o,l=l||a,r===p&&s===m||(t.blendEquationSeparate(n(r),n(s)),p=r,m=s),o===d&&a===f&&c===v&&l===y||(t.blendFuncSeparate(n(o),n(a),n(c),n(l)),d=o,f=a,v=c,y=l)):(p=null,d=null,f=null,m=null,v=null,y=null)},this.setDepthFunc=function(e){if(g!==e){if(e)switch(e){case i.NeverDepth:t.depthFunc(t.NEVER);break;case i.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case i.LessDepth:t.depthFunc(t.LESS);break;case i.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case i.EqualDepth:t.depthFunc(t.EQUAL);break;case i.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case i.GreaterDepth:t.depthFunc(t.GREATER);break;case i.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);g=e}},this.setDepthTest=function(e){e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)},this.setDepthWrite=function(e){x!==e&&(t.depthMask(e),x=e)},this.setColorWrite=function(e){_!==e&&(t.colorMask(e,e,e,e),_=e)},this.setStencilFunc=function(e,n,r){w===e&&E===n&&S===r||(t.stencilFunc(e,n,r),w=e,E=n,S=r)},this.setStencilOp=function(e,n,r){M===e&&A===n&&C===r||(t.stencilOp(e,n,r),M=e,A=n,C=r)},this.setStencilTest=function(e){e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)},this.setStencilWrite=function(e){b!==e&&(t.stencilMask(e),b=e)},this.setFlipSided=function(e){T!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),
T=e)},this.setLineWidth=function(e){e!==N&&(t.lineWidth(e),N=e)},this.setPolygonOffset=function(e,n,r){e?this.enable(t.POLYGON_OFFSET_FILL):this.disable(t.POLYGON_OFFSET_FILL),!e||R===n&&O===r||(t.polygonOffset(n,r),R=n,O=r)},this.getScissorTest=function(){return L},this.setScissorTest=function(e){L=e,e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+P-1),k!==e&&(t.activeTexture(e),k=e)},this.bindTexture=function(e,n){void 0===k&&r.activeTexture();var i=D[k];void 0===i&&(i={type:void 0,texture:void 0},D[k]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n),i.type=e,i.texture=n)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.clearColor=function(e,n,r,i){o.set(e,n,r,i),I.equals(o)===!1&&(t.clearColor(e,n,r,i),I.copy(o))},this.clearDepth=function(e){q!==e&&(t.clearDepth(e),q=e)},this.clearStencil=function(e){B!==e&&(t.clearStencil(e),B=e)},this.scissor=function(e){V.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),V.copy(e))},this.viewport=function(e){F.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))},this.reset=function(){for(var e=0;e<s.length;e++)1===s[e]&&(t.disableVertexAttribArray(e),s[e]=0);l={},u=null,h=null,_=null,x=null,b=null,T=null}},i.LensFlarePlugin=function(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=d.createBuffer(),a=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),h=d.createTexture(),p=d.createTexture(),f.bindTexture(d.TEXTURE_2D,h),d.texImage2D(d.TEXTURE_2D,0,d.RGB,16,16,0,d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),f.bindTexture(d.TEXTURE_2D,p),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,16,16,0,d.RGBA,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),u=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var n;n=u?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},s=r(n),c={vertex:d.getAttribLocation(s,"position"),uv:d.getAttribLocation(s,"uv")},l={renderType:d.getUniformLocation(s,"renderType"),map:d.getUniformLocation(s,"map"),occlusionMap:d.getUniformLocation(s,"occlusionMap"),opacity:d.getUniformLocation(s,"opacity"),color:d.getUniformLocation(s,"color"),scale:d.getUniformLocation(s,"scale"),rotation:d.getUniformLocation(s,"rotation"),screenPosition:d.getUniformLocation(s,"screenPosition")}}function r(e){var n=d.createProgram(),r=d.createShader(d.FRAGMENT_SHADER),i=d.createShader(d.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return d.shaderSource(r,o+e.fragmentShader),d.shaderSource(i,o+e.vertexShader),d.compileShader(r),d.compileShader(i),d.attachShader(n,r),d.attachShader(n,i),d.linkProgram(n),n}var o,a,s,c,l,u,h,p,d=t.context,f=t.state;this.render=function(r,m,v){if(0!==e.length){var y=new i.Vector3,g=v.w/v.z,x=.5*v.z,_=.5*v.w,b=16/v.w,w=new i.Vector2(b*g,b),E=new i.Vector3(1,1,0),S=new i.Vector2(1,1);void 0===s&&n(),d.useProgram(s),f.initAttributes(),f.enableAttribute(c.vertex),f.enableAttribute(c.uv),f.disableUnusedAttributes(),d.uniform1i(l.occlusionMap,0),d.uniform1i(l.map,1),d.bindBuffer(d.ARRAY_BUFFER,o),d.vertexAttribPointer(c.vertex,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(c.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),f.disable(d.CULL_FACE),f.setDepthWrite(!1);for(var M=0,A=e.length;M<A;M++){b=16/v.w,w.set(b*g,b);var C=e[M];if(y.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),y.applyMatrix4(m.matrixWorldInverse),y.applyProjection(m.projectionMatrix),E.copy(y),S.x=E.x*x+x,S.y=E.y*_+_,u||S.x>0&&S.x<v.z&&S.y>0&&S.y<v.w){f.activeTexture(d.TEXTURE0),f.bindTexture(d.TEXTURE_2D,null),f.activeTexture(d.TEXTURE1),f.bindTexture(d.TEXTURE_2D,h),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGB,v.x+S.x-8,v.y+S.y-8,16,16,0),d.uniform1i(l.renderType,0),d.uniform2f(l.scale,w.x,w.y),d.uniform3f(l.screenPosition,E.x,E.y,E.z),f.disable(d.BLEND),f.enable(d.DEPTH_TEST),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),f.activeTexture(d.TEXTURE0),f.bindTexture(d.TEXTURE_2D,p),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,v.x+S.x-8,v.y+S.y-8,16,16,0),d.uniform1i(l.renderType,1),f.disable(d.DEPTH_TEST),f.activeTexture(d.TEXTURE1),f.bindTexture(d.TEXTURE_2D,h),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0),C.positionScreen.copy(E),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),d.uniform1i(l.renderType,2),f.enable(d.BLEND);for(var T=0,N=C.lensFlares.length;T<N;T++){var R=C.lensFlares[T];R.opacity>.001&&R.scale>.001&&(E.x=R.x,E.y=R.y,E.z=R.z,b=R.size*R.scale/v.w,w.x=b*g,w.y=b,d.uniform3f(l.screenPosition,E.x,E.y,E.z),d.uniform2f(l.scale,w.x,w.y),d.uniform1f(l.rotation,R.rotation),d.uniform1f(l.opacity,R.opacity),d.uniform3f(l.color,R.color.r,R.color.g,R.color.b),f.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),t.setTexture(R.texture,1),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}}}f.enable(d.CULL_FACE),f.enable(d.DEPTH_TEST),f.setDepthWrite(!0),t.resetGLState()}}},i.SpritePlugin=function(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),c=r(),l={position:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},u={uvOffset:p.getUniformLocation(c,"uvOffset"),uvScale:p.getUniformLocation(c,"uvScale"),rotation:p.getUniformLocation(c,"rotation"),scale:p.getUniformLocation(c,"scale"),color:p.getUniformLocation(c,"color"),map:p.getUniformLocation(c,"map"),opacity:p.getUniformLocation(c,"opacity"),modelViewMatrix:p.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(c,"projectionMatrix"),fogType:p.getUniformLocation(c,"fogType"),fogDensity:p.getUniformLocation(c,"fogDensity"),fogNear:p.getUniformLocation(c,"fogNear"),fogFar:p.getUniformLocation(c,"fogFar"),fogColor:p.getUniformLocation(c,"fogColor"),alphaTest:p.getUniformLocation(c,"alphaTest")};var n=document.createElement("canvas");n.width=8,n.height=8;var o=n.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),h=new i.Texture(n),h.needsUpdate=!0}function r(){var e=p.createProgram(),n=p.createShader(p.VERTEX_SHADER),r=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(r,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(n),p.compileShader(r),p.attachShader(e,n),p.attachShader(e,r),p.linkProgram(e),e}function o(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var a,s,c,l,u,h,p=t.context,d=t.state,f=new i.Vector3,m=new i.Quaternion,v=new i.Vector3;this.render=function(r,y){if(0!==e.length){void 0===c&&n(),p.useProgram(c),d.initAttributes(),d.enableAttribute(l.position),d.enableAttribute(l.uv),d.disableUnusedAttributes(),d.disable(p.CULL_FACE),d.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(l.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(l.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.uniformMatrix4fv(u.projectionMatrix,!1,y.projectionMatrix.elements),d.activeTexture(p.TEXTURE0),p.uniform1i(u.map,0);var g=0,x=0,_=r.fog;_?(p.uniform3f(u.fogColor,_.color.r,_.color.g,_.color.b),_ instanceof i.Fog?(p.uniform1f(u.fogNear,_.near),p.uniform1f(u.fogFar,_.far),p.uniform1i(u.fogType,1),g=1,x=1):_ instanceof i.FogExp2&&(p.uniform1f(u.fogDensity,_.density),p.uniform1i(u.fogType,2),g=2,x=2)):(p.uniform1i(u.fogType,0),g=0,x=0);for(var b=0,w=e.length;b<w;b++){var E=e[b];E.modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}e.sort(o);for(var S=[],b=0,w=e.length;b<w;b++){var E=e[b],M=E.material;p.uniform1f(u.alphaTest,M.alphaTest),p.uniformMatrix4fv(u.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(f,m,v),S[0]=v.x,S[1]=v.y;var A=0;r.fog&&M.fog&&(A=x),g!==A&&(p.uniform1i(u.fogType,A),g=A),null!==M.map?(p.uniform2f(u.uvOffset,M.map.offset.x,M.map.offset.y),p.uniform2f(u.uvScale,M.map.repeat.x,M.map.repeat.y)):(p.uniform2f(u.uvOffset,0,0),p.uniform2f(u.uvScale,1,1)),p.uniform1f(u.opacity,M.opacity),p.uniform3f(u.color,M.color.r,M.color.g,M.color.b),p.uniform1f(u.rotation,M.rotation),p.uniform2fv(u.scale,S),d.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),d.setDepthTest(M.depthTest),d.setDepthWrite(M.depthWrite),M.map&&M.map.image&&M.map.image.width?t.setTexture(M.map,0):t.setTexture(h,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}d.enable(p.CULL_FACE),t.resetGLState()}}},Object.defineProperties(i.Box2.prototype,{empty:{value:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()}},isIntersectionBox:{value:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}}}),Object.defineProperties(i.Box3.prototype,{empty:{value:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()}},isIntersectionBox:{value:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}},isIntersectionSphere:{value:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}}),Object.defineProperties(i.Matrix3.prototype,{multiplyVector3:{value:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)}},multiplyVector3Array:{value:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}}}),Object.defineProperties(i.Matrix4.prototype,{extractPosition:{value:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)}},setRotationFromQuaternion:{value:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)}},multiplyVector3:{value:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)}},multiplyVector4:{value:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)}},multiplyVector3Array:{value:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}},rotateAxis:{value:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)}},crossVector:{value:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)}},translate:{value:function(t){console.error("THREE.Matrix4: .translate() has been removed.")}},rotateX:{value:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")}},rotateY:{value:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")}},rotateZ:{value:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")}},rotateByAxis:{value:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}}),Object.defineProperties(i.Plane.prototype,{isIntersectionLine:{value:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)}}}),Object.defineProperties(i.Quaternion.prototype,{multiplyVector3:{value:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)}}}),Object.defineProperties(i.Ray.prototype,{isIntersectionBox:{value:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}},isIntersectionPlane:{value:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)}},isIntersectionSphere:{value:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}}),Object.defineProperties(i.Vector3.prototype,{setEulerFromRotationMatrix:{value:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")}},setEulerFromQuaternion:{value:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")}},getPositionFromMatrix:{value:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)}},getScaleFromMatrix:{value:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)}},getColumnFromMatrix:{value:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}}),i.Face4=function(t,e,n,r,o,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new i.Face3(t,e,n,o,a,s)},Object.defineProperties(i.Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},getChildByName:{value:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)}},renderDepth:{set:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")}},translate:{value:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(i,{PointCloud:{value:function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new i.Points(t,e)}},ParticleSystem:{value:function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new i.Points(t,e)}}}),Object.defineProperties(i.Light.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(i.BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.defineProperties(i.BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}},addIndex:{value:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)}},addDrawCall:{value:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)}},clearDrawCalls:{value:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()}},computeTangents:{value:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")}},computeOffsets:{value:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}}),Object.defineProperties(i.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new i.Color}}}),Object.defineProperties(i,{PointCloudMaterial:{value:function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)}},ParticleBasicMaterial:{value:function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)}},ParticleSystemMaterial:{value:function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(t)}}}),Object.defineProperties(i.MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(i.ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.defineProperties(i.WebGLRenderer.prototype,{supportsFloatTextures:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")}},supportsHalfFloatTextures:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")}},supportsStandardDerivatives:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")}},supportsCompressedTextureS3TC:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")}},supportsCompressedTexturePVRTC:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")}},supportsBlendMinMax:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")}},supportsVertexTextures:{value:function(){return this.capabilities.vertexTextures}},supportsInstancedArrays:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")}},enableScissorTest:{value:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)}},initMaterial:{value:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")}},addPrePlugin:{value:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")}},addPostPlugin:{value:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")}},updateShadowMap:{value:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(i.WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),i.GeometryUtils={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e instanceof i.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var o=new i.TextureLoader;o.setCrossOrigin(this.crossOrigin);var a=o.load(t,n,void 0,r);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var o=new i.CubeTextureLoader;o.setCrossOrigin(this.crossOrigin);var a=o.load(t,n,void 0,r);return e&&(a.mapping=e),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},i.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},i.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),
this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},i.MeshFaceMaterial=i.MultiMaterial,i.CurveUtils={tangentQuadraticBezier:function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},tangentCubicBezier:function(t,e,n,r,i){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*i},tangentSpline:function(t,e,n,r,i){var o=6*t*t-6*t,a=3*t*t-4*t+1,s=-6*t*t+6*t,c=3*t*t-2*t;return o+a+s+c},interpolate:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,c=i*s;return(2*e-2*n+o+a)*c+(-3*e+3*n-2*o-a)*s+o*i+e}},i.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new i.Group,r=0,o=e.length;r<o;r++)n.add(new i.Mesh(t,e[r]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var r=new i.Matrix4;r.getInverse(n.matrixWorld),t.applyMatrix(r),e.remove(t),n.add(t)}},i.ShapeUtils={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},triangulate:function(){function t(t,e,n,r,i,o){var a,s,c,l,u,h,p,d,f;if(s=t[o[e]].x,c=t[o[e]].y,l=t[o[n]].x,u=t[o[n]].y,h=t[o[r]].x,p=t[o[r]].y,Number.EPSILON>(l-s)*(p-c)-(u-c)*(h-s))return!1;var m,v,y,g,x,_,b,w,E,S,M,A,C,T,N;for(m=h-l,v=p-u,y=s-h,g=c-p,x=l-s,_=u-c,a=0;a<i;a++)if(d=t[o[a]].x,f=t[o[a]].y,!(d===s&&f===c||d===l&&f===u||d===h&&f===p)&&(b=d-s,w=f-c,E=d-l,S=f-u,M=d-h,A=f-p,N=m*S-v*E,C=x*w-_*b,T=y*A-g*M,N>=-Number.EPSILON&&T>=-Number.EPSILON&&C>=-Number.EPSILON))return!1;return!0}return function(e,n){var r=e.length;if(r<3)return null;var o,a,s,c=[],l=[],u=[];if(i.ShapeUtils.area(e)>0)for(a=0;a<r;a++)l[a]=a;else for(a=0;a<r;a++)l[a]=r-1-a;var h=r,p=2*h;for(a=h-1;h>2;){if(p--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:c;if(o=a,h<=o&&(o=0),a=o+1,h<=a&&(a=0),s=a+1,h<=s&&(s=0),t(e,o,a,s,h,l)){var d,f,m,v,y;for(d=l[o],f=l[a],m=l[s],c.push([e[d],e[f],e[m]]),u.push([l[o],l[a],l[s]]),v=a,y=a+1;y<h;v++,y++)l[v]=l[y];h--,p=2*h}}return n?u:c}}(),triangulateShape:function(t,e){function n(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function r(t,e,r,i,o){var a=e.x-t.x,s=e.y-t.y,c=i.x-r.x,l=i.y-r.y,u=t.x-r.x,h=t.y-r.y,p=s*c-a*l,d=s*u-a*h;if(Math.abs(p)>Number.EPSILON){var f;if(p>0){if(d<0||d>p)return[];if(f=l*u-c*h,f<0||f>p)return[]}else{if(d>0||d<p)return[];if(f=l*u-c*h,f>0||f<p)return[]}if(0===f)return!o||0!==d&&d!==p?[t]:[];if(f===p)return!o||0!==d&&d!==p?[e]:[];if(0===d)return[r];if(d===p)return[i];var m=f/p;return[{x:t.x+m*a,y:t.y+m*s}]}if(0!==d||l*u!==c*h)return[];var v=0===a&&0===s,y=0===c&&0===l;if(v&&y)return t.x!==r.x||t.y!==r.y?[]:[t];if(v)return n(r,i,t)?[t]:[];if(y)return n(t,e,r)?[r]:[];var g,x,_,b,w,E,S,M;return 0!==a?(t.x<e.x?(g=t,_=t.x,x=e,b=e.x):(g=e,_=e.x,x=t,b=t.x),r.x<i.x?(w=r,S=r.x,E=i,M=i.x):(w=i,S=i.x,E=r,M=r.x)):(t.y<e.y?(g=t,_=t.y,x=e,b=e.y):(g=e,_=e.y,x=t,b=t.y),r.y<i.y?(w=r,S=r.y,E=i,M=i.y):(w=i,S=i.y,E=r,M=r.y)),_<=S?b<S?[]:b===S?o?[]:[w]:b<=M?[w,x]:[w,E]:_>M?[]:_===M?o?[]:[g]:b<=M?[g,x]:[g,E]}function o(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,c=r.x-t.x,l=r.y-t.y,u=i*s-o*a,h=i*l-o*c;if(Math.abs(u)>Number.EPSILON){var p=c*s-l*a;return u>0?h>=0&&p>=0:h>=0||p>=0}return h>0}function a(t,e){function n(t,e){var n=g.length-1,r=t-1;r<0&&(r=n);var i=t+1;i>n&&(i=0);var a=o(g[t],g[r],g[i],s[e]);if(!a)return!1;var c=s.length-1,l=e-1;l<0&&(l=c);var u=e+1;return u>c&&(u=0),a=o(s[e],s[l],s[u],g[t]),!!a}function i(t,e){var n,i,o;for(n=0;n<g.length;n++)if(i=n+1,i%=g.length,o=r(t,e,g[n],g[i],!0),o.length>0)return!0;return!1}function a(t,n){var i,o,a,s,c;for(i=0;i<x.length;i++)for(o=e[x[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,c=r(t,n,o[a],o[s],!0),c.length>0)return!0;return!1}for(var s,c,l,u,h,p,d,f,m,v,y,g=t.concat(),x=[],_=[],b=0,w=e.length;b<w;b++)x.push(b);for(var E=0,S=2*x.length;x.length>0;){if(S--,S<0){console.log("Infinite Loop! Holes left:"+x.length+", Probably Hole outside Shape!");break}for(l=E;l<g.length;l++){u=g[l],c=-1;for(var b=0;b<x.length;b++)if(p=x[b],d=u.x+":"+u.y+":"+p,void 0===_[d]){s=e[p];for(var M=0;M<s.length;M++)if(h=s[M],n(l,M)&&!i(u,h)&&!a(u,h)){c=M,x.splice(b,1),f=g.slice(0,l+1),m=g.slice(l),v=s.slice(c),y=s.slice(0,c+1),g=f.concat(v).concat(y).concat(m),E=l;break}if(c>=0)break;_[d]=!0}if(c>=0)break}}return g}for(var s,c,l,u,h,p,d={},f=t.concat(),m=0,v=e.length;m<v;m++)Array.prototype.push.apply(f,e[m]);for(s=0,c=f.length;s<c;s++)h=f[s].x+":"+f[s].y,void 0!==d[h]&&console.warn("THREE.Shape: Duplicate point",h),d[h]=s;var y=a(t,e),g=i.ShapeUtils.triangulate(y,!1);for(s=0,c=g.length;s<c;s++)for(u=g[s],l=0;l<3;l++)h=u[l].x+":"+u[l].y,p=d[h],void 0!==p&&(u[l]=p);return g.concat()},isClockWise:function(t){return i.ShapeUtils.area(t)<0},b2:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(r,i,o,a){return t(r,i)+e(r,o)+n(r,a)}}(),b3:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function r(t,e){return t*t*t*e}return function(i,o,a,s,c){return t(i,o)+e(i,a)+n(i,s)+r(i,c)}}()},i.Curve=function(){},i.Curve.prototype={constructor:i.Curve,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);var e,n=[];for(e=0;e<=t;e++)n.push(this.getPoint(e/t));return n},getSpacedPoints:function(t){t||(t=5);var e,n=[];for(e=0;e<=t;e++)n.push(this.getPointAt(e/t));return n},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e?e:t*r[o-1];for(var a,s=0,c=o-1;s<=c;)if(i=Math.floor(s+(c-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,r[i]===n){var l=i/(o-1);return l}var u=r[i],h=r[i+1],p=h-u,d=(n-u)/p,l=(i+d)/(o-1);return l},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},i.Curve.create=function(t,e){return t.prototype=Object.create(i.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},i.CurvePath=function(){this.curves=[],this.autoClose=!1},i.CurvePath.prototype=Object.create(i.Curve.prototype),i.CurvePath.prototype.constructor=i.CurvePath,i.CurvePath.prototype.add=function(t){this.curves.push(t)},i.CurvePath.prototype.closePath=function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new i.LineCurve(e,t))},i.CurvePath.prototype.getPoint=function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=1-i/o.getLength();return o.getPointAt(a)}r++}return null},i.CurvePath.prototype.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},i.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},i.CurvePath.prototype.createPointsGeometry=function(t){var e=this.getPoints(t);return this.createGeometry(e)},i.CurvePath.prototype.createSpacedPointsGeometry=function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},i.CurvePath.prototype.createGeometry=function(t){for(var e=new i.Geometry,n=0,r=t.length;n<r;n++){var o=t[n];e.vertices.push(new i.Vector3(o.x,o.y,o.z||0))}return e},i.Font=function(t){this.data=t},i.Font.prototype={constructor:i.Font,generateShapes:function(t,e,n){function r(t){for(var n=String(t).split(""),r=e/a.resolution,i=0,s=[],c=0;c<n.length;c++){var l=o(n[c],r,i);i+=l.offset,s.push(l.path)}return s}function o(t,e,r){var o=a.glyphs[t]||a.glyphs["?"];if(o){var s,c,l,u,h,p,d,f,m,v,y,g=new i.Path,x=[],_=i.ShapeUtils.b2,b=i.ShapeUtils.b3;if(o.o)for(var w=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),E=0,S=w.length;E<S;){var M=w[E++];switch(M){case"m":s=w[E++]*e+r,c=w[E++]*e,g.moveTo(s,c);break;case"l":s=w[E++]*e+r,c=w[E++]*e,g.lineTo(s,c);break;case"q":if(l=w[E++]*e+r,u=w[E++]*e,d=w[E++]*e+r,f=w[E++]*e,g.quadraticCurveTo(d,f,l,u),y=x[x.length-1]){h=y.x,p=y.y;for(var A=1;A<=n;A++){var C=A/n;_(C,h,d,l),_(C,p,f,u)}}break;case"b":if(l=w[E++]*e+r,u=w[E++]*e,d=w[E++]*e+r,f=w[E++]*e,m=w[E++]*e+r,v=w[E++]*e,g.bezierCurveTo(d,f,m,v,l,u),y=x[x.length-1]){h=y.x,p=y.y;for(var A=1;A<=n;A++){var C=A/n;b(C,h,d,m,l),b(C,p,f,v,u)}}}}return{offset:o.ha*e,path:g}}}void 0===e&&(e=100),void 0===n&&(n=4);for(var a=this.data,s=r(t),c=[],l=0,u=s.length;l<u;l++)Array.prototype.push.apply(c,s[l].toShapes());return c}},i.Path=function(t){i.CurvePath.call(this),this.actions=[],t&&this.fromPoints(t)},i.Path.prototype=Object.create(i.CurvePath.prototype),i.Path.prototype.constructor=i.Path,i.Path.prototype.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},i.Path.prototype.moveTo=function(t,e){this.actions.push({action:"moveTo",args:[t,e]})},i.Path.prototype.lineTo=function(t,e){var n=this.actions[this.actions.length-1].args,r=n[n.length-2],o=n[n.length-1],a=new i.LineCurve(new i.Vector2(r,o),new i.Vector2(t,e));this.curves.push(a),this.actions.push({action:"lineTo",args:[t,e]})},i.Path.prototype.quadraticCurveTo=function(t,e,n,r){var o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],c=new i.QuadraticBezierCurve(new i.Vector2(a,s),new i.Vector2(t,e),new i.Vector2(n,r));this.curves.push(c),this.actions.push({action:"quadraticCurveTo",args:[t,e,n,r]})},i.Path.prototype.bezierCurveTo=function(t,e,n,r,o,a){var s=this.actions[this.actions.length-1].args,c=s[s.length-2],l=s[s.length-1],u=new i.CubicBezierCurve(new i.Vector2(c,l),new i.Vector2(t,e),new i.Vector2(n,r),new i.Vector2(o,a));this.curves.push(u),this.actions.push({action:"bezierCurveTo",args:[t,e,n,r,o,a]})},i.Path.prototype.splineThru=function(t){var e=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],o=n[n.length-1],a=[new i.Vector2(r,o)];Array.prototype.push.apply(a,t);var s=new i.SplineCurve(a);this.curves.push(s),this.actions.push({action:"splineThru",args:e})},i.Path.prototype.arc=function(t,e,n,r,i,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],c=a[a.length-1];this.absarc(t+s,e+c,n,r,i,o)},i.Path.prototype.absarc=function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},i.Path.prototype.ellipse=function(t,e,n,r,i,o,a,s){var c=this.actions[this.actions.length-1].args,l=c[c.length-2],u=c[c.length-1];this.absellipse(t+l,e+u,n,r,i,o,a,s)},i.Path.prototype.absellipse=function(t,e,n,r,o,a,s,c){var l=[t,e,n,r,o,a,s,c||0],u=new i.EllipseCurve(t,e,n,r,o,a,s,c);this.curves.push(u);var h=u.getPoint(1);l.push(h.x),l.push(h.y),this.actions.push({action:"ellipse",args:l})},i.Path.prototype.getSpacedPoints=function(t){t||(t=40);for(var e=[],n=0;n<t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},i.Path.prototype.getPoints=function(t){t=t||12;for(var e,n,r,o,a,s,c,l,u,h,p,d=i.ShapeUtils.b2,f=i.ShapeUtils.b3,m=[],v=0,y=this.actions.length;v<y;v++){var g=this.actions[v],x=g.action,_=g.args;switch(x){case"moveTo":m.push(new i.Vector2(_[0],_[1]));break;case"lineTo":m.push(new i.Vector2(_[0],_[1]));break;case"quadraticCurveTo":e=_[2],n=_[3],a=_[0],s=_[1],m.length>0?(u=m[m.length-1],c=u.x,l=u.y):(u=this.actions[v-1].args,c=u[u.length-2],l=u[u.length-1]);for(var b=1;b<=t;b++){var w=b/t;h=d(w,c,a,e),p=d(w,l,s,n),m.push(new i.Vector2(h,p))}break;case"bezierCurveTo":e=_[4],n=_[5],a=_[0],s=_[1],r=_[2],o=_[3],m.length>0?(u=m[m.length-1],c=u.x,l=u.y):(u=this.actions[v-1].args,c=u[u.length-2],l=u[u.length-1]);for(var b=1;b<=t;b++){var w=b/t;h=f(w,c,a,r,e),p=f(w,l,s,o,n),m.push(new i.Vector2(h,p))}break;case"splineThru":u=this.actions[v-1].args;var E=new i.Vector2(u[u.length-2],u[u.length-1]),S=[E],M=t*_[0].length;S=S.concat(_[0]);for(var A=new i.SplineCurve(S),b=1;b<=M;b++)m.push(A.getPointAt(b/M));break;case"arc":for(var C,T=_[0],N=_[1],R=_[2],O=_[3],L=_[4],P=!!_[5],k=L-O,D=2*t,b=1;b<=D;b++){var w=b/D;P||(w=1-w),C=O+w*k,h=T+R*Math.cos(C),p=N+R*Math.sin(C),m.push(new i.Vector2(h,p))}break;case"ellipse":var C,I,q,T=_[0],N=_[1],B=_[2],V=_[3],O=_[4],L=_[5],P=!!_[6],F=_[7],k=L-O,D=2*t;0!==F&&(I=Math.cos(F),q=Math.sin(F));for(var b=1;b<=D;b++){var w=b/D;if(P||(w=1-w),C=O+w*k,h=T+B*Math.cos(C),p=N+V*Math.sin(C),0!==F){var z=h,U=p;h=(z-T)*I-(U-N)*q+T,p=(z-T)*q+(U-N)*I+N}m.push(new i.Vector2(h,p))}}}var j=m[m.length-1];return Math.abs(j.x-m[0].x)<Number.EPSILON&&Math.abs(j.y-m[0].y)<Number.EPSILON&&m.splice(m.length-1,1),this.autoClose&&m.push(m[0]),m},i.Path.prototype.toShapes=function(t,e){function n(t){for(var e=[],n=new i.Path,r=0,o=t.length;r<o;r++){var a=t[r],s=a.args,c=a.action;"moveTo"===c&&0!==n.actions.length&&(e.push(n),n=new i.Path),n[c].apply(n,s)}return 0!==n.actions.length&&e.push(n),e}function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n],a=new i.Shape;a.actions=o.actions,a.curves=o.curves,e.push(a)}return e}function o(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],c=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],c=-c,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var u=l*(t.x-a.x)-c*(t.y-a.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var a=i.ShapeUtils.isClockWise,s=n(this.actions);if(0===s.length)return[];if(e===!0)return r(s);var c,l,u,h=[];if(1===s.length)return l=s[0],u=new i.Shape,u.actions=l.actions,u.curves=l.curves,h.push(u),h;var p=!a(s[0].getPoints());p=t?!p:p;var d,f=[],m=[],v=[],y=0;m[y]=void 0,v[y]=[];for(var g=0,x=s.length;g<x;g++)l=s[g],d=l.getPoints(),c=a(d),c=t?!c:c,c?(!p&&m[y]&&y++,m[y]={s:new i.Shape,p:d},m[y].s.actions=l.actions,m[y].s.curves=l.curves,p&&y++,v[y]=[]):v[y].push({h:l,p:d[0]});if(!m[0])return r(s);if(m.length>1){for(var _=!1,b=[],w=0,E=m.length;w<E;w++)f[w]=[];for(var w=0,E=m.length;w<E;w++)for(var S=v[w],M=0;M<S.length;M++){for(var A=S[M],C=!0,T=0;T<m.length;T++)o(A.p,m[T].p)&&(w!==T&&b.push({froms:w,tos:T,hole:M}),C?(C=!1,f[T].push(A)):_=!0);C&&f[w].push(A)}b.length>0&&(_||(v=f))}for(var N,g=0,R=m.length;g<R;g++){u=m[g].s,h.push(u),N=v[g];for(var O=0,L=N.length;O<L;O++)u.holes.push(N[O].h)}return h},i.Shape=function(){i.Path.apply(this,arguments),this.holes=[]},i.Shape.prototype=Object.create(i.Path.prototype),i.Shape.prototype.constructor=i.Shape,i.Shape.prototype.extrude=function(t){return new i.ExtrudeGeometry(this,t)},i.Shape.prototype.makeGeometry=function(t){return new i.ShapeGeometry(this,t)},i.Shape.prototype.getPointsHoles=function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},i.Shape.prototype.extractAllPoints=function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},i.Shape.prototype.extractPoints=function(t){return this.extractAllPoints(t)},i.LineCurve=function(t,e){this.v1=t,this.v2=e},i.LineCurve.prototype=Object.create(i.Curve.prototype),i.LineCurve.prototype.constructor=i.LineCurve,i.LineCurve.prototype.getPoint=function(t){var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},i.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},i.LineCurve.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},i.QuadraticBezierCurve=function(t,e,n){this.v0=t,this.v1=e,this.v2=n},i.QuadraticBezierCurve.prototype=Object.create(i.Curve.prototype),i.QuadraticBezierCurve.prototype.constructor=i.QuadraticBezierCurve,i.QuadraticBezierCurve.prototype.getPoint=function(t){var e=i.ShapeUtils.b2;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},i.QuadraticBezierCurve.prototype.getTangent=function(t){var e=i.CurveUtils.tangentQuadraticBezier;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()},i.CubicBezierCurve=function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},i.CubicBezierCurve.prototype=Object.create(i.Curve.prototype),i.CubicBezierCurve.prototype.constructor=i.CubicBezierCurve,i.CubicBezierCurve.prototype.getPoint=function(t){var e=i.ShapeUtils.b3;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},i.CubicBezierCurve.prototype.getTangent=function(t){var e=i.CurveUtils.tangentCubicBezier;return new i.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},i.SplineCurve=function(t){this.points=void 0==t?[]:t},i.SplineCurve.prototype=Object.create(i.Curve.prototype),i.SplineCurve.prototype.constructor=i.SplineCurve,i.SplineCurve.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),o=n-r,a=e[0===r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],u=i.CurveUtils.interpolate;return new i.Vector2(u(a.x,s.x,c.x,l.x,o),u(a.y,s.y,c.y,l.y,o))},i.EllipseCurve=function(t,e,n,r,i,o,a,s){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},i.EllipseCurve.prototype=Object.create(i.Curve.prototype),i.EllipseCurve.prototype.constructor=i.EllipseCurve,i.EllipseCurve.prototype.getPoint=function(t){var e=this.aEndAngle-this.aStartAngle;e<0&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI);var n;n=this.aClockwise===!0?this.aEndAngle+(1-t)*(2*Math.PI-e):this.aStartAngle+t*e;var r=this.aX+this.xRadius*Math.cos(n),o=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){var a=Math.cos(this.aRotation),s=Math.sin(this.aRotation),c=r,l=o;r=(c-this.aX)*a-(l-this.aY)*s+this.aX,o=(c-this.aX)*s+(l-this.aY)*a+this.aY}return new i.Vector2(r,o)},i.ArcCurve=function(t,e,n,r,o,a){i.EllipseCurve.call(this,t,e,n,n,r,o,a)},i.ArcCurve.prototype=Object.create(i.EllipseCurve.prototype),i.ArcCurve.prototype.constructor=i.ArcCurve,i.LineCurve3=i.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){var e=new i.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),i.QuadraticBezierCurve3=i.Curve.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(t){var e=i.ShapeUtils.b2;return new i.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),i.CubicBezierCurve3=i.Curve.create(function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},function(t){var e=i.ShapeUtils.b3;return new i.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),i.SplineCurve3=i.Curve.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==t?[]:t},function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),o=n-r,a=e[0==r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],u=i.CurveUtils.interpolate;return new i.Vector3(u(a.x,s.x,c.x,l.x,o),u(a.y,s.y,c.y,l.y,o),u(a.z,s.z,c.z,l.z,o))}),i.CatmullRomCurve3=function(){function t(){}var e=new i.Vector3,n=new t,r=new t,o=new t;return t.prototype.init=function(t,e,n,r){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-r,this.c3=2*t-2*e+n+r},t.prototype.initNonuniformCatmullRom=function(t,e,n,r,i,o,a){var s=(e-t)/i-(n-t)/(i+o)+(n-e)/o,c=(n-e)/o-(r-e)/(o+a)+(r-n)/a;s*=o,c*=o,this.init(e,n,s,c)},t.prototype.initCatmullRom=function(t,e,n,r,i){this.init(e,n,i*(n-t),i*(r-e))},t.prototype.calc=function(t){var e=t*t,n=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*n},i.Curve.create(function(t){this.points=t||[],this.closed=!1},function(t){var a,s,c,l,u=this.points;l=u.length,l<2&&console.log("duh, you need at least 2 points"),a=(l-(this.closed?0:1))*t,s=Math.floor(a),c=a-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/u.length)+1)*u.length:0===c&&s===l-1&&(s=l-2,c=1);var h,p,d,f;if(this.closed||s>0?h=u[(s-1)%l]:(e.subVectors(u[0],u[1]).add(u[0]),h=e),p=u[s%l],d=u[(s+1)%l],this.closed||s+2<l?f=u[(s+2)%l]:(e.subVectors(u[l-1],u[l-2]).add(u[l-1]),f=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m),g=Math.pow(d.distanceToSquared(f),m);y<1e-4&&(y=1),v<1e-4&&(v=y),g<1e-4&&(g=y),n.initNonuniformCatmullRom(h.x,p.x,d.x,f.x,v,y,g),r.initNonuniformCatmullRom(h.y,p.y,d.y,f.y,v,y,g),o.initNonuniformCatmullRom(h.z,p.z,d.z,f.z,v,y,g)}else if("catmullrom"===this.type){var x=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,p.x,d.x,f.x,x),r.initCatmullRom(h.y,p.y,d.y,f.y,x),o.initCatmullRom(h.z,p.z,d.z,f.z,x)}var _=new i.Vector3(n.calc(c),r.calc(c),o.calc(c));return _})}(),i.ClosedSplineCurve3=function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),i.CatmullRomCurve3.call(this,t),this.type="catmullrom",this.closed=!0},i.ClosedSplineCurve3.prototype=Object.create(i.CatmullRomCurve3.prototype),i.BoxGeometry=function(t,e,n,r,o,a){function s(t,e,n,r,o,a,s,l){var u,h,p,d=c.widthSegments,f=c.heightSegments,m=o/2,v=a/2,y=c.vertices.length;"x"===t&&"y"===e||"y"===t&&"x"===e?u="z":"x"===t&&"z"===e||"z"===t&&"x"===e?(u="y",f=c.depthSegments):("z"===t&&"y"===e||"y"===t&&"z"===e)&&(u="x",d=c.depthSegments);var g=d+1,x=f+1,_=o/d,b=a/f,w=new i.Vector3;for(w[u]=s>0?1:-1,p=0;p<x;p++)for(h=0;h<g;h++){var E=new i.Vector3;E[t]=(h*_-m)*n,E[e]=(p*b-v)*r,E[u]=s,c.vertices.push(E)}for(p=0;p<f;p++)for(h=0;h<d;h++){var S=h+g*p,M=h+g*(p+1),A=h+1+g*(p+1),C=h+1+g*p,T=new i.Vector2(h/d,1-p/f),N=new i.Vector2(h/d,1-(p+1)/f),R=new i.Vector2((h+1)/d,1-(p+1)/f),O=new i.Vector2((h+1)/d,1-p/f),L=new i.Face3(S+y,M+y,C+y);L.normal.copy(w),L.vertexNormals.push(w.clone(),w.clone(),w.clone()),L.materialIndex=l,c.faces.push(L),c.faceVertexUvs[0].push([T,N,O]),L=new i.Face3(M+y,A+y,C+y),L.normal.copy(w),L.vertexNormals.push(w.clone(),w.clone(),w.clone()),L.materialIndex=l,c.faces.push(L),c.faceVertexUvs[0].push([N.clone(),R,O.clone()])}}i.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:a},this.widthSegments=r||1,this.heightSegments=o||1,this.depthSegments=a||1;var c=this,l=t/2,u=e/2,h=n/2;s("z","y",-1,-1,n,e,l,0),s("z","y",1,-1,n,e,-l,1),s("x","z",1,1,t,n,u,2),s("x","z",1,-1,t,n,-u,3),s("x","y",1,-1,t,e,h,4),s("x","y",-1,-1,t,e,-h,5),this.mergeVertices()},i.BoxGeometry.prototype=Object.create(i.Geometry.prototype),i.BoxGeometry.prototype.constructor=i.BoxGeometry,i.CubeGeometry=i.BoxGeometry,i.CircleGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new i.CircleBufferGeometry(t,e,n,r))},i.CircleGeometry.prototype=Object.create(i.Geometry.prototype),i.CircleGeometry.prototype.constructor=i.CircleGeometry,i.CircleBufferGeometry=function(t,e,n,r){i.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o=e+2,a=new Float32Array(3*o),s=new Float32Array(3*o),c=new Float32Array(2*o);s[2]=1,c[0]=.5,c[1]=.5;for(var l=0,u=3,h=2;l<=e;l++,u+=3,h+=2){var p=n+l/e*r;a[u]=t*Math.cos(p),a[u+1]=t*Math.sin(p),s[u+2]=1,c[h]=(a[u]/t+1)/2,c[h+1]=(a[u+1]/t+1)/2}for(var d=[],u=1;u<=e;u++)d.push(u,u+1,0);this.setIndex(new i.BufferAttribute(new Uint16Array(d),1)),this.addAttribute("position",new i.BufferAttribute(a,3)),this.addAttribute("normal",new i.BufferAttribute(s,3)),this.addAttribute("uv",new i.BufferAttribute(c,2)),this.boundingSphere=new i.Sphere(new i.Vector3,t)},i.CircleBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.CircleBufferGeometry.prototype.constructor=i.CircleBufferGeometry,i.CylinderGeometry=function(t,e,n,r,o,a,s,c){i.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:c},t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=r||8,o=o||1,a=void 0!==a&&a,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var l,u,h=n/2,p=[],d=[];for(u=0;u<=o;u++){var f=[],m=[],v=u/o,y=v*(e-t)+t;for(l=0;l<=r;l++){var g=l/r,x=new i.Vector3;x.x=y*Math.sin(g*c+s),x.y=-v*n+h,x.z=y*Math.cos(g*c+s),this.vertices.push(x),f.push(this.vertices.length-1),m.push(new i.Vector2(g,1-v))}p.push(f),d.push(m)}var _,b,w=(e-t)/n;for(l=0;l<r;l++)for(0!==t?(_=this.vertices[p[0][l]].clone(),b=this.vertices[p[0][l+1]].clone()):(_=this.vertices[p[1][l]].clone(),b=this.vertices[p[1][l+1]].clone()),_.setY(Math.sqrt(_.x*_.x+_.z*_.z)*w).normalize(),b.setY(Math.sqrt(b.x*b.x+b.z*b.z)*w).normalize(),u=0;u<o;u++){var E=p[u][l],S=p[u+1][l],M=p[u+1][l+1],A=p[u][l+1],C=_.clone(),T=_.clone(),N=b.clone(),R=b.clone(),O=d[u][l].clone(),L=d[u+1][l].clone(),P=d[u+1][l+1].clone(),k=d[u][l+1].clone();this.faces.push(new i.Face3(E,S,A,[C,T,R])),this.faceVertexUvs[0].push([O,L,k]),this.faces.push(new i.Face3(S,M,A,[T.clone(),N,R.clone()])),this.faceVertexUvs[0].push([L.clone(),P,k.clone()])}if(a===!1&&t>0)for(this.vertices.push(new i.Vector3(0,h,0)),l=0;l<r;l++){var E=p[0][l],S=p[0][l+1],M=this.vertices.length-1,C=new i.Vector3(0,1,0),T=new i.Vector3(0,1,0),N=new i.Vector3(0,1,0),O=d[0][l].clone(),L=d[0][l+1].clone(),P=new i.Vector2(L.x,0);this.faces.push(new i.Face3(E,S,M,[C,T,N],(void 0),1)),this.faceVertexUvs[0].push([O,L,P])}if(a===!1&&e>0)for(this.vertices.push(new i.Vector3(0,(-h),0)),l=0;l<r;l++){var E=p[o][l+1],S=p[o][l],M=this.vertices.length-1,C=new i.Vector3(0,(-1),0),T=new i.Vector3(0,(-1),0),N=new i.Vector3(0,(-1),0),O=d[o][l+1].clone(),L=d[o][l].clone(),P=new i.Vector2(L.x,1);this.faces.push(new i.Face3(E,S,M,[C,T,N],(void 0),2)),this.faceVertexUvs[0].push([O,L,P])}this.computeFaceNormals()},i.CylinderGeometry.prototype=Object.create(i.Geometry.prototype),i.CylinderGeometry.prototype.constructor=i.CylinderGeometry,i.EdgesGeometry=function(t,e){function n(t,e){return t-e}i.BufferGeometry.call(this),e=void 0!==e?e:1;var r,o=Math.cos(i.Math.degToRad(e)),a=[0,0],s={},c=["a","b","c"];t instanceof i.BufferGeometry?(r=new i.Geometry,r.fromBufferGeometry(t)):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,u=r.faces,h=0,p=u.length;h<p;h++)for(var d=u[h],f=0;f<3;f++){a[0]=d[c[f]],a[1]=d[c[(f+1)%3]],a.sort(n);var m=a.toString();void 0===s[m]?s[m]={vert1:a[0],vert2:a[1],face1:h,face2:void 0}:s[m].face2=h}var v=[];for(var m in s){var y=s[m];if(void 0===y.face2||u[y.face1].normal.dot(u[y.face2].normal)<=o){var g=l[y.vert1];v.push(g.x),v.push(g.y),v.push(g.z),g=l[y.vert2],v.push(g.x),v.push(g.y),v.push(g.z)}}this.addAttribute("position",new i.BufferAttribute(new Float32Array(v),3))},i.EdgesGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.EdgesGeometry.prototype.constructor=i.EdgesGeometry,i.ExtrudeGeometry=function(t,e){return"undefined"==typeof t?void(t=[]):(i.Geometry.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())},i.ExtrudeGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry.prototype.constructor=i.ExtrudeGeometry,i.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];this.addShape(i,e)}},i.ExtrudeGeometry.prototype.addShape=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,n){var r,o,a=1,s=t.x-e.x,c=t.y-e.y,l=n.x-t.x,u=n.y-t.y,h=s*s+c*c,p=s*u-c*l;if(Math.abs(p)>Number.EPSILON){var d=Math.sqrt(h),f=Math.sqrt(l*l+u*u),m=e.x-c/d,v=e.y+s/d,y=n.x-u/f,g=n.y+l/f,x=((y-m)*u-(g-v)*l)/(s*u-c*l);r=m+s*x-t.x,o=v+c*x-t.y;var _=r*r+o*o;if(_<=2)return new i.Vector2(r,o);a=Math.sqrt(_/2)}else{var b=!1;s>Number.EPSILON?l>Number.EPSILON&&(b=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(b=!0):Math.sign(c)===Math.sign(u)&&(b=!0),b?(r=-c,o=s,a=Math.sqrt(h)):(r=s,o=c,a=Math.sqrt(h/2))}return new i.Vector2(r/a,o/a)}function o(){if(_){var t=0,e=j*t;for(W=0;W<H;W++)U=D[W],l(U[2]+e,U[1]+e,U[0]+e);for(t=w+2*x,e=j*t,W=0;W<H;W++)U=D[W],l(U[0]+e,U[1]+e,U[2]+e)}else{for(W=0;W<H;W++)U=D[W],l(U[2],U[1],U[0]);for(W=0;W<H;W++)U=D[W],l(U[0]+j*w,U[1]+j*w,U[2]+j*w)}}function a(){var t=0;for(s(I,t),t+=I.length,C=0,T=P.length;C<T;C++)A=P[C],s(A,t),t+=A.length}function s(t,e){var n,r;for(W=t.length;--W>=0;){n=W,r=W-1,r<0&&(r=t.length-1);var i=0,o=w+2*x;for(i=0;i<o;i++){var a=j*i,s=j*(i+1),c=e+n+a,l=e+r+a,h=e+r+s,p=e+n+s;u(c,l,h,p,t,i,o,n,r)}}}function c(t,e,n){N.vertices.push(new i.Vector3(t,e,n))}function l(t,e,n){t+=R,e+=R,n+=R,N.faces.push(new i.Face3(t,e,n,null,null,0));var r=M.generateTopUV(N,t,e,n);N.faceVertexUvs[0].push(r)}function u(t,e,n,r,o,a,s,c,l){t+=R,e+=R,n+=R,r+=R,N.faces.push(new i.Face3(t,e,r,null,null,1)),N.faces.push(new i.Face3(e,n,r,null,null,1));var u=M.generateSideWallUV(N,t,e,n,r);N.faceVertexUvs[0].push([u[0],u[1],u[3]]),N.faceVertexUvs[0].push([u[1],u[2],u[3]])}var h,p,d,f,m,v=void 0!==e.amount?e.amount:100,y=void 0!==e.bevelThickness?e.bevelThickness:6,g=void 0!==e.bevelSize?e.bevelSize:y-2,x=void 0!==e.bevelSegments?e.bevelSegments:3,_=void 0===e.bevelEnabled||e.bevelEnabled,b=void 0!==e.curveSegments?e.curveSegments:12,w=void 0!==e.steps?e.steps:1,E=e.extrudePath,S=!1,M=void 0!==e.UVGenerator?e.UVGenerator:i.ExtrudeGeometry.WorldUVGenerator;E&&(h=E.getSpacedPoints(w),S=!0,_=!1,p=void 0!==e.frames?e.frames:new i.TubeGeometry.FrenetFrames(E,w,(!1)),d=new i.Vector3,f=new i.Vector3,m=new i.Vector3),_||(x=0,y=0,g=0);var A,C,T,N=this,R=this.vertices.length,O=t.extractPoints(b),L=O.shape,P=O.holes,k=!i.ShapeUtils.isClockWise(L);if(k){for(L=L.reverse(),C=0,T=P.length;C<T;C++)A=P[C],i.ShapeUtils.isClockWise(A)&&(P[C]=A.reverse());k=!1}var D=i.ShapeUtils.triangulateShape(L,P),I=L;for(C=0,T=P.length;C<T;C++)A=P[C],L=L.concat(A);for(var q,B,V,F,z,U,j=L.length,H=D.length,G=[],W=0,X=I.length,Z=X-1,K=W+1;W<X;W++,Z++,K++)Z===X&&(Z=0),K===X&&(K=0),G[W]=r(I[W],I[Z],I[K]);var Y,Q=[],J=G.concat();for(C=0,T=P.length;C<T;C++){for(A=P[C],Y=[],W=0,X=A.length,Z=X-1,K=W+1;W<X;W++,Z++,K++)Z===X&&(Z=0),K===X&&(K=0),Y[W]=r(A[W],A[Z],A[K]);Q.push(Y),J=J.concat(Y)}for(q=0;q<x;q++){for(V=q/x,F=y*(1-V),B=g*Math.sin(V*Math.PI/2),W=0,X=I.length;W<X;W++)z=n(I[W],G[W],B),c(z.x,z.y,-F);for(C=0,T=P.length;C<T;C++)for(A=P[C],Y=Q[C],W=0,X=A.length;W<X;W++)z=n(A[W],Y[W],B),c(z.x,z.y,-F)}for(B=g,W=0;W<j;W++)z=_?n(L[W],J[W],B):L[W],S?(f.copy(p.normals[0]).multiplyScalar(z.x),d.copy(p.binormals[0]).multiplyScalar(z.y),m.copy(h[0]).add(f).add(d),c(m.x,m.y,m.z)):c(z.x,z.y,0);var $;for($=1;$<=w;$++)for(W=0;W<j;W++)z=_?n(L[W],J[W],B):L[W],S?(f.copy(p.normals[$]).multiplyScalar(z.x),d.copy(p.binormals[$]).multiplyScalar(z.y),m.copy(h[$]).add(f).add(d),c(m.x,m.y,m.z)):c(z.x,z.y,v/w*$);for(q=x-1;q>=0;q--){for(V=q/x,F=y*(1-V),B=g*Math.sin(V*Math.PI/2),W=0,X=I.length;W<X;W++)z=n(I[W],G[W],B),c(z.x,z.y,v+F);for(C=0,T=P.length;C<T;C++)for(A=P[C],Y=Q[C],W=0,X=A.length;W<X;W++)z=n(A[W],Y[W],B),S?c(z.x,z.y+h[w-1].y,h[w-1].x+F):c(z.x,z.y,v+F)}o(),a()},i.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,n,r){var o=t.vertices,a=o[e],s=o[n],c=o[r];return[new i.Vector2(a.x,a.y),new i.Vector2(s.x,s.y),new i.Vector2(c.x,c.y)];
},generateSideWallUV:function(t,e,n,r,o){var a=t.vertices,s=a[e],c=a[n],l=a[r],u=a[o];return Math.abs(s.y-c.y)<.01?[new i.Vector2(s.x,1-s.z),new i.Vector2(c.x,1-c.z),new i.Vector2(l.x,1-l.z),new i.Vector2(u.x,1-u.z)]:[new i.Vector2(s.y,1-s.z),new i.Vector2(c.y,1-c.z),new i.Vector2(l.y,1-l.z),new i.Vector2(u.y,1-u.z)]}},i.ShapeGeometry=function(t,e){i.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},i.ShapeGeometry.prototype=Object.create(i.Geometry.prototype),i.ShapeGeometry.prototype.constructor=i.ShapeGeometry,i.ShapeGeometry.prototype.addShapeList=function(t,e){for(var n=0,r=t.length;n<r;n++)this.addShape(t[n],e);return this},i.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var n,r,o,a=void 0!==e.curveSegments?e.curveSegments:12,s=e.material,c=void 0===e.UVGenerator?i.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,l=this.vertices.length,u=t.extractPoints(a),h=u.shape,p=u.holes,d=!i.ShapeUtils.isClockWise(h);if(d){for(h=h.reverse(),n=0,r=p.length;n<r;n++)o=p[n],i.ShapeUtils.isClockWise(o)&&(p[n]=o.reverse());d=!1}var f=i.ShapeUtils.triangulateShape(h,p);for(n=0,r=p.length;n<r;n++)o=p[n],h=h.concat(o);var m,v,y=h.length,g=f.length;for(n=0;n<y;n++)m=h[n],this.vertices.push(new i.Vector3(m.x,m.y,0));for(n=0;n<g;n++){v=f[n];var x=v[0]+l,_=v[1]+l,b=v[2]+l;this.faces.push(new i.Face3(x,_,b,null,null,s)),this.faceVertexUvs[0].push(c.generateTopUV(this,x,_,b))}},i.LatheGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=e||12,n=n||0,r=r||2*Math.PI;for(var o=1/(t.length-1),a=1/e,s=0,c=e;s<=c;s++)for(var l=n+s*a*r,u=Math.sin(l),h=Math.cos(l),p=0,d=t.length;p<d;p++){var f=t[p],m=new i.Vector3;m.x=f.x*u,m.y=f.y,m.z=f.x*h,this.vertices.push(m)}for(var v=t.length,s=0,c=e;s<c;s++)for(var p=0,d=t.length-1;p<d;p++){var y=p+v*s,g=y,x=y+v,_=y+1+v,b=y+1,w=s*a,E=p*o,S=w+a,M=E+o;this.faces.push(new i.Face3(g,x,b)),this.faceVertexUvs[0].push([new i.Vector2(w,E),new i.Vector2(S,E),new i.Vector2(w,M)]),this.faces.push(new i.Face3(x,_,b)),this.faceVertexUvs[0].push([new i.Vector2(S,E),new i.Vector2(S,M),new i.Vector2(w,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},i.LatheGeometry.prototype=Object.create(i.Geometry.prototype),i.LatheGeometry.prototype.constructor=i.LatheGeometry,i.PlaneGeometry=function(t,e,n,r){i.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new i.PlaneBufferGeometry(t,e,n,r))},i.PlaneGeometry.prototype=Object.create(i.Geometry.prototype),i.PlaneGeometry.prototype.constructor=i.PlaneGeometry,i.PlaneBufferGeometry=function(t,e,n,r){i.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};for(var o=t/2,a=e/2,s=Math.floor(n)||1,c=Math.floor(r)||1,l=s+1,u=c+1,h=t/s,p=e/c,d=new Float32Array(l*u*3),f=new Float32Array(l*u*3),m=new Float32Array(l*u*2),v=0,y=0,g=0;g<u;g++)for(var x=g*p-a,_=0;_<l;_++){var b=_*h-o;d[v]=b,d[v+1]=-x,f[v+2]=1,m[y]=_/s,m[y+1]=1-g/c,v+=3,y+=2}v=0;for(var w=new(d.length/3>65535?Uint32Array:Uint16Array)(s*c*6),g=0;g<c;g++)for(var _=0;_<s;_++){var E=_+l*g,S=_+l*(g+1),M=_+1+l*(g+1),A=_+1+l*g;w[v]=E,w[v+1]=S,w[v+2]=A,w[v+3]=S,w[v+4]=M,w[v+5]=A,v+=6}this.setIndex(new i.BufferAttribute(w,1)),this.addAttribute("position",new i.BufferAttribute(d,3)),this.addAttribute("normal",new i.BufferAttribute(f,3)),this.addAttribute("uv",new i.BufferAttribute(m,2))},i.PlaneBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.PlaneBufferGeometry.prototype.constructor=i.PlaneBufferGeometry,i.RingGeometry=function(t,e,n,r,o,a){i.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:a},t=t||0,e=e||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):8;var s,c,l=[],u=t,h=(e-t)/r;for(s=0;s<r+1;s++){for(c=0;c<n+1;c++){var p=new i.Vector3,d=o+c/n*a;p.x=u*Math.cos(d),p.y=u*Math.sin(d),this.vertices.push(p),l.push(new i.Vector2((p.x/e+1)/2,(p.y/e+1)/2))}u+=h}var f=new i.Vector3(0,0,1);for(s=0;s<r;s++){var m=s*(n+1);for(c=0;c<n;c++){var d=c+m,v=d,y=d+n+1,g=d+n+2;this.faces.push(new i.Face3(v,y,g,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[v].clone(),l[y].clone(),l[g].clone()]),v=d,y=d+n+2,g=d+1,this.faces.push(new i.Face3(v,y,g,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[v].clone(),l[y].clone(),l[g].clone()])}}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,u)},i.RingGeometry.prototype=Object.create(i.Geometry.prototype),i.RingGeometry.prototype.constructor=i.RingGeometry,i.SphereGeometry=function(t,e,n,r,o,a,s){i.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new i.SphereBufferGeometry(t,e,n,r,o,a,s))},i.SphereGeometry.prototype=Object.create(i.Geometry.prototype),i.SphereGeometry.prototype.constructor=i.SphereGeometry,i.SphereBufferGeometry=function(t,e,n,r,o,a,s){i.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;for(var c=a+s,l=(e+1)*(n+1),u=new i.BufferAttribute(new Float32Array(3*l),3),h=new i.BufferAttribute(new Float32Array(3*l),3),p=new i.BufferAttribute(new Float32Array(2*l),2),d=0,f=[],m=new i.Vector3,v=0;v<=n;v++){for(var y=[],g=v/n,x=0;x<=e;x++){var _=x/e,b=-t*Math.cos(r+_*o)*Math.sin(a+g*s),w=t*Math.cos(a+g*s),E=t*Math.sin(r+_*o)*Math.sin(a+g*s);m.set(b,w,E).normalize(),u.setXYZ(d,b,w,E),h.setXYZ(d,m.x,m.y,m.z),p.setXY(d,_,1-g),y.push(d),d++}f.push(y)}for(var S=[],v=0;v<n;v++)for(var x=0;x<e;x++){var M=f[v][x+1],A=f[v][x],C=f[v+1][x],T=f[v+1][x+1];(0!==v||a>0)&&S.push(M,A,T),(v!==n-1||c<Math.PI)&&S.push(A,C,T)}this.setIndex(new(u.count>65535?i.Uint32Attribute:i.Uint16Attribute)(S,1)),this.addAttribute("position",u),this.addAttribute("normal",h),this.addAttribute("uv",p),this.boundingSphere=new i.Sphere(new i.Vector3,t)},i.SphereBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.SphereBufferGeometry.prototype.constructor=i.SphereBufferGeometry,i.TextGeometry=function(t,e){e=e||{};var n=e.font;if(n instanceof i.Font==!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new i.Geometry;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),i.ExtrudeGeometry.call(this,r,e),this.type="TextGeometry"},i.TextGeometry.prototype=Object.create(i.ExtrudeGeometry.prototype),i.TextGeometry.prototype.constructor=i.TextGeometry,i.TorusGeometry=function(t,e,n,r,o){i.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:o},t=t||100,e=e||40,n=n||8,r=r||6,o=o||2*Math.PI;for(var a=new i.Vector3,s=[],c=[],l=0;l<=n;l++)for(var u=0;u<=r;u++){var h=u/r*o,p=l/n*Math.PI*2;a.x=t*Math.cos(h),a.y=t*Math.sin(h);var d=new i.Vector3;d.x=(t+e*Math.cos(p))*Math.cos(h),d.y=(t+e*Math.cos(p))*Math.sin(h),d.z=e*Math.sin(p),this.vertices.push(d),s.push(new i.Vector2(u/r,l/n)),c.push(d.clone().sub(a).normalize())}for(var l=1;l<=n;l++)for(var u=1;u<=r;u++){var f=(r+1)*l+u-1,m=(r+1)*(l-1)+u-1,v=(r+1)*(l-1)+u,y=(r+1)*l+u,g=new i.Face3(f,m,y,[c[f].clone(),c[m].clone(),c[y].clone()]);this.faces.push(g),this.faceVertexUvs[0].push([s[f].clone(),s[m].clone(),s[y].clone()]),g=new i.Face3(m,v,y,[c[m].clone(),c[v].clone(),c[y].clone()]),this.faces.push(g),this.faceVertexUvs[0].push([s[m].clone(),s[v].clone(),s[y].clone()])}this.computeFaceNormals()},i.TorusGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusGeometry.prototype.constructor=i.TorusGeometry,i.TorusKnotGeometry=function(t,e,n,r,o,a,s){function c(t,e,n,r,o){var a=Math.cos(t),s=Math.sin(t),c=e/n*t,l=Math.cos(c),u=r*(2+l)*.5*a,h=r*(2+l)*s*.5,p=o*r*Math.sin(c)*.5;return new i.Vector3(u,h,p)}i.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,p:o,q:a,heightScale:s},t=t||100,e=e||40,n=n||64,r=r||8,o=o||2,a=a||3,s=s||1;for(var l=new Array(n),u=new i.Vector3,h=new i.Vector3,p=new i.Vector3,d=0;d<n;++d){l[d]=new Array(r);var f=d/n*2*o*Math.PI,m=c(f,a,o,t,s),v=c(f+.01,a,o,t,s);u.subVectors(v,m),h.addVectors(v,m),p.crossVectors(u,h),h.crossVectors(p,u),p.normalize(),h.normalize();for(var y=0;y<r;++y){var g=y/r*2*Math.PI,x=-e*Math.cos(g),_=e*Math.sin(g),b=new i.Vector3;b.x=m.x+x*h.x+_*p.x,b.y=m.y+x*h.y+_*p.y,b.z=m.z+x*h.z+_*p.z,l[d][y]=this.vertices.push(b)-1}}for(var d=0;d<n;++d)for(var y=0;y<r;++y){var w=(d+1)%n,E=(y+1)%r,S=l[d][y],M=l[w][y],A=l[w][E],C=l[d][E],T=new i.Vector2(d/n,y/r),N=new i.Vector2((d+1)/n,y/r),R=new i.Vector2((d+1)/n,(y+1)/r),O=new i.Vector2(d/n,(y+1)/r);this.faces.push(new i.Face3(S,M,C)),this.faceVertexUvs[0].push([T,N,O]),this.faces.push(new i.Face3(M,A,C)),this.faceVertexUvs[0].push([N.clone(),R,O.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},i.TorusKnotGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusKnotGeometry.prototype.constructor=i.TorusKnotGeometry,i.TubeGeometry=function(t,e,n,r,o,a){function s(t,e,n){return R.vertices.push(new i.Vector3(t,e,n))-1}i.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:n,radialSegments:r,closed:o,taper:a},e=e||64,n=n||1,r=r||8,o=o||!1,a=a||i.TubeGeometry.NoTaper;var c,l,u,h,p,d,f,m,v,y,g,x,_,b,w,E,S,M,A,C,T,N=[],R=this,O=e+1,L=new i.Vector3,P=new i.TubeGeometry.FrenetFrames(t,e,o),k=P.tangents,D=P.normals,I=P.binormals;for(this.tangents=k,this.normals=D,this.binormals=I,y=0;y<O;y++)for(N[y]=[],h=y/(O-1),v=t.getPointAt(h),c=k[y],l=D[y],u=I[y],d=n*a(h),g=0;g<r;g++)p=g/r*2*Math.PI,f=-d*Math.cos(p),m=d*Math.sin(p),L.copy(v),L.x+=f*l.x+m*u.x,L.y+=f*l.y+m*u.y,L.z+=f*l.z+m*u.z,N[y][g]=s(L.x,L.y,L.z);for(y=0;y<e;y++)for(g=0;g<r;g++)x=o?(y+1)%e:y+1,_=(g+1)%r,b=N[y][g],w=N[x][g],E=N[x][_],S=N[y][_],M=new i.Vector2(y/e,g/r),A=new i.Vector2((y+1)/e,g/r),C=new i.Vector2((y+1)/e,(g+1)/r),T=new i.Vector2(y/e,(g+1)/r),this.faces.push(new i.Face3(b,w,S)),this.faceVertexUvs[0].push([M,A,T]),this.faces.push(new i.Face3(w,E,S)),this.faceVertexUvs[0].push([A.clone(),C,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.TubeGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry.prototype.constructor=i.TubeGeometry,i.TubeGeometry.NoTaper=function(t){return 1},i.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},i.TubeGeometry.FrenetFrames=function(t,e,n){function r(){f[0]=new i.Vector3,m[0]=new i.Vector3,a=Number.MAX_VALUE,s=Math.abs(d[0].x),c=Math.abs(d[0].y),l=Math.abs(d[0].z),s<=a&&(a=s,p.set(1,0,0)),c<=a&&(a=c,p.set(0,1,0)),l<=a&&p.set(0,0,1),v.crossVectors(d[0],p).normalize(),f[0].crossVectors(d[0],v),m[0].crossVectors(d[0],f[0])}var o,a,s,c,l,u,h,p=new i.Vector3,d=[],f=[],m=[],v=new i.Vector3,y=new i.Matrix4,g=e+1;for(this.tangents=d,this.normals=f,this.binormals=m,u=0;u<g;u++)h=u/(g-1),d[u]=t.getTangentAt(h),d[u].normalize();for(r(),u=1;u<g;u++)f[u]=f[u-1].clone(),m[u]=m[u-1].clone(),v.crossVectors(d[u-1],d[u]),v.length()>Number.EPSILON&&(v.normalize(),o=Math.acos(i.Math.clamp(d[u-1].dot(d[u]),-1,1)),f[u].applyMatrix4(y.makeRotationAxis(v,o))),m[u].crossVectors(d[u],f[u]);if(n)for(o=Math.acos(i.Math.clamp(f[0].dot(f[g-1]),-1,1)),o/=g-1,d[0].dot(v.crossVectors(f[0],f[g-1]))>0&&(o=-o),u=1;u<g;u++)f[u].applyMatrix4(y.makeRotationAxis(d[u],o*u)),m[u].crossVectors(d[u],f[u])},i.PolyhedronGeometry=function(t,e,n,r){function o(t){var e=t.normalize().clone();e.index=h.vertices.push(e)-1;var n=c(t)/2/Math.PI+.5,r=l(t)/Math.PI+.5;return e.uv=new i.Vector2(n,1-r),e}function a(t,e,n,r){var o=new i.Face3(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()],(void 0),r);h.faces.push(o),_.copy(t).add(e).add(n).divideScalar(3);var a=c(_);h.faceVertexUvs[0].push([u(t.uv,t,a),u(e.uv,e,a),u(n.uv,n,a)])}function s(t,e){for(var n=Math.pow(2,e),r=o(h.vertices[t.a]),i=o(h.vertices[t.b]),s=o(h.vertices[t.c]),c=[],l=t.materialIndex,u=0;u<=n;u++){c[u]=[];for(var p=o(r.clone().lerp(s,u/n)),d=o(i.clone().lerp(s,u/n)),f=n-u,m=0;m<=f;m++)0===m&&u===n?c[u][m]=p:c[u][m]=o(p.clone().lerp(d,m/f))}for(var u=0;u<n;u++)for(var m=0;m<2*(n-u)-1;m++){var v=Math.floor(m/2);m%2===0?a(c[u][v+1],c[u+1][v],c[u][v],l):a(c[u][v+1],c[u+1][v+1],c[u+1][v],l)}}function c(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function u(t,e,n){return n<0&&1===t.x&&(t=new i.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new i.Vector2(n/2/Math.PI+.5,t.y)),t.clone()}i.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;for(var h=this,p=0,d=t.length;p<d;p+=3)o(new i.Vector3(t[p],t[p+1],t[p+2]));for(var f=this.vertices,m=[],p=0,v=0,d=e.length;p<d;p+=3,v++){var y=f[e[p]],g=f[e[p+1]],x=f[e[p+2]];m[v]=new i.Face3(y.index,g.index,x.index,[y.clone(),g.clone(),x.clone()],(void 0),v)}for(var _=new i.Vector3,p=0,d=m.length;p<d;p++)s(m[p],r);for(var p=0,d=this.faceVertexUvs[0].length;p<d;p++){var b=this.faceVertexUvs[0][p],w=b[0].x,E=b[1].x,S=b[2].x,M=Math.max(w,E,S),A=Math.min(w,E,S);M>.9&&A<.1&&(w<.2&&(b[0].x+=1),E<.2&&(b[1].x+=1),S<.2&&(b[2].x+=1))}for(var p=0,d=this.vertices.length;p<d;p++)this.vertices[p].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,n)},i.PolyhedronGeometry.prototype=Object.create(i.Geometry.prototype),i.PolyhedronGeometry.prototype.constructor=i.PolyhedronGeometry,i.DodecahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];i.PolyhedronGeometry.call(this,o,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}},i.DodecahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.DodecahedronGeometry.prototype.constructor=i.DodecahedronGeometry,i.IcosahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];i.PolyhedronGeometry.call(this,r,o,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},i.IcosahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.IcosahedronGeometry.prototype.constructor=i.IcosahedronGeometry,i.OctahedronGeometry=function(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];i.PolyhedronGeometry.call(this,n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},i.OctahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.OctahedronGeometry.prototype.constructor=i.OctahedronGeometry,i.TetrahedronGeometry=function(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];i.PolyhedronGeometry.call(this,n,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},i.TetrahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.TetrahedronGeometry.prototype.constructor=i.TetrahedronGeometry,i.ParametricGeometry=function(t,e,n){i.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};var r,o,a,s,c,l=this.vertices,u=this.faces,h=this.faceVertexUvs[0],p=e+1;for(r=0;r<=n;r++)for(c=r/n,o=0;o<=e;o++)s=o/e,a=t(s,c),l.push(a);var d,f,m,v,y,g,x,_;for(r=0;r<n;r++)for(o=0;o<e;o++)d=r*p+o,f=r*p+o+1,m=(r+1)*p+o+1,v=(r+1)*p+o,y=new i.Vector2(o/e,r/n),g=new i.Vector2((o+1)/e,r/n),x=new i.Vector2((o+1)/e,(r+1)/n),_=new i.Vector2(o/e,(r+1)/n),u.push(new i.Face3(d,f,v)),h.push([y,g,_]),u.push(new i.Face3(f,m,v)),h.push([g.clone(),x,_.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.ParametricGeometry.prototype=Object.create(i.Geometry.prototype),i.ParametricGeometry.prototype.constructor=i.ParametricGeometry,i.WireframeGeometry=function(t){function e(t,e){return t-e}i.BufferGeometry.call(this);var n=[0,0],r={},o=["a","b","c"];if(t instanceof i.Geometry){for(var a=t.vertices,s=t.faces,c=0,l=new Uint32Array(6*s.length),u=0,h=s.length;u<h;u++)for(var p=s[u],d=0;d<3;d++){n[0]=p[o[d]],n[1]=p[o[(d+1)%3]],n.sort(e);var f=n.toString();void 0===r[f]&&(l[2*c]=n[0],l[2*c+1]=n[1],r[f]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,h=c;u<h;u++)for(var d=0;d<2;d++){var v=a[l[2*u+d]],y=6*u+3*d;m[y+0]=v.x,m[y+1]=v.y,m[y+2]=v.z}this.addAttribute("position",new i.BufferAttribute(m,3))}else if(t instanceof i.BufferGeometry)if(null!==t.index){var g=t.index.array,a=t.attributes.position,x=t.groups,c=0;0===x.length&&t.addGroup(0,g.length);for(var l=new Uint32Array(2*g.length),_=0,b=x.length;_<b;++_)for(var w=x[_],E=w.start,S=w.count,u=E,M=E+S;u<M;u+=3)for(var d=0;d<3;d++){n[0]=g[u+d],n[1]=g[u+(d+1)%3],n.sort(e);var f=n.toString();void 0===r[f]&&(l[2*c]=n[0],l[2*c+1]=n[1],r[f]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,h=c;u<h;u++)for(var d=0;d<2;d++){var y=6*u+3*d,A=l[2*u+d];m[y+0]=a.getX(A),m[y+1]=a.getY(A),m[y+2]=a.getZ(A)}this.addAttribute("position",new i.BufferAttribute(m,3))}else{for(var a=t.attributes.position.array,c=a.length/3,C=c/3,m=new Float32Array(2*c*3),u=0,h=C;u<h;u++)for(var d=0;d<3;d++){var y=18*u+6*d,T=9*u+3*d;m[y+0]=a[T],m[y+1]=a[T+1],m[y+2]=a[T+2];var A=9*u+3*((d+1)%3);m[y+3]=a[A],m[y+4]=a[A+1],m[y+5]=a[A+2]}this.addAttribute("position",new i.BufferAttribute(m,3))}},i.WireframeGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.WireframeGeometry.prototype.constructor=i.WireframeGeometry,i.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new i.BufferGeometry;r.addAttribute("position",new i.BufferAttribute(e,3)),r.addAttribute("color",new i.BufferAttribute(n,3));var o=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.LineSegments.call(this,r,o)},i.AxisHelper.prototype=Object.create(i.LineSegments.prototype),i.AxisHelper.prototype.constructor=i.AxisHelper,i.ArrowHelper=function(){var t=new i.Geometry;t.vertices.push(new i.Vector3(0,0,0),new i.Vector3(0,1,0));var e=new i.CylinderGeometry(0,.5,1,5,1);return e.translate(0,-.5,0),function(n,r,o,a,s,c){i.Object3D.call(this),void 0===a&&(a=16776960),void 0===o&&(o=1),void 0===s&&(s=.2*o),void 0===c&&(c=.2*s),this.position.copy(r),this.line=new i.Line(t,new i.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i.Mesh(e,new i.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(o,s,c)}}(),i.ArrowHelper.prototype=Object.create(i.Object3D.prototype),i.ArrowHelper.prototype.constructor=i.ArrowHelper,i.ArrowHelper.prototype.setDirection=function(){var t,e=new i.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),i.ArrowHelper.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},i.ArrowHelper.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},i.BoxHelper=function(t){var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new i.BufferGeometry;r.setIndex(new i.BufferAttribute(e,1)),r.addAttribute("position",new i.BufferAttribute(n,3)),i.LineSegments.call(this,r,new i.LineBasicMaterial({color:16776960})),void 0!==t&&this.update(t)},i.BoxHelper.prototype=Object.create(i.LineSegments.prototype),i.BoxHelper.prototype.constructor=i.BoxHelper,i.BoxHelper.prototype.update=function(){var t=new i.Box3;return function(e){if(t.setFromObject(e),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),i.BoundingBoxHelper=function(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new i.Box3,i.Mesh.call(this,new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial({color:n,wireframe:!0}))},i.BoundingBoxHelper.prototype=Object.create(i.Mesh.prototype),i.BoundingBoxHelper.prototype.constructor=i.BoundingBoxHelper,i.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},i.CameraHelper=function(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){r.vertices.push(new i.Vector3),r.colors.push(new i.Color(e)),void 0===a[t]&&(a[t]=[]),a[t].push(r.vertices.length-1)}var r=new i.Geometry,o=new i.LineBasicMaterial({color:16777215,vertexColors:i.FaceColors}),a={},s=16755200,c=16711680,l=43775,u=16777215,h=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",u),e("p","c",h),e("cn1","cn2",h),e("cn3","cn4",h),e("cf1","cf2",h),e("cf3","cf4",h),i.LineSegments.call(this,r,o),this.camera=t,this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},i.CameraHelper.prototype=Object.create(i.LineSegments.prototype),i.CameraHelper.prototype.constructor=i.CameraHelper,i.CameraHelper.prototype.update=function(){function t(t,i,a,s){r.set(i,a,s).unproject(o);var c=n[t];if(void 0!==c)for(var l=0,u=c.length;l<u;l++)e.vertices[c[l]].copy(r)}var e,n,r=new i.Vector3,o=new i.Camera;return function(){e=this.geometry,n=this.pointMap;var r=1,i=1;o.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-i,-1),t("n2",r,-i,-1),t("n3",-r,i,-1),t("n4",r,i,-1),t("f1",-r,-i,1),t("f2",r,-i,1),t("f3",-r,i,1),t("f4",r,i,1),t("u1",.7*r,1.1*i,-1),t("u2",.7*-r,1.1*i,-1),t("u3",0,2*i,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-i,1),t("cf4",0,i,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-i,-1),t("cn4",0,i,-1),e.verticesNeedUpdate=!0}}(),i.DirectionalLightHelper=function(t,e){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,e=e||1;var n=new i.Geometry;n.vertices.push(new i.Vector3((-e),e,0),new i.Vector3(e,e,0),new i.Vector3(e,(-e),0),new i.Vector3((-e),(-e),0),new i.Vector3((-e),e,0));var r=new i.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new i.Line(n,r),this.add(this.lightPlane),n=new i.Geometry,n.vertices.push(new i.Vector3,new i.Vector3),r=new i.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new i.Line(n,r),this.add(this.targetLine),this.update()},i.DirectionalLightHelper.prototype=Object.create(i.Object3D.prototype),i.DirectionalLightHelper.prototype.constructor=i.DirectionalLightHelper,i.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},i.DirectionalLightHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),i.EdgesHelper=function(t,e,n){var r=void 0!==e?e:16777215;i.LineSegments.call(this,new i.EdgesGeometry(t.geometry,n),new i.LineBasicMaterial({color:r})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},i.EdgesHelper.prototype=Object.create(i.LineSegments.prototype),i.EdgesHelper.prototype.constructor=i.EdgesHelper,i.FaceNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var o=void 0!==n?n:16776960,a=void 0!==r?r:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);l.addAttribute("position",u),i.LineSegments.call(this,l,new i.LineBasicMaterial({color:o,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},i.FaceNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.FaceNormalsHelper.prototype.constructor=i.FaceNormalsHelper,i.FaceNormalsHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],p=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(c,t.x,t.y,t.z),c+=1,i.setXYZ(c,e.x,e.y,e.z),c+=1}return i.needsUpdate=!0,this}}(),i.GridHelper=function(t,e){var n=new i.Geometry,r=new i.LineBasicMaterial({vertexColors:i.VertexColors});this.color1=new i.Color(4473924),this.color2=new i.Color(8947848);for(var o=-t;o<=t;o+=e){n.vertices.push(new i.Vector3((-t),0,o),new i.Vector3(t,0,o),new i.Vector3(o,0,(-t)),new i.Vector3(o,0,t));var a=0===o?this.color1:this.color2;n.colors.push(a,a,a,a)}i.LineSegments.call(this,n,r)},i.GridHelper.prototype=Object.create(i.LineSegments.prototype),i.GridHelper.prototype.constructor=i.GridHelper,i.GridHelper.prototype.setColors=function(t,e){this.color1.set(t),this.color2.set(e),this.geometry.colorsNeedUpdate=!0},i.HemisphereLightHelper=function(t,e){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new i.Color,new i.Color];var n=new i.SphereGeometry(e,4,2);n.rotateX(-Math.PI/2);for(var r=0,o=8;r<o;r++)n.faces[r].color=this.colors[r<4?0:1];var a=new i.MeshBasicMaterial({vertexColors:i.FaceColors,wireframe:!0});this.lightSphere=new i.Mesh(n,a),this.add(this.lightSphere),this.update()},i.HemisphereLightHelper.prototype=Object.create(i.Object3D.prototype),i.HemisphereLightHelper.prototype.constructor=i.HemisphereLightHelper,i.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},i.HemisphereLightHelper.prototype.update=function(){var t=new i.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),i.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var n=new i.SphereGeometry(e,4,2),r=new i.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},i.PointLightHelper.prototype=Object.create(i.Mesh.prototype),i.PointLightHelper.prototype.constructor=i.PointLightHelper,i.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},i.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new i.Geometry,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof i.Bone&&(e.vertices.push(new i.Vector3),e.vertices.push(new i.Vector3),e.colors.push(new i.Color(0,0,1)),e.colors.push(new i.Color(0,1,0)))}e.dynamic=!0;var o=new i.LineBasicMaterial({vertexColors:i.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});i.LineSegments.call(this,e,o),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},i.SkeletonHelper.prototype=Object.create(i.LineSegments.prototype),i.SkeletonHelper.prototype.constructor=i.SkeletonHelper,i.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof i.Bone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},i.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new i.Matrix4).getInverse(this.root.matrixWorld),n=new i.Matrix4,r=0,o=0;o<this.bones.length;o++){var a=this.bones[o];a.parent instanceof i.Bone&&(n.multiplyMatrices(e,a.matrixWorld),t.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(e,a.parent.matrixWorld),t.vertices[r+1].setFromMatrixPosition(n),r+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},i.SpotLightHelper=function(t){i.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var e=new i.CylinderGeometry(0,1,1,8,1,(!0));e.translate(0,-.5,0),e.rotateX(-Math.PI/2);var n=new i.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new i.Mesh(e,n),this.add(this.cone),this.update()},i.SpotLightHelper.prototype=Object.create(i.Object3D.prototype),i.SpotLightHelper.prototype.constructor=i.SpotLightHelper,i.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.SpotLightHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),i.VertexNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var o=void 0!==n?n:16711680,a=void 0!==r?r:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=3*c.faces.length:c instanceof i.BufferGeometry&&(s=c.attributes.normal.count);var l=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);l.addAttribute("position",u),i.LineSegments.call(this,l,new i.LineBasicMaterial({color:o,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},i.VertexNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.VertexNormalsHelper.prototype.constructor=i.VertexNormalsHelper,i.VertexNormalsHelper.prototype.update=function(){var t=new i.Vector3,e=new i.Vector3,n=new i.Matrix3;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;
if(s instanceof i.Geometry)for(var c=s.vertices,l=s.faces,u=0,h=0,p=l.length;h<p;h++)for(var d=l[h],f=0,m=d.vertexNormals.length;f<m;f++){var v=c[d[r[f]]],y=d.vertexNormals[f];t.copy(v).applyMatrix4(o),e.copy(y).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(u,t.x,t.y,t.z),u+=1,a.setXYZ(u,e.x,e.y,e.z),u+=1}else if(s instanceof i.BufferGeometry)for(var g=s.attributes.position,x=s.attributes.normal,u=0,f=0,m=g.count;f<m;f++)t.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(o),e.set(x.getX(f),x.getY(f),x.getZ(f)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(u,t.x,t.y,t.z),u+=1,a.setXYZ(u,e.x,e.y,e.z),u+=1;return a.needsUpdate=!0,this}}(),i.WireframeHelper=function(t,e){var n=void 0!==e?e:16777215;i.LineSegments.call(this,new i.WireframeGeometry(t.geometry),new i.LineBasicMaterial({color:n})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},i.WireframeHelper.prototype=Object.create(i.LineSegments.prototype),i.WireframeHelper.prototype.constructor=i.WireframeHelper,i.ImmediateRenderObject=function(t){i.Object3D.call(this),this.material=t,this.render=function(t){}},i.ImmediateRenderObject.prototype=Object.create(i.Object3D.prototype),i.ImmediateRenderObject.prototype.constructor=i.ImmediateRenderObject,i.MorphBlendMesh=function(t,e){i.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",o=0,a=n-1,s=n/1;this.createAnimation(r,o,a,s),this.setAnimationWeight(r,1)},i.MorphBlendMesh.prototype=Object.create(i.Mesh.prototype),i.MorphBlendMesh.prototype.constructor=i.MorphBlendMesh,i.MorphBlendMesh.prototype.createAnimation=function(t,e,n,r){var i={start:e,end:n,length:n-e+1,fps:r,duration:(n-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=i,this.animationsList.push(i)},i.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o],c=s.name.match(n);if(c&&c.length>1){var l=c[1];r[l]||(r[l]={start:1/0,end:-(1/0)});var u=r[l];o<u.start&&(u.start=o),o>u.end&&(u.end=o),e||(e=l)}}for(var l in r){var u=r[l];this.createAnimation(l,u.start,u.end,t)}this.firstAnimation=e},i.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},i.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},i.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},i.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},i.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},i.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},i.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},i.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},i.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},i.MorphBlendMesh.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},i.MorphBlendMesh.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var r=this.animationsList[e];if(r.active){var o=r.duration/r.length;r.time+=r.direction*t,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.start+i.Math.clamp(Math.floor(r.time/o),0,r.length-1),s=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var c=r.time%o/o;r.directionBackwards&&(c=1-c),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=c*s,this.morphTargetInfluences[r.lastFrame]=(1-c)*s):this.morphTargetInfluences[r.currentFrame]=s}}},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.THREE=i):this.THREE=i},{}],22:[function(e,n,r){!function(t){if("performance"in t==!1&&(t.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in t.performance==!1){var e=t.performance.timing&&t.performance.timing.navigationStart?performance.timing.navigationStart:Date.now();t.performance.now=function(){return Date.now()-e}}}(this);var i=i||function(){var t=[];return{REVISION:"14",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)},update:function(e){if(0===t.length)return!1;var n=0;for(e=void 0!==e?e:window.performance.now();n<t.length;)t[n].update(e)?n++:t.splice(n,1);return!0}}}();i.Tween=function(t){var e=t,n={},r={},o={},a=1e3,s=0,c=!1,l=!1,u=!1,h=0,p=null,d=i.Easing.Linear.None,f=i.Interpolation.Linear,m=[],v=null,y=!1,g=null,x=null,_=null;for(var b in t)n[b]=parseFloat(t[b],10);this.to=function(t,e){return void 0!==e&&(a=e),r=t,this},this.start=function(t){i.add(this),l=!0,y=!1,p=void 0!==t?t:window.performance.now(),p+=h;for(var a in r){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[e[a]].concat(r[a])}n[a]=e[a],n[a]instanceof Array==!1&&(n[a]*=1),o[a]=n[a]||0}return this},this.stop=function(){return l?(i.remove(this),l=!1,null!==_&&_.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=m.length;t<e;t++)m[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return s=t,this},this.yoyo=function(t){return c=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return m=arguments,this},this.onStart=function(t){return v=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return x=t,this},this.onStop=function(t){return _=t,this},this.update=function(t){var i;if(t<p)return!0;y===!1&&(null!==v&&v.call(e),y=!0);var l=(t-p)/a;l=l>1?1:l;var _=d(l);for(i in r){var b=n[i]||0,w=r[i];w instanceof Array?e[i]=f(w,_):("string"==typeof w&&(w=b+parseFloat(w,10)),"number"==typeof w&&(e[i]=b+(w-b)*_))}if(null!==g&&g.call(e,_),1==l){if(s>0){isFinite(s)&&s--;for(i in o){if("string"==typeof r[i]&&(o[i]=o[i]+parseFloat(r[i],10)),c){var E=o[i];o[i]=r[i],r[i]=E}n[i]=o[i]}return c&&(u=!u),p=t+h,!0}null!==x&&x.call(e);for(var S=0,M=m.length;S<M;S++)m[S].start(t);return!1}return!0}},i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},Out:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,o=Math.floor(r),a=i.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[o],t[o+1>n?n:o+1],r-o)},Bezier:function(t,e){var n,r=0,o=t.length-1,a=Math.pow,s=i.Interpolation.Utils.Bernstein;for(n=0;n<=o;n++)r+=a(1-e,o-n)*a(e,n)*t[n]*s(o,n);return r},CatmullRom:function(t,e){var n=t.length-1,r=n*e,o=Math.floor(r),a=i.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(r=n*(1+e))),a(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],r-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],r-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=i.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n,r=1;if(t[e])return t[e];for(n=e;n>1;n--)r*=n;return t[e]=r}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,c=i*s;return(2*e-2*n+o+a)*c+(-3*e+3*n-2*o-a)*s+o*i+e}}},function(e){"function"==typeof t&&t.amd?t([],function(){return i}):"object"==typeof r?n.exports=i:e.TWEEN=i}(this)},{}],23:[function(t,e,n){!function r(e,n,i){function o(s,c){if(!n[s]){if(!e[s]){var l="function"==typeof t&&t;if(!c&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,r,e,n,i)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function r(){this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function i(){}function o(){}i.prototype=new r,o.prototype=new r,e.exports.VRDevice=r,e.exports.HMDVRDevice=i,e.exports.PositionSensorVRDevice=o},{}],2:[function(t,e,n){function r(){this.fov={upDegrees:c,downDegrees:s,leftDegrees:a,rightDegrees:a},this.eyeTranslationLeft={x:o*-.5,y:0,z:0},this.eyeTranslationRight={x:.5*o,y:0,z:0}}var i=t("./base.js").HMDVRDevice,o=.06,a=40,s=40,c=40;r.prototype=new i,r.prototype.getEyeParameters=function(t){var e;if("left"==t)e=this.eyeTranslationLeft;else{if("right"!=t)return console.error("Invalid eye provided: %s",t),null;e=this.eyeTranslationRight}return{recommendedFieldOfView:this.fov,eyeTranslation:e}},e.exports=r},{"./base.js":1}],3:[function(t,e,n){function r(t){this.kFilter=t,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,this.filterQ=new o.Quaternion,this.previousFilterQ=new o.Quaternion,this.accelQ=new o.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new o.Vector3,this.measuredGravity=new o.Vector3,this.gyroIntegralQ=new o.Quaternion}var i=t("./sensor-sample.js"),o=t("./three-math.js"),a=t("./util.js"),s=!1;r.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},r.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var n=e-this.previousGyroMeasurement.timestampS;a.isTimestampDeltaValid(n)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},r.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var n=new o.Quaternion;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new o.Quaternion;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),s&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",o.Math.radToDeg(a.getQuaternionAngle(r)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new o.Quaternion;i.copy(this.filterQ),i.multiply(r),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},r.prototype.getOrientation=function(){return this.filterQ},r.prototype.accelToQuaternion_=function(t){var e=new o.Vector3;e.copy(t),e.normalize();var n=new o.Quaternion;return n.setFromUnitVectors(new o.Vector3(0,0,(-1)),e),n.inverse(),n},r.prototype.gyroToQuaternionDelta_=function(t,e){var n=new o.Quaternion,r=new o.Vector3;return r.copy(t),r.normalize(),n.setFromAxisAngle(r,t.length()*e),n},e.exports=r},{"./sensor-sample.js":8,"./three-math.js":9,"./util.js":11}],4:[function(t,e,n){function r(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new c.Vector3,this.gyroscope=new c.Vector3,window.addEventListener("devicemotion",this.onDeviceMotionChange_.bind(this)),window.addEventListener("orientationchange",this.onScreenOrientationChange_.bind(this)),this.filter=new o(WebVRConfig.K_FILTER||.98),this.posePredictor=new a(WebVRConfig.PREDICTION_TIME_S||.04),this.touchPanner=new s,this.filterToWorldQ=new c.Quaternion,l.isIOS()?this.filterToWorldQ.setFromAxisAngle(new c.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new c.Vector3(1,0,0),-Math.PI/2),this.worldToScreenQ=new c.Quaternion,this.setScreenTransform_(),this.resetQ=new c.Quaternion,this.isFirefoxAndroid=l.isFirefoxAndroid(),this.isIOS=l.isIOS()}var i=t("./base.js").PositionSensorVRDevice,o=t("./complementary-filter.js"),a=t("./pose-predictor.js"),s=t("./touch-panner.js"),c=t("./three-math.js"),l=t("./util.js");r.prototype=new i,r.prototype.getState=function(){return{hasOrientation:!0,orientation:this.getOrientation(),hasPosition:!1,position:null}},r.prototype.getOrientation=function(){var t=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var e=new c.Quaternion;return e.copy(this.filterToWorldQ),e.multiply(this.resetQ),WebVRConfig.TOUCH_PANNER_DISABLED||e.multiply(this.touchPanner.getOrientation()),e.multiply(this.predictedQ),e.multiply(this.worldToScreenQ),WebVRConfig.YAW_ONLY&&(e.x=0,e.z=0,e.normalize()),e},r.prototype.resetSensor=function(){var t=new c.Euler;t.setFromQuaternion(this.filter.getOrientation());var e=t.y;console.log("resetSensor with yaw: %f",e),this.resetQ.setFromAxisAngle(new c.Vector3(0,0,1),-e),WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},r.prototype.onDeviceMotionChange_=function(t){var e=t.accelerationIncludingGravity,n=t.rotationRate,r=t.timeStamp/1e3;this.isFirefoxAndroid&&(r/=1e3);var i=r-this.previousTimestampS;return i<=l.MIN_TIMESTEP||i>l.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=r)):(this.accelerometer.set(-e.x,-e.y,-e.z),this.gyroscope.set(n.alpha,n.beta,n.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},r.prototype.onScreenOrientationChange_=function(t){this.setScreenTransform_()},r.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new c.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new c.Vector3(0,0,1),Math.PI/2);break;case 180:}},e.exports=r},{"./base.js":1,"./complementary-filter.js":3,"./pose-predictor.js":7,"./three-math.js":9,"./touch-panner.js":10,"./util.js":11}],5:[function(t,e,n){var r=t("./webvr-polyfill.js");window.WebVRConfig=window.WebVRConfig||{},new r},{"./webvr-polyfill.js":12}],6:[function(t,e,n){function r(){this.deviceId="webvr-polyfill:mouse-keyboard",this.deviceName="VR Position Device (webvr-polyfill:mouse-keyboard)",window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi=0,this.theta=0,this.targetAngle=null,this.euler=new o.Euler,this.orientation=new o.Quaternion,this.rotateStart=new o.Vector2,this.rotateEnd=new o.Vector2,this.rotateDelta=new o.Vector2}var i=t("./base.js").PositionSensorVRDevice,o=t("./three-math.js"),a=t("./util.js"),s=.15,c=80,l=.5,u=.3;r.prototype=new i,r.prototype.getState=function(){return this.euler.set(this.phi,this.theta,0,"YXZ"),this.orientation.setFromEuler(this.euler),{hasOrientation:!0,orientation:this.orientation,hasPosition:!1,position:null}},r.prototype.onKeyDown_=function(t){38==t.keyCode?this.animatePhi_(this.phi+s):39==t.keyCode?this.animateTheta_(this.theta-s):40==t.keyCode?this.animatePhi_(this.phi-s):37==t.keyCode&&this.animateTheta_(this.theta+s)},r.prototype.animateTheta_=function(t){this.animateKeyTransitions_("theta",t)},r.prototype.animatePhi_=function(t){t=a.clamp(t,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi",t)},r.prototype.animateKeyTransitions_=function(t,e){this.angleAnimation&&clearInterval(this.angleAnimation);var n=this[t],r=new Date;this.angleAnimation=setInterval(function(){var i=new Date-r;if(i>=c)return this[t]=e,void clearInterval(this.angleAnimation);var o=i/c;this[t]=n+(e-n)*o}.bind(this),1e3/60)},r.prototype.onMouseDown_=function(t){this.rotateStart.set(t.clientX,t.clientY),this.isDragging=!0},r.prototype.onMouseMove_=function(t){if(this.isDragging||this.isPointerLocked_()){if(this.isPointerLocked_()){var e=t.movementX||t.mozMovementX||0,n=t.movementY||t.mozMovementY||0;this.rotateEnd.set(this.rotateStart.x-e,this.rotateStart.y-n)}else this.rotateEnd.set(t.clientX,t.clientY);this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd);var r=document.body;this.phi+=2*Math.PI*this.rotateDelta.y/r.clientHeight*u,this.theta+=2*Math.PI*this.rotateDelta.x/r.clientWidth*l,this.phi=a.clamp(this.phi,-Math.PI/2,Math.PI/2)}},r.prototype.onMouseUp_=function(t){this.isDragging=!1},r.prototype.isPointerLocked_=function(){var t=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return void 0!==t},r.prototype.resetSensor=function(){console.error("Not implemented yet.")},e.exports=r},{"./base.js":1,"./three-math.js":9,"./util.js":11}],7:[function(t,e,n){function r(t){this.predictionTimeS=t,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=t("./three-math.js"),o=!1;r.prototype.getPrediction=function(t,e,n){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=n,t;var r=new i.Vector3;r.copy(e),r.normalize();var a=e.length();if(a<i.Math.degToRad(20))return o&&console.log("Moving slowly, at %s deg/s: no prediction",i.Math.radToDeg(a).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var s=(n-this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(r,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.outQ},e.exports=r},{"./three-math.js":9}],8:[function(t,e,n){function r(t,e){this.set(t,e)}r.prototype.set=function(t,e){this.sample=t,this.timestampS=e},r.prototype.copy=function(t){this.set(t.sample,t.timestampS)},e.exports=r},{}],9:[function(t,e,n){var r=window.THREE||{};r.Quaternion&&r.Vector3&&r.Vector2&&r.Euler&&r.Math||(console.log("No THREE.js found."),r.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},r.Quaternion.prototype={constructor:r.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof r.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),i=Math.cos(t._y/2),o=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),c=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=a*i*o+n*s*c,this._y=n*s*o-a*i*c,this._z=n*i*c+a*s*o,this._w=n*i*o-a*s*c):"YXZ"===t.order?(this._x=a*i*o+n*s*c,this._y=n*s*o-a*i*c,this._z=n*i*c-a*s*o,this._w=n*i*o+a*s*c):"ZXY"===t.order?(this._x=a*i*o-n*s*c,this._y=n*s*o+a*i*c,this._z=n*i*c+a*s*o,this._w=n*i*o-a*s*c):"ZYX"===t.order?(this._x=a*i*o-n*s*c,this._y=n*s*o+a*i*c,this._z=n*i*c-a*s*o,this._w=n*i*o+a*s*c):"YZX"===t.order?(this._x=a*i*o+n*s*c,this._y=n*s*o+a*i*c,this._z=n*i*c-a*s*o,this._w=n*i*o-a*s*c):"XZY"===t.order&&(this._x=a*i*o-n*s*c,this._y=n*s*o-a*i*c,this._z=n*i*c+a*s*o,this._w=n*i*o+a*s*c),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],p=r+s+h;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(u-c)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(i,o){return void 0===t&&(t=new r.Vector3),e=i.dot(o)+1,e<n?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,o),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this.onChangeCallback(),this},multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var l=Math.sin((1-e)*s)/c,u=Math.sin(e*s)/c;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new r.Quaternion(this._x,this._y,this._z,this._w)}},r.Quaternion.slerp=function(t,e,n,r){return n.copy(t).slerp(e,r)},r.Vector2=function(t,e){this.x=t||0,this.y=e||0},r.Vector2.prototype={constructor:r.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector2,e=new r.Vector2),t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new r.Vector2(this.x,this.y)}},r.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},r.Vector3.prototype={constructor:r.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof r.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new r.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new r.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n)),this}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,
this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*r-a*n,l=s*n+a*e-i*r,u=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new r.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new r.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector3,e=new r.Vector3),t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(){var t,e;return function(n){return void 0===t&&(t=new r.Vector3),t.copy(n).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new r.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new r.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(r.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){var n=4*t,r=e.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new r.Vector3(this.x,this.y,this.z)}},r.Euler=function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||r.Euler.DefaultOrder},r.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],r.Euler.DefaultOrder="XYZ",r.Euler.prototype={constructor:r.Euler,_x:0,_y:0,_z:0,_order:r.Euler.DefaultOrder,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=r.Math.clamp,o=t.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],p=o[2],d=o[6],f=o[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(c,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(c,f))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-h,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,i){return void 0===t&&(t=new r.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i),this}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new r.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new r.Euler(this._x,this._y,this._z,this._order)}},r.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19==i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return t<e?e:t>n?n:t},clampBottom:function(t,e){return t<e?e:t},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}}),e.exports=r},{}],10:[function(t,e,n){function r(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=t("./three-math.js"),o=t("./util.js"),a=.5;r.prototype.getOrientation=function(){return this.orientation.setFromEuler(new i.Euler(0,0,this.theta)),this.orientation},r.prototype.resetSensor=function(){this.theta=0},r.prototype.onTouchStart_=function(t){1==t.touches.length&&(this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.isTouching=!0)},r.prototype.onTouchMove_=function(t){if(this.isTouching){this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),o.isIOS()&&(this.rotateDelta.x*=-1);var e=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/e.clientWidth*a}},r.prototype.onTouchEnd_=function(t){this.isTouching=!1},e.exports=r},{"./three-math.js":9,"./util.js":11}],11:[function(t,e,n){var r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.clamp=function(t,e,n){return Math.min(Math.max(e,t),n)},r.isIOS=function(){return/iPad|iPhone|iPod/.test(navigator.platform)},r.isFirefoxAndroid=function(){return navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1},r.isTimestampDeltaValid=function(t){return!isNaN(t)&&(!(t<=r.MIN_TIMESTEP)&&!(t>r.MAX_TIMESTEP))},e.exports=r},{}],12:[function(t,e,n){function r(){this.devices=[],this.isWebVRAvailable()||this.enablePolyfill()}var i=t("./cardboard-hmd-vr-device.js"),o=t("./fusion-position-sensor-vr-device.js"),a=t("./mouse-keyboard-position-sensor-vr-device.js"),s=t("./base.js").HMDVRDevice,c=t("./base.js").PositionSensorVRDevice;r.prototype.isWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},r.prototype.enablePolyfill=function(){this.isCardboardCompatible()&&this.devices.push(new i),this.isMobile()?this.devices.push(new o):WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||this.devices.push(new a),navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=s,window.PositionSensorVRDevice=c},r.prototype.getVRDevices=function(){var t=this.devices;return new Promise(function(e,n){try{e(t)}catch(r){n(r)}})},r.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR},e.exports=r},{"./base.js":1,"./cardboard-hmd-vr-device.js":2,"./fusion-position-sensor-vr-device.js":4,"./mouse-keyboard-position-sensor-vr-device.js":6}]},{},[5])},{}],24:[function(t,e,n){e.exports={name:"aframe",version:"0.2.0-rc1",description:"Building blocks for the VR Web",main:"dist/aframe.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"mkdirp build/ && npm run browserify -- --debug -o build/aframe.js",dev:"npm run build && node ./scripts/budo",dist:"mkdirp dist/ && npm run browserify -s -- --debug | exorcist dist/aframe.js.map > dist/aframe.js && uglifyjs dist/aframe.js -c warnings=false -m -o dist/aframe.min.js","gh-pages":"npm run ghpages",ghpages:"node ./scripts/gh-pages",lint:"semistandard -v | snazzy",precommit:"npm run lint",preghpages:"npm run dist && rimraf gh-pages && mkdirp gh-pages && cp -r {.nojekyll,dist,lib,examples,index.html,style} gh-pages/. 2>/dev/null || : && git checkout dist/ && replace 'build/aframe.js' 'dist/aframe.min.js' gh-pages/ -r --silent","release:bump":"npm run dist && git commit -am 'bump dist' && npm version patch --preminor","release:push":"npm login && npm publish && git push --follow-tags",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:ci":"TEST_ENV=ci karma start ./tests/karma.conf.js --single-run",version:"npm run dist"},repository:"aframevr/aframe",license:"MIT",dependencies:{"browserify-css":"^0.8.2",debug:"^2.2.0","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7","promise-polyfill":"^3.1.0","object-assign":"^4.0.1",polymerize:"^1.0.0",present:"0.0.6","request-interval":"^1.0.0","style-attr":"^1.0.2",three:"^0.74.0","tween.js":"^15.0.0","webvr-polyfill":"borismus/webvr-polyfill#3f47796"},devDependencies:{browserify:"^11.0.1","browserify-derequire":"^0.9.4",budo:"^8.1.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.3.0",exorcist:"^0.4.0","gh-pages":"^0.6.0",husky:"^0.10.1",karma:"^0.13.15","karma-browserify":"^4.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^0.1.6","karma-mocha":"^0.2.0","karma-mocha-reporter":"^1.1.0","karma-sinon-chai":"^1.1.0",lolex:"^1.4.0",mkdirp:"0.5.1",mocha:"^2.3.3","mozilla-download":"^1.0.5",open:"0.0.5",replace:"^0.3.0",rimraf:"2.5.0",semistandard:"^7.0.2",sinon:"^1.17.3","sinon-chai":"^2.8.0",snazzy:"^3.0.0",uglifyjs:"^2.4.10"},link:!0,browserify:{transform:["browserify-css",["polymerize",{match:".*.html$"}]]},semistandard:{ignore:["build/**","dist/**","examples/_js/**","examples/**/shaders/*.js","vendor/**"]},keywords:["aframe","vr","webvr","3d","three","components","elements"],"browserify-css":{minify:!0},engines:{node:">= 0.12.7",npm:"^2.12.1"}}},{}],25:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("../lib/three");e.exports.Component=r("camera",{schema:{active:{"default":!0},far:{"default":1e4},fov:{"default":80,min:0},near:{"default":.5,min:0}},init:function(){var t=this.camera=new i.PerspectiveCamera;this.el.setObject3D("camera",t)},remove:function(){this.el.removeObject3D("camera")},update:function(t){var e=this.el,n=this.data,r=this.camera,i=this.system;r.aspect=n.aspect||window.innerWidth/window.innerHeight,r.far=n.far,r.fov=n.fov,r.near=n.near,r.updateProjectionMatrix(),t&&t.active===n.active||(n.active&&i.activeCameraEl!==this.el?i.setActiveCamera(e,r):n.active||i.activeCameraEl!==this.el||i.disableActiveCamera())}})},{"../core/component":56,"../lib/three":90}],26:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("../lib/three"),o=new i.ColladaLoader;o.options.convertUpAxis=!0,e.exports.Component=r("collada-model",{schema:{type:"src"},init:function(){this.model=null},update:function(){var t=this,e=this.el,n=this.data;n&&(this.remove(),o.load(n,function(n){t.model=n.scene,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"collada",model:t.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":56,"../lib/three":90}],27:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("../utils/");e.exports.Component=r("cursor",{schema:{timeout:{"default":1500,min:0},maxDistance:{"default":5,min:0},fuse:{"default":!1}},dependencies:["raycaster"],init:function(){this.raycaster=this.el.components.raycaster,this.schema.fuse["default"]=i.isMobile(),this.attachEventListeners()},attachEventListeners:function(){var t=this.el,e=t.sceneEl.canvas;return e?(e.addEventListener("mousedown",this.onMouseDown.bind(this)),e.addEventListener("mouseup",this.onMouseUp.bind(this)),t.addEventListener("intersection",this.onIntersection.bind(this)),void t.addEventListener("intersectioncleared",this.onIntersectionCleared.bind(this))):void t.sceneEl.addEventListener("render-target-loaded",this.attachEventListeners.bind(this))},onMouseDown:function(t){this.emit("mousedown"),this.mouseDownEl=this.intersectedEl},onMouseUp:function(){this.emit("mouseup"),this.data.fuse||this.intersectedEl&&this.mouseDownEl===this.intersectedEl&&this.emit("click")},emit:function(t){var e=this.intersectedEl;this.el.emit(t,{target:this.intersectedEl}),e&&e.emit(t)},emitter:function(t){return function(){this.emit(t)}.bind(this)},onIntersection:function(t){function e(){n.el.removeState("fusing"),n.emit("click")}var n=this,r=this.data,i=t.detail.el,o=t.detail.distance;this.intersectedEl!==i&&(o>=this.data.maxDistance||(this.intersectedEl=i,i.addState("hovered"),i.emit("mouseenter"),this.el.addState("hovering"),0!==r.timeout&&r.fuse&&(this.el.addState("fusing"),this.fuseTimeout=setTimeout(e,r.timeout))))},onIntersectionCleared:function(t){var e=t.detail.el;e&&this.intersectedEl&&(e.removeState("hovered"),e.emit("mouseleave"),this.el.removeState("hovering"),this.el.removeState("fusing"),this.intersectedEl=null,clearTimeout(this.fuseTimeout))}})},{"../core/component":56,"../utils/":102}],28:[function(t,e,n){function r(t,e){switch("cube"===t.primitive&&p('geometry.primitive="cube" should be "box"'),t.primitive){case"box":return new s.BoxGeometry(t.width,t.height,t.depth);case"circle":return new s.CircleGeometry(t.radius,t.segments,h(t.thetaStart),h(t.thetaLength));case"cone":return new s.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,h(t.thetaStart),h(t.thetaLength));case"cylinder":return new s.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,h(t.thetaStart),h(t.thetaLength));case"plane":return new s.PlaneBufferGeometry(t.width,t.height);case"ring":return new s.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,h(t.thetaStart),h(t.thetaLength));case"sphere":return 360===t.thetaLength&&(t.thetaLength=180),new s.SphereBufferGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,h(t.phiStart),h(t.phiLength),h(t.thetaStart),h(t.thetaLength));case"torus":return new s.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,h(t.arc));case"torusKnot":return new s.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,t.p,t.q,t.scaleHeight);default:return p("Primitive type not supported: "+t.primitive),new s.Geometry}}function i(t,e,n){var r=u.makeTranslation(e.x-n.x,e.y-n.y,e.z-n.z);t.applyMatrix(r),t.verticesNeedsUpdate=!0}var o=t("../utils/debug"),a=t("../core/component").registerComponent,s=t("../lib/three"),c=t("../utils"),l=1,u=new s.Matrix4,h=s.Math.degToRad,p=o("components:geometry:warn");e.exports.Component=a("geometry",{schema:{arc:{"default":360,"if":{primitive:["torus"]}},depth:{"default":1,min:0,"if":{primitive:["box"]}},height:{"default":1,min:0,"if":{primitive:["box","plane"]}},openEnded:{"default":!1,"if":{primitive:["cylinder"]}},p:{"default":2,"if":{primitive:["torusKnot"]},type:"int"},primitive:{"default":"",oneOf:["","box","circle","cylinder","plane","ring","sphere","torus","torusKnot"]},q:{"default":3,"if":{primitive:["torusKnot"]},type:"int"},phiLength:{"default":360,"if":{primitive:["sphere"]}},phiStart:{"default":0,min:0,"if":{primitive:["sphere"]}},radius:{"default":l,min:0,"if":{primitive:["circle","cylinder","sphere","torus","torusKnot"]}},radiusBottom:{"default":l,min:0,"if":{primitive:["cylinder"]}},radiusInner:{"default":.8,min:0,"if":{primitive:["ring"]}},radiusOuter:{"default":1.2,min:0,"if":{primitive:["ring"]}},radiusTop:{"default":l,"if":{primitive:["cylinder"]}},radiusTubular:{"default":.2,min:0,"if":{primitive:["torus"]}},scaleHeight:{"default":1,min:0,"if":{primitive:["torusKnot"]}},segments:{"default":32,min:0,"if":{primitive:["circle"]},type:"int"},segmentsHeight:{"default":18,min:0,"if":{primitive:["cylinder","sphere"]},type:"int"},segmentsPhi:{"default":8,min:0,"if":{primitive:["ring"]},type:"int"},segmentsRadial:{"default":36,min:0,"if":{primitive:["cylinder"]},type:"int"},segmentsTheta:{"default":32,min:0,"if":{primitive:["ring"]},type:"int"},segmentsTubular:{"default":32,min:0,"if":{primitive:["torus","torusKnot"]},type:"int"},segmentsWidth:{"default":36,min:0,"if":{primitive:["sphere"]},type:"int"},thetaLength:{"default":360,min:0,"if":{primitive:["circle","cylinder","ring","sphere"]}},thetaStart:{"default":0,"if":{primitive:["circle","cylinder","ring","sphere"]}},translate:{type:"vec3"},width:{"default":1,min:0,"if":{primitive:["box","plane"]}}},update:function(t){t=t||{};var e=this.data,n=t.translate||this.schema.translate["default"],o=c.diff(t,e),a=this.el.getOrCreateObject3D("mesh",s.Mesh),l=a.geometry,u=!(1===Object.keys(o).length&&"translate"in o),h=!c.deepEqual(e.translate,n);u&&(l=a.geometry=r(this.data,this.schema)),h&&i(l,e.translate,n)},remove:function(){this.el.getObject3D("mesh").geometry=new s.Geometry}})},{"../core/component":56,"../lib/three":90,"../utils":102,"../utils/debug":101}],29:[function(t,e,n){t("./camera"),t("./collada-model"),t("./cursor"),t("./geometry"),t("./light"),t("./look-at"),t("./look-controls"),t("./material"),t("./obj-model"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./sound"),t("./visible"),t("./wasd-controls"),t("./scene/canvas"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/stats"),t("./scene/vr-mode-ui"),t("./loader")},{"./camera":25,"./collada-model":26,"./cursor":27,"./geometry":28,"./light":30,"./loader":31,"./look-at":32,"./look-controls":33,"./material":34,"./obj-model":35,"./position":36,"./raycaster":37,"./rotation":38,"./scale":39,"./scene/canvas":40,"./scene/fog":41,"./scene/keyboard-shortcuts":42,"./scene/stats":43,"./scene/vr-mode-ui":44,"./sound":45,"./visible":46,"./wasd-controls":47}],30:[function(t,e,n){function r(t){var e=t.angle,n=new s.Color(t.color).getHex(),r=t.decay,i=t.distance,o=new s.Color(t.groundColor).getHex(),a=t.intensity,u=t.type;switch(u.toLowerCase()){case"ambient":return new s.AmbientLight(n);case"directional":return new s.DirectionalLight(n,a);case"hemisphere":return new s.HemisphereLight(n,o,a);case"point":return new s.PointLight(n,a,i,r);case"spot":return new s.SpotLight(n,a,i,c(e),t.exponent,r);default:l("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",u)}}var i=t("../utils").diff,o=t("../utils/debug"),a=t("../core/component").registerComponent,s=t("../lib/three"),c=s.Math.degToRad,l=o("components:light:warn");e.exports.Component=a("light",{schema:{angle:{"default":60,"if":{type:["spot"]}},color:{type:"color"},groundColor:{type:"color","if":{type:["hemisphere"]}},decay:{"default":1,"if":{type:["point","spot"]}},distance:{"default":0,min:0,"if":{type:["point","spot"]}},exponent:{"default":10,"if":{type:["spot"]}},intensity:{"default":1,min:0,"if":{type:["directional","hemisphere","point","spot"]}},type:{"default":"directional",oneOf:["ambient","directional","hemisphere","point","spot"]}},init:function(){var t=this.el;this.light=null,this.system.registerLight(t)},update:function(t){var e=this.data,n=i(e,t||{}),r=this.light;return!r||"type"in n?void this.setLight(this.data):void Object.keys(n).forEach(function(t){var n=e[t];["color","groundColor"].indexOf(t)!==-1&&(n=new s.Color(n)),r[t]=n})},setLight:function(t){var e=this.el,n=r(t);n&&(this.light&&e.removeObject3D("light"),this.light=n,this.light.el=e,e.setObject3D("light",this.light))},remove:function(){this.el.removeObject3D("light")}})},{"../core/component":56,"../lib/three":90,"../utils":102,"../utils/debug":101}],31:[function(t,e,n){var r=t("../utils/debug"),i=t("../core/component").registerComponent,o=t("../utils/src-loader").parseUrl,a=t("../lib/three"),s=r("components:loader:warn");e.exports.Component=i("loader",{dependencies:["material"],schema:{src:{"default":""},format:{"default":"obj",oneOf:["obj","collada"]}},init:function(){s("loader component is deprecated. Use collada-model or obj-model component instead.")},update:function(){var t=this.el,e=this.data,n=this.model,r=o(e.src),i=e.format;if(n&&t.removeObject3D("mesh"),!r)return void s("Model URL not provided");switch(i){case"obj":this.loadObj(r);break;case"collada":this.loadCollada(r);break;default:s("Model format not supported")}},loadObj:function(t){var e=this.el,n=new a.OBJLoader;n.load(t,function(t){this.model=t,this.applyMaterial(),e.setObject3D("mesh",t)})},applyMaterial:function(){var t=this.el.components.material.material;this.model&&this.model.traverse(function(e){e instanceof a.Mesh&&(e.material=t)})},loadCollada:function(t){var e=this,n=this.el,r=new a.ColladaLoader;r.options.convertUpAxis=!0,r.load(t,function(t){e.model=t.scene,n.setObject3D("mesh",t.scene)})}})},{"../core/component":56,"../lib/three":90,"../utils/debug":101,"../utils/src-loader":103}],32:[function(t,e,n){var r=t("../utils/debug"),i=t("../utils/coordinates"),o=t("../core/component").registerComponent,a=t("../lib/three"),s=r("components:look-at:warn"),c=i.isCoordinate;e.exports.Component=o("look-at",{schema:{"default":"",parse:function(t){return c(t)||"object"==typeof t?i.parse(t):t},stringify:function(t){return"object"==typeof t?i.stringify(t):t}},init:function(){this.target3D=null,this.vector=new a.Vector3},update:function(){var t,e=this,n=e.data,r=e.el.object3D;return!n||"object"==typeof n&&!Object.keys(n).length?e.remove():"object"==typeof n?r.lookAt(new a.Vector3(n.x,n.y,n.z)):(t=e.el.sceneEl.querySelector(n),t?t.hasLoaded?e.beginTracking(t):t.addEventListener("loaded",function(){e.beginTracking(t)}):void s('"'+n+'" does not point to a valid entity to look-at'))},tick:function(t){var e=this.target3D;if(e)return this.el.object3D.lookAt(this.vector.setFromMatrixPosition(e.matrixWorld))},beginTracking:function(t){this.target3D=t.object3D}})},{"../core/component":56,"../lib/three":90,"../utils/coordinates":100,"../utils/debug":101}],33:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("../lib/three"),o=Math.PI/2;e.exports.Component=r("look-controls",{dependencies:["position","rotation"],schema:{enabled:{"default":!0}},init:function(){this.previousPosition=new i.Vector3,this.deltaPosition=new i.Vector3,this.setupMouseControls(),this.setupHMDControls(),this.bindMethods()},update:function(){this.data.enabled&&(this.controls.update(),this.updateOrientation(),this.updatePosition())},play:function(){this.previousPosition.set(0,0,0),this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t){this.update()},remove:function(){this.pause()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.releaseMouse=this.releaseMouse.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new i.Object3D,this.yawObject=new i.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},setupHMDControls:function(){this.dolly=new i.Object3D,this.euler=new i.Euler,this.controls=new i.VRControls(this.dolly),this.zeroQuaternion=new i.Quaternion},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;return e?(e.addEventListener("mousedown",this.onMouseDown,!1),e.addEventListener("mousemove",this.onMouseMove,!1),e.addEventListener("mouseup",this.releaseMouse,!1),e.addEventListener("mouseout",this.releaseMouse,!1),e.addEventListener("touchstart",this.onTouchStart),e.addEventListener("touchmove",this.onTouchMove),void e.addEventListener("touchend",this.onTouchEnd)):void t.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var t=document.querySelector("a-scene"),e=t&&t.canvas;e&&(e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseup",this.releaseMouse),e.removeEventListener("mouseout",this.releaseMouse),e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd))},updateOrientation:function(){var t=new i.Euler;return t.order="YXZ",function(){var e=this.pitchObject,n=this.yawObject,r=this.calculateHMDQuaternion();t.setFromQuaternion(r),this.el.setAttribute("rotation",{x:i.Math.radToDeg(t.x)+i.Math.radToDeg(e.rotation.x),y:i.Math.radToDeg(t.y)+i.Math.radToDeg(n.rotation.y),z:i.Math.radToDeg(t.z)})}}(),calculateHMDQuaternion:function(){var t=new i.Quaternion;return function(){var e=this.dolly;return this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),updatePosition:function(){var t=this.el,e=this.calculateDeltaPosition(),n=t.getComputedAttribute("position");t.setAttribute("position",{x:n.x+e.x,y:n.y+e.y,z:n.z+e.z})},calculateDeltaPosition:function(){var t=this.dolly,e=this.deltaPosition,n=this.previousPosition;return e.copy(t.position),e.sub(n),n.copy(t.position),e},updateHMDQuaternion:function(){var t=new i.Quaternion;return function(){var e=this.dolly;return this.controls.update(),this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),zeroOrientation:function(){var t=new i.Euler;t.setFromQuaternion(this.dolly.quaternion.clone().inverse()),t.z=0,t.x=0,this.zeroQuaternion.setFromEuler(t)},onMouseMove:function(t){var e=this.pitchObject,n=this.yawObject,r=this.previousMouseEvent;if(this.mouseDown&&this.data.enabled){var i=t.movementX||t.mozMovementX,a=t.movementY||t.mozMovementY;void 0!==i&&void 0!==a||(i=t.screenX-r.screenX,a=t.screenY-r.screenY),this.previousMouseEvent=t,n.rotation.y-=.002*i,e.rotation.x-=.002*a,e.rotation.x=Math.max(-o,Math.min(o,e.rotation.x))}},onMouseDown:function(t){this.mouseDown=!0,this.previousMouseEvent=t},releaseMouse:function(){this.mouseDown=!1},onTouchStart:function(t){1===t.touches.length&&(this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(t){var e,n=this.yawObject;this.touchStarted&&(e=2*Math.PI*(t.touches[0].pageX-this.touchStart.x)/this.el.sceneEl.canvas.clientWidth,n.rotation.y-=.5*e,this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1}})},{"../core/component":56,"../lib/three":90}],34:[function(t,e,n){function r(t){switch(t){case"back":return s.BackSide;case"double":return s.DoubleSide;default:return s.FrontSide}}var i=t("../utils/debug"),o=t("../utils"),a=t("../core/component"),s=t("../lib/three"),c=t("../core/shader"),l=i("components:material:error"),u=o.diff,h=a.registerComponent,p=c.shaders,d=c.shaderNames;e.exports.Component=h("material",{schema:{shader:{"default":"standard",oneOf:d},transparent:{"default":!1},opacity:{"default":1,min:0,max:1},side:{"default":"front",oneOf:["front","back","double"]},depthTest:{
"default":!0}},init:function(){this.material=null},update:function(t){var e=this.data,n=t?u(t,e):e;this.shader&&!n.shader||this.updateShader(e.shader),this.shader.update(this.data),this.updateMaterial()},updateSchema:function(t){var e=t.shader,n=this.data&&this.data.shader,r=e||n,i=p[r]&&p[r].schema;i||l("Unknown shader schema "+r),n&&e===n||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var t=this.el.sceneEl,e=this.schema,n=this,r={},i=function(t,e){function i(e){r[e]=t}var o=Object.keys(r);o.forEach(i),n.shader.update(r)},o=Object.keys(e);o.forEach(function(o){"time"===e[o].type&&(n.tick=i,r[o]=!0,t.addBehavior(n))}),0===Object.keys(r).length&&t.removeBehavior(this)},updateShader:function(t){var e,n=this.data,r=p[t]&&p[t].Shader;if(!r)throw new Error("Unknown shader "+t);this.shader=new r,this.shader.el=this.el,e=this.shader.init(n),this.setMaterial(e),this.updateSchema(n)},updateMaterial:function(){var t=this.data,e=this.material;e.side=r(t.side),e.opacity=t.opacity,e.transparent=t.transparent!==!1||t.opacity<1,e.depthTest=t.depthTest!==!1},remove:function(){var t=new s.MeshBasicMaterial,e=this.el.getObject3D("mesh");e&&(e.material=t),this.system.unregisterMaterial(this.material)},setMaterial:function(t){var e=this.el.getOrCreateObject3D("mesh",s.Mesh),n=this.system;this.material&&n.unregisterMaterial(this.material),this.material=e.material=t,n.registerMaterial(t)}})},{"../core/component":56,"../core/shader":63,"../lib/three":90,"../utils":102,"../utils/debug":101}],35:[function(t,e,n){var r=t("../utils/debug"),i=t("../core/component").registerComponent,o=t("../lib/three"),a=r("components:obj-model:warn");e.exports.Component=i("obj-model",{dependencies:["material"],schema:{mtl:{type:"src"},obj:{type:"src"}},init:function(){this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager)},update:function(){var t=this.data;t.obj&&(this.remove(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(t,e){var n=this,r=this.el,i=this.mtlLoader,s=this.objLoader;return e?(HTMLElement.prototype.getAttribute.call(r,"material")&&a("Material component properties are ignored when a .MTL is provided"),i.setBaseUrl(e.substr(0,e.lastIndexOf("/")+1)),void i.load(e,function(e){e.preload(),s.setMaterials(e),s.load(t,function(t){n.model=t,r.setObject3D("mesh",t),r.emit("model-loaded",{format:"obj",model:t})})})):void s.load(t,function(t){var e=r.components.material.material;t.traverse(function(t){t instanceof o.Mesh&&(t.material=e)}),n.model=t,r.setObject3D("mesh",t),r.emit("model-loaded",{format:"obj",model:t})})}})},{"../core/component":56,"../lib/three":90,"../utils/debug":101}],36:[function(t,e,n){var r=t("../core/component").registerComponent;e.exports.Component=r("position",{schema:{type:"vec3"},update:function(){var t=this.el.object3D,e=this.data;t.position.set(e.x,e.y,e.z)}})},{"../core/component":56}],37:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("request-interval"),o=t("../lib/three");e.exports.Component=r("raycaster",{init:function(){this.raycaster=new o.Raycaster,this.intersectedEl=null},play:function(){this.pollForHoverIntersections()},pause:function(){var t=this.pollInterval;t&&i.clear(this.pollInterval)},remove:function(){this.pause()},pollForHoverIntersections:function(){this.pollInterval=i(100,this.getIntersections.bind(this))},getIntersections:function(){var t=this.getClosestIntersected();return t?void this.handleIntersection(t):void(this.intersectedEl&&this.clearExistingIntersection())},intersect:function(t){var e=this.el,n=this.raycaster,r=e.object3D,i=e.parentNode.object3D,a=(new o.Vector3).setFromMatrixPosition(i.matrixWorld),s=(new o.Vector3).setFromMatrixPosition(r.matrixWorld),c=s.sub(a).normalize();return n.set(a,c),n.intersectObjects(t,!0)},getClosestIntersected:function(){for(var t,e=this.el.sceneEl.object3D,n=this.el,r=this.intersect(e.children),i=0;i<r.length;++i){for(t=r[i];t.object.parent&&void 0===t.object.el;)t.object=t.object.parent;if(void 0!==t.object.el&&t.object.el!==n&&t.object.visible)return t}return null},setExistingIntersection:function(t,e){this.intersectedEl=t,this.el.emit("intersection",{el:t,distance:e})},clearExistingIntersection:function(){var t=this.intersectedEl;this.el.emit("intersectioncleared",{el:t}),this.intersectedEl=null},handleIntersection:function(t){var e=t.object.el;this.intersectedEl!==e&&this.clearExistingIntersection(),this.setExistingIntersection(e,t.distance)}})},{"../core/component":56,"../lib/three":90,"request-interval":12}],38:[function(t,e,n){var r=t("../lib/three").Math.degToRad,i=t("../core/component").registerComponent;e.exports.Component=i("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,e=this.el.object3D;e.rotation.set(r(t.x),r(t.y),r(t.z)),e.rotation.order="YXZ"}})},{"../core/component":56,"../lib/three":90}],39:[function(t,e,n){var r=t("../core/component").registerComponent,i=1e-5;e.exports.Component=r("scale",{schema:{type:"vec3","default":{x:1,y:1,z:1}},update:function(){var t=this.data,e=this.el.object3D,n=0===t.x?i:t.x,r=0===t.y?i:t.y,o=0===t.z?i:t.z;e.scale.set(n,r,o)}})},{"../core/component":56}],40:[function(t,e,n){var r=t("../../core/component").registerComponent;e.exports.Component=r("canvas",{schema:{canvas:{type:"selector","default":void 0},height:{"default":100},width:{"default":100}},update:function(){var t=this.data,e=t.canvas,n=this.el;n.canvas||(e||(e=document.createElement("canvas"),e.classList.add("a-canvas"),e.style.height=t.height+"%",e.style.width=t.width+"%",n.appendChild(e)),e.addEventListener("touchmove",function(t){t.preventDefault()}),n.canvas=e,n.emit("render-target-loaded",{target:e}))}})},{"../../core/component":56}],41:[function(t,e,n){function r(t){var e;return e="exponential"===t.type?new o.FogExp2(t.color,t.density):new o.Fog(t.color,t.near,t.far),e.name=t.type,e}var i=t("../../core/component").registerComponent,o=t("../../lib/three"),a=t("../../utils/debug"),s=a("components:fog:warn");e.exports.Component=i("fog",{schema:{color:{"default":"#000"},density:{"default":25e-5},far:{"default":1e3,min:0},near:{"default":1,min:0},type:{"default":"linear",oneOf:["linear","exponential"]}},update:function(){var t=this.data,e=this.el,n=this.el.object3D.fog;return e.isScene?n&&t.type===n.name?void Object.keys(this.schema).forEach(function(e){var r=t[e];"color"===e&&(r=new o.Color(r)),n[e]=r}):(e.object3D.fog=r(t),void e.systems.material.updateMaterials()):void s("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.density=0,t.far=0,t.near=0)}})},{"../../core/component":56,"../../lib/three":90,"../../utils/debug":101}],42:[function(t,e,n){var r=t("../../core/component").registerComponent,i=t("../../utils/").shouldCaptureKeyEvent,o=t("../../lib/three"),a=new o.VRControls(new o.Object3D);e.exports.Component=r("keyboard-shortcuts",{schema:{enterVR:{"default":!0},resetSensor:{"default":!0}},init:function(){var t=this,e=this.el;this.listener=window.addEventListener("keyup",function(n){i(n)&&(t.enterVREnabled&&70===n.keyCode&&e.enterVR(),t.resetSensorEnabled&&90===n.keyCode&&a.resetSensor())},!1)},update:function(t){var e=this.data;this.enterVREnabled=e.enterVR,this.resetSensorEnabled=e.resetSensor},remove:function(){window.removeEventListener("keyup",this.listener)}})},{"../../core/component":56,"../../lib/three":90,"../../utils/":102}],43:[function(t,e,n){function r(t){var e=new s(t.renderer),n=new c(t),r=t.isMobile?[]:[e,n];return new o({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})}var i=t("../../core/component").registerComponent,o=t("../../../vendor/rStats");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var a="a-hidden",s=window.threeStats,c=window.aframeStats;e.exports.Component=i("stats",{init:function(){var t=this.el;this.stats=r(t),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),t.addEventListener("enter-vr",this.hideBound),t.addEventListener("exit-vr",this.showBound)},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var t=this.stats;t("rAF").tick(),t("FPS").frame(),t().update()},hide:function(){this.statsEl.classList.add(a)},show:function(){this.statsEl.classList.remove(a)}})},{"../../../vendor/rStats":107,"../../../vendor/rStats.extras":106,"../../core/component":56,"../../lib/rStatsAframe":89}],44:[function(t,e,n){function r(t,e){function n(){if(l.update(),a=c.quaternion,0!==a._x||0!==a._y||0!==a._z)return!0}var r,i,o,a,s,m,v=e||window.hasNonPolyfillWebVRSupport;return m=document.createElement("div"),m.classList.add(u),r=document.createElement("div"),r.className=f,o=document.createElement("p"),i=document.createElement("a"),i.setAttribute("href","http://mozvr.com/#start"),i.setAttribute("target","_blank"),i.innerHTML="Learn more.",s=document.createElement("button"),s.className=d,m.appendChild(s),r&&(r.appendChild(o),r.appendChild(i),m.appendChild(r)),n()||e||(o.innerHTML="Your browser supports WebVR. To enter VR, connect a headset, or use a mobile phone.",m.setAttribute(h,"")),v?s.addEventListener("click",t):(o.innerHTML="Your browser does not support WebVR. To enter VR, use a VR-compatible browser or a mobile phone.",m.setAttribute(p,"")),m}function i(t){var e=document.createElement("div");e.className=v,e.classList.add(m);var n=document.createElement("button");return n.innerHTML="Exit VR",n.addEventListener("click",t),e.appendChild(n),e}var o=t("../../core/component").registerComponent,a=t("../../lib/three"),s=t("../../utils/"),c=new a.Object3D,l=new a.VRControls(c),u="a-enter-vr",h="data-a-enter-vr-no-headset",p="data-a-enter-vr-no-webvr",d="a-enter-vr-button",f="a-enter-vr-modal",m="a-hidden",v="a-orientation-modal";e.exports.Component=o("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{"default":!0}},init:function(){var t=this,e=this.el;this.enterVR=e.enterVR.bind(e),this.exitVR=e.exitVR.bind(e),this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,e.addEventListener("enter-vr",this.updateEnterVRInterface.bind(this)),e.addEventListener("exit-vr",this.updateEnterVRInterface.bind(this)),window.addEventListener("message",function(e){"loaderReady"===e.data.type&&(t.insideLoader=!0,t.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded.bind(this))},update:function(){var t=this.el;return!this.data.enabled||this.insideLoader?this.remove():void(this.enterVREl||this.orientationModalEl||(this.enterVREl=r(this.enterVR,t.isMobile),this.el.appendChild(this.enterVREl),this.orientationModalEl=i(this.exitVR),this.el.appendChild(this.orientationModalEl),this.updateEnterVRInterface()))},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(t){t&&t.parentNode.removeChild(t)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){if(this.enterVREl){var t=this.el;t.is("vr-mode")?this.enterVREl.classList.add(m):this.enterVREl.classList.remove(m)}},toggleOrientationModalIfNeeded:function(){var t=this.el;this.orientationModalEl&&t.isMobile&&(!s.isLandscape()&&t.is("vr-mode")?this.orientationModalEl.classList.remove(m):this.orientationModalEl.classList.add(m))}})},{"../../core/component":56,"../../lib/three":90,"../../utils/":102}],45:[function(t,e,n){var r=t("../utils/debug"),i=t("../utils").diff,o=t("../core/component").registerComponent,a=t("../lib/three"),s=r("components:sound:warn");e.exports.Component=o("sound",{schema:{src:{"default":""},on:{"default":"click"},autoplay:{"default":!1},loop:{"default":!1},volume:{"default":1}},init:function(){this.listener=null,this.sound=null},update:function(t){var e=this.data,n=i(t||{},e),r=this.el,o=this.sound,a=e.src,c="src"in n;if(c){if(!a)return void s("Audio source was not specified with `src`");o=this.setupSound()}(c||"autoplay"in n)&&(o.autoplay=e.autoplay),(c||"loop"in n)&&o.setLoop(e.loop),(c||"volume"in n)&&o.setVolume(e.volume),"on"in n&&(t&&t.on&&r.removeEventListener(t.on),r.addEventListener(e.on,this.play.bind(this))),c&&o.load(a)},remove:function(){this.el.removeObject3D("sound"),this.sound.disconnect()},setupSound:function(){var t=this.el,e=t.sceneEl,n=this.sound;n&&(this.stop(),t.removeObject3D("sound"));var r=this.listener=e.audioListener||new a.AudioListener;return e.audioListener=r,e.camera&&e.camera.add(r),e.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(r)}),n=this.sound=new a.PositionalAudio(r),t.setObject3D("sound",n),n.source.onended=function(){n.onEnded(),t.emit("sound-ended")},n},play:function(){this.sound.source.buffer&&this.sound.play()},stop:function(){this.sound.source.buffer&&this.sound.stop()},pause:function(){this.sound.source.buffer&&this.sound.isPlaying&&this.sound.pause()}})},{"../core/component":56,"../lib/three":90,"../utils":102,"../utils/debug":101}],46:[function(t,e,n){var r=t("../core/component").registerComponent;e.exports.Component=r("visible",{schema:{type:"boolean","default":!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":56}],47:[function(t,e,n){var r=t("../core/component").registerComponent,i=t("../utils/").shouldCaptureKeyEvent,o=t("../lib/three"),a=.2;e.exports.Component=r("wasd-controls",{schema:{easing:{"default":20},acceleration:{"default":65},enabled:{"default":!0},fly:{"default":!1},wsAxis:{"default":"z",oneOf:["x","y","z"]},adAxis:{"default":"x",oneOf:["x","y","z"]},wsInverted:{"default":!1},wsEnabled:{"default":!0},adInverted:{"default":!1},adEnabled:{"default":!0}},init:function(){this.velocity=new o.Vector3,this.keys={},this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.attachVisibilityEventListeners()},update:function(t){var e,n=this.data,r=n.acceleration,i=n.easing,o=this.velocity,s=this.prevTime=this.prevTime||Date.now(),c=window.performance.now(),l=(c-s)/1e3,u=this.keys,h=n.adAxis,p=n.wsAxis,d=n.adInverted?-1:1,f=n.wsInverted?-1:1,m=this.el;if(this.prevTime=c,t||l>a)return o[h]=0,void(o[p]=0);o[h]-=o[h]*i*l,o[p]-=o[p]*i*l;var v=m.getComputedAttribute("position");n.enabled&&(n.adEnabled&&(u[65]&&(o[h]-=d*r*l),u[68]&&(o[h]+=d*r*l)),n.wsEnabled&&(u[87]&&(o[p]-=f*r*l),u[83]&&(o[p]+=f*r*l))),e=this.getMovementVector(l),m.object3D.translateX(e.x),m.object3D.translateY(e.y),m.object3D.translateZ(e.z),m.setAttribute("position",{x:v.x+e.x,y:v.y+e.y,z:v.z+e.z})},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},tick:function(t){this.update()},remove:function(){this.pause(),this.removeVisibilityEventListeners()},attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(t){i(t)&&(this.keys[t.keyCode]=!0)},onKeyUp:function(t){i(t)&&(this.keys[t.keyCode]=!1)},getMovementVector:function(t){var e=new o.Vector3(0,0,0),n=new o.Euler(0,0,0,"YXZ");return function(t){var r=this.velocity,i=this.el.getAttribute("rotation");return e.copy(r),e.multiplyScalar(t),i?(this.data.fly||(i.x=0),n.set(o.Math.degToRad(i.x),o.Math.degToRad(i.y),0),e.applyEuler(n),e):e}}()})},{"../core/component":56,"../lib/three":90,"../utils/":102}],48:[function(t,e,n){var r=t("tween.js"),i={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},o={linear:r.Easing.Linear.None,ease:r.Easing.Cubic.InOut,"ease-in":r.Easing.Cubic.In,"ease-out":r.Easing.Cubic.Out,"ease-in-out":r.Easing.Cubic.InOut,"ease-cubic":r.Easing.Cubic.In,"ease-in-cubic":r.Easing.Cubic.In,"ease-out-cubic":r.Easing.Cubic.Out,"ease-in-out-cubic":r.Easing.Cubic.InOut,"ease-quad":r.Easing.Quadratic.InOut,"ease-in-quad":r.Easing.Quadratic.In,"ease-out-quad":r.Easing.Quadratic.Out,"ease-in-out-quad":r.Easing.Quadratic.InOut,"ease-quart":r.Easing.Quartic.InOut,"ease-in-quart":r.Easing.Quartic.In,"ease-out-quart":r.Easing.Quartic.Out,"ease-in-out-quart":r.Easing.Quartic.InOut,"ease-quint":r.Easing.Quintic.InOut,"ease-in-quint":r.Easing.Quintic.In,"ease-out-quint":r.Easing.Quintic.Out,"ease-in-out-quint":r.Easing.Quintic.InOut,"ease-sine":r.Easing.Sinusoidal.InOut,"ease-in-sine":r.Easing.Sinusoidal.In,"ease-out-sine":r.Easing.Sinusoidal.Out,"ease-in-out-sine":r.Easing.Sinusoidal.InOut,"ease-expo":r.Easing.Exponential.InOut,"ease-in-expo":r.Easing.Exponential.In,"ease-out-expo":r.Easing.Exponential.Out,"ease-in-out-expo":r.Easing.Exponential.InOut,"ease-circ":r.Easing.Circular.InOut,"ease-in-circ":r.Easing.Circular.In,"ease-out-circ":r.Easing.Circular.Out,"ease-in-out-circ":r.Easing.Circular.InOut,"ease-elastic":r.Easing.Elastic.InOut,"ease-in-elastic":r.Easing.Elastic.In,"ease-out-elastic":r.Easing.Elastic.Out,"ease-in-out-elastic":r.Easing.Elastic.InOut,"ease-back":r.Easing.Back.InOut,"ease-in-back":r.Easing.Back.In,"ease-out-back":r.Easing.Back.Out,"ease-in-out-back":r.Easing.Back.InOut,"ease-bounce":r.Easing.Bounce.InOut,"ease-in-bounce":r.Easing.Bounce.In,"ease-out-bounce":r.Easing.Bounce.Out,"ease-in-out-bounce":r.Easing.Bounce.InOut},a={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={indefinite:"indefinite"},c={attribute:"rotation",begin:"0",dur:1e3,easing:"ease",direction:i.normal,fill:a.forwards,from:void 0,repeat:0,to:void 0};e.exports.defaults=c,e.exports.directions=i,e.exports.easingFunctions=o,e.exports.fills=a,e.exports.repeats=s},{"tween.js":22}],49:[function(t,e,n){function r(t){return d.extend({},t)}function i(t,e,n,r,i){function s(){v=g[0],m=g[1],f=t.components[v],f||(t.setAttribute(v,""),f=t.components[v]),d=f.schema,void 0===n?_[e]=t.getComputedAttribute(v)[m]:_[e]=n,_[e]=u(_[e],d[m]),b[e]=u(r,d[m]),y=function(n){e in n&&t.setAttribute(v,m,n[e])}}function c(){_=n?l.parse(n):i,b=l.parse(r),y=function(n){t.setAttribute(e,n)}}function h(){void 0===n?_[e]=!1:_[e]=o(n),_[e]=a(_[e]),b[e]=a(o(r)),y=function(n){t.setAttribute(e,!!n[e])}}function p(){void 0===n?_[e]=parseFloat(t.getAttribute(e)):_[e]=parseFloat(n),b[e]=parseFloat(r),y=function(n){t.setAttribute(e,n[e])}}var d,f,m,v,y,g=e.split("."),_={},b={};return 2===g.length?s():r&&x(r)?c():["true","false"].indexOf(r)!==-1?h():p(),{from:_,partialSetAttribute:y,to:b}}function o(t){return"true"===t}function a(t){return t?1:0}var s=t("./a-node"),c=t("../constants/animation"),l=t("../utils/").coordinates,u=t("./schema").parseProperty,h=t("./a-register-element").registerElement,p=t("tween.js"),d=t("../utils/"),f=c.defaults,m=c.directions,v=c.easingFunctions,y=c.fills,g=c.repeats,x=l.isCoordinate;e.exports.AAnimation=h("a-animation",{prototype:Object.create(s.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null}},attachedCallback:{value:function(){function t(){e.applyMixin(),e.update(),e.load()}var e=this,n=e.el=e.parentNode;n.isNode?n.hasLoaded?t():n.addEventListener("loaded",t.bind(e)):n.addEventListener("nodeready",t.bind(e))}},attributeChangedCallback:{value:function(t,e,n){this.hasLoaded&&this.isRunning&&(this.stop(),this.applyMixin(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var t,e,n,o,a=this,s=a.data,c=a.el,l=s.attribute,u=parseInt(s.begin,10),h=c.getComputedAttribute(l),d=a.getDirection(s.direction),f=v[s.easing],x=s.fill,_=s.repeat===g.indefinite?1/0:0,b=!1;return t=i(c,l,s.from||a.initialValue,s.to,h),e=t.from,n=t.to,a.partialSetAttribute=t.partialSetAttribute,void 0===a.count&&(a.count=_===1/0?0:parseInt(s.repeat,10)),isNaN(u)&&(u=0),a.initialValue=a.initialValue||r(h),_===1/0&&x===y.forwards&&[m.alternate,m.alternateReverse].indexOf(s.direction)!==-1&&(b=!0),d===m.reverse&&(o=n,n=r(e),e=r(o)),[y.backwards,y.both].indexOf(x)!==-1&&a.partialSetAttribute(e),new p.Tween(r(e)).to(n,s.dur).delay(u).easing(f).repeat(_).yoyo(b).onUpdate(function(){a.partialSetAttribute(this)}).onComplete(a.onCompleted.bind(a))}},update:{value:function(){var t=this.data,e=t.begin;this.removeEventListeners(this.evt),this.addEventListeners(e),this.evt=e,isNaN(e)||(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var t=this.data;return this.isRunning=!1,[y.backwards,y.none].indexOf(t.fill)!==-1&&this.partialSetAttribute(this.initialValue),0===this.count?(this.count=void 0,void this.emit("animationend")):(this.isRunning=!1,this.count--,void this.start())}},start:{value:function(){!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))},writable:!0},stop:{value:function(){var t=this.tween;t&&(t.stop(),this.isRunning=!1,[y.backwards,y.none].indexOf(this.data.fill)!==-1&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(t){return t===m.alternate?(this.prevDirection=this.prevDirection===m.normal?m.reverse:m.normal,this.prevDirection):t===m.alternateReverse?(this.prevDirection=this.prevDirection===m.reverse?m.normal:m.reverse,this.prevDirection):t}},bindMethods:{value:function(){this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.onStateAdded=this.onStateAdded.bind(this),this.onStateRemoved=this.onStateRemoved.bind(this)}},addEventListeners:{value:function(t){var e=this.el,n=this;d.splitString(t).forEach(function(t){e.addEventListener(t,n.start)}),isNaN(t)||e.addEventListener("play",this.start),e.addEventListener("pause",this.stop),e.addEventListener("stateadded",this.onStateAdded),e.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(t){var e=this.el,n=this.start;d.splitString(t).forEach(function(t){e.removeEventListener(t,n)}),e.removeEventListener("stateadded",this.onStateAdded),e.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(t){t.detail.state===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(t){t.detail.state===this.data.begin&&this.stop()},writable:!0},applyMixin:{value:function(){var t,e,n,r={};n=document.querySelector("#"+this.getAttribute("mixin")),e=n?d.getElData(n,f):{},t=d.getElData(this,f),d.extend(r,f,e,t),this.data=r}}})}),e.exports.getAnimationValues=i},{"../constants/animation":48,"../utils/":102,"./a-node":54,"./a-register-element":55,"./schema":62,"tween.js":22}],50:[function(t,e,n){function r(t){if(t.hasAttribute("autoplay")||"auto"===t.getAttribute("preload"))return new Promise(function(e,n){function r(){for(var n=0,r=0;r<t.buffered.length;r++)n+=t.buffered.end(r)-t.buffered.start(r);n>=t.duration&&e()}return 4===t.readyState?e():t.error?n():(t.addEventListener("loadeddata",r,!1),t.addEventListener("progress",r,!1),void t.addEventListener("error",n,!1))})}var i=t("./a-node"),o=t("../utils/debug"),a=t("./a-register-element").registerElement,s=t("../lib/three"),c=new s.XHRLoader,l=o("core:a-assets:warn");e.exports=a("a-assets",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.isAssets=!0}},attachedCallback:{value:function(){var t=this,e=[],n=this.querySelectorAll("audio"),i=this.querySelectorAll("img"),o=parseInt(this.getAttribute("timeout"),10)||3e3,a=this.querySelectorAll("video");if("A-SCENE"!==this.parentNode.tagName)throw new Error("<a-assets> must be a child of a <a-scene>.");for(var s=0;s<i.length;s++)e.push(new Promise(function(t,e){var n=i[s];n.onload=t,n.onerror=e}));for(s=0;s<n.length;s++)e.push(r(n[s]));for(s=0;s<a.length;s++)e.push(r(a[s]));Promise.all(e).then(this.load.bind(this)),setTimeout(function(){t.hasLoaded||(l("Asset loading timed out in ",o,"ms"),t.emit("timeout"),t.load())},o)}},load:{value:function(){i.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),a("a-asset-item",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var t=this,e=this.getAttribute("src");c.load(e,function(e){t.data=e,i.prototype.load.call(t)})}}})})},{"../lib/three":90,"../utils/debug":101,"./a-node":54,"./a-register-element":55}],51:[function(t,e,n){var r=t("../utils/debug"),i=t("./a-register-element").registerElement,o=r("core:cubemap:warn");e.exports=i("a-cubemap",{prototype:Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var t,e=this.querySelectorAll("[src]"),n=[];if(6===e.length){for(t=0;t<e.length;t++)n.push(e[t].getAttribute("src"));return n}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":101,"./a-register-element":55}],52:[function(t,e,n){function r(t,e){return void 0!==t.defaultComponents[e]||(!!t.hasAttribute(e)||i(e,t.mixinEls))}function i(t,e){var n,r=!1;for(n=0;n<e.length&&!(r=e[n].hasAttribute(t));++n);return r}function o(t,e){t.pause(),t.tick&&e.removeBehavior(t)}function a(t,e){t.play(),t.tick&&e.addBehavior(t)}var s,c=t("./a-node"),l=t("./component").components,u=t("./a-register-element"),h=t("../lib/three"),p=t("../utils/"),d=u.isNode,f=p.debug("core:a-entity:debug"),m=u.registerElement,v=p.styleParser,y=Object.create(c.prototype,{defaultComponents:{value:{position:"",rotation:"",scale:"",visible:""}},createdCallback:{value:function(){this.components={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new h.Group,this.object3D.el=this,this.object3DMap={},this.states=[]}},attributeChangedCallback:{value:function(t,e,n){this.setEntityAttribute(t,e,n)}},attachedCallback:{value:function(){this.addToParent(),this.isScene||(this.load(),this.parentNode.paused||this.play())}},detachedCallback:{value:function(){this.parentEl&&!this.isScene&&(Object.keys(this.components).forEach(this.removeComponent.bind(this)),this.parentEl.remove(this))}},applyMixin:{value:function(t){var e=this.getAttribute(t);return t?void this.updateComponent(t,e):void this.updateComponents()}},mapStateMixins:{value:function(t,e){var n,r=this.getAttribute("mixin");r&&(n=r.split(" "),n.forEach(function(n){var r=n+"-"+t;e(r)}),this.updateComponents())}},updateStateMixins:{value:function(t,e){var n=this;e=e||"";var r=t.split(" "),i=e?e.split(" "):[],o=i.filter(function(t){return r.indexOf(t)<0});o.forEach(function(t){var e=Array.prototype.forEach,r=document.querySelectorAll("[id^="+t+"-]"),i=[];e.call(r,function(t){i.push(t.id)}),i.forEach(n.unregisterMixin.bind(n))}),this.states.forEach(function(t){r.forEach(function(e){var r=e+"-"+t;n.registerMixin(r)})})}},getObject3D:{value:function(t){return this.object3DMap[t]}},setObject3D:{value:function(t,e){var n=this.object3DMap[t];n&&this.object3D.remove(n),e instanceof h.Object3D&&(e.el=this,this.object3D.add(e)),this.object3DMap[t]=e}},removeObject3D:{value:function(t){this.setObject3D(t,null)}},getOrCreateObject3D:{value:function(t,e){var n=this.getObject3D(t);return!n&&e&&(n=new e,this.setObject3D(t,n)),n}},add:{value:function(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.emit("child-attached",{el:t}),this.object3D.add(t.object3D)}},addToParent:{value:function(){function t(){e.attachedToParent=!0,n.add&&n.add(e)}var e=this,n=this.parentEl=this.parentNode,r=this.attachedToParent;if(n&&!r)return d(n)?void t():void n.addEventListener("nodeready",t)}},load:{value:function(){this.hasLoaded||(this.addToParent(),this.isScene?c.prototype.load.call(this,this.updateComponents.bind(this)):c.prototype.load.call(this,this.updateComponents.bind(this),function(t){return t.isEntity}))},writable:window.debug},remove:{value:function(t){this.object3D.remove(t.object3D)}},getChildEntities:{value:function(){for(var t=this.children,e=[],n=0;n<t.length;n++){var r=t[n];r instanceof s&&e.push(r)}return e}},initComponent:{value:function(t,e){var n,i=r(this,t);if(l[t]&&(i||e)){if(this.initComponentDependencies(t),e&&!i)this.setAttribute(t,"");else{if(this.isScene&&!this.hasAttribute(t)&&t in this.defaultComponents&&HTMLElement.prototype.setAttribute.call(this,t,this.defaultComponents[t]),t in this.components)return;n=this.components[t]=new l[t].Component(this),this.isPlaying&&a(n,this.sceneEl)}f("Component initialized: %s",t)}},writable:window.debug},initComponentDependencies:{value:function(t){var e,n=this,r=l[t];r&&(e=l[t].dependencies,e&&e.forEach(function(t){n.initComponent(t,!0)}))}},removeComponent:{value:function(t){var e=this.components[t];o(e,this.sceneEl),e.remove(),delete this.components[t]}},updateComponents:{value:function(){function t(t){var n=e.getAttribute(t);e.updateComponent(t,n)}var e=this,n=Object.keys(l);n.forEach(t)}},updateComponent:{value:function(t,e){var n=this.components[t],o=t in this.defaultComponents,a=i(t,this.mixinEls);return n?r(this,t)&&(null!==e||o||a)?void n.updateProperties(e):void this.removeComponent(t):void this.initComponent(t)}},removeAttribute:{value:function(t){var e=l[t];e&&this.setEntityAttribute(t,void 0,null),HTMLElement.prototype.removeAttribute.call(this,t)}},play:{value:function(){var t=this.components,e=Object.keys(t),n=this.sceneEl;this.isPlaying||(this.isPlaying=!0,e.forEach(function(e){a(t[e],n)}),this.getChildEntities().forEach(function(t){t.play()}),this.emit("play"))},writable:!0},pause:{value:function(){var t=this.components,e=Object.keys(t),n=this.sceneEl;this.isPlaying&&(this.isPlaying=!1,e.forEach(function(e){o(t[e],n)}),this.getChildEntities().forEach(function(t){t.pause()}),this.emit("pause"))},writable:!0},setEntityAttribute:{value:function(t,e,n){var r=l[t];if(e=e||this.getAttribute(t),this.hasLoaded||this.isScene)return"mixin"===t?(this.updateStateMixins(n,e),void this.updateComponents()):void(r&&this.updateComponent(t,n))}},setAttribute:{value:function(t,e,n){var r,i=this,o=this.components[t]||l[t];e=void 0===e?"":e;var a,s=e,u=e;o&&("string"==typeof e&&void 0!==n&&(r=v.parse(HTMLElement.prototype.getAttribute.call(this,t))||{},r[e]=n,s=r),u=o.stringify(s)),a=this.getAttribute(t),c.prototype.setAttribute.call(i,t,u),i.setEntityAttribute(t,a,s)},writable:window.debug},getAttribute:{value:function(t){var e=this.components[t]||l[t],n=HTMLElement.prototype.getAttribute.call(this,t);return e&&"string"==typeof n?e.parse(n,!0):n},writable:window.debug},getComputedAttribute:{value:function(t){var e=this.components[t];return e?e.getData():HTMLElement.prototype.getAttribute.call(this,t)}},addState:{value:function(t){this.is(t)||(this.states.push(t),this.mapStateMixins(t,this.registerMixin.bind(this)),this.emit("stateadded",{state:t}))}},removeState:{value:function(t){var e=this.states.indexOf(t);e!==-1&&(this.states.splice(e,1),this.mapStateMixins(t,this.unregisterMixin.bind(this)),this.emit("stateremoved",{state:t}))}},is:{value:function(t){return this.states.indexOf(t)!==-1}}});s=m("a-entity",{prototype:y}),e.exports=s},{"../lib/three":90,"../utils/":102,"./a-node":54,"./a-register-element":55,"./component":56}],53:[function(t,e,n){var r=t("./component").components,i=t("./a-node"),o=t("./a-register-element").registerElement;
e.exports=o("a-mixin",{prototype:Object.create(i.prototype,{attachedCallback:{value:function(){this.load()},writable:window.debug},setAttribute:{value:function(t,e){var n=r[t];n&&"object"==typeof e&&(e=n.stringify(e)),HTMLElement.prototype.setAttribute.call(this,t,e)},writable:window.debug},getAttribute:{value:function(t){var e=r[t],n=HTMLElement.prototype.getAttribute.call(this,t);return e&&"string"==typeof n?e.parse(n):n},writable:window.debug}})})},{"./a-node":54,"./a-register-element":55,"./component":56}],54:[function(t,e,n){var r=t("./a-register-element").registerElement,i=t("../utils/");e.exports=r("a-node",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}}},attachedCallback:{value:function(){var t=this.getAttribute("mixin");this.sceneEl="A-SCENE"===this.tagName?this:this.closest("a-scene"),this.emit("nodeready",{},!1),t&&this.updateMixins(t)}},attributeChangedCallback:{value:function(t,e,n){"mixin"===t&&this.updateMixins(n,e)}},closest:{value:function(t){for(var e=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!e.call(n,t);)n=n.parentElement;return n}},detachedCallback:{value:function(){}},load:{value:function(t,e){var n,r,i=this;this.hasLoaded||(e=e||function(t){return t.isNode},n=this.getChildren(),r=n.filter(e).map(function(t){return new Promise(function(e){return t.hasLoaded?e():void t.addEventListener("loaded",e)})}),Promise.all(r).then(function(){t&&t(),i.hasLoaded=!0,i.emit("loaded",{},!1)}))},writable:!0},getChildren:{value:function(){for(var t=[],e=0;e<this.children.length;e++)t.push(this.children[e]);return t}},updateMixins:{value:function(t,e){var n=t.split(" "),r=e?e.split(" "):[],i=r.filter(function(t){return n.indexOf(t)<0});this.mixinEls=[],i.forEach(this.unregisterMixin.bind(this)),n.forEach(this.registerMixin.bind(this))}},addMixin:{value:function(t){var e,n=this.getAttribute("mixin"),r=n.split(" ");for(e=0;e<r.length;++e)if(r[e]===t)return;r.push(t),this.setAttribute("mixin",r.join(" "))}},removeMixin:{value:function(t){var e,n=this.getAttribute("mixin"),r=n.split(" ");for(e=0;e<r.length;++e)if(r[e]===t)return r.splice(e,1),void this.setAttribute("mixin",r.join(" "))}},registerMixin:{value:function(t){if(this.sceneEl){var e=this.sceneEl.querySelector("a-mixin#"+t);e&&(this.attachMixinListener(e),this.mixinEls.push(e))}}},setAttribute:{value:function(t,e){"mixin"===t&&this.updateMixins(e),HTMLElement.prototype.setAttribute.call(this,t,e)}},unregisterMixin:{value:function(t){var e,n,r=this.mixinEls;for(n=0;n<r.length;++n)if(e=r[n],t===e.id){r.splice(n,1);break}this.removeMixinListener(t)}},removeMixinListener:{value:function(t){var e=this.mixinObservers[t];e&&(e.disconnect(),this.mixinObservers[t]=null)}},attachMixinListener:{value:function(t){var e=this,n=t.id,r=this.mixinObservers[n];if(t&&!r){var i=new MutationObserver(function(t){var n=t[0].attributeName;e.applyMixin(n)}),o={attributes:!0};i.observe(t,o),this.mixinObservers[n]=i}}},applyMixin:{value:function(){}},emit:{value:function(t,e,n){var r=this;e=e||{},void 0===n&&(n=!0);var o={bubbles:!!n,detail:e};return t.split(" ").map(function(t){return i.fireEvent(r,t,o)})}},emitter:{value:function(t,e,n){var r=this;return function(){r.emit(t,e,n)}}}})})},{"../utils/":102,"./a-register-element":55}],55:[function(t,e,n){function r(t){var e={},n=["attachedCallback","attributeChangedCallback","createdCallback"];return o(e,n,t,h.prototype),s(t,e),e}function i(t){var e={},n=["attachedCallback","attributeChangedCallback","createdCallback"],r=["attributeChangedCallback","attachedCallback","createdCallback","detachedCallback"];return o(e,n,t,h.prototype),o(e,r,t,p.prototype),s(t,e),e}function o(t,e,n,r){e.forEach(function(e){a(t,e,n,r)})}function a(t,e,n,r){var i=n[e],o=r[e];if(i&&o&&i!==o){var a=function(){return o.apply(this,arguments),i.apply(this,arguments)};t[e]={value:a,writable:window.debug}}}function s(t,e){var n=Object.getOwnPropertyNames(t);n.forEach(function(n){var r;e[n]||(r=Object.getOwnPropertyDescriptor(t,n),e[n]={value:t[n],writable:r.writable})})}t("document-register-element");var c=document.registerElement,l=e.exports.knownTags={},u=function(t){l[t.toLowerCase()]=!0};e.exports.isNode=function(t){return t.tagName.toLowerCase()in l||t.isNode},e.exports.registerElement=document.registerElement=function(t,e){var n=Object.getPrototypeOf(e.prototype),o=e,a=h&&n===h.prototype,s=p&&n===p.prototype;return(a||s)&&u(t),a&&(o=r(e.prototype),o={prototype:Object.create(n,o)}),s&&(o=i(e.prototype),o={prototype:Object.create(n,o)}),c.call(document,t,o)};var h=t("./a-node"),p=t("./a-entity")},{"./a-entity":52,"./a-node":54,"document-register-element":8}],56:[function(t,e,n){function r(t,e,n,r,o){function a(t){var n=HTMLElement.prototype.getAttribute.call(t,e);n&&(n=h?n:m.parse(n),c=i(c,n,h))}var s=null!==r,c={},h=p(n),d=t.mixinEls;return h||"string"!=typeof r||(r=m.parse(r)),h?c=n["default"]:Object.keys(n).forEach(function(t){c[t]=n[t]["default"]}),d.forEach(a),s&&(c=i(c,r,h)),p(n)?u(c,n):l(c,n,void 0,o)}function i(t,e,n){return n?void 0===e||"object"==typeof e&&0===Object.keys(e).length?t:e:s.extend(t,e)}var o=t("./schema"),a=t("./system"),s=t("../utils/"),c=e.exports.components={},l=o.parseProperties,u=o.parseProperty,h=o.process,p=o.isSingleProperty,d=o.stringifyProperties,f=o.stringifyProperty,m=s.styleParser,v=e.exports.Component=function(t){var e=this.name,n=HTMLElement.prototype.getAttribute.call(t,e);this.el=t,this.updateSchema&&this.updateSchema(r(t,e,this.schema,n,!0)),this.data=r(t,e,this.schema,n),this.init(),this.update()};v.prototype={schema:{},init:function(){},update:function(t){},updateSchema:void 0,tick:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(t,e){var n=this.schema;return p(n)?u(t,n):l(m.parse(t),n,!0,e)},stringify:function(t){var e=this.schema;return"string"==typeof t?t:p(e)?f(t,e):(t=d(t,e),m.stringify(t))},getData:function(){var t=this.data;return"object"!=typeof t?t:s.extend({},t)},updateProperties:function(t){var e=this.el,n=p(this.schema),o=i({},this.data,n);this.updateSchema&&this.updateSchema(r(e,this.name,this.schema,t,!0)),this.data=r(e,this.name,this.schema,t),!n&&s.deepEqual(o,this.data)||(this.update(o),e.emit("componentchanged",{name:this.name,newData:this.getData(),oldData:o}))},extendSchema:function(t){var e=s.extend({},c[this.name].schema);s.extend(e,t),this.schema=h(e),this.el.emit("schemachanged",{component:this.name})}},e.exports.registerComponent=function(t,e){var n,r={};if(Object.keys(e).forEach(function(t){r[t]={value:e[t],writable:!0}}),c[t])throw new Error("The component `"+t+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return n=function(t){v.call(this,t)},n.prototype=Object.create(v.prototype,r),n.prototype.name=t,n.prototype.constructor=n,n.prototype.system=a&&a.systems[t],c[t]={Component:n,dependencies:n.prototype.dependencies,parse:n.prototype.parse.bind(n.prototype),schema:s.extend(h(n.prototype.schema)),stringify:n.prototype.stringify.bind(n.prototype),type:n.prototype.type},n},e.exports.buildData=r},{"../utils/":102,"./schema":62,"./system":64}],57:[function(t,e,n){function r(t,e,n,r){return"type"in _?void x("Property type "+t+" is already registered."):void(_[t]={"default":e,parse:n||a,stringify:r||s})}function i(t){function e(t){return t.trim()}return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map(e):[]}function o(t){return t.join(", ")}function a(t){return t}function s(t){return null===t?"null":t.toString()}function c(t){return"false"!==t&&t!==!1}function l(t){return parseInt(t,10)}function u(t){return parseFloat(t,10)}function h(t){return t?"string"!=typeof t?t:document.querySelector(t):null}function p(t){return t?"string"!=typeof t?t:document.querySelectorAll(t):null}function d(t){return t.getAttribute?"#"+t.getAttribute("id"):s(t)}function f(t){if(t.item){var e,n="";for(e=0;e<t.length;++e)n+="#"+t[e].getAttribute("id"),e!==t.length-1&&(n+=", ");return n}return s(t)}function m(t){var e=t.match(/\url\((.+)\)/);if(e)return e[1];var n=h(t);return n?n.getAttribute("src"):""}function v(t){return y.parse(t,this["default"])}var y=t("../utils/coordinates"),g=t("debug"),x=g("core:propertyTypes:warn"),_=e.exports.propertyTypes={};r("array",[],i,o),r("boolean",!1,c),r("color","#FFF",a,s),r("int",0,l),r("number",0,u),r("selector","",h,d),r("selectorAll","",p,f),r("src","",m),r("string","",a,s),r("time",0,l),r("vec2",{x:0,y:0},v,y.stringify),r("vec3",{x:0,y:0,z:0},v,y.stringify),r("vec4",{x:0,y:0,z:0,w:0},v,y.stringify),e.exports.registerPropertyType=r},{"../utils/coordinates":100,debug:3}],58:[function(t,e,n){function r(t){return y?{height:window.innerHeight,width:window.innerWidth}:{height:t.offsetHeight,width:t.offsetWidth}}function i(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var o=t("./fullscreen"),a=t("./metaTags").inject,s=t("./wakelock"),c=t("../a-register-element"),l=t("../system").systems,u=t("../../lib/three"),h=t("tween.js"),p=t("../../utils/"),d=t("../a-entity"),f=t("../a-node"),m=c.registerElement,v=p.isIOS(),y=p.isMobile(),g=e.exports=m("a-scene",{prototype:Object.create(d.prototype,{defaultComponents:{value:{canvas:"","keyboard-shortcuts":"","vr-mode-ui":""}},createdCallback:{value:function(){this.isMobile=y,this.isIOS=v,this.isScene=!0,this.object3D=new u.Scene,this.systems={},this.time=0,this.init()}},init:{value:function(){this.behaviors=[],this.hasLoaded=!1,this.isPlaying=!0,this.originalHTML=this.innerHTML,this.setupSystems(),this.addEventListener("render-target-loaded",function(){this.setupRenderer(),this.resize()})},writable:!0},attachedCallback:{value:function(){o(this),a(this),s(this),window.addEventListener("load",this.resize.bind(this)),window.addEventListener("resize",this.resize.bind(this),!1),this.addEventListener("fullscreen-exit",this.exitVR.bind(this)),this.play()},writable:window.debug},setupSystems:{value:function(){var t=Object.keys(l);t.forEach(this.initSystem.bind(this))}},initSystem:{value:function(t){var e;this.systems[t]||(e=this.systems[t]=new l[t],e.sceneEl=this,e.init())}},detachedCallback:{value:function(){window.cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null}},addBehavior:{value:function(t){var e=this.behaviors;e.indexOf(t)===-1&&e.push(t)}},enterVR:{value:function(t){this.setStereoRenderer(),y?i(this.canvas):this.stereoRenderer.setFullScreen(!0),this.addState("vr-mode"),this.emit("enter-vr",t)}},exitVR:{value:function(){this.setMonoRenderer(),this.removeState("vr-mode"),this.emit("exit-vr",{target:this})}},removeBehavior:{value:function(t){var e=this.behaviors,n=e.indexOf(t);n!==-1&&e.splice(n,1)}},resize:{value:function(){var t,e=this.camera,n=this.canvas;e&&n&&(y||(n.style.width="100%",n.style.height="100%"),t=r(n,y),e.aspect=t.width/t.height,e.updateProjectionMatrix(),this.renderer.setSize(t.width,t.height,!0))},writable:window.debug},setMonoRenderer:{value:function(){this.renderer=this.monoRenderer,this.resize()}},setStereoRenderer:{value:function(){this.renderer=this.stereoRenderer,this.resize()}},setupRenderer:{value:function(){var t=this.canvas,e="true"===this.getAttribute("antialias"),n=this.renderer=this.monoRenderer=new u.WebGLRenderer({canvas:t,antialias:e,alpha:!0});n.setPixelRatio(window.devicePixelRatio),n.sortObjects=!1,g.renderer=n,this.stereoRenderer=new u.VREffect(n)},writable:window.debug},play:{value:function(){var t=this;return this.renderStarted?void d.prototype.play.call(this):(this.addEventListener("loaded",function(){this.renderStarted||(d.prototype.play.call(this),this.resize(),this.renderer&&(window.performance&&window.performance.mark("render-started"),this.render(),this.renderStarted=!0,this.emit("renderstart")))}),void setTimeout(function(){d.prototype.load.call(t)}))}},reload:{value:function(t){function e(){n.isPlaying&&d.prototype.play.call(n)}var n=this;t&&this.pause(),this.innerHTML=this.originalHTML,this.init(),f.prototype.load.call(this,e)}},render:{value:function(t){var e=this.camera,n=t-this.time,r=this.systems;this.isPlaying&&(h.update(t),this.behaviors.forEach(function(e){e.el.isPlaying&&e.tick(t,n)}),Object.keys(r).forEach(function(e){r[e].tick&&r[e].tick(t,n)})),this.renderer.render(this.object3D,e),this.time=t,this.animationFrameID=window.requestAnimationFrame(this.render.bind(this))},writable:window.debug}})})},{"../../lib/three":90,"../../utils/":102,"../a-entity":52,"../a-node":54,"../a-register-element":55,"../system":64,"./fullscreen":59,"./metaTags":60,"./wakelock":61,"tween.js":22}],59:[function(t,e,n){function r(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,n=this;n.isMobile&&window.screen.orientation&&(e?window.screen.orientation.lock("landscape"):window.screen.orientation.unlock()),e?o(n):a(n)}function i(t){var e=this;if(t.data)switch(t.data.type){case"fullscreen":switch(t.data.data){case"enter":o(e);break;case"exit":a(e)}}}function o(t){t.addState("fullscreen"),t.emit("fullscreen-enter")}function a(t){t.removeState("fullscreen"),t.emit("fullscreen-exit")}var s=t("../../utils/").isIframed;e.exports=function(t){var e=r.bind(t);document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),s()&&window.addEventListener("message",i.bind(t))}},{"../../utils/":102}],60:[function(t,e,n){function r(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector('meta[name="'+t.name+'"]')}}}function i(t){return{tagName:"link",attributes:t,exists:function(){return document.querySelector('link[rel="'+t.rel+'"]')}}}function o(t){if(t&&t.tagName){var e=document.createElement(t.tagName);return a(e,t.attributes)}}var a=t("../../utils").extend,s=e.exports.MOBILE_HEAD_TAGS=[r({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),r({name:"mobile-web-app-capable",content:"yes"}),r({name:"theme-color",content:"black"}),i({rel:"icon",sizes:"192x192",href:"https://aframe.io/images/aframe-logo-192.png"})],c=[r({name:"apple-mobile-web-app-capable",content:"yes"}),r({name:"apple-mobile-web-app-status-bar-style",content:"black"}),i({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];e.exports.inject=function(t){function e(t){t&&!t.exists()&&(n=o(t),n&&(i?i.parentNode.insertBefore(n,i):r.appendChild(n),a.push(n)))}var n,r=document.head,i=r.querySelector("script"),a=[];return s.forEach(e),t.isIOS&&c.forEach(e),a}},{"../../utils":102}],61:[function(t,e,n){var r=t("../../../vendor/wakelock/wakelock");e.exports=function(t){if(t.isMobile){var e=t.wakelock=new r;t.addEventListener("enter-vr",function(){e.request()}),t.addEventListener("exit-vr",function(){e.release()})}}},{"../../../vendor/wakelock/wakelock":109}],62:[function(t,e,n){function r(t){return"type"in t?"string"==typeof t.type:"default"in t}function i(t){var e,n=t["default"],r=t.type;return t.type?"bool"===t.type?r="boolean":"float"===t.type&&(r="number"):r=void 0!==n&&["boolean","number"].indexOf(typeof n)!==-1?typeof n:Array.isArray(n)?"array":"string",e=c[r],e||l("Unknown property type: "+r),t.parse=t.parse||e.parse,t.stringify=t.stringify||e.stringify,t.type=r,"default"in t||(t["default"]=e["default"]),t}function o(t,e){return"string"!=typeof t?t:"undefined"==typeof t?t:e.parse(t)}function a(t,e){return"object"!=typeof t?t:e?e.stringify(t):JSON.stringify(t)}var s=t("../utils/debug"),c=t("./propertyTypes").propertyTypes,l=s("core:schema:warn");e.exports.isSingleProperty=r,e.exports.process=function(t){return r(t)?i(t):(Object.keys(t).forEach(function(e){t[e]=i(t[e])}),t)},e.exports.processPropertyDefinition=i,e.exports.parseProperties=function(t,e,n,r){var i=Object.keys(n?t:e);return null===t||"object"!=typeof t?t:(Object.keys(t).forEach(function(t){e[t]||r||l("Unknown component property: "+t)}),i.forEach(function(n){var r=e[n],i=t[n];e[n]&&(i=void 0===i?r["default"]:i,t[n]=o(i,r))}),t)},e.exports.parseProperty=o,e.exports.stringifyProperties=function(t,e){var n={};return Object.keys(t).forEach(function(r){var i=e[r],o=t[r],s=o;"object"==typeof s&&(s=a(o,i),i||l("Unknown component property: "+r)),n[r]=s}),n},e.exports.stringifyProperty=a},{"../utils/debug":101,"./propertyTypes":57}],63:[function(t,e,n){var r=t("./schema"),i=r.process,o=e.exports.shaders={},a=e.exports.shaderNames=[],s=t("../lib/three"),c={number:"f",time:"f",vec4:"v4",vec3:"v3",vec2:"v2",color:"v3"},l=e.exports.Shader=function(){};l.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0,0.0,1.0,1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new s.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(t,e){function n(n){if(o[n].is===e){var a=c[o[n].type],s=o[n].parse(t[n]||o[n]["default"]);i[n]={type:a,value:r.parseValue(o[n].type,s)}}}var r=this,i={},o=this.schema,a=Object.keys(o);return a.forEach(n),i},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(t,e){function n(n){a[n]&&a[n].is===e&&i[n].value!==t[n]&&(i[n].value=r.parseValue(a[n].type,t[n]),i[n].needsUpdate=!0)}var r=this,i="uniform"===e?this.uniforms:this.attributes,o=Object.keys(t),a=this.schema;o.forEach(n)},parseValue:function(t,e){var n;switch(t){case"vec2":return new s.Vector2(e.x,e.y);case"vec3":return new s.Vector3(e.x,e.y,e.z);case"vec4":return new s.Vector4(e.x,e.y,e.z,e.w);case"color":return n=new s.Color(e),new s.Vector3(n.r,n.g,n.b);default:return e}}},e.exports.registerShader=function(t,e){var n,r={};if(Object.keys(e).forEach(function(t){r[t]={value:e[t],writable:!0}}),o[t])throw Error("The shader "+t+" has been already registered");return n=function(){l.call(this)},n.prototype=Object.create(l.prototype,r),n.prototype.name=t,n.prototype.constructor=n,o[t]={Shader:n,schema:i(n.prototype.schema)},a.push(t),n}},{"../lib/three":90,"./schema":62}],64:[function(t,e,n){var r=t("./component"),i=e.exports.systems={},o=e.exports.System=function(){var t=r&&r.components[this.name];t&&(t.Component.prototype.system=this)};o.prototype={init:function(){},tick:void 0,play:function(){},pause:function(){}},e.exports.registerSystem=function(t,e){var n,r,a={},s=document.querySelectorAll("a-scene");if(Object.keys(e).forEach(function(t){a[t]={value:e[t],writable:!0}}),i[t])throw new Error("The system `"+t+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(r=function(){o.call(this)},r.prototype=Object.create(o.prototype,a),r.prototype.name=t,r.prototype.constructor=r,i[t]=r,n=0;n<s.length;n++)s[n].initSystem(t)}},{"./component":56}],65:[function(t,e,n){var r=t("../../core/a-node"),i=t("../../core/a-register-element").registerElement;e.exports=i("a-event",{prototype:Object.create(r.prototype,{createdCallback:{value:function(){this.el=null,this.isAEvent=!0,this.name="",this.targetEls=[]}},attachedCallback:{value:function(){var t=this.getAttribute("target");this.el=this.parentNode,this.name=this.getAttribute("name")||this.getAttribute("type"),t?this.targetEls=this.closest("a-scene").querySelectorAll(t):this.targetEls=[this.el],this.deprecated&&console.warn("<"+this.tagName.toLowerCase()+'> has been DEPRECATED. Use <a-event name="'+this.name+'"> instead.'),this.hasAttribute("type")&&console.log("<a-event type> has been DEPRECATED. Use <a-event name> instead."),this.listener=this.attachEventListener(),this.load()}},detachedCallback:{value:function(){var t=this.listener;t&&this.removeEventListener(this.name,t)}},attachEventListener:{value:function(){var t=this.attributes,e=this.el,n=this.name,r=this.targetEls;return e.addEventListener(n,function(){for(var e,n,i,o,a,s=0;s<r.length;s++)for(var c=0;c<t.length;c++)e=t[c],n=e.name,o=e.value,a=r[s],"target"!==n&&(n.indexOf(".")===-1?a.setAttribute(n,o):(i=n.split("."),a.setAttribute(i[0],i[1],o)))})}}})})},{"../../core/a-node":54,"../../core/a-register-element":55}],66:[function(t,e,n){e.exports=function(){return{defaultAttributes:{material:{}},mappings:{color:"material.color",metalness:"material.metalness",opacity:"material.opacity",repeat:"material.repeat",roughness:"material.roughness",shader:"material.shader",side:"material.side",src:"material.src",translate:"geometry.translate",transparent:"material.transparent"},transforms:{src:function(t){return"#"===t[0]?t:"url("+t+")"}}}}},{}],67:[function(t,e,n){t("./primitives/a-box"),t("./primitives/a-camera"),t("./primitives/a-circle"),t("./primitives/a-collada-model"),t("./primitives/a-cone"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-cylinder"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-model"),t("./primitives/a-obj-model"),t("./primitives/a-plane"),t("./primitives/a-ring"),t("./primitives/a-sky"),t("./primitives/a-sphere"),t("./primitives/a-torus"),t("./primitives/a-video"),t("./primitives/a-videosphere")},{"./primitives/a-box":68,"./primitives/a-camera":69,"./primitives/a-circle":70,"./primitives/a-collada-model":71,"./primitives/a-cone":72,"./primitives/a-cursor":73,"./primitives/a-curvedimage":74,"./primitives/a-cylinder":75,"./primitives/a-image":76,"./primitives/a-light":77,"./primitives/a-model":78,"./primitives/a-obj-model":79,"./primitives/a-plane":80,"./primitives/a-ring":81,"./primitives/a-sky":82,"./primitives/a-sphere":83,"./primitives/a-torus":84,"./primitives/a-video":85,"./primitives/a-videosphere":86}],68:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/"),a=o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"box"}},mappings:{depth:"geometry.depth",height:"geometry.height",translate:"geometry.translate",width:"geometry.width"}});i("a-box",a),i("a-cube",o.extendDeep({deprecated:"<a-cube> is deprecated. Use <a-box> instead."},a))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],69:[function(t,e,n){var r=t("../registerPrimitive");r("a-camera",{defaultAttributes:{camera:{},"look-controls":{},"wasd-controls":{}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","wasd-controls-enabled":"wasd-controls.enabled"},deprecatedMappings:{"cursor-color":"a-camera[cursor-color] has been removed. Use a-cursor[color] instead.","cursor-maxdistance":"a-camera[cursor-maxdistance] has been removed. Use a-cursor[max-distance] instead.","cursor-offset":"a-camera[cursor-offset] has been removed. Use a-cursor[position] instead.","cursor-opacity":"a-camera[cursor-offset] has been removed. Use a-cursor[opacity] instead.","cursor-scale":"a-camera[cursor-scale] has been removed. Use a-cursor[scale] instead.","cursor-visible":"a-camera[cursor-visible] has been removed. Use a-cursor[visible] instead."}})},{"../registerPrimitive":87}],70:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-circle",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"circle"}},mappings:{radius:"geometry.radius",segments:"geometry.segments","theta-length":"geometry.theta-length","theta-start":"geometry.theta-start"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],71:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-collada-model",o.extendDeep({},r(),{mappings:{src:"collada-model"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],72:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-cone",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"cone"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded","radius-bottom":"geometry.radiusBottom","radius-top":"geometry.radiusTop","segments-height":"geometry.segmentsHeight","segments-radial":"geometry.segmentsRadial","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",translate:"geometry.translate"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],73:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-cursor",o.extendDeep({},r(),{defaultAttributes:{cursor:{maxDistance:1e3},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:64},material:{shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{fuse:"cursor.fuse","max-distance":"cursor.maxDistance",timeout:"cursor.timeout"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],74:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-curvedimage",o.extendDeep({},r(),{defaultAttributes:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",translate:"geometry.translate",width:"geometry.thetaLength"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],75:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-cylinder",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"cylinder"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius","radius-bottom":"geometry.radiusBottom","radius-top":"geometry.radiusTop","segments-radial":"geometry.segmentsRadial","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",translate:"geometry.translate"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],76:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-image",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",translate:"geometry.translate",width:"geometry.width"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],77:[function(t,e,n){var r=t("../registerPrimitive");r("a-light",{defaultAttributes:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",exponent:"light.exponent",intensity:"light.intensity",type:"light.type"}})},{"../registerPrimitive":87}],78:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-model",o.extend({},r(),{deprecated:"<a-model> is deprecated. Use <a-obj-model> or <a-collada-model> instead.",defaultAttributes:{loader:{format:"collada"},material:{color:"#FFF"}},mappings:{src:"loader.src",format:"loader.format"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],79:[function(t,e,n){var r=t("../getMeshMixin")(),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-obj-model",o.extendDeep({},r,{mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"},transforms:{mtl:r.transforms.src}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],80:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-plane",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"plane"}},mappings:{height:"geometry.height",translate:"geometry.translate",width:"geometry.width"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],81:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-ring",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"ring"}},mappings:{"radius-inner":"geometry.radiusInner","radius-outer":"geometry.radiusOuter","segments-phi":"geometry.segments-phi","segments-theta":"geometry.segments-theta","theta-length":"geometry.theta-length","theta-start":"geometry.theta-start"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],82:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-sky",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:64},material:{color:"#FFF",shader:"flat"},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-width":"geometry.segmentsWidth","segments-height":"geometry.segmentsHeight"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],83:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-sphere",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"sphere"}},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth",translate:"geometry.translate"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],84:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-torus",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"torus"}},mappings:{arc:"geometry.arc",radius:"geometry.radius","radius-tubular":"geometry.radiusTubular","segments-radial":"geometry.segmentsRadial","segments-tubular":"geometry.segmentsTubular"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],85:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-video",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",translate:"geometry.translate",width:"geometry.width"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],86:[function(t,e,n){var r=t("../getMeshMixin"),i=t("../registerPrimitive"),o=t("../../../utils/");i("a-videosphere",o.extendDeep({},r(),{defaultAttributes:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:64},material:{color:"#FFF",shader:"flat"},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":102,"../getMeshMixin":66,"../registerPrimitive":87}],87:[function(t,e,n){function r(t){var e={};return Object.keys(t).forEach(function(n){var r=t[n];"object"==typeof r?e[n]=s.extend({},r):e[n]=r}),e}var i=t("../../core/a-entity"),o=t("../../core/component").components,a=t("../../core/a-register-element").registerElement,s=t("../../utils/"),c=s.debug,l=c("extras:primitives");e.exports=function(t,e){return t=t.toLowerCase(),l("Registering <%s>",t),a(t,{prototype:Object.create(i.prototype,{defaultAttributes:{value:e.defaultAttributes||{}},deprecated:{value:e.deprecated||null},deprecatedMappings:{value:e.deprecatedMappings||{}},mappings:{value:e.mappings||{}},transforms:{value:e.transforms||{}},createdCallback:{value:function(){this.componentData={},e.deprecated&&console.warn(e.deprecated)}},attachedCallback:{value:function(){var t=this,e=this.attributes;this.componentData=r(this.defaultAttributes),Object.keys(this.componentData).forEach(function(e){t.hasAttribute(e)||t.setAttribute(e,t.componentData[e])}),Object.keys(e).forEach(function(n){var r=e[n];t.syncAttributeToComponent(r.name,r.value)})}},attributeChangedCallback:{value:function(t,e,n){return this.mappings[t]?void this.syncAttributeToComponent(t,n):void i.prototype.attributeChangedCallback.call(this,t,e,n);
}},syncAttributeToComponent:{value:function(t,e){var n,r,i;t in this.deprecatedMappings&&console.warn(this.deprecatedMappings[t]),t&&this.mappings[t]&&(n=this.mappings[t],n.indexOf(".")!==-1&&(r=this.mappings[t].split("."),n=r[0],i=r[1]),o[n]&&(e=this.getTransformedValue(t,e),this.componentData[n]||(this.componentData[n]=this.defaultAttributes[n]||{}),i?this.componentData[n][i]=e:this.componentData[n]=e,this.setAttribute(n,this.componentData[n])))}},getTransformedValue:{value:function(t,e){return this.transforms&&this.transforms[t]?this.transforms[t].bind(this)(e):e}}})})}},{"../../core/a-entity":52,"../../core/a-register-element":55,"../../core/component":56,"../../utils/":102}],88:[function(t,e,n){window.Promise=window.Promise||t("promise-polyfill"),t("present"),t("./style/aframe.css"),t("./style/rStats.css");var r=t("./core/scene/a-scene"),i=t("./core/component").components,o=t("./core/component").registerComponent,a=t("./extras/primitives/registerPrimitive"),s=t("./core/shader").registerShader,c=t("./core/system").registerSystem,l=t("./core/shader").shaders,u=t("./core/system").systems,h=window.THREE=t("./lib/three"),p=window.TWEEN=t("tween.js"),d=t("../package"),f=t("./utils/");t("./systems/index"),t("./components/index"),t("./shaders/index");var m=t("./core/a-node"),v=t("./core/a-entity");window.hasNonPolyfillWebVRSupport=!!navigator.getVRDevices,window.WebVRConfig={TOUCH_PANNER_DISABLED:!0,MOUSE_KEYBOARD_CONTROLS_DISABLED:!0},t("webvr-polyfill"),t("./core/a-animation"),t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/declarative-events/"),t("./extras/primitives/"),console.log("A-Frame Version:",d.version),console.log("three Version:",d.dependencies.three),console.log("WebVR Polyfill Version:",d.dependencies["webvr-polyfill"]),e.exports=window.AFRAME={AEntity:v,ANode:m,AScene:r,components:i,registerComponent:o,registerShader:s,registerSystem:c,registerPrimitive:a,shaders:l,systems:u,THREE:h,TWEEN:p,utils:f,version:d.version}},{"../package":24,"./components/index":29,"./core/a-animation":49,"./core/a-assets":50,"./core/a-cubemap":51,"./core/a-entity":52,"./core/a-mixin":53,"./core/a-node":54,"./core/component":56,"./core/scene/a-scene":58,"./core/shader":63,"./core/system":64,"./extras/declarative-events/":65,"./extras/primitives/":67,"./extras/primitives/registerPrimitive":87,"./lib/three":90,"./shaders/index":92,"./style/aframe.css":94,"./style/rStats.css":95,"./systems/index":97,"./utils/":102,present:10,"promise-polyfill":11,"tween.js":22,"webvr-polyfill":23}],89:[function(t,e,n){window.aframeStats=function(t){function e(){o("te").set(a.querySelectorAll("a-entity").length),o("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function n(){}function r(){}function i(t){o=t}var o=null,a=t,s={te:{caption:"Entities"},lt:{caption:"Load Time"}},c=[{caption:"A-Frame",values:["te","lt"]}];return{update:e,start:n,end:r,attach:i,values:s,groups:c,fractions:[]}},"object"==typeof e&&(e.exports={aframeStats:window.aframeStats})},{}],90:[function(t,e,r){(function(n){var r=n.THREE=t("three");r.TextureLoader&&(r.TextureLoader.prototype.crossOrigin=""),r.ImageLoader&&(r.ImageLoader.prototype.crossOrigin=""),r.Cache&&(r.Cache.enabled=!0),t("../../node_modules/three/examples/js/loaders/OBJLoader"),t("../../node_modules/three/examples/js/loaders/MTLLoader"),t("../../node_modules/three/examples/js/loaders/ColladaLoader"),t("../../node_modules/three/examples/js/controls/VRControls"),t("../../node_modules/three/examples/js/effects/VREffect"),e.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../node_modules/three/examples/js/controls/VRControls":16,"../../node_modules/three/examples/js/effects/VREffect":17,"../../node_modules/three/examples/js/loaders/ColladaLoader":18,"../../node_modules/three/examples/js/loaders/MTLLoader":19,"../../node_modules/three/examples/js/loaders/OBJLoader":20,three:21}],91:[function(t,e,n){function r(t){var e={fog:t.fog,color:new a.Color(t.color)};return e}var i=t("../core/shader").registerShader,o=t("../utils/src-loader"),a=t("../lib/three"),s=t("../utils/texture");e.exports.Component=i("flat",{schema:{color:{type:"color"},fog:{"default":!0},height:{"default":256},repeat:{"default":""},src:{"default":""},width:{"default":512}},init:function(t){return this.textureSrc=null,this.material=new a.MeshBasicMaterial(r(t)),this.updateTexture(t),this.material},update:function(t){return this.updateMaterial(t),this.updateTexture(t),this.material},updateTexture:function(t){var e=t.src,n=this.material;if(e){if(e===this.textureSrc)return;this.textureSrc=e,o.validateSrc(e,s.loadImage.bind(this,n,t),s.loadVideo.bind(this,n,t))}else s.updateMaterial(n,null)},updateMaterial:function(t){var e=this.material;t=r(t),Object.keys(t).forEach(function(n){e[n]=t[n]})}})},{"../core/shader":63,"../lib/three":90,"../utils/src-loader":103,"../utils/texture":105}],92:[function(t,e,n){t("./flat"),t("./standard")},{"./flat":91,"./standard":93}],93:[function(t,e,n){function r(t){var e={color:new a.Color(t.color),metalness:t.metalness,roughness:t.roughness};return e}var i=t("../core/shader").registerShader,o=t("../utils/src-loader"),a=t("../lib/three"),s=t("../utils/"),c=new a.CubeTextureLoader,l={};e.exports.Component=i("standard",{schema:{color:{type:"color"},envMap:{"default":""},fog:{"default":!0},height:{"default":256},metalness:{"default":0,min:0,max:1},repeat:{"default":""},src:{"default":""},roughness:{"default":.5,min:0,max:1},width:{"default":512}},init:function(t){return this.material=new a.MeshStandardMaterial(r(t)),this.updateTexture(t),this.updateEnvMap(t),this.material},update:function(t){return this.updateMaterial(t),this.updateTexture(t),this.updateEnvMap(t),this.material},updateTexture:function(t){var e=t.src,n=this.material;if(e){if(e===this.textureSrc)return;this.textureSrc=e,o.validateSrc(e,s.texture.loadImage.bind(this,n,t),s.texture.loadVideo.bind(this,n,t))}else s.texture.updateMaterial(n,null)},updateMaterial:function(t){var e=this.material;t=r(t),Object.keys(t).forEach(function(n){e[n]=t[n]})},updateEnvMap:function(t){var e=this,n=this.material,r=t.envMap;return!r||this.isLoadingEnvMap?(n.envMap=null,void(n.needsUpdate=!0)):(this.isLoadingEnvMap=!0,l[r]?void l[r].then(function(t){e.isLoadingEnvMap=!1,n.envMap=t,n.needsUpdate=!0}):void(l[r]=new Promise(function(t){o.validateCubemapSrc(r,function(r){c.load(r,function(r){e.isLoadingEnvMap=!1,n.envMap=r,t(r)})})})))}})},{"../core/shader":63,"../lib/three":90,"../utils/":102,"../utils/src-loader":103}],94:[function(t,e,n){var r="html{bottom:0;left:0;position:fixed;right:0;top:0}body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}a-assets,a-scene img,a-scene video{display:none}.a-enter-vr{align-items:flex-end;-webkit-align-items:flex-end;bottom:5px;display:flex;display:-webkit-flex;font-family:sans-serif,monospace;font-size:13px;font-weight:200;line-height:16px;height:72px;position:fixed;right:5px}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;color:#FFF;cursor:pointer;height:50px;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;width:60px;z-index:999999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;color:#FFF;height:32px;margin-right:70px;padding:9px;width:280px;position:relative;display:none}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal p{margin:0;display:inline}.a-enter-vr-modal p:after{content:' '}.a-enter-vr-modal a{color:#FFF;display:inline}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{position:absolute;width:100%;height:100%;top:0;left:0;background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center center/50% 50% no-repeat rgba(244,244,244,1)}.a-orientation-modal:after{display:block;content:\"Insert phone into Cardboard holder.\";color:#333;font-family:sans-serif,monospace;font-size:13px;text-align:center;position:absolute;width:100%;top:70%;transform:translateY(-70%)}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E);width:50px;height:50px;border:none;text-indent:-9999px}@media (min-width:480px){.a-enter-vr{bottom:20px;right:20px}.a-enter-vr-modal{width:400px}}";t("browserify-css").createStyle(r,{href:"src/style/aframe.css"}),e.exports=r},{"browserify-css":1}],95:[function(t,e,n){var r=".rs-base{background-color:#EF2D5E;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.75;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:50px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(r,{href:"src/style/rStats.css"}),e.exports=r},{"browserify-css":1}],96:[function(t,e,n){function r(t){var e,n=t.camera;n&&(e=t.querySelector("["+o+"]"),e&&t.removeChild(e))}var i=t("../core/system").registerSystem,o="data-aframe-default-camera";e.exports.System=i("camera",{init:function(){this.activeCameraEl=null,this.setupDefaultCamera()},setupDefaultCamera:function(){var t,e,n=this.sceneEl;setTimeout(function(){var r=n.querySelector("[camera]");return r&&r.isEntity?void n.emit("camera-ready",{cameraEl:r}):(t=document.createElement("a-entity"),t.setAttribute("position",{x:0,y:1.8,z:4}),t.setAttribute(o,""),e=document.createElement("a-entity"),e.setAttribute("camera",{active:!0}),e.setAttribute("wasd-controls"),e.setAttribute("look-controls"),t.appendChild(e),n.appendChild(t),void n.emit("camera-ready",{cameraEl:e}))})},disableActiveCamera:function(){var t=this.sceneEl,e=t.querySelectorAll("[camera]"),n=e[e.length-1];n.setAttribute("camera","active",!0)},setActiveCamera:function(t,e){var n,i,a=this.sceneEl,s=a.querySelectorAll("[camera]"),c=a.querySelector("["+o+"]"),l=c&&c.querySelector("[camera]");for(t!==l&&r(a),this.activeCameraEl=t,a.isPlaying&&t.play(),t.setAttribute("camera","active",!0),a.camera=e,a.emit("camera-set-active",{cameraEl:t}),i=0;i<s.length;i++)n=s[i],t!==n&&(n.setAttribute("camera","active",!1),n.pause())}})},{"../core/system":64}],97:[function(t,e,n){t("./camera"),t("./material"),t("./light")},{"./camera":96,"./light":98,"./material":99}],98:[function(t,e,n){var r=t("../core/system").registerSystem,i="data-aframe-default-light";e.exports.System=r("light",{init:function(){this.defaultLightsEnabled=null,this.setupDefaultLights()},registerLight:function(t){var e,n=this.sceneEl;if(this.defaultLightsEnabled&&!t.hasAttribute(i)){e=document.querySelectorAll("["+i+"]");for(var r=0;r<e.length;r++)n.removeChild(e[r]);this.defaultLightsEnabled=!1}},setupDefaultLights:function(){var t=this.sceneEl,e=document.createElement("a-entity"),n=document.createElement("a-entity");e.setAttribute("light",{color:"#fff",type:"ambient"}),e.setAttribute(i,""),t.appendChild(e),n.setAttribute("light",{color:"#fff",intensity:.2}),n.setAttribute("position",{x:-1,y:2,z:1}),n.setAttribute(i,""),t.appendChild(n),this.defaultLightsEnabled=!0}})},{"../core/system":64}],99:[function(t,e,n){var r=t("../core/system").registerSystem;e.exports.System=r("material",{init:function(){this.materials={}},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(t){delete this.materials[t.uuid]},updateMaterials:function(t){var e=this.materials;Object.keys(e).forEach(function(t){e[t].needsUpdate=!0})}})},{"../core/system":64}],100:[function(t,e,n){function r(t,e){var n,r={};return t&&"object"==typeof t?o(t):"string"!=typeof t||null===t?e:(n=t.trim().replace(/\s+/g," ").split(" "),r.x=n[0]||e&&e.x,r.y=n[1]||e&&e.y,r.z=n[2]||e&&e.z,r.w=n[3]||e&&e.w,o(r))}function i(t){return"object"!=typeof t?t:[t.x,t.y,t.z].join(" ")}function o(t){return Object.keys(t).forEach(function(e){return void 0===t[e]?void delete t[e]:void(t[e]=parseFloat(t[e],10))}),t}var a=/\s*(-?\d*\.{0,1}\d+)\s*(-?\d*\.{0,1}\d+)\s*(-?\d*\.{0,1}\d+)\s*/;e.exports.regex=a,e.exports.parse=r,e.exports.stringify=i,e.exports.isCoordinate=function(t){return a.test(t)}},{}],101:[function(t,e,n){(function(n){function r(t){var e=t.split(":");return e[e.length-1]}function i(t){var e=r(t),n=c.colors&&c.colors[e];return n||null}function o(){try{return window.localStorage}catch(t){}}var a=t("debug"),s=t("object-assign"),c={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},l=function(t){var e=a(t);return e.color=i(t),e};s(l,a);var u=o();u&&(parseInt(u.logs,10)||"true"===u.logs)?l.enable("*"):l.enable("*:error,*:info,*:warn"),n.browser&&(window.logs=l),e.exports=l}).call(this,t("_process"))},{_process:2,debug:3,"object-assign":9}],102:[function(t,e,n){function r(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(0===r.length)return t===e;for(n=0;n<r.length;++n)if(t[r[n]]!==e[r[n]])return!1;return!0}var i=t("deep-assign"),o=t("object-assign");e.exports.coordinates=t("./coordinates"),e.exports.debug=t("./debug"),e.exports.styleParser=t("./styleParser"),e.exports.texture=t("./texture"),e.exports.fireEvent=function(t,e,n){n=n||{},n.detail=n.detail||{},n.detail.target=n.detail.target||t;var r=new CustomEvent(e,n);r.target=t,t.dispatchEvent(r)},e.exports.error=function(t){throw new Error(t)},e.exports.warn=function(){console.warn.apply(console,arguments)},e.exports.log=function(){console.log.apply(console,arguments)},e.exports.extend=o,e.exports.extendDeep=i,e.exports.deepEqual=r,e.exports.diff=function(t,e){var n={},i=Object.keys(t);return Object.keys(e).forEach(function(t){i.indexOf(t)===-1&&i.push(t)}),i.forEach(function(i){var o=t[i],a=e[i],s=o&&a&&o.constructor===Object&&a.constructor===Object;(s&&!r(o,a)||!s&&o!==a)&&(n[i]=a)}),n},e.exports.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),a()&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t};var a=e.exports.isIOS=function(){return/iPad|iPhone|iPod/.test(navigator.platform)};e.exports.isLandscape=function(){return 90===window.orientation||window.orientation===-90},e.exports.shouldCaptureKeyEvent=function(t){return!(t.shiftKey||t.metaKey||t.altKey||t.ctrlKey)&&document.activeElement===document.body},e.exports.splitString=function(t,e){"undefined"==typeof e&&(e=" ");var n=new RegExp(e,"g");return t=(t||"").replace(n,e),t.split(e)},e.exports.getElData=function(t,e){function n(e){t.hasAttribute(e)&&(r[e]=t.getAttribute(e))}e=e||{};var r={};return Object.keys(e).forEach(n),r},e.exports.getUrlParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},e.exports.isIframed=function(){return window.top!==window.self},e.exports.srcLoader=t("./src-loader")},{"./coordinates":100,"./debug":101,"./src-loader":103,"./styleParser":104,"./texture":105,"deep-assign":6,"object-assign":9}],103:[function(t,e,n){function r(t,e,n){var r,i,c,u=o(t);return u?void a(u,function(t){return t?void e(u):void n(u)}):(r=s(t))?(i=r&&"IMG"===r.tagName,c=r&&"VIDEO"===r.tagName,i?e(r):c?n(r):void l('"%s" does not point to a valid <img> or <video> element',t)):void 0}function i(t,e){function n(t){u.push(t),6===u.length&&e(u)}var i,o,a,c="",u=[];for(o=0;o<6;o++)c+="url((.+))s*,s*";if(a=t.match(c))for(o=1;o<7;o++)r(a[o],n);else if(i=s(t))return"A-CUBEMAP"===i.tagName&&i.srcs?e(i.srcs):void l('Selector "%s" does not point to <a-cubemap>',t)}function o(t){var e=t.match(/\url\((.+)\)/);if(e)return e[1]}function a(t,e){function n(){e(!0)}function r(){e(!1)}var i=new Image;i.addEventListener("load",n),i.addEventListener("error",r),i.src=t}function s(t){try{var e=document.querySelector(t);return e||l('No element was found matching the selector: "%s"',t),e}catch(n){return void l('"%s" is not a valid selector',t)}}var c=t("./debug"),l=c("utils:src-loader:warn");e.exports={parseUrl:o,validateSrc:r,validateCubemapSrc:i}},{"./debug":101}],104:[function(t,e,n){function r(t){function e(t){return t[1].toUpperCase()}return t.replace(/-([a-z])/g,e)}function i(t){var e=Object.keys(t),n={};return e.forEach(function(e){var i=r(e);n[i]=t[e]}),n}var o=t("style-attr");e.exports.parse=function(t){var e;return"string"!=typeof t?t:(e=o.parse(t),i(e))},e.exports.stringify=function(t){return"string"==typeof t?t:o.stringify(t)},e.exports.toCamelCase=r,e.exports.transformKeysToCamelCase=i},{"style-attr":15}],105:[function(t,e,n){function r(t,e,n){function r(e){a(t,e),i.emit(d.TEXTURE_LOADED,{src:n,texture:e})}var i=this.el,o=e.repeat||"1 1",c=n;return"string"!=typeof n&&(c=n.getAttribute("src")),m[n]&&m[n][o]?void m[n][o].then(r):(m[c]=m[c]||{},m[c][o]=m[c][o]||{},m[c][o]=s(t,n,o),void m[c][o].then(r))}function i(t,e,n){function r(e){s=e.texture,u=e.videoEl,a(t,s),f.emit(d.TEXTURE_LOADED,{element:u,src:n}),u.addEventListener("loadeddata",function(){f.emit("material-video-loadeddata",{element:u,src:n})}),u.addEventListener("ended",function(){f.emit("material-video-ended",{element:u,src:n})})}var i,s,u,h,f=this.el;if("string"!=typeof n){if(u=n,i=o(u),m[i])return void m[i].then(r);l(u)}return u=u||c(t,n,e.width,e.height),i=o(u),m[i]?void m[i].then(r):(s=new p.VideoTexture(u),s.minFilter=p.LinearFilter,h={texture:s,videoEl:u},m[i]=Promise.resolve(h),void r(h))}function o(t){var e,n,r,i=t.getAttribute("id");if(i)return i;for(n="",r={},e=0;e<t.attributes.length;e++)r[t.attributes[e].name]=t.attributes[e].value;return Object.keys(r).sort().forEach(function(t){n+=t+":"+r[t]+";"}),n}function a(t,e){var n=t.map;e&&(e.needsUpdate=!0),t.map=e,(null===n&&t.map||null===t.map&&n)&&(t.needsUpdate=!0)}function s(t,e,n){function r(t,r){function i(e){var r;e instanceof p.Texture||(e=new p.Texture(e)),r=n.split(" "),2===r.length&&(e.wrapS=p.RepeatWrapping,e.wrapT=p.RepeatWrapping,e.repeat.set(parseInt(r[0],10),parseInt(r[1],10))),t(e)}var o="string"!=typeof e;return o?void i(e):void v.load(e,i,function(){},function(t){f("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)})}return new Promise(r)}function c(t,e,n,r){var i=t.videoEl||document.createElement("video");return i.width=n,i.height=r,i!==this.videoEl&&(i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin=!0,i.addEventListener("error",function(){y("`$s` is not a valid video",e)},!0),t.videoEl=i),i.src=e,i}function l(t){return t.autoplay="false"!==t.getAttribute("autoplay"),t.controls="false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.hasAttribute("crossorigin")||(t.crossOrigin=!0),t.hasAttribute("webkit-playsinline")||t.setAttribute("webkit-playsinline",""),t}function u(){m={}}var h=t("./debug"),p=t("../lib/three"),d={TEXTURE_LOADED:"material-texture-loaded"},f=h("components:texture:error"),m={},v=new p.TextureLoader,y=h("components:texture:warn");e.exports={clearTextureCache:u,createVideoEl:c,fixVideoAttributes:l,loadImage:r,loadVideo:i,textureCache:m,updateMaterial:a}},{"../lib/three":90,"./debug":101}],106:[function(t,e,n){window.glStats=function(){function t(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function e(){o("allcalls").set(a+s),o("drawElements").set(s),o("drawArrays").set(a),o("bindTexture").set(p),o("useProgram").set(c),o("glfaces").set(l),o("glvertices").set(u),o("glpoints").set(h)}function n(){a=0,s=0,c=0,l=0,u=0,h=0,p=0}function r(){}function i(t){o=t}var o=null,a=0,s=0,c=0,l=0,u=0,h=0,p=0;WebGLRenderingContext.prototype.drawArrays=t(WebGLRenderingContext.prototype.drawArrays,function(){a++,arguments[0]==this.POINTS?h+=arguments[2]:u+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=t(WebGLRenderingContext.prototype.drawElements,function(){s++,l+=arguments[1]/3,u+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=t(WebGLRenderingContext.prototype.useProgram,function(){c++}),WebGLRenderingContext.prototype.bindTexture=t(WebGLRenderingContext.prototype.bindTexture,function(){p++});var d={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},f=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],m=[{base:"allcalls",steps:["drawelements","drawarrays"]}];return{update:e,start:n,end:r,attach:i,values:d,groups:f,fractions:m}},window.threeStats=function(t){function e(){o("renderer.info.memory.geometries").set(t.info.memory.geometries),o("renderer.info.memory.programs").set(t.info.memory.programs),o("renderer.info.memory.textures").set(t.info.memory.textures),o("renderer.info.render.calls").set(t.info.render.calls),o("renderer.info.render.faces").set(t.info.render.faces),o("renderer.info.render.points").set(t.info.render.points),o("renderer.info.render.vertices").set(t.info.render.vertices)}function n(){}function r(){}function i(t){o=t}var o=null,a={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.memory.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},s=[{caption:"Three.js - memory",values:["renderer.info.memory.geometries","renderer.info.memory.programs","renderer.info.memory.textures"]},{caption:"Three.js - render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],c=[];return{update:e,start:n,end:r,attach:i,values:a,groups:s,fractions:c}},window.BrowserStats=function(){function t(t){var e=100,n=Math.floor(Math.log(t)/h);return Math.round(t*e/Math.pow(1024,n))/e}function e(){a=t(performance.memory.usedJSHeapSize),s=t(performance.memory.totalJSHeapSize),o("memory").set(a),o("total").set(s)}function n(){a=0}function r(){}function i(t){o=t}var o=null,a=0,s=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var c={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},l=[{caption:"Browser",values:["memory","total"]}],u=[{base:"total",steps:["memory"]}],h=Math.log(1024);return{update:e,start:n,end:r,attach:i,values:c,groups:l,fractions:u}},"object"==typeof e&&(e.exports={aframeStats:window.aframeStats,glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],107:[function(t,e,n){"use strict";!function(){if("undefined"==typeof window.performance&&(window.performance={}),!window.performance.now){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){})}(),window.rStats=function(t){function e(t,e){for(var n=Object.keys(t),r=0,i=n.length;r<i;r++)e(n[r])}function n(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e)}function r(t,e,n){function r(){a.width=y,a.height=v,a.style.width=a.width+"px",a.style.height=a.height+"px",a.className="rs-canvas",t.appendChild(a),s.fillStyle="#444444",s.fillRect(0,0,a.width,a.height)}function i(t,e){l+=.1*(t-l),c*=.99,l>c&&(c=l),s.drawImage(a,1,0,a.width-1,a.height,0,0,a.width-1,a.height),e?s.drawImage(d,a.width-1,a.height-l*a.height/c-v):s.drawImage(h,a.width-1,a.height-l*a.height/c-v)}var o=n||{},a=document.createElement("canvas"),s=a.getContext("2d"),c=0,l=0,u=o.color?o.color:"#666666",h=document.createElement("canvas"),p=h.getContext("2d");h.width=1,h.height=2*v,p.fillStyle="#444444",p.fillRect(0,0,1,2*v),p.fillStyle=u,p.fillRect(0,v,1,v),p.fillStyle="#ffffff",p.globalAlpha=.5,p.fillRect(0,v,1,1),p.globalAlpha=1;var d=document.createElement("canvas"),f=d.getContext("2d");return d.width=1,d.height=2*v,f.fillStyle="#444444",f.fillRect(0,0,1,2*v),f.fillStyle="#b70000",f.fillRect(0,v,1,v),
f.globalAlpha=.5,f.fillStyle="#ffffff",f.fillRect(0,v,1,1),f.globalAlpha=1,r(),{draw:i}}function i(t,n){function r(){o.width=y,o.height=v*n,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",t.appendChild(o),a.fillStyle="#444444",a.fillRect(0,0,o.width,o.height)}function i(t){a.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height);var n=0;e(t,function(e){var r=t[e]*o.height;a.fillStyle=u[e],a.fillRect(o.width-1,n,1,r),n+=r})}var o=document.createElement("canvas"),a=o.getContext("2d");return r(),{draw:i}}function o(t,e){function n(t){if(S&&S.average){y+=t,x++;var e=performance.now();e-g>=(S.avgMs||1e3)&&(v=y/x,y=0,g=e,x=0)}}function i(){h=performance.now(),l.userTimingAPI&&performance.mark(p+"-start"),A=!0}function o(){d=performance.now()-h,l.userTimingAPI&&(performance.mark(p+"-end"),A&&performance.measure(p,p+"-start",p+"-end")),n(d)}function a(){o(),i()}function s(){var t=S&&S.average?v:d;E.nodeValue=Math.round(100*t)/100;var e=S&&(S.below&&d<S.below||S.over&&d>S.over);M.draw(d,e),_.style.color=e?"#b70000":"#ffffff"}function c(){var t=performance.now(),e=t-h;f++,e>1e3&&(d=S&&S.interpolate===!1?f:1e3*f/e,f=0,h=t,n(d))}function u(t){d=t,n(d)}var h,p=t,d=0,f=0,v=0,y=0,g=performance.now(),x=0,_=document.createElement("div"),b=document.createElement("span"),w=document.createElement("div"),E=document.createTextNode(""),S=l?l.values[p.toLowerCase()]:null,M=new r(_,p,S),A=!1;return _.className="rs-counter-base",b.className="rs-counter-id",b.textContent=S&&S.caption?S.caption:p,w.className="rs-counter-value",w.appendChild(E),_.appendChild(b),_.appendChild(w),e?e.div.appendChild(_):m.appendChild(_),h=performance.now(),{set:u,start:i,tick:a,end:o,frame:c,value:function(){return d},draw:s}}function a(t){var n=t.toLowerCase();if(void 0===n&&(n="default"),g[n])return g[n];var r=null;l&&l.groups&&e(l.groups,function(t){var e=l.groups[parseInt(t,10)];r||e.values.indexOf(n.toLowerCase())===-1||(r=e)});var i=new o(n,r);return g[n]=i,i}function s(){if(l.plugins){l.values||(l.values={}),l.groups||(l.groups=[]),l.fractions||(l.fractions=[]);for(var t=0;t<l.plugins.length;t++)l.plugins[t].attach(a),e(l.plugins[t].values,function(e){l.values[e]=l.plugins[t].values[e]}),l.groups=l.groups.concat(l.plugins[t].groups),l.fractions=l.fractions.concat(l.plugins[t].fractions)}else l.plugins={};f=document.createElement("div"),f.className="rs-base",m=document.createElement("div"),m.className="rs-container",m.style.height="auto",f.appendChild(m),document.body.appendChild(f),l&&(l.groups&&e(l.groups,function(t){var e=l.groups[parseInt(t,10)],n=document.createElement("div");n.className="rs-group",e.div=n;var r=document.createElement("h1");r.textContent=e.caption,r.addEventListener("click",function(t){this.classList.toggle("hidden"),t.preventDefault()}.bind(n)),m.appendChild(r),m.appendChild(n)}),l.fractions&&e(l.fractions,function(t){var n=l.fractions[parseInt(t,10)],r=document.createElement("div");r.className="rs-fraction";var o=document.createElement("div");o.className="rs-legend";var a=0;e(l.fractions[t].steps,function(e){var n=document.createElement("p");n.textContent=l.fractions[t].steps[e],n.style.color=u[a],o.appendChild(n),a++}),r.appendChild(o),r.style.height=a*v+"px",n.div=r;var s=new i(r,a);n.graph=s,m.appendChild(r)}))}function c(){e(l.plugins,function(t){l.plugins[t].update()}),e(g,function(t){g[t].draw()}),l&&l.fractions&&e(l.fractions,function(t){var n=l.fractions[parseInt(t,10)],r=[],i=g[n.base.toLowerCase()];i&&(i=i.value(),e(l.fractions[t].steps,function(e){var n=l.fractions[t].steps[parseInt(e,10)].toLowerCase(),o=g[n];o&&r.push(o.value()/i)})),n.graph.draw(r)})}var l=t||{},u=l.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],h="//fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",p=(l.CSSPath?l.CSSPath:"")+"rStats.css",d=l.css||[h,p];d.forEach(function(t){n(t)}),l.values||(l.values={});var f,m,v=10,y=200,g={};return s(),function(t){return t?a(t):{element:f,update:c}}},"object"==typeof e&&(e.exports=window.rStats)},{}],108:[function(t,e,n){var r={};r.base64=function(t,e){return"data:"+t+";base64,"+e},r.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},r.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},r.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},r.appendQueryParameter=function(t,e,n){var r=t.indexOf("?")<0?"?":"&";return t+=r+e+"="+n},r.getQueryParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},r.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},e.exports=r},{}],109:[function(t,e,n){function r(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=a.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}function i(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}function o(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?i:r}var a=t("./util.js");e.exports=o()},{"./util.js":108}]},{},[88])(88)})}).call(n,function(){return this}(),r(3).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(4).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},l=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=l++,r=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(3).setImmediate,n(3).clearImmediate)},function(t,e){function n(){h&&l&&(h=!1,l.length?u=l.concat(u):p=-1,u.length&&r())}function r(){if(!h){var t=a(n);h=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,h=!1,s(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,s,c=t.exports={};!function(){try{a=setTimeout}catch(t){a=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(t){s=function(){throw new Error("clearTimeout is not defined")}}}();var l,u=[],h=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||h||a(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[r](t,e,{writable:!0,configurable:!0,value:n})}if(n(6),n(298),n(299),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var r="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(7),n(56),n(57),n(58),n(59),n(61),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(74),n(76),n(78),n(80),n(83),n(84),n(85),n(89),n(91),n(93),n(97),n(98),n(99),n(100),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(110),n(111),n(112),n(114),n(115),n(116),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(136),n(137),n(141),n(142),n(143),n(144),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(164),n(165),n(171),n(172),n(174),n(175),n(176),n(180),n(181),n(182),n(183),n(184),n(186),n(187),n(188),n(189),n(192),n(194),n(195),n(196),n(198),n(200),n(202),n(203),n(204),n(206),n(207),n(208),n(209),n(215),n(218),n(219),n(221),n(222),n(225),n(226),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(265),n(266),n(268),n(269),n(270),n(271),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(296),n(297),t.exports=n(13)},function(t,e,n){"use strict";var r=n(8),i=n(9),o=n(10),a=n(12),s=n(22),c=n(26).KEY,l=n(11),u=n(27),h=n(28),p=n(23),d=n(29),f=n(30),m=n(31),v=n(33),y=n(46),g=n(49),x=n(16),_=n(36),b=n(20),w=n(21),E=n(50),S=n(53),M=n(55),A=n(15),C=n(34),T=M.f,N=A.f,R=S.f,O=r.Symbol,L=r.JSON,P=L&&L.stringify,k="prototype",D=d("_hidden"),I=d("toPrimitive"),q={}.propertyIsEnumerable,B=u("symbol-registry"),V=u("symbols"),F=u("op-symbols"),z=Object[k],U="function"==typeof O,j=r.QObject,H=!j||!j[k]||!j[k].findChild,G=o&&l(function(){return 7!=E(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=T(z,e);r&&delete z[e],N(t,e,n),r&&t!==z&&N(z,e,r)}:N,W=function(t){var e=V[t]=E(O[k]);return e._k=t,e},X=U&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},Z=function(t,e,n){return t===z&&Z(F,e,n),x(t),e=b(e,!0),x(n),i(V,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=E(n,{enumerable:w(0,!1)})):(i(t,D)||N(t,D,w(1,{})),t[D][e]=!0),G(t,e,n)):N(t,e,n)},K=function(t,e){x(t);for(var n,r=y(e=_(e)),i=0,o=r.length;o>i;)Z(t,n=r[i++],e[n]);return t},Y=function(t,e){return void 0===e?E(t):K(E(t),e)},Q=function(t){var e=q.call(this,t=b(t,!0));return!(this===z&&i(V,t)&&!i(F,t))&&(!(e||!i(this,t)||!i(V,t)||i(this,D)&&this[D][t])||e)},J=function(t,e){if(t=_(t),e=b(e,!0),t!==z||!i(V,e)||i(F,e)){var n=T(t,e);return!n||!i(V,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=R(_(t)),r=[],o=0;n.length>o;)i(V,e=n[o++])||e==D||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===z,r=R(n?F:_(t)),o=[],a=0;r.length>a;)!i(V,e=r[a++])||n&&!i(z,e)||o.push(V[e]);return o};U||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(F,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),G(this,t,w(1,n))};return o&&H&&G(z,t,{configurable:!0,set:e}),W(t)},s(O[k],"toString",function(){return this._k}),M.f=J,A.f=Z,n(54).f=S.f=$,n(48).f=Q,n(47).f=tt,o&&!n(32)&&s(z,"propertyIsEnumerable",Q,!0),f.f=function(t){return W(d(t))}),a(a.G+a.W+a.F*!U,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var et=C(d.store),nt=0;et.length>nt;)m(et[nt++]);a(a.S+a.F*!U,"Symbol",{"for":function(t){return i(B,t+="")?B[t]:B[t]=O(t)},keyFor:function(t){if(X(t))return v(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!U,"Object",{create:Y,defineProperty:Z,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),L&&a(a.S+a.F*(!U||l(function(){var t=O();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,P.apply(L,r)}}}),O[k][I]||n(14)(O[k],I,O[k].valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(8),i=n(13),o=n(14),a=n(22),s=n(24),c="prototype",l=function(t,e,n){var u,h,p,d,f=t&l.F,m=t&l.G,v=t&l.S,y=t&l.P,g=t&l.B,x=m?r:v?r[e]||(r[e]={}):(r[e]||{})[c],_=m?i:i[e]||(i[e]={}),b=_[c]||(_[c]={});m&&(n=e);for(u in n)h=!f&&x&&void 0!==x[u],p=(h?x:n)[u],d=g&&h?s(p,r):y&&"function"==typeof p?s(Function.call,p):p,x&&a(x,u,p,t&l.U),_[u]!=p&&o(_,u,d),y&&b[u]!=p&&(b[u]=p)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(15),i=n(21);t.exports=n(10)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(16),i=n(18),o=n(20),a=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(17);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(10)&&!n(11)(function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(17),i=n(8).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(17);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(8),i=n(14),o=n(9),a=n(23)("src"),s="toString",c=Function[s],l=(""+c).split(s);n(13).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:l.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||c.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(25);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(23)("meta"),i=n(17),o=n(9),a=n(15).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(11)(function(){return c(Object.preventExtensions({}))}),u=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[r].i},p=function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[r].w},d=function(t){return l&&f.NEED&&c(t)&&!o(t,r)&&u(t),t},f=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:p,onFreeze:d}},function(t,e,n){var r=n(8),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(15).f,i=n(9),o=n(29)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(27)("wks"),i=n(23),o=n(8).Symbol,a="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=r},function(t,e,n){e.f=n(29)},function(t,e,n){var r=n(8),i=n(13),o=n(32),a=n(30),s=n(15).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var r=n(34),i=n(36);t.exports=function(t,e){for(var n,o=i(t),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===e)return n}},function(t,e,n){var r=n(35),i=n(45);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(9),i=n(36),o=n(40)(!1),a=n(44)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(37),i=n(39);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(38);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(36),i=n(41),o=n(43);t.exports=function(t){return function(e,n,a){var s,c=r(e),l=i(c.length),u=o(a,l);if(t&&n!=n){for(;l>u;)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var r=n(42),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(42),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(27)("keys"),i=n(23);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(34),i=n(47),o=n(48);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),c=o.f,l=0;s.length>l;)c.call(t,a=s[l++])&&e.push(a);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(38);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(16),i=n(51),o=n(45),a=n(44)("IE_PROTO"),s=function(){},c="prototype",l=function(){var t,e=n(19)("iframe"),r=o.length,i=">";for(e.style.display="none",n(52).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+i),t.close(),l=t.F;r--;)delete l[c][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[c]=r(t),n=new s,s[c]=null,n[a]=t):n=l(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(15),i=n(16),o=n(34);t.exports=n(10)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){t.exports=n(8).document&&document.documentElement},function(t,e,n){var r=n(36),i=n(54).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(35),i=n(45).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(48),i=n(21),o=n(36),a=n(20),s=n(9),c=n(18),l=Object.getOwnPropertyDescriptor;e.f=n(10)?l:function(t,e){if(t=o(t),e=a(e,!0),c)try{return l(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(12);r(r.S,"Object",{create:n(50)})},function(t,e,n){var r=n(12);r(r.S+r.F*!n(10),"Object",{defineProperty:n(15).f})},function(t,e,n){var r=n(12);r(r.S+r.F*!n(10),"Object",{defineProperties:n(51)})},function(t,e,n){var r=n(36),i=n(55).f;n(60)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(12),i=n(13),o=n(11);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(62),i=n(63);n(60)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(39);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(9),i=n(62),o=n(44)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(62),i=n(34);n(60)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(60)("getOwnPropertyNames",function(){return n(53).f})},function(t,e,n){var r=n(17),i=n(26).onFreeze;n(60)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(17),i=n(26).onFreeze;n(60)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(17),i=n(26).onFreeze;n(60)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(17);n(60)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(17);n(60)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(17);n(60)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(12);r(r.S+r.F,"Object",{assign:n(73)})},function(t,e,n){"use strict";var r=n(34),i=n(47),o=n(48),a=n(62),s=n(37),c=Object.assign;t.exports=!c||n(11)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=a(t),c=arguments.length,l=1,u=i.f,h=o.f;c>l;)for(var p,d=s(arguments[l++]),f=u?r(d).concat(u(d)):r(d),m=f.length,v=0;m>v;)h.call(d,p=f[v++])&&(n[p]=d[p]);return n}:c},function(t,e,n){var r=n(12);r(r.S,"Object",{is:n(75)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(12);r(r.S,"Object",{setPrototypeOf:n(77).set})},function(t,e,n){var r=n(17),i=n(16),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(24)(Function.call,n(55).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var r=n(79),i={};i[n(29)("toStringTag")]="z",i+""!="[object z]"&&n(22)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(38),i=n(29)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(12);r(r.P,"Function",{bind:n(81)})},function(t,e,n){"use strict";var r=n(25),i=n(17),o=n(82),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(15).f,i=n(21),o=n(9),a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",l=Object.isExtensible||function(){return!0};c in a||n(10)&&r(a,c,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(s)[1];return o(t,c)||!l(t)||r(t,c,i(5,e)),e}catch(n){return""}}})},function(t,e,n){"use strict";var r=n(17),i=n(63),o=n(29)("hasInstance"),a=Function.prototype;o in a||n(15).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(12),i=n(86);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(8).parseInt,i=n(87).trim,o=n(88),a=/^[\-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(12),i=n(39),o=n(11),a=n(88),s="["+a+"]",c="",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),h=function(t,e,n){var i={},s=o(function(){return!!a[t]()||c[t]()!=c}),l=i[t]=s?e(p):a[t];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},p=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=h},function(t,e){t.exports="\t\n\x0B\f\r \u2028\u2029\ufeff"},function(t,e,n){var r=n(12),i=n(90);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){var r=n(8).parseFloat,i=n(87).trim;t.exports=1/r(n(88)+"-0")!==-(1/0)?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){"use strict";var r=n(8),i=n(9),o=n(38),a=n(92),s=n(20),c=n(11),l=n(54).f,u=n(55).f,h=n(15).f,p=n(87).trim,d="Number",f=r[d],m=f,v=f.prototype,y=o(n(50)(v))==d,g="trim"in String.prototype,x=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():p(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,c=e.slice(2),l=0,u=c.length;l<u;l++)if(a=c.charCodeAt(l),a<48||a>i)return NaN;return parseInt(c,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(y?c(function(){v.valueOf.call(n)}):o(n)!=d)?a(new m(x(e)),n,f):x(e)};for(var _,b=n(10)?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)i(m,_=b[w])&&!i(f,_)&&h(f,_,u(m,_));
f.prototype=v,v.constructor=f,n(22)(r,d,f)}},function(t,e,n){var r=n(17),i=n(77).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(12),i=(n(94),n(42)),o=n(95),a=n(96),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h="0",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*l[n],l[n]=r%1e7,r=c(r/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=c(n/t),n=n%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+a.call(h,7-n.length)+n}return e},m=function(t,e,n){return 0===e?n:e%2===1?m(t,e-1,n*t):m(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(11)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,c=o(this,u),l=i(t),y="",g=h;if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(e=v(c*m(2,69,1))-69,n=e<0?c*m(2,-e,1):c/m(2,e,1),n*=4503599627370496,e=52-e,e>0){for(p(0,n),r=l;r>=7;)p(1e7,0),r-=7;for(p(m(10,r,1),0),r=e-1;r>=23;)d(1<<23),r-=23;d(1<<r),p(1,1),d(2),g=f()}else p(0,n),p(1<<-e,0),g=f()+a.call(h,l);return l>0?(s=g.length,g=y+(s<=l?"0."+a.call(h,l-s)+g:g.slice(0,s-l)+"."+g.slice(s-l))):g=y+g,g}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(38);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var r=n(42),i=n(39);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(12),i=n(11),o=n(95),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(12);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(12),i=n(8).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(12);r(r.S,"Number",{isInteger:n(101)})},function(t,e,n){var r=n(17),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(12);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(12),i=n(101),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(12);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(12);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(12),i=n(90);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(12),i=n(86);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(12),i=n(109),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n(12),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,e,n){var r=n(12),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(12),i=n(113);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r=n(12);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(12),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(12),i=n(117);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(12),i=n(113),o=Math.pow,a=o(2,-52),s=o(2,-23),c=o(2,127)*(2-s),l=o(2,-126),u=function(t){return t+1/a-1/a};r(r.S,"Math",{fround:function(t){var e,n,r=Math.abs(t),o=i(t);return r<l?o*u(r/l/s)*l*s:(e=(1+s/a)*r,n=e-(e-r),n>c||n!=n?o*(1/0):o*n)}})},function(t,e,n){var r=n(12),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)n=i(arguments[a++]),c<n?(r=c/n,o=o*r*r+1,c=n):n>0?(r=n/c,o+=r*r):o+=n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(t,e,n){var r=n(12),i=Math.imul;r(r.S+r.F*n(11)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var r=n(12);r(r.S,"Math",{log1p:n(109)})},function(t,e,n){var r=n(12);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(12);r(r.S,"Math",{sign:n(113)})},function(t,e,n){var r=n(12),i=n(117),o=Math.exp;r(r.S+r.F*n(11)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(12),i=n(117),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(12);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(12),i=n(43),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(12),i=n(36),o=n(41);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(87)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(132)(!0);n(133)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(42),i=n(39);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),l=s.length;return c<0||c>=l?t?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(32),i=n(12),o=n(22),a=n(14),s=n(9),c=n(134),l=n(135),u=n(28),h=n(63),p=n(29)("iterator"),d=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",v="values",y=function(){return this};t.exports=function(t,e,n,g,x,_,b){l(n,e,g);var w,E,S,M=function(t){if(!d&&t in N)return N[t];switch(t){case m:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},A=e+" Iterator",C=x==v,T=!1,N=t.prototype,R=N[p]||N[f]||x&&N[x],O=R||M(x),L=x?C?M("entries"):O:void 0,P="Array"==e?N.entries||R:R;if(P&&(S=h(P.call(new t)),S!==Object.prototype&&(u(S,A,!0),r||s(S,p)||a(S,p,y))),C&&R&&R.name!==v&&(T=!0,O=function(){return R.call(this)}),r&&!b||!d&&!T&&N[p]||a(N,p,O),c[e]=O,c[A]=y,x)if(w={values:C?O:M(v),keys:_?O:M(m),entries:L},b)for(E in w)E in N||o(N,E,w[E]);else i(i.P+i.F*(d||T),e,w);return w}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(50),i=n(21),o=n(28),a={};n(14)(a,n(29)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(12),i=n(132)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(12),i=n(41),o=n(138),a="endsWith",s=""[a];r(r.P+r.F*n(140)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),c=void 0===n?r:Math.min(i(n),r),l=String(t);return s?s.call(e,l,c):e.slice(c-l.length,c)===l}})},function(t,e,n){var r=n(139),i=n(39);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(17),i=n(38),o=n(29)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(29)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},function(t,e,n){"use strict";var r=n(12),i=n(138),o="includes";r(r.P+r.F*n(140)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(12);r(r.P,"String",{repeat:n(96)})},function(t,e,n){"use strict";var r=n(12),i=n(41),o=n(138),a="startsWith",s=""[a];r(r.P+r.F*n(140)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(145)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var r=n(12),i=n(11),o=n(39),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(145)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(145)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(145)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(145)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(145)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(145)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(145)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(145)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(145)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(145)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(145)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(145)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(12);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(12),i=n(62),o=n(20);r(r.P+r.F*n(11)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){"use strict";var r=n(12),i=n(11),o=Date.prototype.getTime,a=function(t){return t>9?t:"0"+t};r(r.P+r.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(t,e,n){var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(22)(r,o,function(){var t=s.call(this);return t===t?a.call(this):i})},function(t,e,n){var r=n(29)("toPrimitive"),i=Date.prototype;r in i||n(14)(i,r,n(163))},function(t,e,n){"use strict";var r=n(16),i=n(20),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=o)}},function(t,e,n){var r=n(12);r(r.S,"Array",{isArray:n(49)})},function(t,e,n){"use strict";var r=n(24),i=n(12),o=n(62),a=n(166),s=n(167),c=n(41),l=n(168),u=n(169);i(i.S+i.F*!n(170)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,p=o(t),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,y=0,g=u(p);if(v&&(m=r(m,f>2?arguments[2]:void 0,2)),void 0==g||d==Array&&s(g))for(e=c(p.length),n=new d(e);e>y;y++)l(n,y,v?m(p[y],y):p[y]);else for(h=g.call(p),n=new d;!(i=h.next()).done;y++)l(n,y,v?a(h,m,[i.value,y],!0):i.value);return n.length=y,n}})},function(t,e,n){var r=n(16);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(134),i=n(29)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(15),i=n(21);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(79),i=n(29)("iterator"),o=n(134);t.exports=n(13).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(29)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){"use strict";var r=n(12),i=n(168);r(r.S+r.F*n(11)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(12),i=n(36),o=[].join;r(r.P+r.F*(n(37)!=Object||!n(173)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){var r=n(11);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var r=n(12),i=n(52),o=n(38),a=n(43),s=n(41),c=[].slice;r(r.P+r.F*n(11)(function(){i&&c.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return c.call(this,t,e);for(var i=a(t,n),l=a(e,n),u=s(l-i),h=Array(u),p=0;p<u;p++)h[p]="String"==r?this.charAt(i+p):this[i+p];return h}})},function(t,e,n){"use strict";var r=n(12),i=n(25),o=n(62),a=n(11),s=[].sort,c=[1,2,3];r(r.P+r.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n(173)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(12),i=n(177)(0),o=n(173)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(24),i=n(37),o=n(62),a=n(41),s=n(178);t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,h=6==t,p=5==t||h,d=e||s;return function(e,s,f){for(var m,v,y=o(e),g=i(y),x=r(s,f,3),_=a(g.length),b=0,w=n?d(e,_):c?d(e,0):void 0;_>b;b++)if((p||b in g)&&(m=g[b],v=x(m,b,y),t))if(n)w[b]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(u)return!1;return h?-1:l||u?u:w}}},function(t,e,n){var r=n(179);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(17),i=n(49),o=n(29)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(12),i=n(177)(1);r(r.P+r.F*!n(173)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),i=n(177)(2);r(r.P+r.F*!n(173)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),i=n(177)(3);r(r.P+r.F*!n(173)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),i=n(177)(4);r(r.P+r.F*!n(173)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),i=n(185);r(r.P+r.F*!n(173)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var r=n(25),i=n(62),o=n(37),a=n(41);t.exports=function(t,e,n,s,c){r(e);var l=i(t),u=o(l),h=a(l.length),p=c?h-1:0,d=c?-1:1;if(n<2)for(;;){if(p in u){s=u[p],p+=d;break}if(p+=d,c?p<0:h<=p)throw TypeError("Reduce of empty array with no initial value")}for(;c?p>=0:h>p;p+=d)p in u&&(s=e(s,u[p],p,l));return s}},function(t,e,n){"use strict";var r=n(12),i=n(185);r(r.P+r.F*!n(173)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(12),i=n(40)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(173)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(12),i=n(36),o=n(42),a=n(41),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(173)(s)),"Array",{lastIndexOf:function(t){if(c)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(12);r(r.P,"Array",{copyWithin:n(190)}),n(191)("copyWithin")},function(t,e,n){"use strict";var r=n(62),i=n(43),o=n(41);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),c=i(e,a),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?a:i(l,a))-c,a-s),h=1;for(c<s&&s<c+u&&(h=-1,c+=u-1,s+=u-1);u-- >0;)c in n?n[s]=n[c]:delete n[s],s+=h,c+=h;return n}},function(t,e,n){var r=n(29)("unscopables"),i=Array.prototype;void 0==i[r]&&n(14)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(12);r(r.P,"Array",{fill:n(193)}),n(191)("fill")},function(t,e,n){"use strict";var r=n(62),i=n(43),o=n(41);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(12),i=n(177)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(191)(o)},function(t,e,n){"use strict";var r=n(12),i=n(177)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(191)(o)},function(t,e,n){n(197)("Array")},function(t,e,n){"use strict";var r=n(8),i=n(15),o=n(10),a=n(29)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(191),i=n(199),o=n(134),a=n(36);t.exports=n(133)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(8),i=n(92),o=n(15).f,a=n(54).f,s=n(139),c=n(201),l=r.RegExp,u=l,h=l.prototype,p=/a/g,d=/a/g,f=new l(p)!==p;if(n(10)&&(!f||n(11)(function(){return d[n(29)("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")}))){l=function(t,e){var n=this instanceof l,r=s(t),o=void 0===e;return!n&&r&&t.constructor===l&&o?t:i(f?new u(r&&!o?t.source:t,e):u((r=t instanceof l)?t.source:t,r&&o?c.call(t):e),n?this:h,l)};for(var m=(function(t){t in l||o(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})}),v=a(u),y=0;v.length>y;)m(v[y++]);h.constructor=l,l.prototype=h,n(22)(r,"RegExp",l)}n(197)("RegExp")},function(t,e,n){"use strict";var r=n(16);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(203);var r=n(16),i=n(201),o=n(10),a="toString",s=/./[a],c=function(t){n(22)(RegExp.prototype,a,t,!0)};n(11)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?c(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):s.name!=a&&c(function(){return s.call(this)})},function(t,e,n){n(10)&&"g"!=/./g.flags&&n(15).f(RegExp.prototype,"flags",{configurable:!0,get:n(201)})},function(t,e,n){n(205)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){"use strict";var r=n(14),i=n(22),o=n(11),a=n(39),s=n(29);t.exports=function(t,e,n){var c=s(t),l=n(a,c,""[t]),u=l[0],h=l[1];o(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,u),r(RegExp.prototype,c,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){n(205)("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,n){n(205)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(205)("split",2,function(t,e,r){"use strict";var i=n(139),o=r,a=[].push,s="split",c="length",l="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var u=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,s,h,p,d,f=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,y=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,m+"g");for(u||(r=new RegExp("^"+g.source+"$(?!\\s)",m));(s=g.exec(n))&&(h=s.index+s[0][c],!(h>v&&(f.push(n.slice(v,s.index)),!u&&s[c]>1&&s[0].replace(r,function(){for(d=1;d<arguments[c]-2;d++)void 0===arguments[d]&&(s[d]=void 0)}),s[c]>1&&s.index<n[c]&&a.apply(f,s.slice(1)),p=s[0][c],v=h,f[c]>=y)));)g[l]===s.index&&g[l]++;return v===n[c]?!p&&g.test("")||f.push(""):f.push(n.slice(v)),f[c]>y?f.slice(0,y):f}}else"0"[s](void 0,0)[c]&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,n){"use strict";var r,i,o,a=n(32),s=n(8),c=n(24),l=n(79),u=n(12),h=n(17),p=(n(16),n(25)),d=n(94),f=n(210),m=(n(77).set,n(211)),v=n(212).set,y=n(213)(),g="Promise",x=s.TypeError,_=s.process,b=s[g],_=s.process,w="process"==l(_),E=function(){},S=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(29)("species")]=function(t){t(E,E)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(r){}}(),M=function(t,e){return t===e||t===b&&e===o},A=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},C=function(t){return M(b,t)?new T(t):new i(t)},T=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw x("Bad Promise constructor");e=t,n=r}),this.resolve=p(e),this.reject=p(n)},N=function(t){try{t()}catch(e){return{error:e}}},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&P(t),t._h=1),a===!0?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===e.promise?c(x("Promise-chain cycle")):(o=A(n))?o.call(n,s,c):s(n)):c(r)}catch(u){c(u)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){v.call(s,function(){var e,n,r,i=t._v;if(L(t)&&(e=N(function(){w?_.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=w||L(t)?2:1),t._a=void 0,e)throw e.error})},L=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!L(e.promise))return!1;return!0},P=function(t){v.call(s,function(){var e;w?_.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},k=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=A(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(D,r,1),c(k,r,1))}catch(i){k.call(r,i)}}):(n._v=t,n._s=1,R(n,!1))}catch(r){k.call({_w:n,_d:!1},r)}}};S||(b=function(t){d(this,b,g,"_h"),p(t),r.call(this);try{t(c(D,this,1),c(k,this,1))}catch(e){k.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(214)(b.prototype,{then:function(t,e){var n=C(m(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),T=function(){var t=new r;this.promise=t,this.resolve=c(D,t,1),this.reject=c(k,t,1)}),u(u.G+u.W+u.F*!S,{Promise:b}),n(28)(b,g),n(197)(g),o=n(13)[g],u(u.S+u.F*!S,g,{reject:function(t){var e=C(this),n=e.reject;return n(t),e.promise}}),u(u.S+u.F*(a||!S),g,{resolve:function(t){if(t instanceof b&&M(t.constructor,this))return t;var e=C(this),n=e.resolve;return n(t),e.promise}}),u(u.S+u.F*!(S&&n(170)(function(t){b.all(t)["catch"](E)})),g,{all:function(t){var e=this,n=C(e),r=n.resolve,i=n.reject,o=N(function(){var n=[],o=0,a=1;f(t,!1,function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=C(e),r=n.reject,i=N(function(){f(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){var r=n(24),i=n(166),o=n(167),a=n(16),s=n(41),c=n(169),l={},u={},e=t.exports=function(t,e,n,h,p){var d,f,m,v,y=p?function(){return t}:c(t),g=r(n,h,e?2:1),x=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=s(t.length);d>x;x++)if(v=e?g(a(f=t[x])[0],f[1]):g(t[x]),v===l||v===u)return v}else for(m=y.call(t);!(f=m.next()).done;)if(v=i(m,g,f.value,e),v===l||v===u)return v};e.BREAK=l,e.RETURN=u},function(t,e,n){var r=n(16),i=n(25),o=n(29)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(24),s=n(82),c=n(52),l=n(19),u=n(8),h=u.process,p=u.setImmediate,d=u.clearImmediate,f=u.MessageChannel,m=0,v={},y="onreadystatechange",g=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},x=function(t){g.call(t.data)};p&&d||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},d=function(t){delete v[t]},"process"==n(38)(h)?r=function(t){h.nextTick(a(g,t,1))}:f?(i=new f,o=i.port2,i.port1.onmessage=x,r=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(t){u.postMessage(t+"","*")},u.addEventListener("message",x,!1)):r=y in l("script")?function(t){c.appendChild(l("script"))[y]=function(){c.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:p,clear:d}},function(t,e,n){var r=n(8),i=n(212).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(38)(a);t.exports=function(){var t,e,n,l=function(){var r,i;for(c&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(o){var u=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}else if(s&&s.resolve){var p=s.resolve();n=function(){p.then(l)}}else n=function(){i.call(r,l)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(216);t.exports=n(217)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(15).f,i=n(50),o=(n(14),n(214)),a=n(24),s=n(94),c=n(39),l=n(210),u=n(133),h=n(199),p=n(197),d=n(10),f=n(26).fastKey,m=d?"_s":"size",v=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var h=t(function(t,r){s(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=r&&l(r,n,t[u],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[m]=0},"delete":function(t){var e=this,n=v(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[m]--}return!!n},forEach:function(t){s(this,h,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!v(this,t)}}),d&&r(h.prototype,"size",{get:function(){return c(this[m])}}),h},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){u(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),p(e)}}},function(t,e,n){"use strict";var r=n(8),i=n(12),o=n(22),a=n(214),s=n(26),c=n(210),l=n(94),u=n(17),h=n(11),p=n(170),d=n(28),f=n(92);t.exports=function(t,e,n,m,v,y){var g=r[t],x=g,_=v?"set":"add",b=x&&x.prototype,w={},E=function(t){var e=b[t];o(b,t,"delete"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof x&&(y||b.forEach&&!h(function(){(new x).entries().next()}))){var S=new x,M=S[_](y?{}:-0,1)!=S,A=h(function(){S.has(1)}),C=p(function(t){new x(t)}),T=!y&&h(function(){for(var t=new x,e=5;e--;)t[_](e,e);return!t.has(-0)});C||(x=e(function(e,n){l(e,x,t);var r=f(new g,e,x);return void 0!=n&&c(n,v,r[_],r),r}),x.prototype=b,b.constructor=x),(A||T)&&(E("delete"),E("has"),v&&E("get")),(T||M)&&E(_),y&&b.clear&&delete b.clear}else x=m.getConstructor(e,t,v,_),a(x.prototype,n),s.NEED=!0;return d(x,t),w[t]=x,i(i.G+i.W+i.F*(x!=g),w),y||m.setStrong(x,t,v),x}},function(t,e,n){"use strict";var r=n(216);t.exports=n(217)("Set",function(t){return function(){
return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(177)(0),o=n(22),a=n(26),s=n(73),c=n(220),l=n(17),u=(n(9),a.getWeak),h=Object.isExtensible,p=c.ufstore,d={},f=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(l(t)){var e=u(t);return e===!0?p(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(this,t,e)}},v=t.exports=n(217)("WeakMap",f,m,c,!0,!0);7!=(new v).set((Object.freeze||Object)(d),7).get(d)&&(r=c.getConstructor(f),s(r.prototype,m),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=v.prototype,n=e[t];o(e,t,function(e,i){if(l(e)&&!h(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(214),i=n(26).getWeak,o=n(16),a=n(17),s=n(94),c=n(210),l=n(177),u=n(9),h=l(5),p=l(6),d=0,f=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},v=function(t,e){return h(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var l=t(function(t,r){s(t,l,e,"_i"),t._i=d++,t._l=void 0,void 0!=r&&c(r,n,t[o],t)});return r(l.prototype,{"delete":function(t){if(!a(t))return!1;var e=i(t);return e===!0?f(this)["delete"](t):e&&u(e,this._i)&&delete e[this._i]},has:function(t){if(!a(t))return!1;var e=i(t);return e===!0?f(this).has(t):e&&u(e,this._i)}}),l},def:function(t,e,n){var r=i(o(e),!0);return r===!0?f(t).set(e,n):r[t._i]=n,t},ufstore:f}},function(t,e,n){"use strict";var r=n(220);n(217)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(12),i=n(223),o=n(224),a=n(16),s=n(43),c=n(41),l=n(17),u=(n(29)("typed_array"),n(8).ArrayBuffer),h=n(211),p=o.ArrayBuffer,d=o.DataView,f=i.ABV&&u.isView,m=p.prototype.slice,v=i.VIEW,y="ArrayBuffer";r(r.G+r.W+r.F*(u!==p),{ArrayBuffer:p}),r(r.S+r.F*!i.CONSTR,y,{isView:function(t){return f&&f(t)||l(t)&&v in t}}),r(r.P+r.U+r.F*n(11)(function(){return!new p(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(h(this,p))(c(i-r)),l=new d(this),u=new d(o),f=0;r<i;)u.setUint8(f++,l.getUint8(r++));return o}}),n(197)(y)},function(t,e,n){for(var r,i=n(8),o=n(14),a=n(23),s=a("typed_array"),c=a("view"),l=!(!i.ArrayBuffer||!i.DataView),u=l,h=0,p=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<p;)(r=i[d[h++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):u=!1;t.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(t,e,n){"use strict";var r=n(8),i=n(10),o=n(32),a=n(223),s=n(14),c=n(214),l=n(11),u=n(94),h=n(42),p=n(41),d=n(54).f,f=n(15).f,m=n(193),v=n(28),y="ArrayBuffer",g="DataView",x="prototype",_="Wrong length!",b="Wrong index!",w=r[y],E=r[g],S=r.Math,M=(r.parseInt,r.RangeError),A=r.Infinity,C=w,T=S.abs,N=S.pow,R=(S.min,S.floor),O=S.log,L=S.LN2,P="buffer",k="byteLength",D="byteOffset",I=i?"_b":P,q=i?"_l":k,B=i?"_o":D,V=function(t,e,n){var r,i,o,a=Array(n),s=8*n-e-1,c=(1<<s)-1,l=c>>1,u=23===e?N(2,-24)-N(2,-77):0,h=0,p=t<0||0===t&&1/t<0?1:0;for(t=T(t),t!=t||t===A?(i=t!=t?1:0,r=c):(r=R(O(t)/L),t*(o=N(2,-r))<1&&(r--,o*=2),t+=r+l>=1?u/o:u*N(2,1-l),t*o>=2&&(r++,o/=2),r+l>=c?(i=0,r=c):r+l>=1?(i=(t*o-1)*N(2,e),r+=l):(i=t*N(2,l-1)*N(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*p,a},F=function(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,l=t[c--],u=127&l;for(l>>=7;s>0;u=256*u+t[c],c--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=e;s>0;r=256*r+t[c],c--,s-=8);if(0===u)u=1-a;else{if(u===o)return r?NaN:l?-A:A;r+=N(2,e),u-=a}return(l?-1:1)*r*N(2,u-e)},z=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},U=function(t){return[255&t]},j=function(t){return[255&t,t>>8&255]},H=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},G=function(t){return V(t,52,8)},W=function(t){return V(t,23,4)},X=function(t,e,n){f(t[x],e,{get:function(){return this[n]}})},Z=function(t,e,n,r){var i=+n,o=h(i);if(i!=o||o<0||o+e>t[q])throw M(b);var a=t[I]._b,s=o+t[B],c=a.slice(s,s+e);return r?c:c.reverse()},K=function(t,e,n,r,i,o){var a=+n,s=h(a);if(a!=s||s<0||s+e>t[q])throw M(b);for(var c=t[I]._b,l=s+t[B],u=r(+i),p=0;p<e;p++)c[l+p]=u[o?p:e-p-1]},Y=function(t,e){u(t,w,y);var n=+e,r=p(n);if(n!=r)throw M(_);return r};if(a.ABV){if(!l(function(){new w})||!l(function(){new w(.5)})){w=function(t){return new C(Y(this,t))};for(var Q,J=w[x]=C[x],$=d(C),tt=0;$.length>tt;)(Q=$[tt++])in w||s(w,Q,C[Q]);o||(J.constructor=w)}var et=new E(new w(2)),nt=E[x].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(E[x],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else w=function(t){var e=Y(this,t);this._b=m.call(Array(e),0),this[q]=e},E=function(t,e,n){u(this,E,g),u(t,w,g);var r=t[q],i=h(e);if(i<0||i>r)throw M("Wrong offset!");if(n=void 0===n?r-i:p(n),i+n>r)throw M(_);this[I]=t,this[B]=i,this[q]=n},i&&(X(w,k,"_l"),X(E,P,"_b"),X(E,k,"_l"),X(E,D,"_o")),c(E[x],{getInt8:function(t){return Z(this,1,t)[0]<<24>>24},getUint8:function(t){return Z(this,1,t)[0]},getInt16:function(t){var e=Z(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Z(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(Z(this,4,t,arguments[1]))},getUint32:function(t){return z(Z(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(Z(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(Z(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){K(this,1,t,U,e)},setUint8:function(t,e){K(this,1,t,U,e)},setInt16:function(t,e){K(this,2,t,j,e,arguments[2])},setUint16:function(t,e){K(this,2,t,j,e,arguments[2])},setInt32:function(t,e){K(this,4,t,H,e,arguments[2])},setUint32:function(t,e){K(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){K(this,4,t,W,e,arguments[2])},setFloat64:function(t,e){K(this,8,t,G,e,arguments[2])}});v(w,y),v(E,g),s(E[x],a.VIEW,!0),e[y]=w,e[g]=E},function(t,e,n){var r=n(12);r(r.G+r.W+r.F*!n(223).ABV,{DataView:n(224).DataView})},function(t,e,n){n(227)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){"use strict";if(n(10)){var r=n(32),i=n(8),o=n(11),a=n(12),s=n(223),c=n(224),l=n(24),u=n(94),h=n(21),p=n(14),d=n(214),f=(n(101),n(42)),m=n(41),v=n(43),y=n(20),g=n(9),x=n(75),_=n(79),b=n(17),w=n(62),E=n(167),S=n(50),M=n(63),A=n(54).f,C=(n(228),n(169)),T=n(23),N=n(29),R=n(177),O=n(40),L=n(211),P=n(198),k=n(134),D=n(170),I=n(197),q=n(193),B=n(190),V=n(15),F=n(55),z=V.f,U=F.f,j=i.RangeError,H=i.TypeError,G=i.Uint8Array,W="ArrayBuffer",X="Shared"+W,Z="BYTES_PER_ELEMENT",K="prototype",Y=Array[K],Q=c.ArrayBuffer,J=c.DataView,$=R(0),tt=R(2),et=R(3),nt=R(4),rt=R(5),it=R(6),ot=O(!0),at=O(!1),st=P.values,ct=P.keys,lt=P.entries,ut=Y.lastIndexOf,ht=Y.reduce,pt=Y.reduceRight,dt=Y.join,ft=Y.sort,mt=Y.slice,vt=Y.toString,yt=Y.toLocaleString,gt=N("iterator"),xt=N("toStringTag"),_t=T("typed_constructor"),bt=T("def_constructor"),wt=s.CONSTR,Et=s.TYPED,St=s.VIEW,Mt="Wrong length!",At=R(1,function(t,e){return Lt(L(t,t[bt]),e)}),Ct=o(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),Tt=!!G&&!!G[K].set&&o(function(){new G(1).set({})}),Nt=function(t,e){if(void 0===t)throw H(Mt);var n=+t,r=m(t);if(e&&!x(n,r))throw j(Mt);return r},Rt=function(t,e){var n=f(t);if(n<0||n%e)throw j("Wrong offset!");return n},Ot=function(t){if(b(t)&&Et in t)return t;throw H(t+" is not a typed array!")},Lt=function(t,e){if(!(b(t)&&_t in t))throw H("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return kt(L(t,t[bt]),e)},kt=function(t,e){for(var n=0,r=e.length,i=Lt(t,r);r>n;)i[n]=e[n++];return i},Dt=function(t,e,n){z(t,e,{get:function(){return this._d[n]}})},It=function(t){var e,n,r,i,o,a,s=w(t),c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,p=C(s);if(void 0!=p&&!E(p)){for(a=p.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&c>2&&(u=l(u,arguments[2],2)),e=0,n=m(s.length),i=Lt(this,n);n>e;e++)i[e]=h?u(s[e],e):s[e];return i},qt=function(){for(var t=0,e=arguments.length,n=Lt(this,e);e>t;)n[t]=arguments[t++];return n},Bt=!!G&&o(function(){yt.call(new G(1))}),Vt=function(){return yt.apply(Bt?mt.call(Ot(this)):Ot(this),arguments)},Ft={copyWithin:function(t,e){return B.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return q.apply(Ot(this),arguments)},filter:function(t){return Pt(this,tt(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Ot(this),arguments)},lastIndexOf:function(t){return ut.apply(Ot(this),arguments)},map:function(t){return At(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Ot(this),arguments)},reduceRight:function(t){return pt.apply(Ot(this),arguments)},reverse:function(){for(var t,e=this,n=Ot(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Ot(this),t)},subarray:function(t,e){var n=Ot(this),r=n.length,i=v(t,r);return new(L(n,n[bt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===e?r:v(e,r))-i))}},zt=function(t,e){return Pt(this,mt.call(Ot(this),t,e))},Ut=function(t){Ot(this);var e=Rt(arguments[1],1),n=this.length,r=w(t),i=m(r.length),o=0;if(i+e>n)throw j(Mt);for(;o<i;)this[e+o]=r[o++]},jt={entries:function(){return lt.call(Ot(this))},keys:function(){return ct.call(Ot(this))},values:function(){return st.call(Ot(this))}},Ht=function(t,e){return b(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Gt=function(t,e){return Ht(t,e=y(e,!0))?h(2,t[e]):U(t,e)},Wt=function(t,e,n){return!(Ht(t,e=y(e,!0))&&b(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?z(t,e,n):(t[e]=n.value,t)};wt||(F.f=Gt,V.f=Wt),a(a.S+a.F*!wt,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:Wt}),o(function(){vt.call({})})&&(vt=yt=function(){return dt.call(this)});var Xt=d({},Ft);d(Xt,jt),p(Xt,gt,jt.values),d(Xt,{slice:zt,set:Ut,constructor:function(){},toString:vt,toLocaleString:Vt}),Dt(Xt,"buffer","b"),Dt(Xt,"byteOffset","o"),Dt(Xt,"byteLength","l"),Dt(Xt,"length","e"),z(Xt,xt,{get:function(){return this[Et]}}),t.exports=function(t,e,n,c){c=!!c;var l=t+(c?"Clamped":"")+"Array",h="Uint8Array"!=l,d="get"+t,f="set"+t,v=i[l],y=v||{},g=v&&M(v),x=!v||!s.ABV,w={},E=v&&v[K],C=function(t,n){var r=t._d;return r.v[d](n*e+r.o,Ct)},T=function(t,n,r){var i=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*e+i.o,r,Ct)},N=function(t,e){z(t,e,{get:function(){return C(this,e)},set:function(t){return T(this,e,t)},enumerable:!0})};x?(v=n(function(t,n,r,i){u(t,v,l,"_d");var o,a,s,c,h=0,d=0;if(b(n)){if(!(n instanceof Q||(c=_(n))==W||c==X))return Et in n?kt(v,n):It.call(v,n);o=n,d=Rt(r,e);var f=n.byteLength;if(void 0===i){if(f%e)throw j(Mt);if(a=f-d,a<0)throw j(Mt)}else if(a=m(i)*e,a+d>f)throw j(Mt);s=a/e}else s=Nt(n,!0),a=s*e,o=new Q(a);for(p(t,"_d",{b:o,o:d,l:a,e:s,v:new J(o)});h<s;)N(t,h++)}),E=v[K]=S(Xt),p(E,"constructor",v)):D(function(t){new v(null),new v(t)},!0)||(v=n(function(t,n,r,i){u(t,v,l);var o;return b(n)?n instanceof Q||(o=_(n))==W||o==X?void 0!==i?new y(n,Rt(r,e),i):void 0!==r?new y(n,Rt(r,e)):new y(n):Et in n?kt(v,n):It.call(v,n):new y(Nt(n,h))}),$(g!==Function.prototype?A(y).concat(A(g)):A(y),function(t){t in v||p(v,t,y[t])}),v[K]=E,r||(E.constructor=v));var R=E[gt],O=!!R&&("values"==R.name||void 0==R.name),L=jt.values;p(v,_t,!0),p(E,Et,l),p(E,St,!0),p(E,bt,v),(c?new v(1)[xt]==l:xt in E)||z(E,xt,{get:function(){return l}}),w[l]=v,a(a.G+a.W+a.F*(v!=y),w),a(a.S,l,{BYTES_PER_ELEMENT:e,from:It,of:qt}),Z in E||p(E,Z,e),a(a.P,l,Ft),I(l),a(a.P+a.F*Tt,l,{set:Ut}),a(a.P+a.F*!O,l,jt),a(a.P+a.F*(E.toString!=vt),l,{toString:vt}),a(a.P+a.F*o(function(){new v(1).slice()}),l,{slice:zt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:Vt}),k[l]=O?R:L,r||O||p(E,gt,L)}}else t.exports=function(){}},function(t,e,n){var r=n(79),i=n(29)("iterator"),o=n(134);t.exports=n(13).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){n(227)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(227)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(227)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(12),i=n(25),o=n(16),a=Function.apply;r(r.S,"Reflect",{apply:function(t,e,n){return a.call(i(t),e,o(n))}})},function(t,e,n){var r=n(12),i=n(50),o=n(25),a=n(16),s=n(17),c=n(81);r(r.S+r.F*n(11)(function(){function t(){}return!(Reflect.construct(function(){},[],t)instanceof t)}),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var l=n.prototype,u=i(s(l)?l:Object.prototype),h=Function.apply.call(t,u,e);return s(h)?h:u}})},function(t,e,n){var r=n(15),i=n(12),o=n(16),a=n(20);i(i.S+i.F*n(11)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(i){return!1}}})},function(t,e,n){var r=n(12),i=n(55).f,o=n(16);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(12),i=n(16),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(135)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function r(t,e){var n,s,u=arguments.length<3?t:arguments[2];return l(t)===u?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:c(s=o(t))?r(s,e,u):void 0}var i=n(55),o=n(63),a=n(9),s=n(12),c=n(17),l=n(16);s(s.S,"Reflect",{get:r})},function(t,e,n){var r=n(55),i=n(12),o=n(16);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(12),i=n(63),o=n(16);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(12);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(12),i=n(16),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(12);r(r.S,"Reflect",{ownKeys:n(248)})},function(t,e,n){var r=n(54),i=n(47),o=n(16),a=n(8).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(12),i=n(16),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(e){return!1}}})},function(t,e,n){function r(t,e,n){var c,p,d=arguments.length<4?t:arguments[3],f=o.f(u(t),e);if(!f){if(h(p=a(t)))return r(p,e,n,d);f=l(0)}return s(f,"value")?!(f.writable===!1||!h(d))&&(c=o.f(d,e)||l(0),c.value=n,i.f(d,e,c),!0):void 0!==f.set&&(f.set.call(d,n),!0)}var i=n(15),o=n(55),a=n(63),s=n(9),c=n(12),l=n(21),u=n(16),h=n(17);c(c.S,"Reflect",{set:r})},function(t,e,n){var r=n(12),i=n(77);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var r=n(12),i=n(40)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(191)("includes")},function(t,e,n){"use strict";var r=n(12),i=n(132)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(12),i=n(255);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(41),i=n(96),o=n(39);t.exports=function(t,e,n,a){var s=String(o(t)),c=s.length,l=void 0===n?" ":String(n),u=r(e);if(u<=c||""==l)return s;var h=u-c,p=i.call(l,Math.ceil(h/l.length));return p.length>h&&(p=p.slice(0,h)),a?p+s:s+p}},function(t,e,n){"use strict";var r=n(12),i=n(255);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(87)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(87)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(12),i=n(39),o=n(41),a=n(139),s=n(201),c=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(135)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in c?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new l(r,e)}})},function(t,e,n){n(31)("asyncIterator")},function(t,e,n){n(31)("observable")},function(t,e,n){var r=n(12),i=n(248),o=n(36),a=n(55),s=n(168);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),r=a.f,c=i(n),l={},u=0;c.length>u;)s(l,e=c[u++],r(n,e));return l}})},function(t,e,n){var r=n(12),i=n(264)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(34),i=n(36),o=n(48).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),c=s.length,l=0,u=[];c>l;)o.call(a,n=s[l++])&&u.push(t?[n,a[n]]:a[n]);return u}}},function(t,e,n){var r=n(12),i=n(264)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(12),i=n(62),o=n(25),a=n(15);n(10)&&r(r.P+n(267),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){t.exports=n(32)||!n(11)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(8)[t]})},function(t,e,n){"use strict";var r=n(12),i=n(62),o=n(25),a=n(15);n(10)&&r(r.P+n(267),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(12),i=n(62),o=n(20),a=n(63),s=n(55).f;n(10)&&r(r.P+n(267),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=s(n,r))return e.get;while(n=a(n))}})},function(t,e,n){"use strict";var r=n(12),i=n(62),o=n(20),a=n(63),s=n(55).f;n(10)&&r(r.P+n(267),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=s(n,r))return e.set;while(n=a(n))}})},function(t,e,n){var r=n(12);r(r.P+r.R,"Map",{toJSON:n(272)("Map")})},function(t,e,n){var r=n(79),i=n(273);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(210);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){var r=n(12);r(r.P+r.R,"Set",{toJSON:n(272)("Set")})},function(t,e,n){var r=n(12);r(r.S,"System",{global:n(8)})},function(t,e,n){var r=n(12),i=n(38);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(12);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(12);r(r.S,"Math",{imulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>16,c=i>>16,l=(s*a>>>0)+(o*a>>>16);return s*c+(l>>16)+((o*c>>>0)+(l&n)>>16)}})},function(t,e,n){var r=n(12);r(r.S,"Math",{umulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>>16,c=i>>>16,l=(s*a>>>0)+(o*a>>>16);return s*c+(l>>>16)+((o*c>>>0)+(l&n)>>>16)}})},function(t,e,n){var r=n(282),i=n(16),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(215),i=n(12),o=n(27)("metadata"),a=o.store||(o.store=new(n(219))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},c=function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},l=function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},u=function(t,e,n,r){s(n,r,!0).set(t,e)},h=function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},p=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},d=function(t){i(i.S,"Reflect",t)};t.exports={store:a,map:s,has:c,get:l,set:u,keys:h,key:p,exp:d}},function(t,e,n){var r=n(282),i=n(16),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r["delete"](t))return!1;if(r.size)return!0;var c=s.get(e);return c["delete"](n),!!c.size||s["delete"](e)}})},function(t,e,n){var r=n(282),i=n(16),o=n(63),a=r.has,s=r.get,c=r.key,l=function(t,e,n){var r=a(t,e,n);if(r)return s(t,e,n);var i=o(e);return null!==i?l(t,i,n):void 0};r.exp({getMetadata:function(t,e){return l(t,i(e),arguments.length<3?void 0:c(arguments[2]))}})},function(t,e,n){var r=n(218),i=n(273),o=n(282),a=n(16),s=n(63),c=o.keys,l=o.key,u=function(t,e){var n=c(t,e),o=s(t);if(null===o)return n;var a=u(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return u(a(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var r=n(282),i=n(16),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(282),i=n(16),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(282),i=n(16),o=n(63),a=r.has,s=r.key,c=function(t,e,n){var r=a(t,e,n);if(r)return!0;var i=o(e);return null!==i&&c(t,i,n)};r.exp({hasMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(282),i=n(16),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(282),i=n(16),o=n(25),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(12),i=n(213)(),o=n(8).process,a="process"==n(38)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(12),i=n(8),o=n(13),a=n(213)(),s=n(29)("observable"),c=n(25),l=n(16),u=n(94),h=n(214),p=n(14),d=n(210),f=d.RETURN,m=function(t){return null==t?void 0:c(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},g=function(t){y(t)||(t._o=void 0,v(t))},x=function(t,e){l(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(i){return void t.error(i)}y(this)&&v(this)};x.prototype=h({},{unsubscribe:function(){g(this)}});var _=function(t){this._s=t};_.prototype=h({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var r=m(n.next);if(r)return r.call(n,t)}catch(i){try{g(e)}finally{throw i}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var r=m(n.error);if(!r)throw t;t=r.call(n,t)}catch(i){try{v(e)}finally{throw i}}return v(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var r=m(n.complete);t=r?r.call(n,t):void 0}catch(i){try{v(e)}finally{throw i}}return v(e),t}}});var b=function(t){u(this,b,"Observable","_f")._f=c(t)};h(b.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){c(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n})})}}),h(b,{from:function(t){var e="function"==typeof this?this:b,n=m(l(t)[s]);if(n){var r=l(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(d(t,!1,function(t){if(e.next(t),n)return f})===f)return}catch(r){if(n)throw r;return void e.error(r)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:b)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),p(b.prototype,s,function(){return this}),r(r.G,{Observable:b}),n(197)("Observable")},function(t,e,n){var r=n(8),i=n(12),o=n(82),a=n(294),s=r.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),l=function(t){return c?function(e,n){return t(o(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};i(i.G+i.B+i.F*c,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},function(t,e,n){"use strict";var r=n(295),i=n(82),o=n(25);t.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),a=0,s=r._,c=!1;e>a;)(n[a]=arguments[a++])===s&&(c=!0);return function(){var r,o=this,a=arguments.length,l=0,u=0;if(!c&&!a)return i(t,n,o);if(r=n.slice(),c)for(;e>l;l++)r[l]===s&&(r[l]=arguments[u++]);for(;a>u;)r.push(arguments[u++]);return i(t,r,o)}}},function(t,e,n){t.exports=n(8)},function(t,e,n){var r=n(12),i=n(212);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(198),i=n(22),o=n(8),a=n(14),s=n(134),c=n(29),l=c("iterator"),u=c("toStringTag"),h=s.Array,p=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var f,m=p[d],v=o[m],y=v&&v.prototype;if(y){y[l]||a(y,l,h),y[u]||a(y,u,m),s[m]=h;for(f in r)y[f]||i(y,f,r[f],!0)}}},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||o).prototype),a=new f(r||[]);return i._invoke=h(t,n,a),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function a(){}function s(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function u(t){function e(n,r,o,a){var s=i(t[n],t,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u instanceof l?Promise.resolve(u.arg).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(u).then(function(t){c.value=t,o(c)},a)}a(s.arg)}function r(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=r}function h(t,e,n){var r=S;return function(o,a){if(r===A)throw new Error("Generator is already running");if(r===C){if("throw"===o)throw a;return v()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===y){n.delegate=null;var c=s.iterator["return"];if(c){var l=i(c,s.iterator,a);if("throw"===l.type){o="throw",a=l.arg;continue}}if("return"===o)continue}var l=i(s.iterator[o],s.iterator,a);if("throw"===l.type){n.delegate=null,o="throw",a=l.arg;continue}o="next",a=y;var u=l.arg;if(!u.done)return r=M,u;n[s.resultName]=u.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=a;else if("throw"===o){if(r===S)throw r=C,a;n.dispatchException(a)&&(o="next",a=y)}else"return"===o&&n.abrupt("return",a);r=A;var l=i(t,e,n);if("normal"===l.type){r=n.done?C:M;var u={value:l.arg,done:n.done};if(l.arg!==T)return u;n.delegate&&"next"===o&&(a=y)}else"throw"===l.type&&(r=C,o="throw",a=l.arg)}}}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function m(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(g.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=y,i.done=!0,i};return r.next=r}}return{next:v}}function v(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},_=x.iterator||"@@iterator",b=x.toStringTag||"@@toStringTag",w="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(w&&(t.exports=E));E=e.regeneratorRuntime=w?t.exports:{},E.wrap=r;var S="suspendedStart",M="suspendedYield",A="executing",C="completed",T={},N=s.prototype=o.prototype;a.prototype=N.constructor=s,s.constructor=a,s[b]=a.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(N),t},E.awrap=function(t){return new l(t)},c(u.prototype),E.async=function(t,e,n,i){var o=new u(r(t,e,n,i));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},c(N),N[_]=function(){return this},N[b]="Generator",N.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=m,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};
return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),T},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),T}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:m(t),resultName:e,nextLoc:n},T}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(4))},function(t,e,n){n(300),t.exports=n(13).RegExp.escape},function(t,e,n){var r=n(12),i=n(301)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e={};return Object.keys(t).forEach(function(n){["children","mixin"].indexOf(n)===-1&&t[n].constructor!==Function&&(t[n].constructor===Array?e[n]=t[n].join(" "):t[n].constructor===Object?e[n]=f["default"].stringify(t[n]):e[n]=t[n])}),e}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=e.Entity=e.Animation=void 0;var u=n(303),h=r(u),p=n(459),d=(r(p),n(460)),f=r(d),m=e.Animation=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),r.attachEvents=function(t){t&&(t.addEventListener("animationend",function(t){r.props.onAnimationEnd(t)}),t.addEventListener("animationstart",function(t){r.props.onAnimationStart(t)}))},a=n,o(r,a)}return a(e,t),l(e,[{key:"render",value:function(){return h["default"].createElement("a-animation",c({ref:this.attachEvents},s(this.props)))}}]),e}(h["default"].Component);m.propTypes={onAnimationEnd:h["default"].PropTypes.func,onAnimationStart:h["default"].PropTypes.func},m.defaultProps={onAnimationEnd:function(){},onAnimationStart:function(){}};var v=e.Entity=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),r.attachEvents=function(t){t&&(t.addEventListener("click",function(t){r.props.onClick(t)}),t.addEventListener("loaded",function(t){r.props.onLoaded(t)}),t.addEventListener("mouseenter",function(t){r.props.onMouseEnter(t)}),t.addEventListener("mouseleave",function(t){r.props.onMouseLeave(t)}),t.addEventListener("child-attached",function(t){r.props.onChildAttached(t)}),t.addEventListener("componentchanged",function(t){r.props.onComponentChanged(t)}),t.addEventListener("pause",function(t){r.props.onPause(t)}),t.addEventListener("play",function(t){r.props.onPlay(t)}),t.addEventListener("stateadded",function(t){r.props.onStateAdded(t)}),t.addEventListener("stateremoved",function(t){r.props.onStateRemoved(t)}))},a=n,o(r,a)}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props.mixin?{mixin:this.props.mixin}:{};return h["default"].createElement("a-entity",c({ref:this.attachEvents},t,s(this.props)),this.props.children)}}]),e}(h["default"].Component);v.propTypes={children:h["default"].PropTypes.any,mixin:h["default"].PropTypes.string,onClick:h["default"].PropTypes.func,onLoaded:h["default"].PropTypes.func,onMouseEnter:h["default"].PropTypes.func,onMouseLeave:h["default"].PropTypes.func,onChildAttached:h["default"].PropTypes.func,onComponentChanged:h["default"].PropTypes.func,onPause:h["default"].PropTypes.func,onPlay:h["default"].PropTypes.func,onStateAdded:h["default"].PropTypes.func,onStateRemoved:h["default"].PropTypes.func},v.defaultProps={onClick:function(){},onLoaded:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onChildAttached:function(){},onComponentChanged:function(){},onPause:function(){},onPlay:function(){},onStateAdded:function(){},onStateRemoved:function(){}};var y=e.Scene=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),r.attachEvents=function(t){t&&(t.addEventListener("enter-vr",function(t){r.props.onEnterVR(t)}),t.addEventListener("exit-vr",function(t){r.props.onExitVR(t)}),t.addEventListener("loaded",function(t){r.props.onLoaded(t)}),r.props.onTick&&setTimeout(function(){t.addBehavior({tick:r.props.onTick,el:t})}))},a=n,o(r,a)}return a(e,t),l(e,[{key:"render",value:function(){return h["default"].createElement("a-scene",c({ref:this.attachEvents},s(this.props)),this.props.children)}}]),e}(h["default"].Component);y.propTypes={onEnterVR:h["default"].PropTypes.func,onExitVR:h["default"].PropTypes.func,onLoaded:h["default"].PropTypes.func,onTick:h["default"].PropTypes.func},y.defaultProps={onEnterVR:function(){},onExitVR:function(){},onLoaded:function(){}}},function(t,e,n){"use strict";t.exports=n(304)},function(t,e,n){"use strict";var r=n(305),i=n(449),o=n(453),a=n(340),s=n(458),c={};a(c,o),a(c,{findDOMNode:s("findDOMNode","ReactDOM","react-dom",r,r.findDOMNode),render:s("render","ReactDOM","react-dom",r,r.render),unmountComponentAtNode:s("unmountComponentAtNode","ReactDOM","react-dom",r,r.unmountComponentAtNode),renderToString:s("renderToString","ReactDOMServer","react-dom/server",i,i.renderToString),renderToStaticMarkup:s("renderToStaticMarkup","ReactDOMServer","react-dom/server",i,i.renderToStaticMarkup)}),c.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,c.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i,t.exports=c},function(t,e,n){(function(e){"use strict";var r=n(306),i=n(307),o=n(372),a=n(346),s=n(329),c=n(319),l=n(351),u=n(355),h=n(447),p=n(392),d=n(448),f=n(326);o.inject();var m=c.measure("React","render",s.render),v={findDOMNode:p,render:m,unmountComponentAtNode:s.unmountComponentAtNode,version:h,unstable_batchedUpdates:u.batchedUpdates,unstable_renderSubtreeIntoContainer:d};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:r,InstanceHandles:a,Mount:s,Reconciler:l,TextComponent:i}),"production"!==e.env.NODE_ENV){var y=n(310);if(y.canUseDOM&&window.top===window.self){"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)&&console.debug("Download the React DevTools for a better development experience: https://fb.me/react-devtools");var g=document.documentMode&&document.documentMode<8;"production"!==e.env.NODE_ENV?f(!g,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;for(var x=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze],_=0;_<x.length;_++)if(!x[_]){console.error("One or more ES5 shim/shams expected by React are not available: https://fb.me/react-warning-polyfills");break}}}t.exports=v}).call(e,n(4))},function(t,e){"use strict";var n={current:null};t.exports=n},function(t,e,n){(function(e){"use strict";var r=n(308),i=n(323),o=n(327),a=n(329),s=n(340),c=n(322),l=n(321),u=n(371),h=function(t){};s(h.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,n,r){if("production"!==e.env.NODE_ENV&&r[u.ancestorInfoContextKey]&&u("span",null,r[u.ancestorInfoContextKey]),this._rootNodeID=t,n.useCreateElement){var o=r[a.ownerDocumentContextKey],s=o.createElement("span");return i.setAttributeForID(s,t),a.getID(s),l(s,this._stringText),s}var h=c(this._stringText);return n.renderToStaticMarkup?h:"<span "+i.createMarkupForID(t)+">"+h+"</span>"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var i=a.getNode(this._rootNodeID);r.updateTextContent(i,n)}}},unmountComponent:function(){o.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=h}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,e,n){var r=n>=t.childNodes.length?null:t.childNodes.item(n);t.insertBefore(e,r)}var i=n(309),o=n(317),a=n(319),s=n(320),c=n(321),l=n(314),u={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:c,processUpdates:function(t,n){for(var a,u=null,h=null,p=0;p<t.length;p++)if(a=t[p],a.type===o.MOVE_EXISTING||a.type===o.REMOVE_NODE){var d=a.fromIndex,f=a.parentNode.childNodes[d],m=a.parentID;f?void 0:"production"!==e.env.NODE_ENV?l(!1,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",d,m):l(!1),u=u||{},u[m]=u[m]||[],u[m][d]=f,h=h||[],h.push(f)}var v;if(v=n.length&&"string"==typeof n[0]?i.dangerouslyRenderMarkup(n):n,h)for(var y=0;y<h.length;y++)h[y].parentNode.removeChild(h[y]);for(var g=0;g<t.length;g++)switch(a=t[g],a.type){case o.INSERT_MARKUP:r(a.parentNode,v[a.markupIndex],a.toIndex);break;case o.MOVE_EXISTING:r(a.parentNode,u[a.parentID][a.fromIndex],a.toIndex);break;case o.SET_MARKUP:s(a.parentNode,a.content);break;case o.TEXT_CONTENT:c(a.parentNode,a.content);break;case o.REMOVE_NODE:}}};a.measureMethods(u,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),t.exports=u}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){return t.substring(1,t.indexOf(" "))}var i=n(310),o=n(311),a=n(316),s=n(315),c=n(314),l=/^(<[^ \/>]+)/,u="data-danger-index",h={dangerouslyRenderMarkup:function(t){i.canUseDOM?void 0:"production"!==e.env.NODE_ENV?c(!1,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString for server rendering."):c(!1);for(var n,h={},p=0;p<t.length;p++)t[p]?void 0:"production"!==e.env.NODE_ENV?c(!1,"dangerouslyRenderMarkup(...): Missing markup."):c(!1),n=r(t[p]),n=s(n)?n:"*",h[n]=h[n]||[],h[n][p]=t[p];var d=[],f=0;for(n in h)if(h.hasOwnProperty(n)){var m,v=h[n];for(m in v)if(v.hasOwnProperty(m)){var y=v[m];v[m]=y.replace(l,"$1 "+u+'="'+m+'" ')}for(var g=o(v.join(""),a),x=0;x<g.length;++x){var _=g[x];_.hasAttribute&&_.hasAttribute(u)?(m=+_.getAttribute(u),_.removeAttribute(u),d.hasOwnProperty(m)?"production"!==e.env.NODE_ENV?c(!1,"Danger: Assigning to an already-occupied result index."):c(!1):void 0,d[m]=_,f+=1):"production"!==e.env.NODE_ENV&&console.error("Danger: Discarding unexpected node:",_)}}return f!==d.length?"production"!==e.env.NODE_ENV?c(!1,"Danger: Did not assign to every index of resultList."):c(!1):void 0,d.length!==t.length?"production"!==e.env.NODE_ENV?c(!1,"Danger: Expected markup to render %s nodes, but rendered %s.",t.length,d.length):c(!1):void 0,d},dangerouslyReplaceNodeWithMarkup:function(t,n){i.canUseDOM?void 0:"production"!==e.env.NODE_ENV?c(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):c(!1),n?void 0:"production"!==e.env.NODE_ENV?c(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):c(!1),"html"===t.tagName.toLowerCase()?"production"!==e.env.NODE_ENV?c(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):c(!1):void 0;var r;r="string"==typeof n?o(n,a)[0]:n,t.parentNode.replaceChild(r,t)}};t.exports=h}).call(e,n(4))},function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){var e=t.match(u);return e&&e[1].toLowerCase()}function i(t,n){var i=l;l?void 0:"production"!==e.env.NODE_ENV?c(!1,"createNodesFromMarkup dummy not initialized"):c(!1);var o=r(t),u=o&&s(o);if(u){i.innerHTML=u[1]+t+u[2];for(var h=u[0];h--;)i=i.lastChild}else i.innerHTML=t;var p=i.getElementsByTagName("script");p.length&&(n?void 0:"production"!==e.env.NODE_ENV?c(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."):c(!1),a(p).forEach(n));for(var d=a(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return d}var o=n(310),a=n(312),s=n(315),c=n(314),l=o.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;t.exports=i}).call(e,n(4))},function(t,e,n){"use strict";function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function i(t){return r(t)?Array.isArray(t)?t.slice():o(t):[t]}var o=n(313);t.exports=i},function(t,e,n){(function(e){"use strict";function r(t){var n=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?"production"!==e.env.NODE_ENV?i(!1,"toArray: Array-like object expected"):i(!1):void 0,"number"!=typeof n?"production"!==e.env.NODE_ENV?i(!1,"toArray: Object needs a length property"):i(!1):void 0,0===n||n-1 in t?void 0:"production"!==e.env.NODE_ENV?i(!1,"toArray: Object should have keys for indices"):i(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(r){}for(var o=Array(n),a=0;a<n;a++)o[a]=t[a];return o}var i=n(314);t.exports=r}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function n(t,n,r,i,o,a,s,c){if("production"!==e.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!t){var l;if(void 0===n)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,o,a,s,c],h=0;l=new Error(n.replace(/%s/g,function(){return u[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=n}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){return a?void 0:"production"!==e.env.NODE_ENV?o(!1,"Markup wrapping node not initialized"):o(!1),p.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?p[t]:null}var i=n(310),o=n(314),a=i.canUseDOM?document.createElement("div"):null,s={},c=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){p[t]=h,s[t]=!0}),t.exports=r}).call(e,n(4))},function(t,e){"use strict";function n(t){return function(){return t}}function r(){}r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";var r=n(318),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=i},function(t,e,n){(function(e){"use strict";var r=n(314),i=function(t){var n,i={};t instanceof Object&&!Array.isArray(t)?void 0:"production"!==e.env.NODE_ENV?r(!1,"keyMirror(...): Argument must be an object."):r(!1);for(n in t)t.hasOwnProperty(n)&&(i[n]=n);return i};t.exports=i}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function n(t,e,n){return n}var r={enableMeasure:!1,storedMeasure:n,measureMethods:function(t,n,i){if("production"!==e.env.NODE_ENV)for(var o in i)i.hasOwnProperty(o)&&(t[o]=r.measure(n,i[o],t[o]))},measure:function(t,n,i){if("production"!==e.env.NODE_ENV){var o=null,a=function(){return r.enableMeasure?(o||(o=r.storedMeasure(t,n,i)),o.apply(this,arguments)):i.apply(this,arguments)};return a.displayName=t+"_"+n,a}return i},injection:{injectMeasure:function(t){r.storedMeasure=t}}};t.exports=r}).call(e,n(4))},function(t,e,n){"use strict";var r=n(310),i=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,a=function(t,e){t.innerHTML=e};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(a=function(t,e){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),i.test(e)||"<"===e[0]&&o.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e})}t.exports=a},function(t,e,n){"use strict";var r=n(310),i=n(322),o=n(320),a=function(t,e){t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,i(e))})),t.exports=a},function(t,e){"use strict";function n(t){return i[t]}function r(t){return(""+t).replace(o,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){return!!h.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(l.test(t)?(h[t]=!0,!0):(u[t]=!0,"production"!==e.env.NODE_ENV?c(!1,"Invalid attribute name: `%s`",t):void 0,!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var o=n(324),a=n(319),s=n(325),c=n(326),l=/^[a-zA-Z_][\w\.\-]*$/,u={},h={};if("production"!==e.env.NODE_ENV)var p={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},d={},f=function(t){if(!(p.hasOwnProperty(t)&&p[t]||d.hasOwnProperty(t)&&d[t])){d[t]=!0;var n=t.toLowerCase(),r=o.isCustomAttribute(n)?n:o.getPossibleStandardName.hasOwnProperty(n)?o.getPossibleStandardName[n]:null;"production"!==e.env.NODE_ENV?c(null==r,"Unknown DOM property %s. Did you mean %s?",t,r):void 0}};var m={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+s(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForProperty:function(t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){if(i(r,n))return"";var a=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?a+'=""':a+"="+s(n)}return o.isCustomAttribute(t)?null==n?"":t+"="+s(n):("production"!==e.env.NODE_ENV&&f(t),null)},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+s(e):""},setValueForProperty:function(t,n,r){var a=o.properties.hasOwnProperty(n)?o.properties[n]:null;if(a){var s=a.mutationMethod;if(s)s(t,r);else if(i(a,r))this.deleteValueForProperty(t,n);else if(a.mustUseAttribute){var c=a.attributeName,l=a.attributeNamespace;l?t.setAttributeNS(l,c,""+r):a.hasBooleanValue||a.hasOverloadedBooleanValue&&r===!0?t.setAttribute(c,""):t.setAttribute(c,""+r)}else{var u=a.propertyName;a.hasSideEffects&&""+t[u]==""+r||(t[u]=r)}}else o.isCustomAttribute(n)?m.setValueForAttribute(t,n,r):"production"!==e.env.NODE_ENV&&f(n)},setValueForAttribute:function(t,e,n){r(e)&&(null==n?t.removeAttribute(e):t.setAttribute(e,""+n))},deleteValueForProperty:function(t,n){var r=o.properties.hasOwnProperty(n)?o.properties[n]:null;if(r){var i=r.mutationMethod;if(i)i(t,void 0);else if(r.mustUseAttribute)t.removeAttribute(r.attributeName);else{var a=r.propertyName,s=o.getDefaultValueForProperty(t.nodeName,a);r.hasSideEffects&&""+t[a]===s||(t[a]=s)}}else o.isCustomAttribute(n)?t.removeAttribute(n):"production"!==e.env.NODE_ENV&&f(n)}};a.measureMethods(m,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),t.exports=m}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,e){return(t&e)===e}var i=n(314),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var n=o,a=t.Properties||{},c=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},h=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var p in a){s.properties.hasOwnProperty(p)?"production"!==e.env.NODE_ENV?i(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",p):i(!1):void 0;var d=p.toLowerCase(),f=a[p],m={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseAttribute:r(f,n.MUST_USE_ATTRIBUTE),mustUseProperty:r(f,n.MUST_USE_PROPERTY),hasSideEffects:r(f,n.HAS_SIDE_EFFECTS),hasBooleanValue:r(f,n.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,n.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,n.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,n.HAS_OVERLOADED_BOOLEAN_VALUE)};if(m.mustUseAttribute&&m.mustUseProperty?"production"!==e.env.NODE_ENV?i(!1,"DOMProperty: Cannot require using both attribute and property: %s",p):i(!1):void 0,!m.mustUseProperty&&m.hasSideEffects?"production"!==e.env.NODE_ENV?i(!1,"DOMProperty: Properties that have side effects must use property: %s",p):i(!1):void 0,m.hasBooleanValue+m.hasNumericValue+m.hasOverloadedBooleanValue<=1?void 0:"production"!==e.env.NODE_ENV?i(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",p):i(!1),"production"!==e.env.NODE_ENV&&(s.getPossibleStandardName[d]=p),l.hasOwnProperty(p)){var v=l[p];m.attributeName=v,"production"!==e.env.NODE_ENV&&(s.getPossibleStandardName[v]=p)}c.hasOwnProperty(p)&&(m.attributeNamespace=c[p]),u.hasOwnProperty(p)&&(m.propertyName=u[p]),h.hasOwnProperty(p)&&(m.mutationMethod=h[p]),s.properties[p]=m}}},a={},s={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:"production"!==e.env.NODE_ENV?{}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var n,r=a[t];return r||(a[t]=r={}),e in r||(n=document.createElement(t),r[e]=n[e]),r[e]},injection:o};t.exports=s}).call(e,n(4))},function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=n(322);t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(316),i=r;"production"!==e.env.NODE_ENV&&(i=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==e.indexOf("Failed Composite propType: ")&&!t){var o=0,a="Warning: "+e.replace(/%s/g,function(){return r[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(s){}}}),t.exports=i}).call(e,n(4))},function(t,e,n){"use strict";var r=n(328),i=n(329),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){i.purgeID(t)}};t.exports=o},function(t,e,n){(function(e){"use strict";var r=n(308),i=n(323),o=n(329),a=n(319),s=n(314),c={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:function(t,n,r){var a=o.getNode(t);c.hasOwnProperty(n)?"production"!==e.env.NODE_ENV?s(!1,"updatePropertyByID(...): %s",c[n]):s(!1):void 0,null!=r?i.setValueForProperty(a,n,r):i.deleteValueForProperty(a,n)},dangerouslyReplaceNodeWithMarkupByID:function(t,e){var n=o.getNode(t);r.dangerouslyReplaceNodeWithMarkup(n,e)},dangerouslyProcessChildrenUpdates:function(t,e){for(var n=0;n<t.length;n++)t[n].parentNode=o.getNode(t[n].parentID);r.processUpdates(t,e)}};a.measureMethods(l,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=l}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===G?t.documentElement:t.firstChild:null}function o(t){var e=i(t);return e&&tt.getID(e)}function a(t){var n=s(t);if(n)if(j.hasOwnProperty(n)){var r=j[n];r!==t&&(h(r,n)?"production"!==e.env.NODE_ENV?q(!1,"ReactMount: Two valid but unequal nodes with the same `%s`: %s",U,n):q(!1):void 0,j[n]=t)}else j[n]=t;return n}function s(t){return t&&t.getAttribute&&t.getAttribute(U)||""}function c(t,e){var n=s(t);n!==e&&delete j[n],t.setAttribute(U,e),j[e]=t}function l(t){return j.hasOwnProperty(t)&&h(j[t],t)||(j[t]=tt.findReactNodeByID(t)),j[t]}function u(t){var e=C.get(t)._rootNodeID;return M.isNullComponentID(e)?null:(j.hasOwnProperty(e)&&h(j[e],e)||(j[e]=tt.findReactNodeByID(e)),j[e])}function h(t,n){if(t){s(t)!==n?"production"!==e.env.NODE_ENV?q(!1,"ReactMount: Unexpected modification of `%s`",U):q(!1):void 0;var r=tt.findReactContainerForID(n);if(r&&D(r,t))return!0}return!1}function p(t){delete j[t]}function d(t){var e=j[t];return!(!e||!h(e,t))&&void(J=e)}function f(t){J=null,A.traverseAncestors(t,d);var e=J;return J=null,e}function m(t,n,r,i,o,a){if(E.useCreateElement&&(a=P({},a),r.nodeType===G?a[X]=r:a[X]=r.ownerDocument),"production"!==e.env.NODE_ENV){a===k&&(a={});var s=r.nodeName.toLowerCase();a[F.ancestorInfoContextKey]=F.updatedAncestorInfo(null,s,null)}var c=R.mountComponent(t,n,i,a);t._renderedComponent._topLevelWrapper=t,tt._mountImageIntoNode(c,r,o,i)}function v(t,e,n,r,i){var o=L.ReactReconcileTransaction.getPooled(r);o.perform(m,null,t,e,n,o,r,i),L.ReactReconcileTransaction.release(o)}function y(t,e){for(R.unmountComponent(t),e.nodeType===G&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function g(t){var e=o(t);return!!e&&e!==A.getReactRootIDFromNodeID(e)}function x(t){for(;t&&t.parentNode!==t;t=t.parentNode)if(1===t.nodeType){var e=s(t);if(e){var n,r=A.getReactRootIDFromNodeID(e),i=t;do if(n=s(i),i=i.parentNode,null==i)return null;while(n!==r);if(i===K[r])return t}}return null}var _=n(324),b=n(330),w=n(306),E=n(342),S=n(343),M=n(345),A=n(346),C=n(348),T=n(349),N=n(319),R=n(351),O=n(354),L=n(355),P=n(340),k=n(359),D=n(360),I=n(363),q=n(314),B=n(320),V=n(368),F=n(371),z=n(326),U=_.ID_ATTRIBUTE_NAME,j={},H=1,G=9,W=11,X="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),Z={},K={};if("production"!==e.env.NODE_ENV)var Y={};var Q=[],J=null,$=function(){};$.prototype.isReactComponent={},"production"!==e.env.NODE_ENV&&($.displayName="TopLevelWrapper"),$.prototype.render=function(){return this.props};var tt={TopLevelWrapper:$,_instancesByReactRootID:Z,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,n,r,a){return tt.scrollMonitor(r,function(){O.enqueueElementInternal(t,n),a&&O.enqueueCallbackInternal(t,a)}),"production"!==e.env.NODE_ENV&&(Y[o(r)]=i(r)),t},_registerComponent:function(t,n){!n||n.nodeType!==H&&n.nodeType!==G&&n.nodeType!==W?"production"!==e.env.NODE_ENV?q(!1,"_registerComponent(...): Target container is not a DOM element."):q(!1):void 0,b.ensureScrollValueMonitoring();var r=tt.registerContainer(n);return Z[r]=t,r},_renderNewRootComponent:function(t,n,r,o){"production"!==e.env.NODE_ENV?z(null==w.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",w.current&&w.current.getName()||"ReactCompositeComponent"):void 0;var a=I(t,null),s=tt._registerComponent(a,n);return L.batchedUpdates(v,a,s,n,r,o),"production"!==e.env.NODE_ENV&&(Y[s]=i(n)),a},renderSubtreeIntoContainer:function(t,n,r,i){return null==t||null==t._reactInternalInstance?"production"!==e.env.NODE_ENV?q(!1,"parentComponent must be a valid React Component"):q(!1):void 0,tt._renderSubtreeIntoContainer(t,n,r,i)},_renderSubtreeIntoContainer:function(t,n,r,a){S.isValidElement(n)?void 0:"production"!==e.env.NODE_ENV?q(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof n?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":"function"==typeof n?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":null!=n&&void 0!==n.props?" This may be caused by unintentionally loading two independent copies of React.":""):q(!1),"production"!==e.env.NODE_ENV?z(!r||!r.tagName||"BODY"!==r.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app."):void 0;var c=new S($,null,null,null,null,null,n),l=Z[o(r)];if(l){var u=l._currentElement,h=u.props;if(V(h,n)){var p=l._renderedComponent.getPublicInstance(),d=a&&function(){a.call(p)};return tt._updateRootComponent(l,c,r,d),p}tt.unmountComponentAtNode(r)}var f=i(r),m=f&&!!s(f),v=g(r);if("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?z(!v,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."):void 0,!m||f.nextSibling))for(var y=f;y;){if(s(y)){"production"!==e.env.NODE_ENV?z(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."):void 0;
break}y=y.nextSibling}var x=m&&!l&&!v,_=tt._renderNewRootComponent(c,r,x,null!=t?t._reactInternalInstance._processChildContext(t._reactInternalInstance._context):k)._renderedComponent.getPublicInstance();return a&&a.call(_),_},render:function(t,e,n){return tt._renderSubtreeIntoContainer(null,t,e,n)},registerContainer:function(t){var e=o(t);return e&&(e=A.getReactRootIDFromNodeID(e)),e||(e=A.createReactRootID()),K[e]=t,e},unmountComponentAtNode:function(t){"production"!==e.env.NODE_ENV?z(null==w.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",w.current&&w.current.getName()||"ReactCompositeComponent"):void 0,!t||t.nodeType!==H&&t.nodeType!==G&&t.nodeType!==W?"production"!==e.env.NODE_ENV?q(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):q(!1):void 0;var n=o(t),r=Z[n];if(!r){var i=g(t),a=s(t),c=a&&a===A.getReactRootIDFromNodeID(a);return"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?z(!i,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",c?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."):void 0),!1}return L.batchedUpdates(y,r,t),delete Z[n],delete K[n],"production"!==e.env.NODE_ENV&&delete Y[n],!0},findReactContainerForID:function(t){var n=A.getReactRootIDFromNodeID(t),r=K[n];if("production"!==e.env.NODE_ENV){var i=Y[n];if(i&&i.parentNode!==r){"production"!==e.env.NODE_ENV?z(s(i)===n,"ReactMount: Root element ID differed from reactRootID."):void 0;var o=r.firstChild;o&&n===s(o)?Y[n]=o:"production"!==e.env.NODE_ENV?z(!1,"ReactMount: Root element has been removed from its original container. New container: %s",i.parentNode):void 0}}return r},findReactNodeByID:function(t){var e=tt.findReactContainerForID(t);return tt.findComponentRoot(e,t)},getFirstReactDOM:function(t){return x(t)},findComponentRoot:function(t,n){var r=Q,i=0,o=f(n)||t;for("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?z(null!=o,"React can't find the root component node for data-reactid value `%s`. If you're seeing this message, it probably means that you've loaded two copies of React on the page. At this time, only a single copy of React can be loaded at a time.",n):void 0),r[0]=o.firstChild,r.length=1;i<r.length;){for(var a,s=r[i++];s;){var c=tt.getID(s);c?n===c?a=s:A.isAncestorIDOf(c,n)&&(r.length=i=0,r.push(s.firstChild)):r.push(s.firstChild),s=s.nextSibling}if(a)return r.length=0,a}r.length=0,"production"!==e.env.NODE_ENV?q(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",n,tt.getID(t)):q(!1)},_mountImageIntoNode:function(t,n,o,a){if(!n||n.nodeType!==H&&n.nodeType!==G&&n.nodeType!==W?"production"!==e.env.NODE_ENV?q(!1,"mountComponentIntoNode(...): Target container is not valid."):q(!1):void 0,o){var s=i(n);if(T.canReuseMarkup(t,s))return;var c=s.getAttribute(T.CHECKSUM_ATTR_NAME);s.removeAttribute(T.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(T.CHECKSUM_ATTR_NAME,c);var u=t;if("production"!==e.env.NODE_ENV){var h;n.nodeType===H?(h=document.createElement("div"),h.innerHTML=t,u=h.innerHTML):(h=document.createElement("iframe"),document.body.appendChild(h),h.contentDocument.write(t),u=h.contentDocument.documentElement.outerHTML,document.body.removeChild(h))}var p=r(u,l),d=" (client) "+u.substring(p-20,p+20)+"\n (server) "+l.substring(p-20,p+20);n.nodeType===G?"production"!==e.env.NODE_ENV?q(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",d):q(!1):void 0,"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?z(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",d):void 0)}if(n.nodeType===G?"production"!==e.env.NODE_ENV?q(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):q(!1):void 0,a.useCreateElement){for(;n.lastChild;)n.removeChild(n.lastChild);n.appendChild(t)}else B(n,t)},ownerDocumentContextKey:X,getReactRootID:o,getID:a,setID:c,getNode:l,getNodeFromInstance:u,isValid:h,purgeID:p};N.measureMethods(tt,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=tt}).call(e,n(4))},function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=f++,p[t[v]]={}),p[t[v]]}var i=n(331),o=n(332),a=n(333),s=n(338),c=n(319),l=n(339),u=n(340),h=n(341),p={},d=!1,f=0,m={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),y=u({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(y.handleTopLevel),y.ReactEventListener=t}},setEnabled:function(t){y.ReactEventListener&&y.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!y.ReactEventListener||!y.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,o=r(n),s=a.registrationNameDependencies[t],c=i.topLevelTypes,l=0;l<s.length;l++){var u=s[l];o.hasOwnProperty(u)&&o[u]||(u===c.topWheel?h("wheel")?y.ReactEventListener.trapBubbledEvent(c.topWheel,"wheel",n):h("mousewheel")?y.ReactEventListener.trapBubbledEvent(c.topWheel,"mousewheel",n):y.ReactEventListener.trapBubbledEvent(c.topWheel,"DOMMouseScroll",n):u===c.topScroll?h("scroll",!0)?y.ReactEventListener.trapCapturedEvent(c.topScroll,"scroll",n):y.ReactEventListener.trapBubbledEvent(c.topScroll,"scroll",y.ReactEventListener.WINDOW_HANDLE):u===c.topFocus||u===c.topBlur?(h("focus",!0)?(y.ReactEventListener.trapCapturedEvent(c.topFocus,"focus",n),y.ReactEventListener.trapCapturedEvent(c.topBlur,"blur",n)):h("focusin")&&(y.ReactEventListener.trapBubbledEvent(c.topFocus,"focusin",n),y.ReactEventListener.trapBubbledEvent(c.topBlur,"focusout",n)),o[c.topBlur]=!0,o[c.topFocus]=!0):m.hasOwnProperty(u)&&y.ReactEventListener.trapBubbledEvent(u,m[u],n),o[u]=!0)}},trapBubbledEvent:function(t,e,n){return y.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return y.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(!d){var t=l.refreshScrollValues;y.ReactEventListener.monitorScrollValue(t),d=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});c.measureMethods(y,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),t.exports=y},function(t,e,n){"use strict";var r=n(318),i=r({bubbled:null,captured:null}),o=r({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};t.exports=a},function(t,e,n){(function(e){"use strict";function r(){var t=v&&v.traverseTwoPhase&&v.traverseEnterLeave;"production"!==e.env.NODE_ENV?u(t,"InstanceHandle not injected before use!"):void 0}var i=n(333),o=n(334),a=n(335),s=n(336),c=n(337),l=n(314),u=n(326),h={},p=null,d=function(t,e){t&&(o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},f=function(t){return d(t,!0)},m=function(t){return d(t,!1)},v=null,y={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(t){v=t,"production"!==e.env.NODE_ENV&&r()},getInstanceHandle:function(){return"production"!==e.env.NODE_ENV&&r(),v},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(t,n,r){"function"!=typeof r?"production"!==e.env.NODE_ENV?l(!1,"Expected %s listener to be a function, instead got type %s",n,typeof r):l(!1):void 0;var o=h[n]||(h[n]={});o[t]=r;var a=i.registrationNameModules[n];a&&a.didPutListener&&a.didPutListener(t,n,r)},getListener:function(t,e){var n=h[e];return n&&n[t]},deleteListener:function(t,e){var n=i.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=h[e];r&&delete r[t]},deleteAllListeners:function(t){for(var e in h)if(h[e][t]){var n=i.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e),delete h[e][t]}},extractEvents:function(t,e,n,r,o){for(var a,c=i.plugins,l=0;l<c.length;l++){var u=c[l];if(u){var h=u.extractEvents(t,e,n,r,o);h&&(a=s(a,h))}}return a},enqueueEvents:function(t){t&&(p=s(p,t))},processEventQueue:function(t){var n=p;p=null,t?c(n,f):c(n,m),p?"production"!==e.env.NODE_ENV?l(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):l(!1):void 0,a.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};t.exports=y}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){if(s)for(var t in c){var n=c[t],r=s.indexOf(t);if(r>-1?void 0:"production"!==e.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",t):a(!1),!l.plugins[r]){n.extractEvents?void 0:"production"!==e.env.NODE_ENV?a(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",t):a(!1),l.plugins[r]=n;var o=n.eventTypes;for(var u in o)i(o[u],n,u)?void 0:"production"!==e.env.NODE_ENV?a(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",u,t):a(!1)}}}function i(t,n,r){l.eventNameDispatchConfigs.hasOwnProperty(r)?"production"!==e.env.NODE_ENV?a(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a(!1):void 0,l.eventNameDispatchConfigs[r]=t;var i=t.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];o(c,n,r)}return!0}return!!t.registrationName&&(o(t.registrationName,n,r),!0)}function o(t,n,r){l.registrationNameModules[t]?"production"!==e.env.NODE_ENV?a(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",t):a(!1):void 0,l.registrationNameModules[t]=n,l.registrationNameDependencies[t]=n.eventTypes[r].dependencies}var a=n(314),s=null,c={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){s?"production"!==e.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a(!1):void 0,s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var n=!1;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];c.hasOwnProperty(i)&&c[i]===o||(c[i]?"production"!==e.env.NODE_ENV?a(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",i):a(!1):void 0,c[i]=o,n=!0)}n&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var t in c)c.hasOwnProperty(t)&&delete c[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=l}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){return t===g.topMouseUp||t===g.topTouchEnd||t===g.topTouchCancel}function i(t){return t===g.topMouseMove||t===g.topTouchMove}function o(t){return t===g.topMouseDown||t===g.topTouchStart}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=y.Mount.getNode(r),e?f.invokeGuardedCallbackWithCatch(i,n,t,r):f.invokeGuardedCallback(i,n,t,r),t.currentTarget=null}function s(t,n){var r=t._dispatchListeners,i=t._dispatchIDs;if("production"!==e.env.NODE_ENV&&p(t),Array.isArray(r))for(var o=0;o<r.length&&!t.isPropagationStopped();o++)a(t,n,r[o],i[o]);else r&&a(t,n,r,i);t._dispatchListeners=null,t._dispatchIDs=null}function c(t){var n=t._dispatchListeners,r=t._dispatchIDs;if("production"!==e.env.NODE_ENV&&p(t),Array.isArray(n)){for(var i=0;i<n.length&&!t.isPropagationStopped();i++)if(n[i](t,r[i]))return r[i]}else if(n&&n(t,r))return r;return null}function l(t){var e=c(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function u(t){"production"!==e.env.NODE_ENV&&p(t);var n=t._dispatchListeners,r=t._dispatchIDs;Array.isArray(n)?"production"!==e.env.NODE_ENV?m(!1,"executeDirectDispatch(...): Invalid `event`."):m(!1):void 0;var i=n?n(t,r):null;return t._dispatchListeners=null,t._dispatchIDs=null,i}function h(t){return!!t._dispatchListeners}var p,d=n(331),f=n(335),m=n(314),v=n(326),y={Mount:null,injectMount:function(t){y.Mount=t,"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?v(t&&t.getNode&&t.getID,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode or getID."):void 0)}},g=d.topLevelTypes;"production"!==e.env.NODE_ENV&&(p=function(t){var n=t._dispatchListeners,r=t._dispatchIDs,i=Array.isArray(n),o=Array.isArray(r),a=o?r.length:r?1:0,s=i?n.length:n?1:0;"production"!==e.env.NODE_ENV?v(o===i&&a===s,"EventPluginUtils: Invalid `event`."):void 0});var x={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:u,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,getNode:function(t){return y.Mount.getNode(t)},getID:function(t){return y.Mount.getID(t)},injection:y};t.exports=x}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function n(t,e,n,i){try{return e(n,i)}catch(o){return void(null===r&&(r=o))}}var r=null,i={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var t=r;throw r=null,t}}};if("production"!==e.env.NODE_ENV&&"undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var o=document.createElement("react");i.invokeGuardedCallback=function(t,e,n,r){var i=e.bind(null,n,r),a="react-"+t;o.addEventListener(a,i,!1);var s=document.createEvent("Event");s.initEvent(a,!1,!1),o.dispatchEvent(s),o.removeEventListener(a,i,!1)}}t.exports=i}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,n){if(null==n?"production"!==e.env.NODE_ENV?i(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):i(!1):void 0,null==t)return n;var r=Array.isArray(t),o=Array.isArray(n);return r&&o?(t.push.apply(t,n),t):r?(t.push(n),t):o?[t].concat(n):[t,n]}var i=n(314);t.exports=r}).call(e,n(4))},function(t,e){"use strict";var n=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)};t.exports=n},function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(332),o={handleTopLevel:function(t,e,n,o,a){var s=i.extractEvents(t,e,n,o,a);r(s)}};t.exports=o},function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e){"use strict";function n(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(t),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var a=Object(o);for(var s in a)r.call(a,s)&&(n[s]=a[s])}}return n}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(310);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},function(t,e){"use strict";var n={useCreateElement:!1};t.exports=n},function(t,e,n){(function(e){"use strict";var r=n(306),i=n(340),o=n(344),a="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,s={key:!0,ref:!0,__self:!0,__source:!0},c=function(t,n,r,i,s,c,l){var u={$$typeof:a,type:t,key:n,ref:r,props:l,_owner:c};return"production"!==e.env.NODE_ENV&&(u._store={},o?(Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s})):(u._store.validated=!1,u._self=i,u._source=s),Object.freeze(u.props),Object.freeze(u)),u};c.createElement=function(t,e,n){var i,o={},a=null,l=null,u=null,h=null;if(null!=e){l=void 0===e.ref?null:e.ref,a=void 0===e.key?null:""+e.key,u=void 0===e.__self?null:e.__self,h=void 0===e.__source?null:e.__source;for(i in e)e.hasOwnProperty(i)&&!s.hasOwnProperty(i)&&(o[i]=e[i])}var p=arguments.length-2;if(1===p)o.children=n;else if(p>1){for(var d=Array(p),f=0;f<p;f++)d[f]=arguments[f+2];o.children=d}if(t&&t.defaultProps){var m=t.defaultProps;for(i in m)"undefined"==typeof o[i]&&(o[i]=m[i])}return c(t,a,l,u,h,r.current,o)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){var n=c(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},c.cloneAndReplaceProps=function(t,n){var r=c(t.type,t.key,t.ref,t._self,t._source,t._owner,n);return"production"!==e.env.NODE_ENV&&(r._store.validated=t._store.validated),r},c.cloneElement=function(t,e,n){var o,a=i({},t.props),l=t.key,u=t.ref,h=t._self,p=t._source,d=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,d=r.current),void 0!==e.key&&(l=""+e.key);for(o in e)e.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(a[o]=e[o])}var f=arguments.length-2;if(1===f)a.children=n;else if(f>1){for(var m=Array(f),v=0;v<f;v++)m[v]=arguments[v+2];a.children=m}return c(t.type,l,u,h,p,d,a)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===a},t.exports=c}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var n=!1;if("production"!==e.env.NODE_ENV)try{Object.defineProperty({},"x",{get:function(){}}),n=!0}catch(r){}t.exports=n}).call(e,n(4))},function(t,e){"use strict";function n(t){return!!o[t]}function r(t){o[t]=!0}function i(t){delete o[t]}var o={},a={isNullComponentID:n,registerNullComponentID:r,deregisterNullComponentID:i};t.exports=a},function(t,e,n){(function(e){"use strict";function r(t){return d+t.toString(36)}function i(t,e){return t.charAt(e)===d||e===t.length}function o(t){return""===t||t.charAt(0)===d&&t.charAt(t.length-1)!==d}function a(t,e){return 0===e.indexOf(t)&&i(e,t.length)}function s(t){return t?t.substr(0,t.lastIndexOf(d)):""}function c(t,n){if(o(t)&&o(n)?void 0:"production"!==e.env.NODE_ENV?p(!1,"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",t,n):p(!1),a(t,n)?void 0:"production"!==e.env.NODE_ENV?p(!1,"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",t,n):p(!1),t===n)return t;var r,s=t.length+f;for(r=s;r<n.length&&!i(n,r);r++);return n.substr(0,r)}function l(t,n){var r=Math.min(t.length,n.length);if(0===r)return"";for(var a=0,s=0;s<=r;s++)if(i(t,s)&&i(n,s))a=s;else if(t.charAt(s)!==n.charAt(s))break;var c=t.substr(0,a);return o(c)?void 0:"production"!==e.env.NODE_ENV?p(!1,"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",t,n,c):p(!1),c}function u(t,n,r,i,o,l){t=t||"",n=n||"",t===n?"production"!==e.env.NODE_ENV?p(!1,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",t):p(!1):void 0;var u=a(n,t);u||a(t,n)?void 0:"production"!==e.env.NODE_ENV?p(!1,"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",t,n):p(!1);for(var h=0,d=u?s:c,f=t;;f=d(f,n)){var v;if(o&&f===t||l&&f===n||(v=r(f,u,i)),v===!1||f===n)break;h++<m?void 0:"production"!==e.env.NODE_ENV?p(!1,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",t,n,f):p(!1)}}var h=n(347),p=n(314),d=".",f=d.length,m=1e4,v={createReactRootID:function(){return r(h.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===d&&t.length>1){var e=t.indexOf(d,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,r,i){var o=l(t,e);o!==t&&u(t,o,n,r,!1,!0),o!==e&&u(o,e,n,i,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(u("",t,e,n,!0,!1),u(t,"",e,n,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,n){t&&(u("",t,e,n,!0,!0),u(t,"",e,n,!0,!0))},traverseAncestors:function(t,e,n){u("",t,e,n,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:c,isAncestorIDOf:a,SEPARATOR:d};t.exports=v}).call(e,n(4))},function(t,e){"use strict";var n={injectCreateReactRootIndex:function(t){r.createReactRootIndex=t}},r={createReactRootIndex:null,injection:n};t.exports=r},function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e,n){"use strict";var r=n(350),i=/\/?>/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return t.replace(i," "+o.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(o.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(t);return i===n}};t.exports=o},function(t,e){"use strict";function n(t){for(var e=1,n=0,i=0,o=t.length,a=o&-4;i<a;){for(;i<Math.min(i+4096,a);i+=4)n+=(e+=t.charCodeAt(i))+(e+=t.charCodeAt(i+1))+(e+=t.charCodeAt(i+2))+(e+=t.charCodeAt(i+3));e%=r,n%=r}for(;i<o;i++)n+=e+=t.charCodeAt(i);return e%=r,n%=r,e|n<<16}var r=65521;t.exports=n},function(t,e,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(352),o={mountComponent:function(t,e,n,i){var o=t.mountComponent(e,n,i);return t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t),o},unmountComponent:function(t){i.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e){t.performUpdateIfNecessary(e)}};t.exports=o},function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(353),a={};a.attachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null===t||t===!1,r=null===e||e===!1;return n||r||e._owner!==t._owner||e.ref!==t.ref},a.detachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&i(n,t,e._owner)}},t.exports=a},function(t,e,n){(function(e){"use strict";var r=n(314),i={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,n,o){i.isValidOwner(o)?void 0:"production"!==e.env.NODE_ENV?r(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):r(!1),o.attachRef(n,t)},removeComponentAsRefFrom:function(t,n,o){i.isValidOwner(o)?void 0:"production"!==e.env.NODE_ENV?r(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):r(!1),o.getPublicInstance().refs[n]===t.getPublicInstance()&&o.detachRef(n)}};t.exports=i}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){c.enqueueUpdate(t)}function i(t,n){var r=s.get(t);return r?("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?h(null==o.current,"%s(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state.",n):void 0),r):("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?h(!n,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",n,n,t.constructor.displayName):void 0),null)}var o=n(306),a=n(343),s=n(348),c=n(355),l=n(340),u=n(314),h=n(326),p={isMounted:function(t){if("production"!==e.env.NODE_ENV){var n=o.current;null!==n&&("production"!==e.env.NODE_ENV?h(n._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):void 0,n._warnedAboutRefsInRender=!0)}var r=s.get(t);return!!r&&!!r._renderedComponent},enqueueCallback:function(t,n){"function"!=typeof n?"production"!==e.env.NODE_ENV?u(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):u(!1):void 0;var o=i(t);return o?(o._pendingCallbacks?o._pendingCallbacks.push(n):o._pendingCallbacks=[n],void r(o)):null},enqueueCallbackInternal:function(t,n){"function"!=typeof n?"production"!==e.env.NODE_ENV?u(!1,"enqueueCallback(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."):u(!1):void 0,t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],r(t)},enqueueForceUpdate:function(t){var e=i(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=i(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){var n=i(t,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(e),r(n)}},enqueueSetProps:function(t,e){var n=i(t,"setProps");n&&p.enqueueSetPropsInternal(n,e)},enqueueSetPropsInternal:function(t,n){var i=t._topLevelWrapper;i?void 0:"production"!==e.env.NODE_ENV?u(!1,"setProps(...): You called `setProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):u(!1);var o=i._pendingElement||i._currentElement,s=o.props,c=l({},s.props,n);i._pendingElement=a.cloneAndReplaceProps(o,a.cloneAndReplaceProps(s,c)),r(i)},enqueueReplaceProps:function(t,e){var n=i(t,"replaceProps");n&&p.enqueueReplacePropsInternal(n,e)},enqueueReplacePropsInternal:function(t,n){var i=t._topLevelWrapper;i?void 0:"production"!==e.env.NODE_ENV?u(!1,"replaceProps(...): You called `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."):u(!1);var o=i._pendingElement||i._currentElement,s=o.props;i._pendingElement=a.cloneAndReplaceProps(o,a.cloneAndReplaceProps(s,n)),r(i)},enqueueElementInternal:function(t,e){t._pendingElement=e,r(t)}};t.exports=p}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){A.ReactReconcileTransaction&&_?void 0:"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):v(!1)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=u.getPooled(),this.reconcileTransaction=A.ReactReconcileTransaction.getPooled(!1)}function o(t,e,n,i,o,a){r(),_.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var n=t.dirtyComponentsLength;n!==y.length?"production"!==e.env.NODE_ENV?v(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",n,y.length):v(!1):void 0,
y.sort(a);for(var r=0;r<n;r++){var i=y[r],o=i._pendingCallbacks;if(i._pendingCallbacks=null,d.performUpdateIfNecessary(i,t.reconcileTransaction),o)for(var s=0;s<o.length;s++)t.callbackQueue.enqueue(o[s],i.getPublicInstance())}}function c(t){return r(),_.isBatchingUpdates?void y.push(t):void _.batchedUpdates(c,t)}function l(t,n){_.isBatchingUpdates?void 0:"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):v(!1),g.enqueue(t,n),x=!0}var u=n(356),h=n(357),p=n(319),d=n(351),f=n(358),m=n(340),v=n(314),y=[],g=u.getPooled(),x=!1,_=null,b={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),S()):y.length=0}},w={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},E=[b,w];m(i.prototype,f.Mixin,{getTransactionWrappers:function(){return E},destructor:function(){this.dirtyComponentsLength=null,u.release(this.callbackQueue),this.callbackQueue=null,A.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),h.addPoolingTo(i);var S=function(){for(;y.length||x;){if(y.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(x){x=!1;var e=g;g=u.getPooled(),e.notifyAll(),u.release(e)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var M={injectReconcileTransaction:function(t){t?void 0:"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates: must provide a reconcile transaction class"):v(!1),A.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batching strategy"):v(!1),"function"!=typeof t.batchedUpdates?"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batchedUpdates() function"):v(!1):void 0,"boolean"!=typeof t.isBatchingUpdates?"production"!==e.env.NODE_ENV?v(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):v(!1):void 0,_=t}},A={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:c,flushBatchedUpdates:S,injection:M,asap:l};t.exports=A}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(357),o=n(340),a=n(314);o(r.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,n=this._contexts;if(t){t.length!==n.length?"production"!==e.env.NODE_ENV?a(!1,"Mismatched list of contexts in callback queue"):a(!1):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<t.length;r++)t[r].call(n[r]);t.length=0,n.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var r=n(314),i=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},c=function(t,e,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,r,i),a}return new o(t,e,n,r,i)},l=function(t){var n=this;t instanceof n?void 0:"production"!==e.env.NODE_ENV?r(!1,"Trying to release an instance into a pool of a different type."):r(!1),t.destructor(),n.instancePool.length<n.poolSize&&n.instancePool.push(t)},u=10,h=i,p=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||h,n.poolSize||(n.poolSize=u),n.release=l,n},d={addPoolingTo:p,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:c};t.exports=d}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var r=n(314),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,n,i,o,a,s,c,l){this.isInTransaction()?"production"!==e.env.NODE_ENV?r(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r(!1):void 0;var u,h;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),h=t.call(n,i,o,a,s,c,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return h},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(t){this.isInTransaction()?void 0:"production"!==e.env.NODE_ENV?r(!1,"Transaction.closeAll(): Cannot close transaction when none are open."):r(!1);for(var n=this.transactionWrappers,i=t;i<n.length;i++){var a,s=n[i],c=this.wrapperInitData[i];try{a=!0,c!==o.OBSERVED_ERROR&&s.close&&s.close.call(this,c),a=!1}finally{if(a)try{this.closeAll(i+1)}catch(l){}}}this.wrapperInitData.length=0}},o={Mixin:i,OBSERVED_ERROR:{}};t.exports=o}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&Object.freeze(n),t.exports=n}).call(e,n(4))},function(t,e,n){"use strict";function r(t,e){var n=!0;t:for(;n;){var r=t,o=e;if(n=!1,r&&o){if(r===o)return!0;if(i(r))return!1;if(i(o)){t=r,e=o.parentNode,n=!0;continue t}return r.contains?r.contains(o):!!r.compareDocumentPosition&&!!(16&r.compareDocumentPosition(o))}return!1}}var i=n(361);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(362);t.exports=r},function(t,e){"use strict";function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e,n){(function(e){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t){var n;if(null===t||t===!1)n=new s(o);else if("object"==typeof t){var a=t;!a||"function"!=typeof a.type&&"string"!=typeof a.type?"production"!==e.env.NODE_ENV?u(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==a.type?a.type:typeof a.type,r(a._owner)):u(!1):void 0,n="string"==typeof a.type?c.createInternalComponent(a):i(a.type)?new a.type(a):new p}else"string"==typeof t||"number"==typeof t?n=c.createInstanceForText(t):"production"!==e.env.NODE_ENV?u(!1,"Encountered invalid React node of type %s",typeof t):u(!1);return"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?h("function"==typeof n.construct&&"function"==typeof n.mountComponent&&"function"==typeof n.receiveComponent&&"function"==typeof n.unmountComponent,"Only React Components can be mounted."):void 0),n.construct(t),n._mountIndex=0,n._mountImage=null,"production"!==e.env.NODE_ENV&&(n._isOwnerNecessary=!1,n._warnedAboutRefsInRender=!1),"production"!==e.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(n),n}var a=n(364),s=n(369),c=n(370),l=n(340),u=n(314),h=n(326),p=function(){};l(p.prototype,a.Mixin,{_instantiateReactComponent:o}),t.exports=o}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}function i(t){}var o=n(365),a=n(306),s=n(343),c=n(348),l=n(319),u=n(366),h=n(367),p=n(351),d=n(354),f=n(340),m=n(359),v=n(314),y=n(368),g=n(326);i.prototype.render=function(){var t=c.get(this)._currentElement.type;return t(this.props,this.context,this.updater)};var x=1,_={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(t,n,r){this._context=r,this._mountOrder=x++,this._rootNodeID=t;var o,l,u=this._processProps(this._currentElement.props),h=this._processContext(r),f=this._currentElement.type,y="prototype"in f;if(y)if("production"!==e.env.NODE_ENV){a.current=this;try{o=new f(u,h,d)}finally{a.current=null}}else o=new f(u,h,d);y&&null!==o&&o!==!1&&!s.isValidElement(o)||(l=o,o=new i(f)),"production"!==e.env.NODE_ENV&&(null==o.render?"production"!==e.env.NODE_ENV?g(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`, returned null/false from a stateless component, or tried to render an element whose type is a function that isn't a React component.",f.displayName||f.name||"Component"):void 0:"production"!==e.env.NODE_ENV?g(f.prototype&&f.prototype.isReactComponent||!y||!(o instanceof f),"%s(...): React component classes must extend React.Component.",f.displayName||f.name||"Component"):void 0),o.props=u,o.context=h,o.refs=m,o.updater=d,this._instance=o,c.set(o,this),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?g(!o.getInitialState||o.getInitialState.isReactClassApproved,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"):void 0,"production"!==e.env.NODE_ENV?g(!o.getDefaultProps||o.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0,"production"!==e.env.NODE_ENV?g(!o.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"):void 0,"production"!==e.env.NODE_ENV?g(!o.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"):void 0,"production"!==e.env.NODE_ENV?g("function"!=typeof o.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"):void 0,"production"!==e.env.NODE_ENV?g("function"!=typeof o.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0,"production"!==e.env.NODE_ENV?g("function"!=typeof o.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0);var _=o.state;void 0===_&&(o.state=_=null),"object"!=typeof _||Array.isArray(_)?"production"!==e.env.NODE_ENV?v(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):v(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===l&&(l=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(l);var b=p.mountComponent(this._renderedComponent,t,n,this._processChildContext(r));return o.componentDidMount&&n.getReactMountReady().enqueue(o.componentDidMount,o),b},unmountComponent:function(){var t=this._instance;t.componentWillUnmount&&t.componentWillUnmount(),p.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,c.remove(t)},_maskContext:function(t){var e=null,n=this._currentElement.type,r=n.contextTypes;if(!r)return m;e={};for(var i in r)e[i]=t[i];return e},_processContext:function(t){var n=this._maskContext(t);if("production"!==e.env.NODE_ENV){var r=this._currentElement.type;r.contextTypes&&this._checkPropTypes(r.contextTypes,n,u.context)}return n},_processChildContext:function(t){var n=this._currentElement.type,r=this._instance,i=r.getChildContext&&r.getChildContext();if(i){"object"!=typeof n.childContextTypes?"production"!==e.env.NODE_ENV?v(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):v(!1):void 0,"production"!==e.env.NODE_ENV&&this._checkPropTypes(n.childContextTypes,i,u.childContext);for(var o in i)o in n.childContextTypes?void 0:"production"!==e.env.NODE_ENV?v(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",o):v(!1);return f({},t,i)}return t},_processProps:function(t){if("production"!==e.env.NODE_ENV){var n=this._currentElement.type;n.propTypes&&this._checkPropTypes(n.propTypes,t,u.prop)}return t},_checkPropTypes:function(t,n,i){var o=this.getName();for(var a in t)if(t.hasOwnProperty(a)){var s;try{"function"!=typeof t[a]?"production"!==e.env.NODE_ENV?v(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",o||"React class",h[i],a):v(!1):void 0,s=t[a](n,a,o,i)}catch(c){s=c}if(s instanceof Error){var l=r(this);i===u.prop?"production"!==e.env.NODE_ENV?g(!1,"Failed Composite propType: %s%s",s.message,l):void 0:"production"!==e.env.NODE_ENV?g(!1,"Failed Context Types: %s%s",s.message,l):void 0}}},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&p.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(t,n,r,i,o){var a,s=this._instance,c=this._context===o?s.context:this._processContext(o);n===r?a=r.props:(a=this._processProps(r.props),s.componentWillReceiveProps&&s.componentWillReceiveProps(a,c));var l=this._processPendingState(a,c),u=this._pendingForceUpdate||!s.shouldComponentUpdate||s.shouldComponentUpdate(a,l,c);"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?g("undefined"!=typeof u,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0),u?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,a,l,c,t,o)):(this._currentElement=r,this._context=o,s.props=a,s.state=l,s.context=c)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=f({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];f(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a,s,c,l=this._instance,u=Boolean(l.componentDidUpdate);u&&(a=l.props,s=l.state,c=l.context),l.componentWillUpdate&&l.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,l.props=e,l.state=n,l.context=r,this._updateRenderedComponent(i,o),u&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,c),l)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(y(r,i))p.receiveComponent(n,i,t,this._processChildContext(e));else{var o=this._rootNodeID,a=n._rootNodeID;p.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=p.mountComponent(this._renderedComponent,o,t,this._processChildContext(e));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(t,e){o.replaceNodeWithMarkupByID(t,e)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,n=t.render();return"production"!==e.env.NODE_ENV&&"undefined"==typeof n&&t.render._isMockFunction&&(n=null),n},_renderValidatedComponent:function(){var t;a.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}return null===t||t===!1||s.isValidElement(t)?void 0:"production"!==e.env.NODE_ENV?v(!1,"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):v(!1),t},attachRef:function(t,n){var r=this.getPublicInstance();null==r?"production"!==e.env.NODE_ENV?v(!1,"Stateless function components cannot have refs."):v(!1):void 0;var i=n.getPublicInstance();if("production"!==e.env.NODE_ENV){var o=n&&n.getName?n.getName():"a component";"production"!==e.env.NODE_ENV?g(null!=i,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',t,o,this.getName()):void 0}var a=r.refs===m?r.refs={}:r.refs;a[t]=i},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return t instanceof i?null:t},_instantiateReactComponent:null};l.measureMethods(_,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var b={Mixin:_};t.exports=b}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var r=n(314),i=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i?"production"!==e.env.NODE_ENV?r(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):r(!1):void 0,o.unmountIDFromEnvironment=t.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o}).call(e,n(4))},function(t,e,n){"use strict";var r=n(318),i=r({prop:null,context:null,childContext:null});t.exports=i},function(t,e,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),t.exports=n}).call(e,n(4))},function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e,n){"use strict";function r(){a.registerNullComponentID(this._rootNodeID)}var i,o=n(343),a=n(345),s=n(351),c=n(340),l={injectEmptyComponent:function(t){i=o.createElement(t)}},u=function(t){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=t(i)};c(u.prototype,{construct:function(t){},mountComponent:function(t,e,n){return e.getReactMountReady().enqueue(r,this),this._rootNodeID=t,s.mountComponent(this._renderedComponent,t,e,n)},receiveComponent:function(){},unmountComponent:function(t,e,n){s.unmountComponent(this._renderedComponent),a.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),u.injection=l,t.exports=u},function(t,e,n){(function(e){"use strict";function r(t){if("function"==typeof t.type)return t.type;var e=t.type,n=h[e];return null==n&&(h[e]=n=l(e)),n}function i(t){return u?void 0:"production"!==e.env.NODE_ENV?c(!1,"There is no registered component for the tag %s",t.type):c(!1),new u(t.type,t.props)}function o(t){return new p(t)}function a(t){return t instanceof p}var s=n(340),c=n(314),l=null,u=null,h={},p=null,d={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){p=t},injectComponentClasses:function(t){s(h,t)}},f={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:o,isTextComponent:a,injection:d};t.exports=f}).call(e,n(4))},function(t,e,n){(function(e){"use strict";var r=n(340),i=n(316),o=n(326),a=i;if("production"!==e.env.NODE_ENV){var s=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],c=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],l=c.concat(["button"]),u=["dd","dt","li","option","optgroup","p","rp","rt"],h={parentTag:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},p=function(t,e,n){var i=r({},t||h),o={tag:e,instance:n};return c.indexOf(e)!==-1&&(i.aTagInScope=null,i.buttonTagInScope=null,i.nobrTagInScope=null),l.indexOf(e)!==-1&&(i.pTagInButtonScope=null),s.indexOf(e)!==-1&&"address"!==e&&"div"!==e&&"p"!==e&&(i.listItemTagAutoclosing=null,i.dlItemTagAutoclosing=null),i.parentTag=o,"form"===e&&(i.formTag=o),"a"===e&&(i.aTagInScope=o),"button"===e&&(i.buttonTagInScope=o),"nobr"===e&&(i.nobrTagInScope=o),"p"===e&&(i.pTagInButtonScope=o),"li"===e&&(i.listItemTagAutoclosing=o),"dd"!==e&&"dt"!==e||(i.dlItemTagAutoclosing=o),i},d=function(t,e){switch(e){case"select":return"option"===t||"optgroup"===t||"#text"===t;case"optgroup":return"option"===t||"#text"===t;case"option":return"#text"===t;case"tr":return"th"===t||"td"===t||"style"===t||"script"===t||"template"===t;case"tbody":case"thead":case"tfoot":return"tr"===t||"style"===t||"script"===t||"template"===t;case"colgroup":return"col"===t||"template"===t;case"table":return"caption"===t||"colgroup"===t||"tbody"===t||"tfoot"===t||"thead"===t||"style"===t||"script"===t||"template"===t;case"head":return"base"===t||"basefont"===t||"bgsound"===t||"link"===t||"meta"===t||"title"===t||"noscript"===t||"noframes"===t||"style"===t||"script"===t||"template"===t;case"html":return"head"===t||"body"===t}switch(t){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e;case"rp":case"rt":return u.indexOf(e)===-1;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==e}return!0},f=function(t,e){switch(t){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return e.pTagInButtonScope;case"form":return e.formTag||e.pTagInButtonScope;case"li":return e.listItemTagAutoclosing;case"dd":case"dt":return e.dlItemTagAutoclosing;case"button":return e.buttonTagInScope;case"a":return e.aTagInScope;case"nobr":return e.nobrTagInScope}return null},m=function(t){if(!t)return[];var e=[];do e.push(t);while(t=t._currentElement._owner);return e.reverse(),e},v={};a=function(t,n,r){r=r||h;var i=r.parentTag,a=i&&i.tag,s=d(t,a)?null:i,c=s?null:f(t,r),l=s||c;if(l){var u,p=l.tag,y=l.instance,g=n&&n._currentElement._owner,x=y&&y._currentElement._owner,_=m(g),b=m(x),w=Math.min(_.length,b.length),E=-1;for(u=0;u<w&&_[u]===b[u];u++)E=u;var S="(unknown)",M=_.slice(E+1).map(function(t){return t.getName()||S}),A=b.slice(E+1).map(function(t){return t.getName()||S}),C=[].concat(E!==-1?_[E].getName()||S:[],A,p,c?["..."]:[],M,t).join(" > "),T=!!s+"|"+t+"|"+p+"|"+C;if(v[T])return;if(v[T]=!0,s){var N="";"table"===p&&"tr"===t&&(N+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),"production"!==e.env.NODE_ENV?o(!1,"validateDOMNesting(...): <%s> cannot appear as a child of <%s>. See %s.%s",t,p,C,N):void 0}else"production"!==e.env.NODE_ENV?o(!1,"validateDOMNesting(...): <%s> cannot appear as a descendant of <%s>. See %s.",t,p,C):void 0}},a.ancestorInfoContextKey="__validateDOMNesting_ancestorInfo$"+Math.random().toString(36).slice(2),a.updatedAncestorInfo=p,a.isTagValidInContext=function(t,e){e=e||h;var n=e.parentTag,r=n&&n.tag;return d(t,r)&&!f(t,e)}}t.exports=a}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){if(!M&&(M=!0,y.EventEmitter.injectReactEventListener(v),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginHub.injectInstanceHandle(g),y.EventPluginHub.injectMount(x),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:c,ChangeEventPlugin:o,SelectEventPlugin:b,BeforeInputEventPlugin:i}),y.NativeComponent.injectGenericComponentClass(f),y.NativeComponent.injectTextComponentClass(m),y.Class.injectMixin(h),y.DOMProperty.injectDOMPropertyConfig(u),y.DOMProperty.injectDOMPropertyConfig(S),y.EmptyComponent.injectEmptyComponent("noscript"),y.Updates.injectReconcileTransaction(_),y.Updates.injectBatchingStrategy(d),y.RootIndex.injectCreateReactRootIndex(l.canUseDOM?a.createReactRootIndex:w.createReactRootIndex),y.Component.injectEnvironment(p),"production"!==e.env.NODE_ENV)){var t=l.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var r=n(443);r.start()}}}var i=n(373),o=n(381),a=n(384),s=n(385),c=n(386),l=n(310),u=n(390),h=n(391),p=n(327),d=n(393),f=n(394),m=n(307),v=n(419),y=n(422),g=n(346),x=n(329),_=n(426),b=n(431),w=n(432),E=n(433),S=n(442),M=!1;t.exports={inject:r}}).call(e,n(4))},function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case T.topCompositionStart:return N.compositionStart;case T.topCompositionEnd:return N.compositionEnd;case T.topCompositionUpdate:return N.compositionUpdate}}function a(t,e){return t===T.topKeyDown&&e.keyCode===b}function s(t,e){switch(t){case T.topKeyUp:return _.indexOf(e.keyCode)!==-1;case T.topKeyDown:return e.keyCode!==b;case T.topKeyPress:case T.topMouseDown:case T.topBlur:return!0;default:return!1}}function c(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function l(t,e,n,r,i){var l,u;if(w?l=o(t):O?s(t,r)&&(l=N.compositionEnd):a(t,r)&&(l=N.compositionStart),!l)return null;M&&(O||l!==N.compositionStart?l===N.compositionEnd&&O&&(u=O.getData()):O=v.getPooled(e));var h=y.getPooled(l,n,r,i);if(u)h.data=u;else{var p=c(r);null!==p&&(h.data=p)}return f.accumulateTwoPhaseDispatches(h),h}function u(t,e){switch(t){case T.topCompositionEnd:return c(e);case T.topKeyPress:var n=e.which;return n!==A?null:(R=!0,C);case T.topTextInput:var r=e.data;return r===C&&R?null:r;default:return null}}function h(t,e){if(O){if(t===T.topCompositionEnd||s(t,e)){var n=O.getData();return v.release(O),O=null,n}return null}switch(t){case T.topPaste:return null;case T.topKeyPress:return e.which&&!i(e)?String.fromCharCode(e.which):null;case T.topCompositionEnd:return M?null:e.data;default:return null}}function p(t,e,n,r,i){var o;if(o=S?u(t,r):h(t,r),!o)return null;var a=g.getPooled(N.beforeInput,n,r,i);return a.data=o,f.accumulateTwoPhaseDispatches(a),a}var d=n(331),f=n(374),m=n(310),v=n(375),y=n(377),g=n(379),x=n(380),_=[9,13,27,32],b=229,w=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var S=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),M=m.canUseDOM&&(!w||E&&E>8&&E<=11),A=32,C=String.fromCharCode(A),T=d.topLevelTypes,N={beforeInput:{phasedRegistrationNames:{bubbled:x({onBeforeInput:null}),captured:x({onBeforeInputCapture:null})},dependencies:[T.topCompositionEnd,T.topKeyPress,T.topTextInput,T.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:x({onCompositionEnd:null}),captured:x({onCompositionEndCapture:null})},dependencies:[T.topBlur,T.topCompositionEnd,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:x({onCompositionStart:null}),captured:x({onCompositionStartCapture:null})},dependencies:[T.topBlur,T.topCompositionStart,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:x({onCompositionUpdate:null}),captured:x({onCompositionUpdateCapture:null})},dependencies:[T.topBlur,T.topCompositionUpdate,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]}},R=!1,O=null,L={eventTypes:N,extractEvents:function(t,e,n,r,i){return[l(t,e,n,r,i),p(t,e,n,r,i)]}};t.exports=L},function(t,e,n){(function(e){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return x(t,r)}function i(t,n,i){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?m(t,"Dispatching id must not be null"):void 0);var o=n?g.bubbled:g.captured,a=r(t,i,o);a&&(i._dispatchListeners=v(i._dispatchListeners,a),i._dispatchIDs=v(i._dispatchIDs,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,i,t)}function a(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(t.dispatchMarker,i,t)}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=x(t,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchIDs=v(n._dispatchIDs,t))}}function c(t){t&&t.dispatchConfig.registrationName&&s(t.dispatchMarker,null,t)}function l(t){y(t,o)}function u(t){y(t,a)}function h(t,e,n,r){f.injection.getInstanceHandle().traverseEnterLeave(n,r,s,t,e)}function p(t){y(t,c)}var d=n(331),f=n(332),m=n(326),v=n(336),y=n(337),g=d.PropagationPhases,x=f.getListener,_={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:u,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:h};t.exports=_}).call(e,n(4))},function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(357),o=n(340),a=n(376);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(310),o=null;
t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(378),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var c=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;c?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse}var i=n(357),o=n(340),a=n(316),s=n(326),c={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?s(t,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `preventDefault` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."):void 0),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?s(t,"This synthetic event is reused for performance reasons. If you're seeing this, you're calling `stopPropagation` on a released/nullified synthetic event. This is a no-op. See https://fb.me/react-event-pooling for more information."):void 0),t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=c,r.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);o(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=o({},n.Interface,e),t.augmentClass=n.augmentClass,i.addPoolingTo(t,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),t.exports=r}).call(e,n(4))},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(378),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e){"use strict";var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=n},function(t,e,n){"use strict";function r(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function i(t){var e=E.getPooled(N.change,O,t,S(t));_.accumulateTwoPhaseDispatches(e),w.batchedUpdates(o,e)}function o(t){x.enqueueEvents(t),x.processEventQueue(!1)}function a(t,e){R=t,O=e,R.attachEvent("onchange",i)}function s(){R&&(R.detachEvent("onchange",i),R=null,O=null)}function c(t,e,n){if(t===T.topChange)return n}function l(t,e,n){t===T.topFocus?(s(),a(e,n)):t===T.topBlur&&s()}function u(t,e){R=t,O=e,L=t.value,P=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(R,"value",I),R.attachEvent("onpropertychange",p)}function h(){R&&(delete R.value,R.detachEvent("onpropertychange",p),R=null,O=null,L=null,P=null)}function p(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==L&&(L=e,i(t))}}function d(t,e,n){if(t===T.topInput)return n}function f(t,e,n){t===T.topFocus?(h(),u(e,n)):t===T.topBlur&&h()}function m(t,e,n){if((t===T.topSelectionChange||t===T.topKeyUp||t===T.topKeyDown)&&R&&R.value!==L)return L=R.value,O}function v(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function y(t,e,n){if(t===T.topClick)return n}var g=n(331),x=n(332),_=n(374),b=n(310),w=n(355),E=n(378),S=n(382),M=n(341),A=n(383),C=n(380),T=g.topLevelTypes,N={change:{phasedRegistrationNames:{bubbled:C({onChange:null}),captured:C({onChangeCapture:null})},dependencies:[T.topBlur,T.topChange,T.topClick,T.topFocus,T.topInput,T.topKeyDown,T.topKeyUp,T.topSelectionChange]}},R=null,O=null,L=null,P=null,k=!1;b.canUseDOM&&(k=M("change")&&(!("documentMode"in document)||document.documentMode>8));var D=!1;b.canUseDOM&&(D=M("input")&&(!("documentMode"in document)||document.documentMode>9));var I={get:function(){return P.get.call(this)},set:function(t){L=""+t,P.set.call(this,t)}},q={eventTypes:N,extractEvents:function(t,e,n,i,o){var a,s;if(r(e)?k?a=c:s=l:A(e)?D?a=d:(a=m,s=f):v(e)&&(a=y),a){var u=a(t,e,n);if(u){var h=E.getPooled(N.change,u,i,o);return h.type="change",_.accumulateTwoPhaseDispatches(h),h}}s&&s(t,e,n)}};t.exports=q},function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&r[t.type]||"textarea"===e)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};t.exports=r},function(t,e,n){"use strict";var r=n(380),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];t.exports=i},function(t,e,n){"use strict";var r=n(331),i=n(374),o=n(387),a=n(329),s=n(380),c=r.topLevelTypes,l=a.getFirstReactDOM,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[c.topMouseOut,c.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[c.topMouseOut,c.topMouseOver]}},h=[null,null],p={eventTypes:u,extractEvents:function(t,e,n,r,s){if(t===c.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(t!==c.topMouseOut&&t!==c.topMouseOver)return null;var p;if(e.window===e)p=e;else{var d=e.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var f,m,v="",y="";if(t===c.topMouseOut?(f=e,v=n,m=l(r.relatedTarget||r.toElement),m?y=a.getID(m):m=p,m=m||p):(f=p,m=e,y=n),f===m)return null;var g=o.getPooled(u.mouseLeave,v,r,s);g.type="mouseleave",g.target=f,g.relatedTarget=m;var x=o.getPooled(u.mouseEnter,y,r,s);return x.type="mouseenter",x.target=m,x.relatedTarget=f,i.accumulateEnterLeaveDispatches(g,x,v,y),h[0]=g,h[1]=x,h}};t.exports=p},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(388),o=n(339),a=n(389),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(378),o=n(382),a={view:function(t){if(t.view)return t.view;var e=o(t);if(null!=e&&e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=i[t];return!!r&&!!n[r]}function r(t){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},function(t,e,n){"use strict";var r,i=n(324),o=n(310),a=i.injection.MUST_USE_ATTRIBUTE,s=i.injection.MUST_USE_PROPERTY,c=i.injection.HAS_BOOLEAN_VALUE,l=i.injection.HAS_SIDE_EFFECTS,u=i.injection.HAS_NUMERIC_VALUE,h=i.injection.HAS_POSITIVE_NUMERIC_VALUE,p=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var d=document.implementation;r=d&&d.hasFeature&&d.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:a|c,allowTransparency:a,alt:null,async:c,autoComplete:null,autoPlay:c,capture:a|c,cellPadding:null,cellSpacing:null,charSet:a,challenge:a,checked:s|c,classID:a,className:r?a:s,cols:a|h,colSpan:null,content:null,contentEditable:null,contextMenu:a,controls:s|c,coords:null,crossOrigin:null,data:null,dateTime:a,"default":c,defer:c,dir:null,disabled:a|c,download:p,draggable:null,encType:null,form:a,formAction:a,formEncType:a,formMethod:a,formNoValidate:c,formTarget:a,frameBorder:a,headers:null,height:a,hidden:a|c,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,inputMode:a,integrity:null,is:a,keyParams:a,keyType:a,kind:null,label:null,lang:null,list:a,loop:s|c,low:null,manifest:a,marginHeight:null,marginWidth:null,max:null,maxLength:a,media:a,mediaGroup:null,method:null,min:null,minLength:a,multiple:s|c,muted:s|c,name:null,nonce:a,noValidate:c,open:c,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|c,rel:null,required:c,reversed:c,role:a,rows:a|h,rowSpan:null,sandbox:null,scope:null,scoped:c,scrolling:null,seamless:a|c,selected:s|c,shape:null,size:a|h,sizes:a,span:h,spellCheck:null,src:null,srcDoc:s,srcLang:null,srcSet:a,start:u,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|l,width:a,wmode:a,wrap:null,about:a,datatype:a,inlist:a,prefix:a,property:a,resource:a,"typeof":a,vocab:a,autoCapitalize:a,autoCorrect:a,autoSave:null,color:null,itemProp:a,itemScope:a|c,itemType:a,itemID:a,itemRef:a,results:null,security:a,unselectable:a},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=f},function(t,e,n){(function(e){"use strict";var r=n(348),i=n(392),o=n(326),a="_getDOMNodeDidWarn",s={getDOMNode:function(){return"production"!==e.env.NODE_ENV?o(this.constructor[a],"%s.getDOMNode(...) is deprecated. Please use ReactDOM.findDOMNode(instance) instead.",r.get(this).getName()||this.tagName||"Unknown"):void 0,this.constructor[a]=!0,i(this)}};t.exports=s}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){if("production"!==e.env.NODE_ENV){var n=i.current;null!==n&&("production"!==e.env.NODE_ENV?c(n._warnedAboutRefsInRender,"%s is accessing getDOMNode or findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",n.getName()||"A component"):void 0,n._warnedAboutRefsInRender=!0)}return null==t?null:1===t.nodeType?t:o.has(t)?a.getNodeFromInstance(t):(null!=t.render&&"function"==typeof t.render?"production"!==e.env.NODE_ENV?s(!1,"findDOMNode was called on an unmounted component."):s(!1):void 0,void("production"!==e.env.NODE_ENV?s(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(t)):s(!1)))}var i=n(306),o=n(348),a=n(329),s=n(314),c=n(326);t.exports=r}).call(e,n(4))},function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(355),o=n(358),a=n(340),s=n(316),c={initialize:s,close:function(){p.isBatchingUpdates=!1}},l={initialize:s,close:i.flushBatchedUpdates.bind(i)},u=[l,c];a(r.prototype,o.Mixin,{getTransactionWrappers:function(){return u}});var h=new r,p={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?t(e,n,r,i,o):h.perform(t,null,e,n,r,i,o)}};t.exports=p},function(t,e,n){(function(e){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(){if("production"!==e.env.NODE_ENV){var t=this._reactInternalComponent;"production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .getDOMNode() of a DOM node; instead, use the node directly.%s",r(t)):void 0}return this}function o(){var t=this._reactInternalComponent;return"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .isMounted() of a DOM node.%s",r(t)):void 0),!!t}function a(){if("production"!==e.env.NODE_ENV){var t=this._reactInternalComponent;"production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .setState(), .replaceState(), or .forceUpdate() of a DOM node. This is a no-op.%s",r(t)):void 0}}function s(t,n){var i=this._reactInternalComponent;"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .setProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",r(i)):void 0),i&&(q.enqueueSetPropsInternal(i,t),n&&q.enqueueCallbackInternal(i,n))}function c(t,n){var i=this._reactInternalComponent;"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .replaceProps() of a DOM node. Instead, call ReactDOM.render again at the top level.%s",r(i)):void 0),i&&(q.enqueueReplacePropsInternal(i,t),n&&q.enqueueCallbackInternal(i,n))}function l(t){if("object"==typeof t){if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";var e=[];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=/^[a-z$_][\w$_]*$/i.test(n)?n:JSON.stringify(n);e.push(r+": "+l(t[n]))}return"{"+e.join(", ")+"}"}return"string"==typeof t?JSON.stringify(t):"function"==typeof t?"[function object]":String(t)}function u(t,n,r){if(null!=t&&null!=n&&!W(t,n)){var i,o=r._tag,a=r._currentElement._owner;a&&(i=a.getName());var s=i+"|"+o;rt.hasOwnProperty(s)||(rt[s]=!0,"production"!==e.env.NODE_ENV?Z(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",o,a?"of `"+i+"`":"using <"+o+">",l(t),l(n)):void 0)}}function h(t,n){n&&("production"!==e.env.NODE_ENV&&st[t._tag]&&("production"!==e.env.NODE_ENV?Z(null==n.children&&null==n.dangerouslySetInnerHTML,"%s is a void element tag and must not have `children` or use `props.dangerouslySetInnerHTML`.%s",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=n.dangerouslySetInnerHTML&&(null!=n.children?"production"!==e.env.NODE_ENV?z(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):z(!1):void 0,"object"==typeof n.dangerouslySetInnerHTML&&et in n.dangerouslySetInnerHTML?void 0:"production"!==e.env.NODE_ENV?z(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):z(!1)),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?Z(null==n.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0,"production"!==e.env.NODE_ENV?Z(!n.contentEditable||null==n.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."):void 0),null!=n.style&&"object"!=typeof n.style?"production"!==e.env.NODE_ENV?z(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r(t)):z(!1):void 0)}function p(t,n,r,i){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?Z("onScroll"!==n||U("scroll",!0),"This browser doesn't support the `onScroll` event"):void 0);var o=k.findReactContainerForID(t);if(o){var a=o.nodeType===nt?o.ownerDocument:o;Y(n,a)}i.getReactMountReady().enqueue(d,{id:t,registrationName:n,listener:r})}function d(){var t=this;C.putListener(t.id,t.registrationName,t.listener)}function f(){var t=this;t._rootNodeID?void 0:"production"!==e.env.NODE_ENV?z(!1,"Must be mounted to trap events"):z(!1);var n=k.getNode(t._rootNodeID);switch(n?void 0:"production"!==e.env.NODE_ENV?z(!1,"trapBubbledEvent(...): Requires node to be rendered."):z(!1),t._tag){case"iframe":t._wrapperState.listeners=[C.trapBubbledEvent(A.topLevelTypes.topLoad,"load",n)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var r in it)it.hasOwnProperty(r)&&t._wrapperState.listeners.push(C.trapBubbledEvent(A.topLevelTypes[r],it[r],n));break;case"img":t._wrapperState.listeners=[C.trapBubbledEvent(A.topLevelTypes.topError,"error",n),C.trapBubbledEvent(A.topLevelTypes.topLoad,"load",n)];break;case"form":t._wrapperState.listeners=[C.trapBubbledEvent(A.topLevelTypes.topReset,"reset",n),C.trapBubbledEvent(A.topLevelTypes.topSubmit,"submit",n)]}}function m(){R.mountReadyWrapper(this)}function v(){L.postUpdateWrapper(this)}function y(t){ut.call(lt,t)||(ct.test(t)?void 0:"production"!==e.env.NODE_ENV?z(!1,"Invalid tag: %s",t):z(!1),lt[t]=!0)}function g(t,e){t=B({},t);var n=t[X.ancestorInfoContextKey];return t[X.ancestorInfoContextKey]=X.updatedAncestorInfo(n,e._tag,e),t}function x(t,e){return t.indexOf("-")>=0||null!=e.is}function _(t){y(t),this._tag=t.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null,"production"!==e.env.NODE_ENV&&(this._unprocessedContextDev=null,this._processedContextDev=null)}var b,w=n(395),E=n(397),S=n(324),M=n(323),A=n(331),C=n(330),T=n(327),N=n(405),R=n(406),O=n(410),L=n(413),P=n(414),k=n(329),D=n(415),I=n(319),q=n(354),B=n(340),V=n(344),F=n(322),z=n(314),U=n(341),j=n(380),H=n(320),G=n(321),W=n(418),X=n(371),Z=n(326),K=C.deleteListener,Y=C.listenTo,Q=C.registrationNameModules,J={string:!0,number:!0},$=j({children:null}),tt=j({style:null}),et=j({__html:null}),nt=1;"production"!==e.env.NODE_ENV&&(b={props:{enumerable:!1,get:function(){var t=this._reactInternalComponent;return"production"!==e.env.NODE_ENV?Z(!1,"ReactDOMComponent: Do not access .props of a DOM node; instead, recreate the props as `render` did originally or read the DOM properties/attributes directly from this node (e.g., this.refs.box.className).%s",r(t)):void 0,t._currentElement.props}}});var rt={},it={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ot={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},at={listing:!0,pre:!0,textarea:!0},st=B({menuitem:!0},ot),ct=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,lt={},ut={}.hasOwnProperty;_.displayName="ReactDOMComponent",_.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,n,r){this._rootNodeID=t;var i=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},n.getReactMountReady().enqueue(f,this);break;case"button":i=N.getNativeProps(this,i,r);break;case"input":R.mountWrapper(this,i,r),i=R.getNativeProps(this,i,r);break;case"option":O.mountWrapper(this,i,r),i=O.getNativeProps(this,i,r);break;case"select":L.mountWrapper(this,i,r),i=L.getNativeProps(this,i,r),r=L.processChildContext(this,i,r);break;case"textarea":P.mountWrapper(this,i,r),i=P.getNativeProps(this,i,r)}h(this,i),"production"!==e.env.NODE_ENV&&r[X.ancestorInfoContextKey]&&X(this._tag,this,r[X.ancestorInfoContextKey]),"production"!==e.env.NODE_ENV&&(this._unprocessedContextDev=r,this._processedContextDev=g(r,this),r=this._processedContextDev);var o;if(n.useCreateElement){var a=r[k.ownerDocumentContextKey],s=a.createElement(this._currentElement.type);M.setAttributeForID(s,this._rootNodeID),k.getID(s),this._updateDOMProperties({},i,n,s),this._createInitialChildren(n,i,r,s),o=s}else{var c=this._createOpenTagMarkupAndPutListeners(n,i),l=this._createContentMarkup(n,i,r);o=!l&&ot[this._tag]?c+"/>":c+">"+l+"</"+this._currentElement.type+">"}switch(this._tag){case"input":n.getReactMountReady().enqueue(m,this);case"button":case"select":case"textarea":i.autoFocus&&n.getReactMountReady().enqueue(w.focusDOMComponent,this)}return o},_createOpenTagMarkupAndPutListeners:function(t,n){var r="<"+this._currentElement.type;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)if(Q.hasOwnProperty(i))o&&p(this._rootNodeID,i,o,t);else{i===tt&&(o&&("production"!==e.env.NODE_ENV&&(this._previousStyle=o),o=this._previousStyleCopy=B({},n.style)),o=E.createMarkupForStyles(o));var a=null;null!=this._tag&&x(this._tag,n)?i!==$&&(a=M.createMarkupForCustomAttribute(i,o)):a=M.createMarkupForProperty(i,o),a&&(r+=" "+a)}}if(t.renderToStaticMarkup)return r;var s=M.createMarkupForID(this._rootNodeID);return r+" "+s},_createContentMarkup:function(t,e,n){var r="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=J[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)r=F(o);else if(null!=a){var s=this.mountChildren(a,t,n);r=s.join("")}}return at[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&H(r,i.__html);else{var o=J[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)G(r,o);else if(null!=a)for(var s=this.mountChildren(a,t,n),c=0;c<s.length;c++)r.appendChild(s[c])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,n,r,i){var o=n.props,a=this._currentElement.props;switch(this._tag){case"button":o=N.getNativeProps(this,o),a=N.getNativeProps(this,a);break;case"input":R.updateWrapper(this),o=R.getNativeProps(this,o),a=R.getNativeProps(this,a);break;case"option":o=O.getNativeProps(this,o),a=O.getNativeProps(this,a);break;case"select":o=L.getNativeProps(this,o),a=L.getNativeProps(this,a);break;case"textarea":P.updateWrapper(this),o=P.getNativeProps(this,o),a=P.getNativeProps(this,a)}"production"!==e.env.NODE_ENV&&(this._unprocessedContextDev!==i&&(this._unprocessedContextDev=i,this._processedContextDev=g(i,this)),i=this._processedContextDev),h(this,a),this._updateDOMProperties(o,a,t,null),this._updateDOMChildren(o,a,t,i),!V&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=a),"select"===this._tag&&t.getReactMountReady().enqueue(v,this)},_updateDOMProperties:function(t,n,r,i){var o,a,s;for(o in t)if(!n.hasOwnProperty(o)&&t.hasOwnProperty(o))if(o===tt){var c=this._previousStyleCopy;for(a in c)c.hasOwnProperty(a)&&(s=s||{},s[a]="");this._previousStyleCopy=null}else Q.hasOwnProperty(o)?t[o]&&K(this._rootNodeID,o):(S.properties[o]||S.isCustomAttribute(o))&&(i||(i=k.getNode(this._rootNodeID)),M.deleteValueForProperty(i,o));for(o in n){var l=n[o],h=o===tt?this._previousStyleCopy:t[o];if(n.hasOwnProperty(o)&&l!==h)if(o===tt)if(l?("production"!==e.env.NODE_ENV&&(u(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=l),l=this._previousStyleCopy=B({},l)):this._previousStyleCopy=null,h){for(a in h)!h.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(s=s||{},s[a]="");for(a in l)l.hasOwnProperty(a)&&h[a]!==l[a]&&(s=s||{},s[a]=l[a])}else s=l;else Q.hasOwnProperty(o)?l?p(this._rootNodeID,o,l,r):h&&K(this._rootNodeID,o):x(this._tag,n)?(i||(i=k.getNode(this._rootNodeID)),o===$&&(l=null),M.setValueForAttribute(i,o,l)):(S.properties[o]||S.isCustomAttribute(o))&&(i||(i=k.getNode(this._rootNodeID)),null!=l?M.setValueForProperty(i,o,l):M.deleteValueForProperty(i,o))}s&&(i||(i=k.getNode(this._rootNodeID)),E.setValueForStyles(i,s))},_updateDOMChildren:function(t,e,n,r){var i=J[typeof t.children]?t.children:null,o=J[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,c=null!=i?null:t.children,l=null!=o?null:e.children,u=null!=i||null!=a,h=null!=o||null!=s;null!=c&&null==l?this.updateChildren(null,n,r):u&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":R.unmountWrapper(this);break;case"html":case"head":case"body":"production"!==e.env.NODE_ENV?z(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):z(!1)}if(this.unmountChildren(),C.deleteAllListeners(this._rootNodeID),T.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var r=this._nodeWithLegacyProperties;r._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var t=k.getNode(this._rootNodeID);t._reactInternalComponent=this,t.getDOMNode=i,t.isMounted=o,t.setState=a,t.replaceState=a,t.forceUpdate=a,t.setProps=s,t.replaceProps=c,"production"!==e.env.NODE_ENV&&V?Object.defineProperties(t,b):t.props=this._currentElement.props,this._nodeWithLegacyProperties=t}return this._nodeWithLegacyProperties}},I.measureMethods(_,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),B(_.prototype,_.Mixin,D.Mixin),t.exports=_}).call(e,n(4))},function(t,e,n){"use strict";var r=n(329),i=n(392),o=n(396),a={componentDidMount:function(){this.props.autoFocus&&o(i(this))}},s={Mixin:a,focusDOMComponent:function(){o(r.getNode(this._rootNodeID))}};t.exports=s},function(t,e){"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e,n){(function(e){"use strict";var r=n(398),i=n(310),o=n(319),a=n(399),s=n(401),c=n(402),l=n(404),u=n(326),h=l(function(t){return c(t)}),p=!1,d="cssFloat";if(i.canUseDOM){var f=document.createElement("div").style;try{f.font=""}catch(m){p=!0}void 0===document.documentElement.style.cssFloat&&(d="styleFloat")}if("production"!==e.env.NODE_ENV)var v=/^(?:webkit|moz|o)[A-Z]/,y=/;\s*$/,g={},x={},_=function(t){g.hasOwnProperty(t)&&g[t]||(g[t]=!0,"production"!==e.env.NODE_ENV?u(!1,"Unsupported style property %s. Did you mean %s?",t,a(t)):void 0)},b=function(t){g.hasOwnProperty(t)&&g[t]||(g[t]=!0,"production"!==e.env.NODE_ENV?u(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1)):void 0)},w=function(t,n){x.hasOwnProperty(n)&&x[n]||(x[n]=!0,"production"!==e.env.NODE_ENV?u(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',t,n.replace(y,"")):void 0)},E=function(t,e){t.indexOf("-")>-1?_(t):v.test(t)?b(t):y.test(e)&&w(t,e)};var S={createMarkupForStyles:function(t){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];"production"!==e.env.NODE_ENV&&E(r,i),null!=i&&(n+=h(r)+":",n+=s(r,i)+";")}return n||null},setValueForStyles:function(t,n){var i=t.style;for(var o in n)if(n.hasOwnProperty(o)){"production"!==e.env.NODE_ENV&&E(o,n[o]);var a=s(o,n[o]);if("float"===o&&(o=d),a)i[o]=a;else{var c=p&&r.shorthandPropertyExpansions[o];if(c)for(var l in c)i[l]="";else i[o]=""}}}};o.measureMethods(S,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),t.exports=S}).call(e,n(4))},function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){i.forEach(function(e){r[n(e,t)]=r[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=a},function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(400),o=/^-ms-/;t.exports=r},function(t,e){"use strict";function n(t){return t.replace(r,function(t,e){return e.toUpperCase()})}var r=/-(.)/g;t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=null==e||"boolean"==typeof e||""===e;if(n)return"";var r=isNaN(e);return r||0===e||o.hasOwnProperty(t)&&o[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var i=n(398),o=i.isUnitlessNumber;t.exports=r},function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(403),o=/^ms-/;t.exports=r},function(t,e){"use strict";function n(t){return t.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getNativeProps:function(t,e,r){if(!e.disabled)return e;var i={};for(var o in e)e.hasOwnProperty(o)&&!n[o]&&(i[o]=e[o]);return i}};t.exports=r},function(t,e,n){(function(e){"use strict";function r(){this._rootNodeID&&p.updateWrapper(this)}function i(t){var n=this._currentElement.props,i=a.executeOnChange(n,t);c.asap(r,this);var o=n.name;if("radio"===n.type&&null!=o){for(var l=s.getNode(this._rootNodeID),p=l;p.parentNode;)p=p.parentNode;for(var d=p.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),f=0;f<d.length;f++){var m=d[f];if(m!==l&&m.form===l.form){var v=s.getID(m);v?void 0:"production"!==e.env.NODE_ENV?u(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):u(!1);var y=h[v];y?void 0:"production"!==e.env.NODE_ENV?u(!1,"ReactDOMInput: Unknown radio button ID %s.",v):u(!1),c.asap(r,y)}}}return i}var o=n(328),a=n(407),s=n(329),c=n(355),l=n(340),u=n(314),h={},p={getNativeProps:function(t,e,n){var r=a.getValue(e),i=a.getChecked(e),o=l({},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=r?r:t._wrapperState.initialValue,checked:null!=i?i:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return o},mountWrapper:function(t,n){"production"!==e.env.NODE_ENV&&a.checkPropTypes("input",n,t._currentElement._owner);
var r=n.defaultValue;t._wrapperState={initialChecked:n.defaultChecked||!1,initialValue:null!=r?r:null,onChange:i.bind(t)}},mountReadyWrapper:function(t){h[t._rootNodeID]=t},unmountWrapper:function(t){delete h[t._rootNodeID]},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&o.updatePropertyByID(t._rootNodeID,"checked",n||!1);var r=a.getValue(e);null!=r&&o.updatePropertyByID(t._rootNodeID,"value",""+r)}};t.exports=p}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink?"production"!==e.env.NODE_ENV?l(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):l(!1):void 0}function i(t){r(t),null!=t.value||null!=t.onChange?"production"!==e.env.NODE_ENV?l(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):l(!1):void 0}function o(t){r(t),null!=t.checked||null!=t.onChange?"production"!==e.env.NODE_ENV?l(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):l(!1):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(408),c=n(366),l=n(314),u=n(326),h={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},p={value:function(t,e,n){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:s.func},d={},f={checkPropTypes:function(t,n,r){for(var i in p){if(p.hasOwnProperty(i))var o=p[i](n,i,t,c.prop);if(o instanceof Error&&!(o.message in d)){d[o.message]=!0;var s=a(r);"production"!==e.env.NODE_ENV?u(!1,"Failed form propType: %s%s",o.message,s):void 0}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=f}).call(e,n(4))},function(t,e,n){"use strict";function r(t){function e(e,n,r,i,o,a){if(i=i||w,a=a||r,null==n[r]){var s=x[o];return e?new Error("Required "+s+" `"+a+"` was not specified in "+("`"+i+"`.")):null}return t(n,r,i,o,a)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function i(t){function e(e,n,r,i,o){var a=e[n],s=m(a);if(s!==t){var c=x[i],l=v(a);return new Error("Invalid "+c+" `"+o+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return r(e)}function o(){return r(_.thatReturns(null))}function a(t){function e(e,n,r,i,o){var a=e[n];if(!Array.isArray(a)){var s=x[i],c=m(a);return new Error("Invalid "+s+" `"+o+"` of type "+("`"+c+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<a.length;l++){var u=t(a,l,r,i,o+"["+l+"]");if(u instanceof Error)return u}return null}return r(e)}function s(){function t(t,e,n,r,i){if(!g.isValidElement(t[e])){var o=x[r];return new Error("Invalid "+o+" `"+i+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return r(t)}function c(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=x[i],s=t.name||w,c=y(e[n]);return new Error("Invalid "+a+" `"+o+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return r(e)}function l(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(a===t[s])return null;var c=x[i],l=JSON.stringify(t);return new Error("Invalid "+c+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return r(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function u(t){function e(e,n,r,i,o){var a=e[n],s=m(a);if("object"!==s){var c=x[i];return new Error("Invalid "+c+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an object."))}for(var l in a)if(a.hasOwnProperty(l)){var u=t(a,l,r,i,o+"."+l);if(u instanceof Error)return u}return null}return r(e)}function h(t){function e(e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a];if(null==s(e,n,r,i,o))return null}var c=x[i];return new Error("Invalid "+c+" `"+o+"` supplied to "+("`"+r+"`."))}return r(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function t(t,e,n,r,i){if(!f(t[e])){var o=x[r];return new Error("Invalid "+o+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(t)}function d(t){function e(e,n,r,i,o){var a=e[n],s=m(a);if("object"!==s){var c=x[i];return new Error("Invalid "+c+" `"+o+"` of type `"+s+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in t){var u=t[l];if(u){var h=u(a,l,r,i,o+"."+l);if(h)return h}}return null}return r(e)}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||g.isValidElement(t))return!0;var e=b(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!f(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!f(i[1]))return!1}return!0;default:return!1}}function m(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function v(t){var e=m(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function y(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var g=n(343),x=n(367),_=n(316),b=n(409),w="<<anonymous>>",E={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:o(),arrayOf:a,element:s(),instanceOf:c,node:p(),objectOf:u,oneOf:l,oneOfType:h,shape:d};t.exports=E},function(t,e){"use strict";function n(t){var e=t&&(r&&t[r]||t[i]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},function(t,e,n){(function(e){"use strict";var r=n(411),i=n(413),o=n(340),a=n(326),s=i.valueContextKey,c={mountWrapper:function(t,n,r){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(null==n.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):void 0);var i=r[s],o=null;if(null!=i)if(o=!1,Array.isArray(i)){for(var c=0;c<i.length;c++)if(""+i[c]==""+n.value){o=!0;break}}else o=""+i==""+n.value;t._wrapperState={selected:o}},getNativeProps:function(t,n,i){var s=o({selected:void 0,children:void 0},n);null!=t._wrapperState.selected&&(s.selected=t._wrapperState.selected);var c="";return r.forEach(n.children,function(t){null!=t&&("string"==typeof t||"number"==typeof t?c+=t:"production"!==e.env.NODE_ENV?a(!1,"Only strings and numbers are supported as <option> children."):void 0)}),c&&(s.children=c),s}};t.exports=c}).call(e,n(4))},function(t,e,n){"use strict";function r(t){return(""+t).replace(_,"//")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);y(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function c(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,c=a.call(s,e,t.count++);Array.isArray(c)?l(c,i,n,v.thatReturnsArgument):null!=c&&(m.isValidElement(c)&&(c=m.cloneAndReplaceKey(c,o+(c!==e?r(c.key||"")+"/":"")+n)),i.push(c))}function l(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var l=s.getPooled(e,a,i,o);y(t,c,l),s.release(l)}function u(t,e,n){if(null==t)return t;var r=[];return l(t,r,null,e,n),r}function h(t,e,n){return null}function p(t,e){return y(t,h,null)}function d(t){var e=[];return l(t,e,null,v.thatReturnsArgument),e}var f=n(357),m=n(343),v=n(316),y=n(412),g=f.twoArgumentPooler,x=f.fourArgumentPooler,_=/\/(?!\/)/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(i,g),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,x);var b={forEach:a,map:u,mapIntoWithKeyPrefixInternal:l,count:p,toArray:d};t.exports=b},function(t,e,n){(function(e){"use strict";function r(t){return y[t]}function i(t,e){return t&&null!=t.key?a(t.key):e.toString(36)}function o(t){return(""+t).replace(g,r)}function a(t){return"$"+o(t)}function s(t,n,r,o){var c=typeof t;if("undefined"!==c&&"boolean"!==c||(t=null),null===t||"string"===c||"number"===c||u.isValidElement(t))return r(o,t,""===n?m+i(t,0):n),1;var h,y,g=0,_=""===n?m:n+v;if(Array.isArray(t))for(var b=0;b<t.length;b++)h=t[b],y=_+i(h,b),g+=s(h,y,r,o);else{var w=p(t);if(w){var E,S=w.call(t);if(w!==t.entries)for(var M=0;!(E=S.next()).done;)h=E.value,y=_+i(h,M++),g+=s(h,y,r,o);else for("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?f(x,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead."):void 0,x=!0);!(E=S.next()).done;){var A=E.value;A&&(h=A[1],y=_+a(A[0])+v+i(h,0),g+=s(h,y,r,o))}}else if("object"===c){var C="";if("production"!==e.env.NODE_ENV&&(C=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",t._isReactElement&&(C=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),l.current)){var T=l.current.getName();T&&(C+=" Check the render method of `"+T+"`.")}var N=String(t);"production"!==e.env.NODE_ENV?d(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===N?"object with keys {"+Object.keys(t).join(", ")+"}":N,C):d(!1)}}return g}function c(t,e,n){return null==t?0:s(t,"",e,n)}var l=n(306),u=n(343),h=n(346),p=n(409),d=n(314),f=n(326),m=h.SEPARATOR,v=":",y={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g,x=!1;t.exports=c}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=c.getValue(t);null!=e&&a(this,Boolean(t.multiple),e)}}function i(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function o(t,n){var r=t._currentElement._owner;c.checkPropTypes("select",n,r);for(var o=0;o<f.length;o++){var a=f[o];null!=n[a]&&(n.multiple?"production"!==e.env.NODE_ENV?p(Array.isArray(n[a]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",a,i(r)):void 0:"production"!==e.env.NODE_ENV?p(!Array.isArray(n[a]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",a,i(r)):void 0)}}function a(t,e,n){var r,i,o=l.getNode(t._rootNodeID).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function s(t){var e=this._currentElement.props,n=c.executeOnChange(e,t);return this._wrapperState.pendingUpdate=!0,u.asap(r,this),n}var c=n(407),l=n(329),u=n(355),h=n(340),p=n(326),d="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),f=["value","defaultValue"],m={valueContextKey:d,getNativeProps:function(t,e,n){return h({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,n){"production"!==e.env.NODE_ENV&&o(t,n);var r=c.getValue(n);t._wrapperState={pendingUpdate:!1,initialValue:null!=r?r:n.defaultValue,onChange:s.bind(t),wasMultiple:Boolean(n.multiple)}},processChildContext:function(t,e,n){var r=h({},n);return r[d]=t._wrapperState.initialValue,r},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=c.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,a(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?a(t,Boolean(e.multiple),e.defaultValue):a(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=m}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=o.executeOnChange(e,t);return s.asap(r,this),n}var o=n(407),a=n(328),s=n(355),c=n(340),l=n(314),u=n(326),h={getNativeProps:function(t,n,r){null!=n.dangerouslySetInnerHTML?"production"!==e.env.NODE_ENV?l(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):l(!1):void 0;var i=c({},n,{defaultValue:void 0,value:void 0,children:t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,n){"production"!==e.env.NODE_ENV&&o.checkPropTypes("textarea",n,t._currentElement._owner);var r=n.defaultValue,a=n.children;null!=a&&("production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?u(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):void 0),null!=r?"production"!==e.env.NODE_ENV?l(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):l(!1):void 0,Array.isArray(a)&&(a.length<=1?void 0:"production"!==e.env.NODE_ENV?l(!1,"<textarea> can only have at most one child."):l(!1),a=a[0]),r=""+a),null==r&&(r="");var s=o.getValue(n);t._wrapperState={initialValue:""+(null!=s?s:r),onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=o.getValue(e);null!=n&&a.updatePropertyByID(t._rootNodeID,"value",""+n)}};t.exports=h}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,e,n){y.push({parentID:t,parentNode:null,type:h.INSERT_MARKUP,markupIndex:g.push(e)-1,content:null,fromIndex:null,toIndex:n})}function i(t,e,n){y.push({parentID:t,parentNode:null,type:h.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:e,toIndex:n})}function o(t,e){y.push({parentID:t,parentNode:null,type:h.REMOVE_NODE,markupIndex:null,content:null,fromIndex:e,toIndex:null})}function a(t,e){y.push({parentID:t,parentNode:null,type:h.SET_MARKUP,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function s(t,e){y.push({parentID:t,parentNode:null,type:h.TEXT_CONTENT,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function c(){y.length&&(u.processChildrenUpdates(y,g),l())}function l(){y.length=0,g.length=0}var u=n(365),h=n(317),p=n(306),d=n(351),f=n(416),m=n(417),v=0,y=[],g=[],x={Mixin:{_reconcilerInstantiateChildren:function(t,n,r){if("production"!==e.env.NODE_ENV&&this._currentElement)try{return p.current=this._currentElement._owner,f.instantiateChildren(t,n,r)}finally{p.current=null}return f.instantiateChildren(t,n,r)},_reconcilerUpdateChildren:function(t,n,r,i){var o;if("production"!==e.env.NODE_ENV&&this._currentElement){try{p.current=this._currentElement._owner,o=m(n)}finally{p.current=null}return f.updateChildren(t,o,r,i)}return o=m(n),f.updateChildren(t,o,r,i)},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],c=this._rootNodeID+a,l=d.mountComponent(s,c,e,n);s._mountIndex=o++,i.push(l)}return i},updateTextContent:function(t){v++;var e=!0;try{var n=this._renderedChildren;f.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChild(n[r]);this.setTextContent(t),e=!1}finally{v--,v||(e?l():c())}},updateMarkup:function(t){v++;var e=!0;try{var n=this._renderedChildren;f.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setMarkup(t),e=!1}finally{v--,v||(e?l():c())}},updateChildren:function(t,e,n){v++;var r=!0;try{this._updateChildren(t,e,n),r=!1}finally{v--,v||(r?l():c())}},_updateChildren:function(t,e,n){var r=this._renderedChildren,i=this._reconcilerUpdateChildren(r,t,e,n);if(this._renderedChildren=i,i||r){var o,a=0,s=0;for(o in i)if(i.hasOwnProperty(o)){var c=r&&r[o],l=i[o];c===l?(this.moveChild(c,s,a),a=Math.max(c._mountIndex,a),c._mountIndex=s):(c&&(a=Math.max(c._mountIndex,a),this._unmountChild(c)),this._mountChildByNameAtIndex(l,o,s,e,n)),s++}for(o in r)!r.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||this._unmountChild(r[o])}},unmountChildren:function(){var t=this._renderedChildren;f.unmountChildren(t),this._renderedChildren=null},moveChild:function(t,e,n){t._mountIndex<n&&i(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){r(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){o(this._rootNodeID,t._mountIndex)},setTextContent:function(t){s(this._rootNodeID,t)},setMarkup:function(t){a(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,n,r,i){var o=this._rootNodeID+e,a=d.mountComponent(t,o,r,i);t._mountIndex=n,this.createChild(t,a)},_unmountChild:function(t){this.removeChild(t),t._mountIndex=null}}};t.exports=x}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,n,r){var i=void 0===t[r];"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?c(i,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):void 0),null!=n&&i&&(t[r]=o(n,null))}var i=n(351),o=n(363),a=n(368),s=n(412),c=n(326),l={instantiateChildren:function(t,e,n){if(null==t)return null;var i={};return s(t,r,i),i},updateChildren:function(t,e,n,r){if(!e&&!t)return null;var s;for(s in e)if(e.hasOwnProperty(s)){var c=t&&t[s],l=c&&c._currentElement,u=e[s];if(null!=c&&a(l,u))i.receiveComponent(c,u,n,r),e[s]=c;else{c&&i.unmountComponent(c,s);var h=o(u,null);e[s]=h}}for(s in t)!t.hasOwnProperty(s)||e&&e.hasOwnProperty(s)||i.unmountComponent(t[s]);return e},unmountChildren:function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];i.unmountComponent(n)}}};t.exports=l}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,n,r){var i=t,o=void 0===i[r];"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",r):void 0),o&&null!=n&&(i[r]=n)}function i(t){if(null==t)return t;var e={};return o(t,r,e),e}var o=n(412),a=n(326);t.exports=i}).call(e,n(4))},function(t,e){"use strict";function n(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var o=r.bind(e),a=0;a<n.length;a++)if(!o(n[a])||t[n[a]]!==e[n[a]])return!1;return!0}var r=Object.prototype.hasOwnProperty;t.exports=n},function(t,e,n){"use strict";function r(t){var e=p.getID(t),n=h.getReactRootIDFromNodeID(e),r=p.findReactContainerForID(n),i=p.getFirstReactDOM(r);return i}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){a(t)}function a(t){for(var e=p.getFirstReactDOM(m(t.nativeEvent))||window,n=e;n;)t.ancestors.push(n),n=r(n);for(var i=0;i<t.ancestors.length;i++){e=t.ancestors[i];var o=p.getID(e)||"";y._handleTopLevel(t.topLevelType,e,o,t.nativeEvent,m(t.nativeEvent))}}function s(t){var e=v(window);t(e)}var c=n(420),l=n(310),u=n(357),h=n(346),p=n(329),d=n(355),f=n(340),m=n(382),v=n(421);f(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(i,u.twoArgumentPooler);var y={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(t){y._handleTopLevel=t},setEnabled:function(t){y._enabled=!!t},isEnabled:function(){return y._enabled},trapBubbledEvent:function(t,e,n){var r=n;return r?c.listen(r,e,y.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var r=n;return r?c.capture(r,e,y.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=s.bind(null,t);c.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(y._enabled){var n=i.getPooled(t,e);try{d.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=y},function(t,e,n){(function(e){"use strict";var r=n(316),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,n,i){return t.addEventListener?(t.addEventListener(n,i,!0),{remove:function(){t.removeEventListener(n,i,!0)}}):("production"!==e.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=i}).call(e,n(4))},function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e,n){"use strict";var r=n(324),i=n(332),o=n(365),a=n(423),s=n(369),c=n(330),l=n(370),u=n(319),h=n(347),p=n(355),d={Component:o.injection,Class:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventEmitter:c.injection,NativeComponent:l.injection,Perf:u.injection,RootIndex:h.injection,Updates:p.injection};t.exports=d},function(t,e,n){(function(e){"use strict";function r(){C||(C=!0,"production"!==e.env.NODE_ENV?E(!1,"setProps(...) and replaceProps(...) are deprecated. Instead, call render again at the top level."):void 0)}function i(t,n,r){for(var i in n)n.hasOwnProperty(i)&&("production"!==e.env.NODE_ENV?E("function"==typeof n[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t.displayName||"ReactClass",v[r],i):void 0)}function o(t,n){var r=T.hasOwnProperty(n)?T[n]:null;R.hasOwnProperty(n)&&(r!==M.OVERRIDE_BASE?"production"!==e.env.NODE_ENV?_(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",n):_(!1):void 0),t.hasOwnProperty(n)&&(r!==M.DEFINE_MANY&&r!==M.DEFINE_MANY_MERGED?"production"!==e.env.NODE_ENV?_(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n):_(!1):void 0)}function a(t,n){if(n){"function"==typeof n?"production"!==e.env.NODE_ENV?_(!1,"ReactClass: You're attempting to use a component class as a mixin. Instead, just use a regular object."):_(!1):void 0,f.isValidElement(n)?"production"!==e.env.NODE_ENV?_(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):_(!1):void 0;var r=t.prototype;n.hasOwnProperty(S)&&N.mixins(t,n.mixins);for(var i in n)if(n.hasOwnProperty(i)&&i!==S){var a=n[i];if(o(r,i),N.hasOwnProperty(i))N[i](t,a);else{var s=T.hasOwnProperty(i),c=r.hasOwnProperty(i),h="function"==typeof a,p=h&&!s&&!c&&n.autobind!==!1;if(p)r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[i]=a,r[i]=a;else if(c){var d=T[i];!s||d!==M.DEFINE_MANY_MERGED&&d!==M.DEFINE_MANY?"production"!==e.env.NODE_ENV?_(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",d,i):_(!1):void 0,d===M.DEFINE_MANY_MERGED?r[i]=l(r[i],a):d===M.DEFINE_MANY&&(r[i]=u(r[i],a))}else r[i]=a,"production"!==e.env.NODE_ENV&&"function"==typeof a&&n.displayName&&(r[i].displayName=n.displayName+"_"+i)}}}}function s(t,n){if(n)for(var r in n){var i=n[r];if(n.hasOwnProperty(r)){var o=r in N;o?"production"!==e.env.NODE_ENV?_(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):_(!1):void 0;var a=r in t;a?"production"!==e.env.NODE_ENV?_(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):_(!1):void 0,t[r]=i}}}function c(t,n){t&&n&&"object"==typeof t&&"object"==typeof n?void 0:"production"!==e.env.NODE_ENV?_(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):_(!1);for(var r in n)n.hasOwnProperty(r)&&(void 0!==t[r]?"production"!==e.env.NODE_ENV?_(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):_(!1):void 0,t[r]=n[r]);return t}function l(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return c(i,n),c(i,r),i}}function u(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function h(t,n){var r=n.bind(t);if("production"!==e.env.NODE_ENV){r.__reactBoundContext=t,r.__reactBoundMethod=n,r.__reactBoundArguments=null;var i=t.constructor.displayName,o=r.bind;r.bind=function(a){for(var s=arguments.length,c=Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];if(a!==t&&null!==a)"production"!==e.env.NODE_ENV?E(!1,"bind(): React component methods may only be bound to the component instance. See %s",i):void 0;else if(!c.length)return"production"!==e.env.NODE_ENV?E(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",i):void 0,r;var u=o.apply(r,arguments);return u.__reactBoundContext=t,u.__reactBoundMethod=n,u.__reactBoundArguments=c,u}}return r}function p(t){for(var e in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(e)){var n=t.__reactAutoBindMap[e];t[e]=h(t,n)}}var d=n(424),f=n(343),m=n(366),v=n(367),y=n(425),g=n(340),x=n(359),_=n(314),b=n(318),w=n(380),E=n(326),S=w({mixins:null}),M=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),A=[],C=!1,T={mixins:M.DEFINE_MANY,statics:M.DEFINE_MANY,propTypes:M.DEFINE_MANY,contextTypes:M.DEFINE_MANY,childContextTypes:M.DEFINE_MANY,getDefaultProps:M.DEFINE_MANY_MERGED,getInitialState:M.DEFINE_MANY_MERGED,getChildContext:M.DEFINE_MANY_MERGED,render:M.DEFINE_ONCE,componentWillMount:M.DEFINE_MANY,componentDidMount:M.DEFINE_MANY,componentWillReceiveProps:M.DEFINE_MANY,shouldComponentUpdate:M.DEFINE_ONCE,componentWillUpdate:M.DEFINE_MANY,componentDidUpdate:M.DEFINE_MANY,componentWillUnmount:M.DEFINE_MANY,updateComponent:M.OVERRIDE_BASE},N={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)a(t,e[n])},childContextTypes:function(t,n){"production"!==e.env.NODE_ENV&&i(t,n,m.childContext),t.childContextTypes=g({},t.childContextTypes,n)},contextTypes:function(t,n){"production"!==e.env.NODE_ENV&&i(t,n,m.context),t.contextTypes=g({},t.contextTypes,n)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=l(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,n){"production"!==e.env.NODE_ENV&&i(t,n,m.prop),t.propTypes=g({},t.propTypes,n)},statics:function(t,e){s(t,e)},autobind:function(){}},R={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(t,n){"production"!==e.env.NODE_ENV&&r(),this.updater.enqueueSetProps(this,t),n&&this.updater.enqueueCallback(this,n)},replaceProps:function(t,n){"production"!==e.env.NODE_ENV&&r(),this.updater.enqueueReplaceProps(this,t),n&&this.updater.enqueueCallback(this,n)}},O=function(){};g(O.prototype,d.prototype,R);var L={createClass:function(t){var n=function(t,r,i){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?E(this instanceof n,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"):void 0),this.__reactAutoBindMap&&p(this),this.props=t,this.context=r,this.refs=x,this.updater=i||y,this.state=null;var o=this.getInitialState?this.getInitialState():null;"production"!==e.env.NODE_ENV&&"undefined"==typeof o&&this.getInitialState._isMockFunction&&(o=null),"object"!=typeof o||Array.isArray(o)?"production"!==e.env.NODE_ENV?_(!1,"%s.getInitialState(): must return an object or null",n.displayName||"ReactCompositeComponent"):_(!1):void 0,this.state=o};n.prototype=new O,n.prototype.constructor=n,A.forEach(a.bind(null,n)),a(n,t),n.getDefaultProps&&(n.defaultProps=n.getDefaultProps()),"production"!==e.env.NODE_ENV&&(n.getDefaultProps&&(n.getDefaultProps.isReactClassApproved={}),n.prototype.getInitialState&&(n.prototype.getInitialState.isReactClassApproved={})),n.prototype.render?void 0:"production"!==e.env.NODE_ENV?_(!1,"createClass(...): Class specification must implement a `render` method."):_(!1),"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?E(!n.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",t.displayName||"A component"):void 0,"production"!==e.env.NODE_ENV?E(!n.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",t.displayName||"A component"):void 0);for(var r in T)n.prototype[r]||(n.prototype[r]=null);return n},injection:{injectMixin:function(t){A.push(t)}}};t.exports=L}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||i}var i=n(425),o=n(344),a=n(359),s=n(314),c=n(326);if(r.prototype.isReactComponent={},r.prototype.setState=function(t,n){"object"!=typeof t&&"function"!=typeof t&&null!=t?"production"!==e.env.NODE_ENV?s(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):s(!1):void 0,"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?c(null!=t,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):void 0),this.updater.enqueueSetState(this,t),n&&this.updater.enqueueCallback(this,n)},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t)},"production"!==e.env.NODE_ENV){var l={getDOMNode:["getDOMNode","Use ReactDOM.findDOMNode(component) instead."],isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceProps:["replaceProps","Instead, call render again at the top level."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."],setProps:["setProps","Instead, call render again at the top level."]},u=function(t,n){o&&Object.defineProperty(r.prototype,t,{get:function(){"production"!==e.env.NODE_ENV?c(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",n[0],n[1]):void 0}})};for(var h in l)l.hasOwnProperty(h)&&u(h,l[h])}t.exports=r}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,n){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?i(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",n,n,t.constructor&&t.constructor.displayName||""):void 0)}var i=n(326),o={isMounted:function(t){
return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")},enqueueSetProps:function(t,e){r(t,"setProps")},enqueueReplaceProps:function(t,e){r(t,"replaceProps")}};t.exports=o}).call(e,n(4))},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=!t&&s.useCreateElement}var i=n(356),o=n(357),a=n(330),s=n(342),c=n(427),l=n(358),u=n(340),h={initialize:c.getSelectionInformation,close:c.restoreSelection},p={initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[h,p,d],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};u(r.prototype,l.Mixin,m),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=n(428),o=n(360),a=n(396),s=n(430),c={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:c.hasSelectionCapabilities(t)?c.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if("undefined"==typeof r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=c},function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(c){return null}var l=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),u=l?0:s.toString().length,h=s.cloneRange();h.selectNodeContents(t),h.setEnd(s.startContainer,s.startOffset);var p=r(h.startContainer,h.startOffset,h.endContainer,h.endOffset),d=p?0:h.toString().length,f=d+u,m=document.createRange();m.setStart(n,i),m.setEnd(o,a);var v=m.collapsed;return{start:v?f:d,end:v?d:f}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[u()].length,i=Math.min(e.start,r),o="undefined"==typeof e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(t,i),c=l(t,o);if(s&&c){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(c.node,c.offset)):(h.setEnd(c.node,c.offset),n.addRange(h))}}}var c=n(310),l=n(429),u=n(376),h=c.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:h?i:o,setOffsets:h?a:s};t.exports=p},function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=e&&a>=e)return{node:i,offset:e-o};o=a}i=n(r(i))}}t.exports=i},function(t,e){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=n},function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&c.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(_||null==y||y!==u())return null;var n=r(y);if(!x||!d(x,n)){x=n;var i=l.getPooled(v.select,g,t,e);return i.type="select",i.target=y,a.accumulateTwoPhaseDispatches(i),i}return null}var o=n(331),a=n(374),s=n(310),c=n(427),l=n(378),u=n(430),h=n(383),p=n(380),d=n(418),f=o.topLevelTypes,m=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,v={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},y=null,g=null,x=null,_=!1,b=!1,w=p({onSelect:null}),E={eventTypes:v,extractEvents:function(t,e,n,r,o){if(!b)return null;switch(t){case f.topFocus:(h(e)||"true"===e.contentEditable)&&(y=e,g=n,x=null);break;case f.topBlur:y=null,g=null,x=null;break;case f.topMouseDown:_=!0;break;case f.topContextMenu:case f.topMouseUp:return _=!1,i(r,o);case f.topSelectionChange:if(m)break;case f.topKeyDown:case f.topKeyUp:return i(r,o)}return null},didPutListener:function(t,e,n){e===w&&(b=!0)}};t.exports=E},function(t,e){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(331),i=n(420),o=n(374),a=n(329),s=n(434),c=n(378),l=n(435),u=n(436),h=n(387),p=n(439),d=n(440),f=n(388),m=n(441),v=n(316),y=n(437),g=n(314),x=n(380),_=r.topLevelTypes,b={abort:{phasedRegistrationNames:{bubbled:x({onAbort:!0}),captured:x({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:x({onBlur:!0}),captured:x({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:x({onCanPlay:!0}),captured:x({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:x({onCanPlayThrough:!0}),captured:x({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:x({onClick:!0}),captured:x({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:x({onContextMenu:!0}),captured:x({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:x({onCopy:!0}),captured:x({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:x({onCut:!0}),captured:x({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:x({onDoubleClick:!0}),captured:x({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:x({onDrag:!0}),captured:x({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:x({onDragEnd:!0}),captured:x({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:x({onDragEnter:!0}),captured:x({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:x({onDragExit:!0}),captured:x({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:x({onDragLeave:!0}),captured:x({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:x({onDragOver:!0}),captured:x({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:x({onDragStart:!0}),captured:x({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:x({onDrop:!0}),captured:x({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:x({onDurationChange:!0}),captured:x({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:x({onEmptied:!0}),captured:x({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:x({onEncrypted:!0}),captured:x({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:x({onEnded:!0}),captured:x({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:x({onError:!0}),captured:x({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:x({onFocus:!0}),captured:x({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:x({onInput:!0}),captured:x({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:x({onKeyDown:!0}),captured:x({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:x({onKeyPress:!0}),captured:x({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:x({onKeyUp:!0}),captured:x({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:x({onLoad:!0}),captured:x({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:x({onLoadedData:!0}),captured:x({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:x({onLoadedMetadata:!0}),captured:x({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:x({onLoadStart:!0}),captured:x({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:x({onMouseDown:!0}),captured:x({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:x({onMouseMove:!0}),captured:x({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:x({onMouseOut:!0}),captured:x({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:x({onMouseOver:!0}),captured:x({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:x({onMouseUp:!0}),captured:x({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:x({onPaste:!0}),captured:x({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:x({onPause:!0}),captured:x({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:x({onPlay:!0}),captured:x({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:x({onPlaying:!0}),captured:x({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:x({onProgress:!0}),captured:x({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:x({onRateChange:!0}),captured:x({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:x({onReset:!0}),captured:x({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:x({onScroll:!0}),captured:x({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:x({onSeeked:!0}),captured:x({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:x({onSeeking:!0}),captured:x({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:x({onStalled:!0}),captured:x({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:x({onSubmit:!0}),captured:x({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:x({onSuspend:!0}),captured:x({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:x({onTimeUpdate:!0}),captured:x({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:x({onTouchCancel:!0}),captured:x({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:x({onTouchEnd:!0}),captured:x({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:x({onTouchMove:!0}),captured:x({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:x({onTouchStart:!0}),captured:x({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:x({onVolumeChange:!0}),captured:x({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:x({onWaiting:!0}),captured:x({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:x({onWheel:!0}),captured:x({onWheelCapture:!0})}}},w={topAbort:b.abort,topBlur:b.blur,topCanPlay:b.canPlay,topCanPlayThrough:b.canPlayThrough,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topDurationChange:b.durationChange,topEmptied:b.emptied,topEncrypted:b.encrypted,topEnded:b.ended,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topLoadedData:b.loadedData,topLoadedMetadata:b.loadedMetadata,topLoadStart:b.loadStart,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topPause:b.pause,topPlay:b.play,topPlaying:b.playing,topProgress:b.progress,topRateChange:b.rateChange,topReset:b.reset,topScroll:b.scroll,topSeeked:b.seeked,topSeeking:b.seeking,topStalled:b.stalled,topSubmit:b.submit,topSuspend:b.suspend,topTimeUpdate:b.timeUpdate,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topVolumeChange:b.volumeChange,topWaiting:b.waiting,topWheel:b.wheel};for(var E in w)w[E].dependencies=[E];var S=x({onClick:null}),M={},A={eventTypes:b,extractEvents:function(t,n,r,i,a){var v=w[t];if(!v)return null;var x;switch(t){case _.topAbort:case _.topCanPlay:case _.topCanPlayThrough:case _.topDurationChange:case _.topEmptied:case _.topEncrypted:case _.topEnded:case _.topError:case _.topInput:case _.topLoad:case _.topLoadedData:case _.topLoadedMetadata:case _.topLoadStart:case _.topPause:case _.topPlay:case _.topPlaying:case _.topProgress:case _.topRateChange:case _.topReset:case _.topSeeked:case _.topSeeking:case _.topStalled:case _.topSubmit:case _.topSuspend:case _.topTimeUpdate:case _.topVolumeChange:case _.topWaiting:x=c;break;case _.topKeyPress:if(0===y(i))return null;case _.topKeyDown:case _.topKeyUp:x=u;break;case _.topBlur:case _.topFocus:x=l;break;case _.topClick:if(2===i.button)return null;case _.topContextMenu:case _.topDoubleClick:case _.topMouseDown:case _.topMouseMove:case _.topMouseOut:case _.topMouseOver:case _.topMouseUp:x=h;break;case _.topDrag:case _.topDragEnd:case _.topDragEnter:case _.topDragExit:case _.topDragLeave:case _.topDragOver:case _.topDragStart:case _.topDrop:x=p;break;case _.topTouchCancel:case _.topTouchEnd:case _.topTouchMove:case _.topTouchStart:x=d;break;case _.topScroll:x=f;break;case _.topWheel:x=m;break;case _.topCopy:case _.topCut:case _.topPaste:x=s}x?void 0:"production"!==e.env.NODE_ENV?g(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",t):g(!1);var b=x.getPooled(v,r,i,a);return o.accumulateTwoPhaseDispatches(b),b},didPutListener:function(t,e,n){if(e===S){var r=a.getNode(t);M[t]||(M[t]=i.listen(r,"click",v))}},willDeleteListener:function(t,e){e===S&&(M[t].remove(),delete M[t])}};t.exports=A}).call(e,n(4))},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(378),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(388),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(388),o=n(437),a=n(438),s=n(389),c={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,c),t.exports=r},function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(437),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(387),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(388),o=n(389),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var i=n(387),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";var r=n(324),i=r.injection.MUST_USE_ATTRIBUTE,o={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},a={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,xlinkActuate:i,xlinkArcrole:i,xlinkHref:i,xlinkRole:i,xlinkShow:i,xlinkTitle:i,xlinkType:i,xmlBase:i,xmlLang:i,xmlSpace:i,y1:i,y2:i,y:i},DOMAttributeNamespaces:{xlinkActuate:o.xlink,xlinkArcrole:o.xlink,xlinkHref:o.xlink,xlinkRole:o.xlink,xlinkShow:o.xlink,xlinkTitle:o.xlink,xlinkType:o.xlink,xmlBase:o.xml,xmlLang:o.xml,xmlSpace:o.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};t.exports=a},function(t,e,n){"use strict";function r(t){return Math.floor(100*t)/100}function i(t,e,n){t[e]=(t[e]||0)+n}var o=n(324),a=n(444),s=n(329),c=n(319),l=n(445),u={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){u._injected||c.injection.injectMeasure(u.measure),u._allMeasurements.length=0,c.enableMeasure=!0},stop:function(){c.enableMeasure=!1},getLastMeasurements:function(){return u._allMeasurements},printExclusive:function(t){t=t||u._allMeasurements;var e=a.getExclusiveSummary(t);console.table(e.map(function(t){return{"Component class name":t.componentName,"Total inclusive time (ms)":r(t.inclusive),"Exclusive mount time (ms)":r(t.exclusive),"Exclusive render time (ms)":r(t.render),"Mount time per instance (ms)":r(t.exclusive/t.count),"Render time per instance (ms)":r(t.render/t.count),Instances:t.count}}))},printInclusive:function(t){t=t||u._allMeasurements;var e=a.getInclusiveSummary(t);console.table(e.map(function(t){return{"Owner > component":t.componentName,"Inclusive time (ms)":r(t.time),Instances:t.count}})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(t){var e=a.getInclusiveSummary(t,!0);return e.map(function(t){return{"Owner > component":t.componentName,"Wasted time (ms)":t.time,Instances:t.count}})},printWasted:function(t){t=t||u._allMeasurements,console.table(u.getMeasurementsSummaryMap(t)),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},printDOM:function(t){t=t||u._allMeasurements;var e=a.getDOMSummary(t);console.table(e.map(function(t){var e={};return e[o.ID_ATTRIBUTE_NAME]=t.id,e.type=t.type,e.args=JSON.stringify(t.args),e})),console.log("Total time:",a.getTotalTime(t).toFixed(2)+" ms")},_recordWrite:function(t,e,n,r){var i=u._allMeasurements[u._allMeasurements.length-1].writes;i[t]=i[t]||[],i[t].push({type:e,time:n,args:r})},measure:function(t,e,n){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var c,h,p;if("_renderNewRootComponent"===e||"flushBatchedUpdates"===e)return u._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0,created:{}}),p=l(),h=n.apply(this,o),u._allMeasurements[u._allMeasurements.length-1].totalTime=l()-p,h;if("_mountImageIntoNode"===e||"ReactBrowserEventEmitter"===t||"ReactDOMIDOperations"===t||"CSSPropertyOperations"===t||"DOMChildrenOperations"===t||"DOMPropertyOperations"===t){if(p=l(),h=n.apply(this,o),c=l()-p,"_mountImageIntoNode"===e){var d=s.getID(o[1]);u._recordWrite(d,e,c,o[0])}else if("dangerouslyProcessChildrenUpdates"===e)o[0].forEach(function(t){var e={};null!==t.fromIndex&&(e.fromIndex=t.fromIndex),null!==t.toIndex&&(e.toIndex=t.toIndex),null!==t.textContent&&(e.textContent=t.textContent),null!==t.markupIndex&&(e.markup=o[1][t.markupIndex]),u._recordWrite(t.parentID,t.type,c,e)});else{var f=o[0];"object"==typeof f&&(f=s.getID(o[0])),u._recordWrite(f,e,c,Array.prototype.slice.call(o,1))}return h}if("ReactCompositeComponent"!==t||"mountComponent"!==e&&"updateComponent"!==e&&"_renderValidatedComponent"!==e)return n.apply(this,o);if(this._currentElement.type===s.TopLevelWrapper)return n.apply(this,o);var m="mountComponent"===e?o[0]:this._rootNodeID,v="_renderValidatedComponent"===e,y="mountComponent"===e,g=u._mountStack,x=u._allMeasurements[u._allMeasurements.length-1];if(v?i(x.counts,m,1):y&&(x.created[m]=!0,g.push(0)),p=l(),h=n.apply(this,o),c=l()-p,v)i(x.render,m,c);else if(y){var _=g.pop();g[g.length-1]+=c,i(x.exclusive,m,c-_),i(x.inclusive,m,c)}else i(x.inclusive,m,c);return x.displayNames[m]={current:this.getName(),owner:this._currentElement._owner?this._currentElement._owner.getName():"<root>"},h}}};t.exports=u},function(t,e,n){"use strict";function r(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.totalTime}return e}function i(t){var e=[];return t.forEach(function(t){Object.keys(t.writes).forEach(function(n){t.writes[n].forEach(function(t){e.push({id:n,type:u[t.type]||t.type,args:t.args})})})}),e}function o(t){for(var e,n={},r=0;r<t.length;r++){var i=t[r],o=c({},i.exclusive,i.inclusive);for(var a in o)e=i.displayNames[a].current,n[e]=n[e]||{componentName:e,inclusive:0,exclusive:0,render:0,count:0},i.render[a]&&(n[e].render+=i.render[a]),i.exclusive[a]&&(n[e].exclusive+=i.exclusive[a]),i.inclusive[a]&&(n[e].inclusive+=i.inclusive[a]),i.counts[a]&&(n[e].count+=i.counts[a])}var s=[];for(e in n)n[e].exclusive>=l&&s.push(n[e]);return s.sort(function(t,e){return e.exclusive-t.exclusive}),s}function a(t,e){for(var n,r={},i=0;i<t.length;i++){var o,a=t[i],u=c({},a.exclusive,a.inclusive);e&&(o=s(a));for(var h in u)if(!e||o[h]){var p=a.displayNames[h];n=p.owner+" > "+p.current,r[n]=r[n]||{componentName:n,time:0,count:0},a.inclusive[h]&&(r[n].time+=a.inclusive[h]),a.counts[h]&&(r[n].count+=a.counts[h])}}var d=[];for(n in r)r[n].time>=l&&d.push(r[n]);return d.sort(function(t,e){return e.time-t.time}),d}function s(t){var e={},n=Object.keys(t.writes),r=c({},t.exclusive,t.inclusive);for(var i in r){for(var o=!1,a=0;a<n.length;a++)if(0===n[a].indexOf(i)){o=!0;break}t.created[i]&&(o=!0),!o&&t.counts[i]>0&&(e[i]=!0)}return e}var c=n(340),l=1.2,u={_mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",SET_MARKUP:"set innerHTML",TEXT_CONTENT:"set textContent",setValueForProperty:"update attribute",setValueForAttribute:"update attribute",deleteValueForProperty:"remove attribute",setValueForStyles:"update styles",replaceNodeWithMarkup:"replace",updateTextContent:"set textContent"},h={getExclusiveSummary:o,getInclusiveSummary:a,getDOMSummary:i,getTotalTime:r};t.exports=h},function(t,e,n){"use strict";var r,i=n(446);r=i.now?function(){return i.now()}:function(){return Date.now()},t.exports=r},function(t,e,n){"use strict";var r,i=n(310);i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),t.exports=r||{}},function(t,e){"use strict";t.exports="0.14.8"},function(t,e,n){"use strict";var r=n(329);t.exports=r.renderSubtreeIntoContainer},function(t,e,n){"use strict";var r=n(372),i=n(450),o=n(447);r.inject();var a={renderToString:i.renderToString,renderToStaticMarkup:i.renderToStaticMarkup,version:o};t.exports=a},function(t,e,n){(function(e){"use strict";function r(t){a.isValidElement(t)?void 0:"production"!==e.env.NODE_ENV?f(!1,"renderToString(): You must pass a valid ReactElement."):f(!1);var n;try{h.injection.injectBatchingStrategy(l);var r=s.createReactRootID();return n=u.getPooled(!1),n.perform(function(){var e=d(t,null),i=e.mountComponent(r,n,p);return c.addChecksumToMarkup(i)},null)}finally{u.release(n),h.injection.injectBatchingStrategy(o)}}function i(t){a.isValidElement(t)?void 0:"production"!==e.env.NODE_ENV?f(!1,"renderToStaticMarkup(): You must pass a valid ReactElement."):f(!1);var n;try{h.injection.injectBatchingStrategy(l);var r=s.createReactRootID();return n=u.getPooled(!0),n.perform(function(){var e=d(t,null);return e.mountComponent(r,n,p)},null)}finally{u.release(n),h.injection.injectBatchingStrategy(o)}}var o=n(393),a=n(343),s=n(346),c=n(349),l=n(451),u=n(452),h=n(355),p=n(359),d=n(363),f=n(314);t.exports={renderToString:r,renderToStaticMarkup:i}}).call(e,n(4))},function(t,e){"use strict";var n={isBatchingUpdates:!1,batchedUpdates:function(t){}};t.exports=n},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=o.getPooled(null),this.useCreateElement=!1}var i=n(357),o=n(356),a=n(358),s=n(340),c=n(316),l={initialize:function(){this.reactMountReady.reset()},close:c},u=[l],h={getTransactionWrappers:function(){return u},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};s(r.prototype,a.Mixin,h),i.addPoolingTo(r),t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(411),i=n(424),o=n(423),a=n(454),s=n(343),c=n(455),l=n(408),u=n(447),h=n(340),p=n(457),d=s.createElement,f=s.createFactory,m=s.cloneElement;"production"!==e.env.NODE_ENV&&(d=c.createElement,f=c.createFactory,m=c.cloneElement);var v={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:p},Component:i,createElement:d,cloneElement:m,isValidElement:s.isValidElement,PropTypes:l,createClass:o.createClass,createFactory:f,createMixin:function(t){return t},DOM:a,version:u,__spread:h};t.exports=v}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t){return"production"!==e.env.NODE_ENV?o.createFactory(t):i.createFactory(t)}var i=n(343),o=n(455),a=n(456),s=a({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=s}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(){if(p.current){var t=p.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(t,n){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;var r=o("uniqueKey",t,n);null!==r&&("production"!==e.env.NODE_ENV?v(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s%s',r.parentOrOwner||"",r.childOwner||"",r.url||""):void 0)}}function o(t,e,n){var i=r();if(!i){var o="string"==typeof n?n:n.displayName||n.name;o&&(i=" Check the top-level render call using <"+o+">.")}var a=y[t]||(y[t]={});if(a[i])return null;a[i]=!0;var s={parentOrOwner:i,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return e&&e._owner&&e._owner!==p.current&&(s.childOwner=" It was passed a child from "+e._owner.getName()+"."),s}function a(t,e){if("object"==typeof t)if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];l.isValidElement(r)&&i(r,e)}else if(l.isValidElement(t))t._store&&(t._store.validated=!0);else if(t){var o=f(t);if(o&&o!==t.entries)for(var a,s=o.call(t);!(a=s.next()).done;)l.isValidElement(a.value)&&i(a.value,e)}}function s(t,n,i,o){for(var a in n)if(n.hasOwnProperty(a)){var s;try{"function"!=typeof n[a]?"production"!==e.env.NODE_ENV?m(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t||"React class",h[o],a):m(!1):void 0,s=n[a](i,a,t,o)}catch(c){s=c}if("production"!==e.env.NODE_ENV?v(!s||s instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",t||"React class",h[o],a,typeof s):void 0,s instanceof Error&&!(s.message in g)){g[s.message]=!0;var l=r();"production"!==e.env.NODE_ENV?v(!1,"Failed propType: %s%s",s.message,l):void 0}}}function c(t){var n=t.type;if("function"==typeof n){var r=n.displayName||n.name;n.propTypes&&s(r,n.propTypes,t.props,u.prop),"function"==typeof n.getDefaultProps&&("production"!==e.env.NODE_ENV?v(n.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):void 0);
}}var l=n(343),u=n(366),h=n(367),p=n(306),d=n(344),f=n(409),m=n(314),v=n(326),y={},g={},x={createElement:function(t,n,i){var o="string"==typeof t||"function"==typeof t;"production"!==e.env.NODE_ENV?v(o,"React.createElement: type should not be null, undefined, boolean, or number. It should be a string (for DOM elements) or a ReactClass (for composite components).%s",r()):void 0;var s=l.createElement.apply(this,arguments);if(null==s)return s;if(o)for(var u=2;u<arguments.length;u++)a(arguments[u],t);return c(s),s},createFactory:function(t){var n=x.createElement.bind(null,t);return n.type=t,"production"!==e.env.NODE_ENV&&d&&Object.defineProperty(n,"type",{enumerable:!1,get:function(){return"production"!==e.env.NODE_ENV?v(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):void 0,Object.defineProperty(this,"type",{value:t}),t}}),n},cloneElement:function(t,e,n){for(var r=l.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)a(arguments[i],r.type);return c(r),r}};t.exports=x}).call(e,n(4))},function(t,e){"use strict";function n(t,e,n){if(!t)return null;var i={};for(var o in t)r.call(t,o)&&(i[o]=e.call(n,t[o],o,t));return i}var r=Object.prototype.hasOwnProperty;t.exports=n},function(t,e,n){(function(e){"use strict";function r(t){return i.isValidElement(t)?void 0:"production"!==e.env.NODE_ENV?o(!1,"onlyChild must be passed a children with exactly one child."):o(!1),t}var i=n(343),o=n(314);t.exports=r}).call(e,n(4))},function(t,e,n){(function(e){"use strict";function r(t,n,r,a,s){var c=!1;if("production"!==e.env.NODE_ENV){var l=function(){return"production"!==e.env.NODE_ENV?o(c,"React.%s is deprecated. Please use %s.%s from require('%s') instead.",t,n,t,r):void 0,c=!0,s.apply(a,arguments)};return i(l,s)}return s}var i=n(340),o=n(326);t.exports=r}).call(e,n(4))},function(t,e,n){"use strict";t.exports=n(305)},function(t,e){function n(t){var e=function(t){return t.trim()},n={};return r(t).map(e).filter(Boolean).forEach(function(t){var e=t.indexOf(":"),r=t.substr(0,e).trim(),i=t.substr(e+1).trim();n[r]=i}),n}function r(t){for(var e,n=[],r=0,i=";",o=/url\([^\)]+$/,a="";r<t.length;)e=t.indexOf(i,r),e===-1&&(e=t.length),a+=t.substring(r,e),o.test(a)?(a+=";",r=e+1):(n.push(a),a="",r=e+1);return n}function i(t){return Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")}function o(t){return i(n(t))}t.exports.parse=n,t.exports.stringify=i,t.exports.normalize=o},function(t,e){var n=Math.PI/2;t.exports.component={dependencies:["position","rotation"],schema:{enabled:{"default":!0},sensitivity:{"default":1}},init:function(){this.sceneEl=document.querySelector("a-scene"),this.canvasEl=this.sceneEl.canvas,this.setupMouseControls(),this.setupHMDControls(),this.attachEventListeners(),this.bindFunctions(),this.sceneEl.addBehavior(this),this.previousPosition=new THREE.Vector3,this.deltaPosition=new THREE.Vector3},setupMouseControls:function(){this.pitchObject=new THREE.Object3D,this.yawObject=new THREE.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject),this.lockIsSupported="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document},setupHMDControls:function(){this.dolly=new THREE.Object3D,this.euler=new THREE.Euler,this.controls=new THREE.VRControls(this.dolly),this.zeroQuaternion=new THREE.Quaternion},attachEventListeners:function(){this.lockIsSupported&&(document.addEventListener("pointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("mozpointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this.onLockChange.bind(this),!1),document.addEventListener("pointerlockerror",this.onLockError,!1),document.addEventListener("mozpointerlockerror",this.onLockError,!1),document.addEventListener("webkitpointerlockerror",this.onLockError,!1),this.canvasEl.onclick=this.captureMouse.bind(this))},bindFunctions:function(){this.onMouseMoveL=this.onMouseMove.bind(this)},remove:function(){this.releaseMouse(),this.sceneEl.removeBehavior(this)},captureMouse:function(){this.sceneEl.requestPointerLock=this.sceneEl.canvas.requestPointerLock||this.sceneEl.canvas.mozRequestPointerLock||this.sceneEl.canvas.webkitRequestPointerLock,this.sceneEl.requestPointerLock()},releaseMouse:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock()},onLockChange:function(t){var e=this.el.sceneEl;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e?document.addEventListener("mousemove",this.onMouseMoveL,!1):(console.log("pointer unlock"),document.removeEventListener("mousemove",this.onMouseMoveL,!1))},onLockError:function(t){console.trace(t)},update:function(){this.data.enabled&&(this.controls.update(),this.updateOrientation(),this.updatePosition())},updateOrientation:function(){var t=new THREE.Euler;return t.order="YXZ",function(){var e=this.pitchObject,n=this.yawObject,r=this.calculateHMDQuaternion();t.setFromQuaternion(r),this.el.setAttribute("rotation",{x:THREE.Math.radToDeg(t.x)+THREE.Math.radToDeg(e.rotation.x),y:THREE.Math.radToDeg(t.y)+THREE.Math.radToDeg(n.rotation.y),z:THREE.Math.radToDeg(t.z)})}}(),calculateHMDQuaternion:function(){var t=new THREE.Quaternion;return function(){var e=this.dolly;return this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),updatePosition:function(){var t=new THREE.Vector3,e=new THREE.Quaternion,n=new THREE.Vector3;return function(){var r=this.el,i=this.calculateDeltaPosition(),o=r.getComputedAttribute("position");this.el.object3D.matrixWorld.decompose(t,e,n),i.applyQuaternion(e),r.setAttribute("position",{x:o.x+i.x,y:o.y+i.y,z:o.z+i.z})}}(),calculateDeltaPosition:function(){var t=this.dolly,e=this.deltaPosition,n=this.previousPosition;return e.copy(t.position),e.sub(n),n.copy(t.position),e},updateHMDQuaternion:function(){var t=new THREE.Quaternion;return function(){var e=this.dolly;return this.controls.update(),this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),zeroOrientation:function(){var t=new THREE.Euler;t.setFromQuaternion(this.dolly.quaternion.clone().inverse()),t.z=0,t.x=0,this.zeroQuaternion.setFromEuler(t)},onMouseMove:function(t){if(this.data.enabled){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;this.yawObject.rotation.y-=.002*e*this.data.sensitivity,this.pitchObject.rotation.x-=.002*r*this.data.sensitivity,this.pitchObject.rotation.x=Math.max(-n,Math.min(n,this.pitchObject.rotation.x))}}}},function(t,e,n){t.exports={controls:n(463),loaders:n(477),math:n(464),misc:n(483),physics:n(484),primitives:n(499),shadows:n(503),registerAll:function(){this.controls.registerAll(),this.loaders.registerAll(),this.math.registerAll(),this.misc.registerAll(),this.physics.registerAll(),this.primitives.registerAll(),this.shadows.registerAll()}}},function(t,e,n){var r=n(464);t.exports={"checkpoint-controls":n(467),"gamepad-controls":n(468),"hmd-controls":n(471),"keyboard-controls":n(472),"mouse-controls":n(474),"touch-controls":n(475),"universal-controls":n(476),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,r.registerAll(),t.components["checkpoint-controls"]||t.registerComponent("checkpoint-controls",this["checkpoint-controls"]),t.components["gamepad-controls"]||t.registerComponent("gamepad-controls",this["gamepad-controls"]),t.components["hmd-controls"]||t.registerComponent("hmd-controls",this["hmd-controls"]),t.components["keyboard-controls"]||t.registerComponent("keyboard-controls",this["keyboard-controls"]),t.components["mouse-controls"]||t.registerComponent("mouse-controls",this["mouse-controls"]),t.components["touch-controls"]||t.registerComponent("touch-controls",this["touch-controls"]),t.components["universal-controls"]||t.registerComponent("universal-controls",this["universal-controls"]),this._registered=!0)}}},function(t,e,n){t.exports={velocity:n(465),quaternion:n(466),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,t.components.velocity||t.registerComponent("velocity",this.velocity),t.components.quaternion||t.registerComponent("quaternion",this.quaternion),this._registered=!0)}}},function(t,e){t.exports={schema:{type:"vec3"},init:function(){this.system=this.el.sceneEl.systems.physics,this.system&&this.system.addBehavior(this,this.system.Phase.RENDER)},remove:function(){this.system&&this.system.removeBehavior(this,this.system.Phase.RENDER)},tick:function(t,e){isNaN(e)||this.system||this.step(t,e)},step:function(t,e){if(!isNaN(e)){var n=this.el.sceneEl.systems.physics||{maxInterval:1/60},r=this.el.getAttribute("velocity")||{x:0,y:0,z:0},i=this.el.getAttribute("position")||{x:0,y:0,z:0};e=Math.min(e,1e3*n.maxInterval),this.el.setAttribute("position",{x:i.x+r.x*e/1e3,y:i.y+r.y*e/1e3,z:i.z+r.z*e/1e3})}}}},function(t,e){t.exports={schema:{type:"vec4"},update:function(){var t=this.data;this.el.object3D.quaternion.set(t.x,t.y,t.z,t.w)}}},function(t,e){var n=.1;t.exports={schema:{enabled:{"default":!0},mode:{"default":"teleport",oneOf:["teleport","animate"]},animateSpeed:{"default":3}},init:function(){this.active=!0,this.checkpoint=null,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(t){this.active&&(this.checkpoint=t,"teleport"===this.data.mode&&(this.sync(),this.el.setAttribute("position",this.targetPosition)))},isVelocityActive:function(){return!(!this.active||!this.checkpoint)},getVelocity:function(){if(this.active){var t=this.data,e=this.offset,r=this.position,i=this.targetPosition;return this.sync(),r.distanceTo(i)<n?(this.checkpoint=null,e.set(0,0,0)):(e.setLength(t.animateSpeed),e)}},sync:function(){var t=this.offset,e=this.position,n=this.targetPosition;e.copy(this.el.getComputedAttribute("position")),n.copy(this.checkpoint.getComputedAttribute("position")),n.y=e.y,t.copy(n).sub(e)}}},function(t,e,n){var r=n(469),i=n(470),o=.2;t.exports={GamepadButton:r,schema:{controller:{"default":0,oneOf:[0,1,2,3]},enabled:{"default":!0},debug:{"default":!1}},init:function(){var t=this.el.sceneEl;this.prevTime=window.performance.now(),this.buttons={},t.addBehavior(this),this.getGamepad()||console.warn("Gamepad #%d not found. Connect controller and press any button to continue.",this.data.controller)},update:function(){this.tick()},tick:function(){this.updateButtonState()},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var t=this.getDpad(),e=this.getJoystick(0),n=t.x||e.x,r=t.y||e.y;return Math.abs(n)>o||Math.abs(r)>o},getVelocityDelta:function(){var t=this.getDpad(),e=this.getJoystick(0),n=t.x||e.x,r=t.y||e.y,i=new THREE.Vector3;return Math.abs(n)>o&&(i.x+=n),Math.abs(r)>o&&(i.z+=r),i},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var t=this.getJoystick(1);return Math.abs(t.x)>o||Math.abs(t.y)>o},getRotationDelta:function(){var t=this.getJoystick(1);return Math.abs(t.x)<=o&&(t.x=0),Math.abs(t.y)<=o&&(t.y=0),t},updateButtonState:function(){var t=this.getGamepad();if(this.data.enabled&&t)for(var e=0;e<t.buttons.length;e++)t.buttons[e].pressed&&!this.buttons[e]?this.emit(new i("gamepadbuttondown",e,t.buttons[e])):!t.buttons[e].pressed&&this.buttons[e]&&this.emit(new i("gamepadbuttonup",e,t.buttons[e])),this.buttons[e]=t.buttons[e].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(t){this.el.emit(t.type,t),this.el.emit(t.type+":"+t.index,new i(t.type,t.index,t))},getGamepad:function(){var t=navigator.getGamepads&&navigator.getGamepads()[this.data.controller],e=this.el.sceneEl.components["proxy-controls"],n=e&&e.isConnected()&&e.getGamepad(this.data.controller);return n||t},getButton:function(t){return this.getGamepad().buttons[t]},getAxis:function(t){return this.getGamepad().axes[t]},getJoystick:function(t){var e=this.getGamepad();switch(t){case 0:return new THREE.Vector2(e.axes[0],e.axes[1]);case 1:return new THREE.Vector2(e.axes[2],e.axes[3]);default:throw new Error('Unexpected joystick index "%d".',t)}},getDpad:function(){var t=this.getGamepad();return t.buttons[r.DPAD_RIGHT]?new THREE.Vector2((t.buttons[r.DPAD_RIGHT].pressed?1:0)+(t.buttons[r.DPAD_LEFT].pressed?-1:0),(t.buttons[r.DPAD_UP].pressed?-1:0)+(t.buttons[r.DPAD_DOWN].pressed?1:0)):new THREE.Vector2},isConnected:function(){var t=this.getGamepad();return!(!t||!t.connected)},getID:function(){return this.getGamepad().id}}},function(t,e){t.exports=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},function(t,e){function n(t,e,n){this.type=t,this.index=e,this.pressed=n.pressed,this.value=n.value}t.exports=n},function(t,e){var n=4;t.exports={schema:{enabled:{"default":!0}},init:function(){this.tPrev=0,this.dolly=new THREE.Object3D,this.euler=new THREE.Euler,this.controls=new THREE.VRControls(this.dolly),this.zeroQuaternion=new THREE.Quaternion},tick:function(t){t=t||Date.now(),t-this.tPrev>n&&(this.controls.update(),this.tPrev=t)},isRotationActive:function(){return this.data.enabled&&!this.dolly.quaternion.equals(this.zeroQuaternion)},getRotation:function(){var t=new THREE.Euler;return t.order="YXZ",function(){this.tick();var e=this.calculateHMDQuaternion();return t.setFromQuaternion(e),new THREE.Vector3(THREE.Math.radToDeg(t.x),THREE.Math.radToDeg(t.y),THREE.Math.radToDeg(t.z))}}(),calculateHMDQuaternion:function(){var t=new THREE.Quaternion;return function(){var e=this.dolly;return this.zeroed||e.quaternion.equals(this.zeroQuaternion)||(this.zeroOrientation(),this.zeroed=!0),t.copy(this.zeroQuaternion).multiply(e.quaternion),t}}(),zeroOrientation:function(){var t=new THREE.Euler;t.setFromQuaternion(this.dolly.quaternion.clone().inverse()),t.z=0,t.x=0,this.zeroQuaternion.setFromEuler(t)}}},function(t,e,n){n(473);var r="__keyboard-controls-proxy",i=window.KeyboardEvent;t.exports={schema:{enabled:{"default":!0},debug:{"default":!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this)},this.attachEventListeners()},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){var t=this.data,e=this.getKeys();return this.dVelocity.set(0,0,0),t.enabled&&((e.KeyW||e.ArrowUp)&&(this.dVelocity.z-=1),(e.KeyA||e.ArrowLeft)&&(this.dVelocity.x-=1),(e.KeyS||e.ArrowDown)&&(this.dVelocity.z+=1),(e.KeyD||e.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.pause()},attachEventListeners:function(){window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(t){this.localKeys[t.code]=!0,this.emit(t)},onKeyUp:function(t){delete this.localKeys[t.code],this.emit(t)},onBlur:function(){for(var t in this.localKeys)this.localKeys.hasOwnProperty(t)&&delete this.localKeys[t]},emit:function(t){r in t&&this.el.emit(t.type,t),this.el.emit(t.type+":"+t.code,new i(t.type,t)),this.data.debug&&console.log(t.type+":"+t.code)},isPressed:function(t){return t in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){var t=this.el.sceneEl.components["proxy-controls"];return t&&t.isConnected()}}},function(t,e){!function(t){function e(t,e){return String(t).indexOf(e)!==-1}function n(t,e,n){d!==e&&p!==e&&h!==e||Object.keys(n).forEach(function(e){t[e]=n[e]})}function r(t,e){var n={};return Object.keys(t).forEach(function(r){var i=t[r];e in i&&(n[i[e]]=i)}),n}function i(t){var e="keyCode"in t?t.keyCode:"which"in t?t.which:0,n=function(){if(_||"keyLocation"in t){var n=_?t.location:t.keyLocation;if(n&&e in v[n])return v[n][e]}return"keyIdentifier"in t&&t.keyIdentifier in m?m[t.keyIdentifier]:e in f?f[e]:null}();if(!n)return null;var r=function(){var e=y[n.code];return e?t.shiftKey&&"shiftKey"in e?e.shiftKey:e.key:n.code}();return{code:n.code,key:r,location:n.location,keyCap:n.keyCap}}function o(t,e){if(t=String(t),!x.hasOwnProperty(t))return"Undefined";if(e&&"en-us"!==String(e).toLowerCase())throw Error("Unsupported locale");var n=x[t];return n.keyCap||n.code||"Undefined"}var a="KeyboardEvent"in t;a||(t.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),t.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0,t.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1,t.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2,t.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3;var s=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,c=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,l=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,u=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD,h=function(){return e(navigator.platform,"Win")?"win":e(navigator.platform,"Mac")?"mac":e(navigator.platform,"CrOS")?"cros":e(navigator.platform,"Linux")?"linux":e(navigator.userAgent,"iPad")||e(navigator.platform,"iPod")||e(navigator.platform,"iPhone")?"ios":""}(),p=function(){return e(navigator.userAgent,"Chrome/")?"chrome":e(navigator.vendor,"Apple")?"safari":e(navigator.userAgent,"MSIE")?"ie":e(navigator.userAgent,"Gecko/")?"moz":e(navigator.userAgent,"Opera/")?"opera":""}(),d=p+"-"+h,f={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:c},92:{code:"OSRight",location:l},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:u},97:{code:"Numpad1",keyCap:"1",location:u},98:{code:"Numpad2",keyCap:"2",location:u},99:{code:"Numpad3",keyCap:"3",location:u},100:{code:"Numpad4",keyCap:"4",location:u},101:{code:"Numpad5",keyCap:"5",location:u},102:{code:"Numpad6",keyCap:"6",location:u},103:{code:"Numpad7",keyCap:"7",location:u},104:{code:"Numpad8",keyCap:"8",location:u},105:{code:"Numpad9",keyCap:"9",location:u},106:{code:"NumpadMultiply",keyCap:"*",location:u},107:{code:"NumpadAdd",keyCap:"+",location:u},108:{code:"NumpadComma",keyCap:",",location:u},109:{code:"NumpadSubtract",keyCap:"-",location:u},110:{code:"NumpadDecimal",keyCap:".",location:u},111:{code:"NumpadDivide",keyCap:"/",location:u},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:u},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:c},161:{code:"ShiftRight",location:l},162:{code:"ControlLeft",location:c},163:{code:"ControlRight",location:l},164:{code:"AltLeft",location:c},165:{code:"AltRight",location:l},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};n(f,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:u},189:{code:"NumpadSubtract",keyCap:"-",location:u}}),n(f,"moz-mac",{12:{code:"NumLock",location:u},173:{code:"Minus",keyCap:"-"}}),n(f,"moz-win",{173:{code:"Minus",keyCap:"-"}}),n(f,"chrome-mac",{93:{code:"OSRight",location:l}}),n(f,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),n(f,"ios",{10:{code:"Enter",location:s}}),n(f,"safari-mac",{91:{code:"OSLeft",location:c},93:{code:"OSRight",location:l},229:{code:"KeyQ",keyCap:"Q"}});var m={};"cros"===h&&(m["U+00A0"]={code:"ShiftLeft",location:c},m["U+00A1"]={code:"ShiftRight",location:l},m["U+00A2"]={code:"ControlLeft",location:c},m["U+00A3"]={code:"ControlRight",location:l},m["U+00A4"]={code:"AltLeft",location:c},m["U+00A5"]={code:"AltRight",location:l}),"chrome-mac"===d&&(m["U+0010"]={code:"ContextMenu"}),"safari-mac"===d&&(m["U+0010"]={code:"ContextMenu"}),"ios"===h&&(m["U+0010"]={code:"Function"},m["U+001C"]={code:"ArrowLeft"},m["U+001D"]={code:"ArrowRight"},m["U+001E"]={code:"ArrowUp"},m["U+001F"]={code:"ArrowDown"},m["U+0001"]={code:"Home"},m["U+0004"]={code:"End"},m["U+000B"]={code:"PageUp"},m["U+000C"]={code:"PageDown"});var v=[];v[c]={16:{code:"ShiftLeft",location:c},17:{code:"ControlLeft",location:c},18:{code:"AltLeft",location:c}},v[l]={16:{code:"ShiftRight",location:l},17:{code:"ControlRight",location:l},18:{code:"AltRight",location:l}},v[u]={13:{code:"NumpadEnter",location:u}},n(v[u],"moz",{109:{code:"NumpadSubtract",location:u},107:{code:"NumpadAdd",location:u}}),n(v[c],"moz-mac",{224:{code:"OSLeft",location:c}}),n(v[l],"moz-mac",{224:{code:"OSRight",location:l}}),n(v[l],"moz-win",{91:{code:"OSRight",location:l}}),n(v[l],"mac",{93:{code:"OSRight",location:l}}),n(v[u],"chrome-mac",{12:{code:"NumLock",location:u}}),n(v[u],"safari-mac",{12:{code:"NumLock",location:u},187:{code:"NumpadAdd",location:u},189:{code:"NumpadSubtract",location:u},190:{code:"NumpadDecimal",location:u},191:{code:"NumpadDivide",location:u}});var y={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};n(y,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var g={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},x=r(f,"code");try{var _=a&&"location"in new KeyboardEvent("")}catch(b){}"KeyboardEvent"in t&&"defineProperty"in Object&&!function(){function t(t,e,n){e in t||Object.defineProperty(t,e,n)}if(t(KeyboardEvent.prototype,"code",{get:function(){var t=i(this);return t?t.code:""}}),"key"in KeyboardEvent.prototype){var e=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var t=e.get.call(this);return g.hasOwnProperty(t)?g[t]:t}})}t(KeyboardEvent.prototype,"key",{get:function(){var t=i(this);return t&&"key"in t?t.key:"Unidentified"}}),t(KeyboardEvent.prototype,"location",{get:function(){var t=i(this);return t&&"location"in t?t.location:s}}),t(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in t.KeyboardEvent||(t.KeyboardEvent.queryKeyCap=o),t.identifyKey=function(t){if(!("code"in t)){var e=i(t);t.code=e?e.code:"",t.key=e&&"key"in e?e.key:"Unidentified",t.location="location"in t?t.location:"keyLocation"in t?t.keyLocation:e&&"location"in e?e.location:s,t.locale=""}}}(window)},function(t,e){t.exports={schema:{enabled:{"default":!0},pointerlockEnabled:{"default":!0},sensitivity:{"default":.04}},init:function(){this.mouseDown=!1,this.pointerLocked=!1,this.lookVector=new THREE.Vector2,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.lookVector.set(0,0)},remove:function(){this.pause()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas,n=this.data;return e?(e.addEventListener("mousedown",this.onMouseDown,!1),e.addEventListener("mousemove",this.onMouseMove,!1),e.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("mouseout",this.onMouseUp,!1),void(n.pointerlockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1)))):void t.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var t=this.el.sceneEl&&this.el.sceneEl.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown,!1),t.removeEventListener("mousemove",this.onMouseMove,!1),t.removeEventListener("mouseup",this.onMouseUp,!1),t.removeEventListener("mouseout",this.onMouseUp,!1)),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1)},isRotationActive:function(){return this.data.enabled&&(this.mouseDown||this.pointerLocked)},getRotationDelta:function(){var t=this.lookVector.clone().multiplyScalar(this.data.sensitivity);return this.lookVector.set(0,0),t},onMouseMove:function(t){var e=this.previousMouseEvent;if(this.data.enabled&&(this.mouseDown||this.pointerLocked)){var n=t.movementX||t.mozMovementX||0,r=t.movementY||t.mozMovementY||0;this.pointerLocked||(n=t.screenX-e.screenX,r=t.screenY-e.screenY),this.lookVector.x+=n,this.lookVector.y+=r,this.previousMouseEvent=t}},onMouseDown:function(t){var e=this.el.sceneEl.canvas;this.mouseDown=!0,this.previousMouseEvent=t,this.data.pointerlockEnabled&&!this.pointerLocked&&(e.requestPointerLock?e.requestPointerLock():e.mozRequestPointerLock&&e.mozRequestPointerLock())},onMouseUp:function(){this.mouseDown=!1},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1}}},function(t,e){t.exports={schema:{enabled:{"default":!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;return e?(e.addEventListener("touchstart",this.onTouchStart),void e.addEventListener("touchend",this.onTouchEnd)):void t.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var t=this.el.sceneEl&&this.el.sceneEl.canvas;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchend",this.onTouchEnd))},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-1:0,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onTouchStart:function(t){this.isMoving=!0,t.preventDefault()},onTouchEnd:function(t){this.isMoving=!1,t.preventDefault()}}},function(t,e){var n="-controls",r=.2,i=Math.PI/2;t.exports={dependencies:["velocity","rotation"],schema:{enabled:{"default":!0},movementEnabled:{"default":!0},movementControls:{
"default":["gamepad","keyboard","touch"]},rotationEnabled:{"default":!0},rotationControls:{"default":["hmd","gamepad","mouse"]},movementSpeed:{"default":5},movementEasing:{"default":15},movementAcceleration:{"default":80},rotationSensitivity:{"default":.05}},init:function(){this.velocity=new THREE.Vector3,this.pitch=new THREE.Object3D,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.add(this.pitch),this.heading=new THREE.Euler(0,0,0,"YXZ"),this.el.sceneEl.hasLoaded?this.injectControls():this.el.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(){this.el.sceneEl.hasLoaded&&this.injectControls()},injectControls:function(){var t,e,r=this.data;for(t=0;t<r.movementControls.length;t++)e=r.movementControls[t]+n,this.el.components[e]||this.el.setAttribute(e,"");for(t=0;t<r.rotationControls.length;t++)e=r.rotationControls[t]+n,this.el.components[e]||this.el.setAttribute(e,"")},tick:function(t,e){isNaN(e)||(this.data.rotationEnabled&&this.updateRotation(e),this.data.movementEnabled&&e/1e3>r?(this.velocity.set(0,0,0),this.el.setAttribute("velocity",this.velocity)):this.updateVelocity(e))},updateRotation:function(t){for(var e,r,o=this.data,a=0,s=o.rotationControls.length;a<s;a++)if(e=this.el.components[o.rotationControls[a]+n],e&&e.isRotationActive()){if(e.getRotationDelta)r=e.getRotationDelta(t),r.multiplyScalar(o.rotationSensitivity),this.yaw.rotation.y-=r.x,this.pitch.rotation.x-=r.y,this.pitch.rotation.x=Math.max(-i,Math.min(i,this.pitch.rotation.x)),this.el.setAttribute("rotation",{x:THREE.Math.radToDeg(this.pitch.rotation.x),y:THREE.Math.radToDeg(this.yaw.rotation.y),z:0});else{if(!e.getRotation)throw new Error("Incompatible rotation controls: %s",o.rotationControls[a]);this.el.setAttribute("rotation",e.getRotation())}break}},updateVelocity:function(t){var e,r,i,o=this.data;if(o.movementEnabled)for(var a=0,s=o.movementControls.length;a<s;a++)if(e=this.el.components[o.movementControls[a]+n],e&&e.isVelocityActive()){if(!e.getVelocityDelta){if(e.getVelocity)return void this.el.setAttribute("velocity",e.getVelocity());throw new Error("Incompatible movement controls: ",o.movementControls[a])}i=e.getVelocityDelta(t);break}if(r=this.velocity,r.copy(this.el.getAttribute("velocity")),r.x-=r.x*o.movementEasing*t/1e3,r.z-=r.z*o.movementEasing*t/1e3,i&&o.movementEnabled){i.length()>1?i.setLength(this.data.movementAcceleration*t/1e3):i.multiplyScalar(this.data.movementAcceleration*t/1e3);var c=this.el.getAttribute("rotation");c&&(this.heading.set(0,THREE.Math.degToRad(c.y),0),i.applyEuler(this.heading)),r.add(i)}this.el.setAttribute("velocity",r)}}},function(t,e,n){t.exports={"fbx-model":n(478),"ply-model":n(480),"three-model":n(482),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,t.components["fbx-model"]||t.registerComponent("fbx-model",this["fbx-model"]),t.components["ply-model"]||t.registerComponent("ply-model",this["ply-model"]),t.components["three-model"]||t.registerComponent("three-model",this["three-model"]),this._registered=!0)}}},function(t,e,n){THREE.FBXLoader=n(479),t.exports={schema:{src:{type:"src"}},init:function(){this.model=null},update:function(){var t,e=this.data;return e.src?(this.remove(),t=new THREE.FBXLoader,void t.load(e.src,this.load.bind(this))):void console.warn("[%s] `src` property is required.",this.name)},load:function(t){this.model=t,this.el.setObject3D("mesh",t),this.el.emit("model-loaded",{format:"fbx",model:t})},remove:function(){this.model&&this.el.removeObject3D("mesh")}}},function(t,e){function n(){}function r(){}function i(){}function o(){this.skinIndices=[],this.skinWeights=[],this.matrices=[]}function a(){this.hierarchy=[]}function s(){this.node=null,this.name=null,this.id=null,this.vertices=[],this.indices=[],this.normals=[],this.uvs=[],this.bones=[],this.skins=null}function c(){this.uv=null,this.map=null,this.ref=null,this.node=null,this.index=null}function l(){this.normal=null,this.map=null,this.ref=null,this.node=null,this.index=null}function u(){this.version=null,this.id=null,this.internalId=null,this.times=null,this.values=null,this.attrFlag=null,this.attrData=null}function h(){this.id=null,this.attr=null,this.attrX=!1,this.attrY=!1,this.attrZ=!1,this.internalId=null,this.containerInternalId=null,this.containerBoneId=null,this.curveIdx=null,this.curves=[]}function p(){this.curves={},this.length=0,this.fps=30,this.frames=0}function d(){this.textures=[],this.perGeoMap={}}function f(){this.fileName="",this.name="",this.id=null,this.parentIds=[]}function m(t,e,n){for(var r=[],i=0;i<e.length;++i)for(var o=0;o<n;++o)r.push(t[e[i]*n+o]);return r}function v(t,e,n){for(var r={},i=[],o=0,a=0;a<e.length;++a)if(!(e[a]in r)){r[e[a]]={};for(var s=0;s<n;++s)r[e[a]][s]=t[a*n+s];o=o<e[a]?e[a]:o}try{for(a=0;a<=o;a++)for(var c=0;c<n;c++)i.push(r[a][c])}catch(l){}return i}THREE.FBXLoader=function(t,e){THREE.Loader.call(this,t),this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.textureLoader=null,this.textureBasePath=null},THREE.FBXLoader.prototype=Object.create(THREE.Loader.prototype),THREE.FBXLoader.prototype.constructor=THREE.FBXLoader,THREE.FBXLoader.prototype.load=function(t,e,n,r){var i=this,o=new THREE.XHRLoader(i.manager);o.load(t,function(n){i.isFbxFormatASCII(n)?i.isFbxVersionSupported(n)?(i.textureBasePath=i.extractUrlBase(t),e(i.parse(n))):console.warn("FBXLoader: !!! FBX Version below 7 not supported !!!"):console.warn("FBXLoader: !!! FBX Binary format not supported !!!")},n,r)},THREE.FBXLoader.prototype.setCrossOrigin=function(t){this.crossOrigin=t},THREE.FBXLoader.prototype.isFbxFormatASCII=function(t){CORRECT=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];for(var e=0,n=function(n){var r=t[n-1];return t=t.slice(e+n),e++,r},r=0;r<CORRECT.length;++r)if(num=n(1),num==CORRECT[r])return!1;return!0},THREE.FBXLoader.prototype.isFbxVersionSupported=function(t){var e=/FBXVersion: (\d+)/;if(match=t.match(e),match){var n=parseInt(match[1]);return console.log("FBXLoader: FBX version "+n),n>=7e3}return!1},THREE.FBXLoader.prototype.parse=function(t){var e=this;console.time("FBXLoader"),console.time("FBXLoader: TextParser");var n=(new r).parse(t);console.timeEnd("FBXLoader: TextParser"),console.time("FBXLoader: ObjectParser"),e.hierarchy=(new a).parseHierarchy(n),e.weights=(new o).parse(n,e.hierarchy),e.animations=(new p).parse(n,e.hierarchy),e.textures=(new d).parse(n,e.hierarchy),console.timeEnd("FBXLoader: ObjectParser"),console.time("FBXLoader: GeometryParser"),geometries=this.parseGeometries(n),console.timeEnd("FBXLoader: GeometryParser");for(var i=new THREE.Group,s=0;s<geometries.length;++s)void 0!==geometries[s]&&i.add(geometries[s]);return console.timeEnd("FBXLoader"),i},THREE.FBXLoader.prototype.parseGeometries=function(t){if(!("Geometry"in t.Objects.subNodes))return[];var e=0;for(var n in t.Objects.subNodes.Geometry)n.match(/^\d+$/)&&e++;var r=[];if(e>0)for(n in t.Objects.subNodes.Geometry)"Mesh"===t.Objects.subNodes.Geometry[n].attrType&&r.push(this.parseGeometry(t.Objects.subNodes.Geometry[n],t));else r.push(this.parseGeometry(t.Objects.subNodes.Geometry,t));return r},THREE.FBXLoader.prototype.parseGeometry=function(t,e){geo=(new s).parse(t),geo.addBones(this.hierarchy.hierarchy);var n=new THREE.BufferGeometry;n.name=geo.name,n.addAttribute("position",new THREE.BufferAttribute(new Float32Array(geo.vertices),3)),void 0!==geo.normals&&geo.normals.length>0&&n.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(geo.normals),3)),void 0!==geo.uvs&&geo.uvs.length>0&&n.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(geo.uvs),2)),void 0!==geo.indices&&geo.indices.length>65535?n.setIndex(new THREE.BufferAttribute(new Uint32Array(geo.indices),1)):void 0!==geo.indices&&n.setIndex(new THREE.BufferAttribute(new Uint16Array(geo.indices),1)),n.verticesNeedUpdate=!0,n.computeBoundingSphere(),n.computeBoundingBox();var r,i=this.textures.getById(e.searchConnectionParent(geo.id));void 0!==i&&i.length>0&&(null===this.textureLoader&&(this.textureLoader=new THREE.TextureLoader),r=this.textureLoader.load(this.textureBasePath+"/"+i[0].fileName));var o;o=void 0!==r?new THREE.MeshBasicMaterial({map:r}):new THREE.MeshBasicMaterial({color:3342591}),n=(new THREE.Geometry).fromBufferGeometry(n),n.bones=geo.bones,n.skinIndices=this.weights.skinIndices,n.skinWeights=this.weights.skinWeights;var a=null;return void 0===geo.bones||void 0===geo.skins||void 0===this.animations||0===this.animations.length?a=new THREE.Mesh(n,o):(o.skinning=!0,a=new THREE.SkinnedMesh(n,o),this.addAnimation(a,this.weights.matrices,this.animations)),a},THREE.FBXLoader.prototype.addAnimation=function(t,e,n){for(var r={name:"animationtest",fps:30,length:n.length,hierarchy:[]},i=0;i<t.geometry.bones.length;++i){var o=t.geometry.bones[i].name;o=o.replace(/.*:/,""),r.hierarchy.push({parent:t.geometry.bones[i].parent,name:o,keys:[]})}var a=function(t,e){if(void 0===t)return!1;var n;switch(e){case"S":if(void 0===t.S)return!1;n=t.S;break;case"R":if(void 0===t.R)return!1;n=t.R;break;case"T":if(void 0===t.T)return!1;n=t.T}return void 0!==n.curves.x&&(void 0!==n.curves.y&&void 0!==n.curves.z)},s=function(t,e){var n=c(t.curves.x,e),r=c(t.curves.y,e),i=c(t.curves.z,e);return n&&r&&i},c=function(t,e){var n=t.values[e];return void 0!==n},l=function(t,e){var r={};if(r.time=frame/n.fps,r.pos=e.pos,r.rot=e.rotq,r.scl=e.scl,void 0===t)return r;try{if(a(t,"T")&&s(t.T,frame)){var i=new THREE.Vector3(t.T.curves.x.values[frame],t.T.curves.y.values[frame],t.T.curves.z.values[frame]);r.pos=[i.x,i.y,i.z]}else delete r.pos;if(a(t,"R")&&s(t.R,frame)){var o=degToRad(t.R.curves.x.values[frame]),c=degToRad(t.R.curves.y.values[frame]),l=degToRad(t.R.curves.z.values[frame]),u=new THREE.Vector3(o,c,l),h=quatFromVec(u.x,u.y,u.z);r.rot=[h.x,h.y,h.z,h.w]}else delete r.rot;if(a(t,"S")&&s(t.S,frame)){var p=new THREE.Vector3(t.S.curves.x.values[frame],t.S.curves.y.values[frame],t.S.curves.z.values[frame]);r.scl=[p.x,p.y,p.z]}else delete r.scl}catch(d){console.log(e),console.log(d)}return r},u=t.geometry.bones;for(frame=0;frame<n.frames;frame++)for(i=0;i<u.length;i++)for(var h=u[i],p=n.curves[i],d=0;d<r.hierarchy.length;d++)r.hierarchy[d].name===h.name&&r.hierarchy[d].keys.push(l(p,h));void 0===t.geometry.animations&&(t.geometry.animations=[]),t.geometry.animations.push(THREE.AnimationClip.parseAnimation(r,t.geometry.bones))},THREE.FBXLoader.prototype.parseMaterials=function(t){if(!("Material"in t.subNodes))return[];var e=0;for(var n in t.subNodes.Materials)n.match(/^\d+$/)&&e++;var r=[];if(e>0)for(n in t.subNodes.Material)r.push(parseMaterial(t.subNodes.Material[n]));else r.push(parseMaterial(t.subNodes.Material));return r},THREE.FBXLoader.prototype.parseMaterial=function(t){},THREE.FBXLoader.prototype.loadFile=function(t,e,n,r,i){var o=new THREE.XHRLoader(this.manager);o.setResponseType(i);var a=o.load(t,function(t){e(t)},n,r);return a},THREE.FBXLoader.prototype.loadFileAsBuffer=function(t,e,n,r){this.loadFile(t,onLoad,n,r,"arraybuffer")},THREE.FBXLoader.prototype.loadFileAsText=function(t,e,n,r){this.loadFile(t,e,n,r,"text")},n.prototype.add=function(t,e){this[t]=e},n.prototype.searchConnectionParent=function(t){if(void 0===this.__cache_search_connection_parent&&(this.__cache_search_connection_parent=[]),void 0!==this.__cache_search_connection_parent[t])return this.__cache_search_connection_parent[t];this.__cache_search_connection_parent[t]=[];for(var e=this.Connections.properties.connections,n=[],r=0;r<e.length;++r)if(e[r][0]==t){var i=0===e[r][1]?-1:e[r][1];n.push(i)}return n.length>0?(this.__cache_search_connection_parent[t]=this.__cache_search_connection_parent[t].concat(n),n):(this.__cache_search_connection_parent[t]=[-1],[-1])},n.prototype.searchConnectionChildren=function(t){if(void 0===this.__cache_search_connection_children&&(this.__cache_search_connection_children=[]),void 0!==this.__cache_search_connection_children[t])return this.__cache_search_connection_children[t];this.__cache_search_connection_children[t]=[];for(var e=this.Connections.properties.connections,n=[],r=0;r<e.length;++r)e[r][1]==t&&n.push(0===e[r][0]?-1:e[r][0]);return n.length>0?(this.__cache_search_connection_children[t]=this.__cache_search_connection_children[t].concat(n),n):(this.__cache_search_connection_children[t]=[-1],[-1])},n.prototype.searchConnectionType=function(t,e){var n=t+","+e;if(void 0===this.__cache_search_connection_type&&(this.__cache_search_connection_type=""),void 0!==this.__cache_search_connection_type[n])return this.__cache_search_connection_type[n];this.__cache_search_connection_type[n]="";for(var r=this.Connections.properties.connections,i=0;i<r.length;++i)if(r[i][0]==t&&r[i][1]==e)return this.__cache_search_connection_type[n]=r[i][2],r[i][2];return this.__cache_search_connection_type[t]=null,null},r.prototype={getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(t){this.nodeStack.push(t),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(t,e){this.currentProp=t,this.currentPropName=e},parse:function(t){this.currentIndent=0,this.allNodes=new n,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=t.split("\n");for(var r in e){var i=e[r];if(!i.match(/^[\s\t]*;/)&&!i.match(/^[\s\t]*$/)){var o=new RegExp("^\\t{"+this.currentIndent+"}(\\w+):(.*){","");if(match=i.match(o),match){var a=match[1].trim().replace(/^"/,"").replace(/"$/,""),s=match[2].split(",").map(function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")});this.parseNodeBegin(i,a,s||null)}else{var c=new RegExp("^\\t{"+this.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)");if(match=i.match(c),match){var l=match[1].replace(/^"/,"").replace(/"$/,"").trim(),u=match[2].replace(/^"/,"").replace(/"$/,"").trim();this.parseNodeProperty(i,l,u)}else{var h=new RegExp("^\\t{"+(this.currentIndent-1)+"}}");i.match(h)?this.nodeEnd():i.match(/^[^\s\t}]/)&&this.parseNodePropertyContinued(i)}}}}return this.allNodes},parseNodeBegin:function(t,e,n){var r={name:e,properties:{},subNodes:{}},i=this.parseNodeAttr(n),o=this.getCurrentNode();if(0===this.currentIndent)this.allNodes.add(e,r);else if(e in o.subNodes){var a=o.subNodes[e];this.isFlattenNode(o.subNodes[e])&&(""===i.id?(o.subNodes[e]=[],o.subNodes[e].push(a)):(o.subNodes[e]={},o.subNodes[e][a.id]=a)),""===i.id?o.subNodes[e].push(r):o.subNodes[e][i.id]=r}else o.subNodes[e]=r;n&&(r.id=i.id,r.attrName=i.name,r.attrType=i.type),this.pushStack(r)},parseNodeAttr:function(t){var e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));var n,r;return t.length>1&&(n=t[1].replace(/^(\w+)::/,""),r=t[2]),{id:e,name:n||"",type:r||""}},parseNodeProperty:function(t,e,n){var r=this.getCurrentNode(),i=r.name;if(void 0!==i){var o=i.match(/Properties(\d)+/);if(o)return void this.parseNodeSpecialProperty(t,e,n)}if("C"==e){var a=n.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),l=n.split(",").slice(3);e="connections",n=[s,c],n=n.concat(l),void 0===r.properties[e]&&(r.properties[e]=[])}if("Node"==e){var u=parseInt(n);r.properties.id=u,r.id=u}e in r.properties?Array.isArray(r.properties[e])?r.properties[e].push(n):r.properties[e]+=n:Array.isArray(r.properties[e])?r.properties[e].push(n):r.properties[e]=n,this.setCurrentProp(r.properties,e)},parseNodePropertyContinued:function(t){this.currentProp[this.currentPropName]+=t},parseNodeSpecialProperty:function(t,e,n){var r=n.split('",').map(function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")}),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];switch(o){case"int":c=parseInt(c);break;case"double":c=parseFloat(c);break;case"ColorRGB":case"Vector3D":var l=c.split(",");c=new THREE.Vector3(l[0],l[1],l[2])}this.getPrevNode().properties[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode().properties,i)},nodeEnd:function(t){this.popStack()},isFlattenNode:function(t){return"subNodes"in t&&"properties"in t}},i.prototype={},o.prototype.parseCluster=function(t,e,n){var r=t.searchConnectionParent(e),i=toInt(n.subNodes.Indexes.properties.a.split(",")),o=toFloat(n.subNodes.Weights.properties.a.split(",")),a=toMat44(toFloat(n.subNodes.Transform.properties.a.split(","))),s=toMat44(toFloat(n.subNodes.TransformLink.properties.a.split(",")));return{parent:r,id:parseInt(e),indices:i,weights:o,transform:a,transformlink:s,linkMode:n.properties.Mode}},o.prototype.parse=function(t,e){this.skinIndices=[],this.skinWeights=[],this.matrices=[];var n=t.Objects.subNodes.Deformer,r={};for(var i in n)if("Cluster"===n[i].attrType){if(!("Indexes"in n[i].subNodes))continue;var o=this.parseCluster(t,i,n[i]),a=t.searchConnectionChildren(o.id)[0];r[a]=o}for(var s=[],c=e.hierarchy,l=0;l<c.length;++l){var u=c[l].internalId;if(void 0!==r[u]){var h=r[u];this.matrices.push(h.transform);for(var p=0;p<h.indices.length;++p){void 0===s[h.indices[p]]&&(s[h.indices[p]]={},s[h.indices[p]].joint=[],s[h.indices[p]].weight=[]);var d=t.searchConnectionChildren(h.id);d.length>1&&console.warn("FBXLoader: node "+h.id+" have many weight kids: "+d),s[h.indices[p]].joint.push(e.getBoneIdfromInternalId(t,d[0])),s[h.indices[p]].weight.push(h.weights[p])}}else this.matrices.push(new THREE.Matrix4)}for(var f=0;f<s.length;f++){var m=new THREE.Vector4(s[f].joint[0]?s[f].joint[0]:0,s[f].joint[1]?s[f].joint[1]:0,s[f].joint[2]?s[f].joint[2]:0,s[f].joint[3]?s[f].joint[3]:0),v=new THREE.Vector4(s[f].weight[0]?s[f].weight[0]:0,s[f].weight[1]?s[f].weight[1]:0,s[f].weight[2]?s[f].weight[2]:0,s[f].weight[3]?s[f].weight[3]:0);this.skinIndices.push(m),this.skinWeights.push(v)}return this},a.prototype.parseHierarchy=function(t){var e=t.Objects,n=e.subNodes.Model,r=[];for(var i in n)void 0!==n[i].attrType&&r.push(n[i]);this.hierarchy=[];for(var o=0;o<r.length;++o){var a=r[o],s=t.searchConnectionParent(a.id)[0],c=[0,0,0],l=[0,0,0,1],u=[1,1,1];if("Lcl_Translation"in a.properties&&(c=toFloat(a.properties.Lcl_Translation.value.split(","))),"Lcl_Rotation"in a.properties){l=toRad(toFloat(a.properties.Lcl_Rotation.value.split(",")));var h=new THREE.Quaternion;h.setFromEuler(new THREE.Euler(l[0],l[1],l[2],"ZYX")),l=[h.x,h.y,h.z,h.w]}"Lcl_Scaling"in a.properties&&(u=toFloat(a.properties.Lcl_Scaling.value.split(",")));var p=a.attrName;p=p.replace(/:/,""),p=p.replace(/_/,""),p=p.replace(/-/,""),this.hierarchy.push({parent:s,name:p,pos:c,rotq:l,scl:u,internalId:a.id})}return this.reindexParentId(),this.restoreBindPose(t),this},a.prototype.reindexParentId=function(){for(var t=0;t<this.hierarchy.length;t++)for(var e=0;e<this.hierarchy.length;++e)if(this.hierarchy[t].parent==this.hierarchy[e].internalId){this.hierarchy[t].parent=e;break}},a.prototype.restoreBindPose=function(t){var e=t.Objects.subNodes.Pose;if(void 0!==e){for(var n=e.subNodes.PoseNode,r={},i={},o=0;o<n.length;++o){var a=toMat44(n[o].subNodes.Matrix.properties.a.split(",")),s=toMat44(n[o].subNodes.Matrix.properties.a.split(","));r[n[o].id]=a,i[n[o].id]=s}for(var c=0;c<this.hierarchy.length;++c){var l=this.hierarchy[c],u=l.internalId;if(void 0!==i[u]){for(var h,p=new THREE.Vector3(0,0,0),d=new THREE.Quaternion,f=new THREE.Vector3(1,1,1),m=t.searchConnectionParent(u),v=0;v<m.length;++v)if(this.isBoneNode(m[v])){h=m[v];break}if(void 0!==h&&void 0!==r[h]){var y=new THREE.Matrix4;y.getInverse(i[h]),y.multiply(r[u]),r[u]=y}r[u].decompose(p,d,f),l.pos=[p.x,p.y,p.z],l.rotq=[d.x,d.y,d.z,d.w],l.scl=[f.x,f.y,f.z]}}}},a.prototype.searchRealId=function(t){for(var e=0;e<this.hierarchy.length;e++)if(t==this.hierarchy[e].internalId)return e;return-1},a.prototype.getByInternalId=function(t){for(var e=0;e<this.hierarchy.length;e++)if(t==this.hierarchy[e].internalId)return this.hierarchy[e];return null},a.prototype.isBoneNode=function(t){for(var e=0;e<this.hierarchy.length;++e)if(t===this.hierarchy[e].internalId)return!0;return!1},a.prototype.getBoneIdfromInternalId=function(t,e){if(void 0===t.__cache_get_boneid_from_internalid&&(t.__cache_get_boneid_from_internalid=[]),void 0!==t.__cache_get_boneid_from_internalid[e])return t.__cache_get_boneid_from_internalid[e];for(var n=0;n<this.hierarchy.length;++n)if(this.hierarchy[n].internalId==e){return t.__cache_get_boneid_from_internalid[e]=n,n}return-1},s.prototype.parse=function(t){return this.node=t,this.name=t.attrName,this.id=t.id,this.vertices=this.getVertices(),void 0===this.vertices?void console.log("FBXLoader: Geometry.parse(): pass"+this.node.id):(this.indices=this.getPolygonVertexIndices(),this.uvs=(new c).parse(this.node,this),this.normals=(new l).parse(this.node,this),this.getPolygonTopologyMax()>3&&(this.indices=this.convertPolyIndicesToTri(this.indices,this.getPolygonTopologyArray())),this)},s.prototype.getVertices=function(){if(this.node.__cache_vertices)return this.node.__cache_vertices;if(void 0===this.node.subNodes.Vertices)return console.warn("this.node: "+this.node.attrName+"("+this.node.id+") does not have Vertices"),this.node.__cache_vertices=void 0,null;var t=this.node.subNodes.Vertices.properties.a,e=t.split(",").map(function(t){return parseFloat(t)});return this.node.__cache_vertices=e,this.node.__cache_vertices},s.prototype.getPolygonVertexIndices=function(){if(this.node.__cache_indices&&this.node.__cache_poly_topology_max)return this.node.__cache_indices;if(void 0===this.node.subNodes)return console.error("this.node.subNodes undefined"),void console.log(this.node);if(void 0===this.node.subNodes.PolygonVertexIndex)return console.warn("this.node: "+this.node.attrName+"("+this.node.id+") does not have PolygonVertexIndex "),void(this.node.__cache_indices=void 0);for(var t=this.node.subNodes.PolygonVertexIndex.properties.a,e=t.split(","),n=1,r=null,i=[],o=0;o<e.length;++o){var a=parseInt(e[o]);a<0?(n>r&&(r=n),e[o]=a^-1,i.push(n),n=1):(e[o]=a,n++)}return null===r&&(console.warn("FBXLoader: topology N not found: "+this.node.attrName),console.warn(this.node),r=3),this.node.__cache_poly_topology_max=r,this.node.__cache_poly_topology_arr=i,this.node.__cache_indices=e,this.node.__cache_indices},s.prototype.getPolygonTopologyMax=function(){return this.node.__cache_indices&&this.node.__cache_poly_topology_max?this.node.__cache_poly_topology_max:(this.getPolygonVertexIndices(this.node),this.node.__cache_poly_topology_max)},s.prototype.getPolygonTopologyArray=function(){return this.node.__cache_indices&&this.node.__cache_poly_topology_max?this.node.__cache_poly_topology_arr:(this.getPolygonVertexIndices(this.node),this.node.__cache_poly_topology_arr)},s.prototype.convertPolyIndicesToTri=function(t,e){for(var n=[],r=0,i=0,o=0;r<t.length;){o=e[i];for(var a=0;a<=o-3;a++)n.push(t[r]),n.push(t[r+(o-2-a)]),n.push(t[r+(o-1-a)]);i++,r+=o}return n},s.prototype.addBones=function(t){this.bones=t},c.prototype.getUV=function(t){return this.node&&this.uv&&this.map&&this.ref?this.uv:this._parseText(t)},c.prototype.getMap=function(t){return this.node&&this.uv&&this.map&&this.ref?this.map:(this._parseText(t),this.map)},c.prototype.getRef=function(t){return this.node&&this.uv&&this.map&&this.ref?this.ref:(this._parseText(t),this.ref)},c.prototype.getIndex=function(t){return this.node&&this.uv&&this.map&&this.ref?this.index:(this._parseText(t),this.index)},c.prototype.getNode=function(t){return null!==this.node?this.node:(this.node=t.subNodes.LayerElementUV,this.node)},c.prototype._parseText=function(t){var e=this.getNode(t);if(void 0===e)return[];var n=0,r="";for(var i in e)i.match(/^\d+$/)&&(n++,r=i);n>0&&(console.warn("multi uv not supported"),e=e[i]);var o=e.subNodes.UVIndex.properties.a,a=e.subNodes.UV.properties.a,s=e.properties.MappingInformationType,c=e.properties.ReferenceInformationType;return this.uv=toFloat(a.split(",")),this.index=toInt(o.split(",")),this.map=s,this.ref=c,this.uv},c.prototype.parse=function(t,e){this.uvNode=this.getNode(t),this.uv=this.getUV(t);var n=this.getMap(t),r=this.getRef(t),i=this.getIndex(t),o=e.getPolygonTopologyArray();switch(n){case"ByPolygonVertex":switch(r){case"Direct":this.uv=this.parseUV_ByPolygonVertex_Direct(this.uv,i,o,2);break;case"IndexToDirect":this.uv=this.parseUV_ByPolygonVertex_IndexToDirect(this.uv,i)}this.uv=v(this.uv,e.getPolygonVertexIndices(t),2);break;case"ByPolygon":switch(r){case"Direct":this.uv=this.parseUV_ByPolygon_Direct();break;case"IndexToDirect":this.uv=this.parseUV_ByPolygon_IndexToDirect()}}return this.uv},c.prototype.parseUV_ByPolygonVertex_Direct=function(t,e,n,r){return parse_Data_ByPolygonVertex_Direct(t,e,n,r)},c.prototype.parseUV_ByPolygonVertex_IndexToDirect=function(t,e){return m(t,e,2)},c.prototype.parseUV_ByPolygon_Direct=function(t){return console.warn("not implemented"),t},c.prototype.parseUV_ByPolygon_IndexToDirect=function(t){return console.warn("not implemented"),t},c.prototype.parseUV_ByVertex_Direct=function(t){return console.warn("not implemented"),t},l.prototype.getNormal=function(t){return this.node&&this.normal&&this.map&&this.ref?this.normal:(this._parseText(t),this.normal)},l.prototype.getMap=function(t){return this.node&&this.normal&&this.map&&this.ref?this.map:(this._parseText(t),this.map)},l.prototype.getRef=function(t){return this.node&&this.normal&&this.map&&this.ref?this.ref:(this._parseText(t),this.ref)},l.prototype.getNode=function(t){return this.node?this.node:(this.node=t.subNodes.LayerElementNormal,this.node)},l.prototype._parseText=function(t){var e=this.getNode(t);if(void 0===e)return void console.warn("node: "+t.attrName+"("+t.id+") does not have LayerElementNormal");var n=e.properties.MappingInformationType,r=e.properties.ReferenceInformationType,i=e.subNodes.Normals.properties.a;this.normal=toFloat(i.split(",")),this.map=n,this.ref=r},l.prototype.parse=function(t,e){var n=this.getNormal(t),r=(this.getNode(t),this.getMap(t)),i=this.getRef(t),o=e.getPolygonVertexIndices(t),a=e.getPolygonTopologyArray(t);switch(r){case"ByPolygonVertex":switch(i){case"Direct":n=this.parseNormal_ByPolygonVertex_Direct(n,o,a,3);break;case"IndexToDirect":n=this.parseNormal_ByPolygonVertex_IndexToDirect()}break;case"ByPolygon":switch(i){case"Direct":n=this.parseNormal_ByPolygon_Direct();break;case"IndexToDirect":n=this.parseNormal_ByPolygon_IndexToDirect()}}return n},l.prototype.parseNormal_ByPolygonVertex_Direct=function(t,e,n,r){return parse_Data_ByPolygonVertex_Direct(t,e,n,r)},l.prototype.parseNormal_ByPolygonVertex_IndexToDirect=function(t){return console.warn("not implemented"),t},l.prototype.parseNormal_ByPolygon_Direct=function(t){return console.warn("not implemented"),t},l.prototype.parseNormal_ByPolygon_IndexToDirect=function(t){return console.warn("not implemented"),t},l.prototype.parseNormal_ByVertex_Direct=function(t){return console.warn("not implemented"),t},u.prototype.fromNode=function(t){return this.id=t.id,this.internalId=t.id,this.times=t.subNodes.KeyTime.properties.a,this.values=t.subNodes.KeyValueFloat.properties.a,this.attrFlag=t.subNodes.KeyAttrFlags.properties.a,this.attrData=t.subNodes.KeyAttrDataFloat.properties.a,this.times=toFloat(this.times.split(",")),this.values=toFloat(this.values.split(",")),this.attrData=toFloat(this.attrData.split(",")),this.attrFlag=toInt(this.attrFlag.split(",")),this.times=this.times.map(function(t){return y(t)}),this},u.prototype.getLength=function(){return this.times[this.times.length-1]},h.prototype.fromNode=function(t,e,n){if(this.id=e.id,this.attr=e.attrName,this.internalId=e.id,!this.attr.match(/S|R|T/))return null;for(var r in e.properties)r.match(/X/)&&(this.attrX=!0),r.match(/Y/)&&(this.attrY=!0),r.match(/Z/)&&(this.attrZ=!0);this.containerIndices=t.searchConnectionParent(this.id),this.curveIdx=t.searchConnectionChildren(this.id);for(var i=this.containerIndices.length-1;i>=0;--i){var o=n.searchRealId(this.containerIndices[i]);if(o>=0&&(this.containerBoneId=o,this.containerId=this.containerIndices[i]),o>=0)break}return this},h.prototype.setCurve=function(t){this.curves.push(t)},p.prototype.parse=function(t,e){var n=t.Objects.subNodes.AnimationCurveNode,r=t.Objects.subNodes.AnimationCurve,i=[];for(var o in n)if(o.match(/\d+/)){var a=(new h).fromNode(t,n[o],e);i.push(a)}for(var s={},c=0;c<i.length;++c)null!==i[c]&&(s[i[c].id]=i[c]);var l=[],p=0;for(o in r)if(o.match(/\d+/)){var d=(new u).fromNode(r[o]);l.push(d),p=d.getLength()?d.getLength():p;var f=t.searchConnectionParent(d.id)[0],m=t.searchConnectionType(d.id,f);m.match(/X/)&&(m="x"),m.match(/Y/)&&(m="y"),m.match(/Z/)&&(m="z"),s[f].curves[m]=d}for(var v in s){var y=s[v].containerBoneId;void 0===this.curves[y]&&(this.curves[y]={}),this.curves[y][s[v].attr]=s[v]}return this.length=p,this.frames=this.length*this.fps,this},d.prototype.add=function(t){void 0===this.textures&&(this.textures=[]),this.textures.push(t);for(var e=0;e<t.parentIds.length;++e)void 0===this.perGeoMap[t.parentIds[e]]&&(this.perGeoMap[t.parentIds[e]]=[]),this.perGeoMap[t.parentIds[e]].push(this.textures[this.textures.length-1])},d.prototype.parse=function(t,e){var n=t.Objects.subNodes.Texture;n=Array.isArray(n)?n:[n];for(var r in n){var i=(new f).parse(n[r],t);this.add(i)}return this},d.prototype.getById=function(t){return this.perGeoMap[t]},f.prototype.parse=function(t,e){return this.id=t.id,this.name=t.attrName,this.fileName=this.parseFileName(t.properties.FileName),this.parentIds=this.searchParents(this.id,e),this},f.prototype.parseFileName=function(t){if(void 0===t)return"";var e=t.split(/[\\\/]/);return e.length>0?e[e.length-1]:t},f.prototype.searchParents=function(t,e){var n=e.searchConnectionParent(t);return n},parse_Data_ByPolygonVertex_Direct=function(t,e,n,r){for(var i=[],o=0,a=0;a<e.length;++a){i[e[a]]=[];for(var s=0;s<r;++s)i[e[a]][s]=t[o+s];o+=r}for(var c=[],l=0;l<i.length;++l)if(void 0!==i[l])for(var u=0;u<r;++u)void 0!==i[l][u]&&c.push(i[l][u]);return c};var y=function(t){return t/46186158e3};degToRad=function(t){return t*Math.PI/180},radToDeg=function(t){return 180*t/Math.PI},quatFromVec=function(t,e,n){var r=new THREE.Euler(t,e,n,"ZYX"),i=new THREE.Quaternion;return i.setFromEuler(r),i},toInt=function(t){return t.map(function(t){return parseInt(t)})},toFloat=function(t){return t.map(function(t){return parseFloat(t)})},toRad=function(t){return t.map(function(t){return degToRad(t)})},toMat44=function(t){var e=new THREE.Matrix4;return e.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),e},t.exports=THREE.FBXLoader},function(t,e,n){THREE.PLYLoader=n(481),t.exports={schema:{src:{type:"src"}},init:function(){this.model=null},update:function(){var t,e=this.data;return e.src?(this.remove(),t=new THREE.PLYLoader,void t.load(e.src,this.load.bind(this))):void console.warn("[%s] `src` property is required.",this.name)},load:function(t){this.model=new THREE.Mesh(t,new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading,vertexColors:THREE.VertexColors,shininess:0})),this.el.setObject3D("mesh",this.model),this.el.emit("model-loaded",{format:"ply",model:this.model})},remove:function(){this.model&&this.el.removeObject3D("mesh")}}},function(t,e){t.exports=THREE.PLYLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.propertyNameMapping={}},THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,load:function(t,e,n,r){var i=this,o=new THREE.XHRLoader(this.manager);o.setResponseType("arraybuffer"),o.load(t,function(t){e(i.parse(t))},n,r)},setPropertyNameMapping:function(t){this.propertyNameMapping=t},bin2str:function(t){for(var e=new Uint8Array(t),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(e[r]);return n},isASCII:function(t){var e=this.parseHeader(this.bin2str(t));return"ascii"===e.format},parse:function(t){return t instanceof ArrayBuffer?this.isASCII(t)?this.parseASCII(this.bin2str(t)):this.parseBinary(t):this.parseASCII(t)},parseHeader:function(t){function e(t,e){var n={type:t[0]};return"list"===n.type?(n.name=t[3],n.countType=t[1],n.itemType=t[2]):n.name=t[1],n.name in e&&(n.name=e[n.name]),n}var n=/ply([\s\S]*)end_header\s/,r="",i=0,o=n.exec(t);null!==o&&(r=o[1],i=o[0].length);for(var a,s,c={comments:[],elements:[],
headerLength:i},l=r.split("\n"),u=void 0,h=0;h<l.length;h++){var p=l[h];if(p=p.trim(),""!==p)switch(s=p.split(/\s+/),a=s.shift(),p=s.join(" "),a){case"format":c.format=s[0],c.version=s[1];break;case"comment":c.comments.push(p);break;case"element":void 0!==u&&c.elements.push(u),u=Object(),u.name=s[0],u.count=parseInt(s[1]),u.properties=[];break;case"property":u.properties.push(e(s,this.propertyNameMapping));break;default:console.log("unhandled",a,s)}}return void 0!==u&&c.elements.push(u),c},parseASCIINumber:function(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t);case"float":case"double":case"float32":case"float64":return parseFloat(t)}},parseASCIIElement:function(t,e){for(var n=e.split(/\s+/),r=Object(),i=0;i<t.length;i++)if("list"===t[i].type){for(var o=[],a=this.parseASCIINumber(n.shift(),t[i].countType),s=0;s<a;s++)o.push(this.parseASCIINumber(n.shift(),t[i].itemType));r[t[i].name]=o}else r[t[i].name]=this.parseASCIINumber(n.shift(),t[i].type);return r},parseASCII:function(t){var e,n=new THREE.Geometry,r=this.parseHeader(t),i=/end_header\s([\s\S]*)$/,o="";null!==(e=i.exec(t))&&(o=e[1]);var a=o.split("\n"),s=0,c=0;n.useColor=!1;for(var l=0;l<a.length;l++){var u=a[l];if(u=u.trim(),""!==u){c>=r.elements[s].count&&(s++,c=0);var h=this.parseASCIIElement(r.elements[s].properties,u);this.handleElement(n,r.elements[s].name,h),c++}}return this.postProcess(n)},postProcess:function(t){if(t.useColor){for(var e=0;e<t.faces.length;e++)t.faces[e].vertexColors=[t.colors[t.faces[e].a],t.colors[t.faces[e].b],t.colors[t.faces[e].c]];t.elementsNeedUpdate=!0}return t.computeBoundingSphere(),t},handleElement:function(t,e,n){if("vertex"===e){if(t.vertices.push(new THREE.Vector3(n.x,n.y,n.z)),"red"in n&&"green"in n&&"blue"in n){t.useColor=!0;var r=new THREE.Color;r.setRGB(n.red/255,n.green/255,n.blue/255),t.colors.push(r)}}else if("face"===e){var i=n.vertex_indices||n.vertex_index;3===i.length?t.faces.push(new THREE.Face3(i[0],i[1],i[2])):4===i.length&&t.faces.push(new THREE.Face3(i[0],i[1],i[3]),new THREE.Face3(i[1],i[2],i[3]))}},binaryRead:function(t,e,n,r){switch(n){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,r),2];case"uint16":case"ushort":return[t.getUint16(e,r),2];case"int32":case"int":return[t.getInt32(e,r),4];case"uint32":case"uint":return[t.getUint32(e,r),4];case"float32":case"float":return[t.getFloat32(e,r),4];case"float64":case"double":return[t.getFloat64(e,r),8]}},binaryReadElement:function(t,e,n,r){for(var i,o=Object(),a=0,s=0;s<n.length;s++)if("list"===n[s].type){var c=[];i=this.binaryRead(t,e+a,n[s].countType,r);var l=i[0];a+=i[1];for(var u=0;u<l;u++)i=this.binaryRead(t,e+a,n[s].itemType,r),c.push(i[0]),a+=i[1];o[n[s].name]=c}else i=this.binaryRead(t,e+a,n[s].type,r),o[n[s].name]=i[0],a+=i[1];return[o,a]},parseBinary:function(t){for(var e,n=new THREE.Geometry,r=this.parseHeader(this.bin2str(t)),i="binary_little_endian"===r.format,o=new DataView(t,r.headerLength),a=0,s=0;s<r.elements.length;s++)for(var c=0;c<r.elements[s].count;c++){e=this.binaryReadElement(o,a,r.elements[s].properties,i),a+=e[1];var l=e[0];this.handleElement(n,r.elements[s].name,l)}return this.postProcess(n)}}},function(t,e){t.exports={schema:{src:{type:"src"},loader:{"default":"object",oneOf:["object","json"]},animation:{"default":""}},init:function(){this.model=null,this.mixer=null},update:function(t){var e,n=this.data;if(n.src)if(t)n.animation!==t.animation&&this.model.activeAction&&(this.model.activeAction.stop(),this.playAnimation());else if(this.remove(),"object"===n.loader)e=new THREE.ObjectLoader,e.load(n.src,this.load.bind(this));else{if("json"!==n.loader)throw new Error('[three-model] Invalid mode "%s".',n.mode);e=new THREE.JSONLoader,e.load(n.src,function(t,e){this.load(new THREE.Mesh(t,new THREE.MeshFaceMaterial(e)))}.bind(this))}},load:function(t){this.model=t,this.mixer=new THREE.AnimationMixer(this.model),this.el.setObject3D("mesh",t),this.el.emit("model-loaded",{format:"three",model:t}),this.data.animation&&this.playAnimation()},playAnimation:function(){var t=this.data,e=this.model.animations||this.model.geometry.animations,n=THREE.AnimationClip.findByName(e,t.animation);this.model.activeAction=this.mixer.clipAction(n,this.model).play()},remove:function(){this.mixer&&this.mixer.stopAllAction(),this.model&&this.el.removeObject3D("mesh")},tick:function(t,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}}},function(t,e,n){var r=n(464),i=n(484);t.exports={checkpoint:n(496),"jump-ability":n(497),"toggle-velocity":n(498),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,r.registerAll(),i.registerAll(),t.components.checkpoint||t.registerComponent("checkpoint",this.checkpoint),t.components["jump-ability"]||t.registerComponent("jump-ability",this["jump-ability"]),t.components["toggle-velocity"]||t.registerComponent("toggle-velocity",this["toggle-velocity"]),this._registered=!0)}}},function(t,e,n){var r=n(485),i=n(464);t.exports={physics:n(486),"dynamic-body":n(488),"kinematic-body":n(493),"static-body":n(494),system:{physics:n(495)},registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,i.registerAll(),t.systems.physics||t.registerSystem("physics",this.system.physics),t.components.physics||t.registerComponent("physics",this.physics),t.components["dynamic-body"]||t.registerComponent("dynamic-body",this["dynamic-body"]),t.components["kinematic-body"]||t.registerComponent("kinematic-body",this["kinematic-body"]),t.components["static-body"]||t.registerComponent("static-body",this["static-body"]),this._registered=!0)}},window.CANNON=window.CANNON||r},function(t,e,n){var r,r;!function(e){t.exports=e()}(function(){return function t(e,n,i){function o(s,c){if(!n[s]){if(!e[s]){var l="function"==typeof r&&r;if(!c&&l)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){e.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},{}],2:[function(t,e,n){e.exports={version:t("../package.json").version,AABB:t("./collision/AABB"),ArrayCollisionMatrix:t("./collision/ArrayCollisionMatrix"),Body:t("./objects/Body"),Box:t("./shapes/Box"),Broadphase:t("./collision/Broadphase"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),Narrowphase:t("./world/Narrowphase"),ConeTwistConstraint:t("./constraints/ConeTwistConstraint"),ContactMaterial:t("./material/ContactMaterial"),ConvexPolyhedron:t("./shapes/ConvexPolyhedron"),Cylinder:t("./shapes/Cylinder"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventTarget:t("./utils/EventTarget"),FrictionEquation:t("./equations/FrictionEquation"),GSSolver:t("./solver/GSSolver"),GridBroadphase:t("./collision/GridBroadphase"),Heightfield:t("./shapes/Heightfield"),HingeConstraint:t("./constraints/HingeConstraint"),LockConstraint:t("./constraints/LockConstraint"),Mat3:t("./math/Mat3"),Material:t("./material/Material"),NaiveBroadphase:t("./collision/NaiveBroadphase"),ObjectCollisionMatrix:t("./collision/ObjectCollisionMatrix"),Pool:t("./utils/Pool"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),PointToPointConstraint:t("./constraints/PointToPointConstraint"),Quaternion:t("./math/Quaternion"),Ray:t("./collision/Ray"),RaycastVehicle:t("./objects/RaycastVehicle"),RaycastResult:t("./collision/RaycastResult"),RigidVehicle:t("./objects/RigidVehicle"),RotationalEquation:t("./equations/RotationalEquation"),RotationalMotorEquation:t("./equations/RotationalMotorEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),SPHSystem:t("./objects/SPHSystem"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Sphere:t("./shapes/Sphere"),SplitSolver:t("./solver/SplitSolver"),Spring:t("./objects/Spring"),Trimesh:t("./shapes/Trimesh"),Vec3:t("./math/Vec3"),Vec3Pool:t("./utils/Vec3Pool"),World:t("./world/World")}},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(t,e,n){function r(t){t=t||{},this.lowerBound=new i,t.lowerBound&&this.lowerBound.copy(t.lowerBound),this.upperBound=new i,t.upperBound&&this.upperBound.copy(t.upperBound)}var i=t("../math/Vec3");t("../utils/Utils");e.exports=r;var o=new i;r.prototype.setFromPoints=function(t,e,n,r){var i=this.lowerBound,a=this.upperBound,s=n;i.copy(t[0]),s&&s.vmult(i,i),a.copy(i);for(var c=1;c<t.length;c++){var l=t[c];s&&(s.vmult(l,o),l=o),l.x>a.x&&(a.x=l.x),l.x<i.x&&(i.x=l.x),l.y>a.y&&(a.y=l.y),l.y<i.y&&(i.y=l.y),l.z>a.z&&(a.z=l.z),l.z<i.z&&(i.z=l.z)}return e&&(e.vadd(i,i),e.vadd(a,a)),r&&(i.x-=r,i.y-=r,i.z-=r,a.x+=r,a.y+=r,a.z+=r),this},r.prototype.copy=function(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this},r.prototype.clone=function(){return(new r).copy(this)},r.prototype.extend=function(t){var e=t.lowerBound.x;this.lowerBound.x>e&&(this.lowerBound.x=e);var n=t.upperBound.x;this.upperBound.x<n&&(this.upperBound.x=n);var e=t.lowerBound.y;this.lowerBound.y>e&&(this.lowerBound.y=e);var n=t.upperBound.y;this.upperBound.y<n&&(this.upperBound.y=n);var e=t.lowerBound.z;this.lowerBound.z>e&&(this.lowerBound.z=e);var n=t.upperBound.z;this.upperBound.z<n&&(this.upperBound.z=n)},r.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return(r.x<=n.x&&n.x<=i.x||e.x<=i.x&&i.x<=n.x)&&(r.y<=n.y&&n.y<=i.y||e.y<=i.y&&i.y<=n.y)&&(r.z<=n.z&&n.z<=i.z||e.z<=i.z&&i.z<=n.z)},r.prototype.contains=function(t){var e=this.lowerBound,n=this.upperBound,r=t.lowerBound,i=t.upperBound;return e.x<=r.x&&n.x>=i.x&&e.y<=r.y&&n.y>=i.y&&e.z<=r.z&&n.z>=i.z},r.prototype.getCorners=function(t,e,n,r,i,o,a,s){var c=this.lowerBound,l=this.upperBound;t.copy(c),e.set(l.x,c.y,c.z),n.set(l.x,l.y,c.z),r.set(c.x,l.y,l.z),i.set(l.x,c.y,c.z),o.set(c.x,l.y,c.z),a.set(c.x,c.y,l.z),s.copy(l)};var a=[new i,new i,new i,new i,new i,new i,new i,new i];r.prototype.toLocalFrame=function(t,e){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7];this.getCorners(r,i,o,s,c,l,u,h);for(var p=0;8!==p;p++){var d=n[p];t.pointToLocal(d,d)}return e.setFromPoints(n)},r.prototype.toWorldFrame=function(t,e){var n=a,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7];this.getCorners(r,i,o,s,c,l,u,h);for(var p=0;8!==p;p++){var d=n[p];t.pointToWorld(d,d)}return e.setFromPoints(n)}},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(t,e,n){function r(){this.matrix=[]}e.exports=r,r.prototype.get=function(t,e){if(t=t.index,e=e.index,e>t){var n=e;e=t,t=n}return this.matrix[(t*(t+1)>>1)+e-1]},r.prototype.set=function(t,e,n){if(t=t.index,e=e.index,e>t){var r=e;e=t,t=r}this.matrix[(t*(t+1)>>1)+e-1]=n?1:0},r.prototype.reset=function(){for(var t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0},r.prototype.setNumObjects=function(t){this.matrix.length=t*(t-1)>>1}},{}],5:[function(t,e,n){function r(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}var i=t("../objects/Body"),o=t("../math/Vec3"),a=t("../math/Quaternion");t("../shapes/Shape"),t("../shapes/Plane");e.exports=r,r.prototype.collisionPairs=function(t,e,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var s=i.STATIC|i.KINEMATIC;r.prototype.needBroadphaseCollision=function(t,e){return 0!==(t.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&t.collisionFilterMask)&&(0===(t.type&s)&&t.sleepState!==i.SLEEPING||0===(e.type&s)&&e.sleepState!==i.SLEEPING)},r.prototype.intersectionTest=function(t,e,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,n,r):this.doBoundingSphereBroadphase(t,e,n,r)};var c=new o;new o,new a,new o;r.prototype.doBoundingSphereBroadphase=function(t,e,n,r){var i=c;e.position.vsub(t.position,i);var o=Math.pow(t.boundingRadius+e.boundingRadius,2),a=i.norm2();a<o&&(n.push(t),r.push(e))},r.prototype.doBoundingBoxBroadphase=function(t,e,n,r){t.aabbNeedsUpdate&&t.computeAABB(),e.aabbNeedsUpdate&&e.computeAABB(),t.aabb.overlaps(e.aabb)&&(n.push(t),r.push(e))};var l={keys:[]},u=[],h=[];r.prototype.makePairsUnique=function(t,e){for(var n=l,r=u,i=h,o=t.length,a=0;a!==o;a++)r[a]=t[a],i[a]=e[a];t.length=0,e.length=0;for(var a=0;a!==o;a++){var s=r[a].id,c=i[a].id,p=s<c?s+","+c:c+","+s;n[p]=a,n.keys.push(p)}for(var a=0;a!==n.keys.length;a++){var p=n.keys.pop(),d=n[p];t.push(r[d]),e.push(i[d]),delete n[p]}},r.prototype.setWorld=function(t){};var p=new o;r.boundingSphereCheck=function(t,e){var n=p;return t.position.vsub(e.position,n),Math.pow(t.shape.boundingSphereRadius+e.shape.boundingSphereRadius,2)>n.norm2()},r.prototype.aabbQuery=function(t,e,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(t,e,n){function r(t,e,n,r,a){i.apply(this),this.nx=n||10,this.ny=r||10,this.nz=a||10,this.aabbMin=t||new o(100,100,100),this.aabbMax=e||new o((-100),(-100),(-100));var s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(var c=0;c<s;c++)this.bins[c]=[],this.binLengths[c]=0}e.exports=r;var i=t("./Broadphase"),o=t("../math/Vec3"),a=t("../shapes/Shape");r.prototype=new i,r.prototype.constructor=r;var s=new o;new o;r.prototype.collisionPairs=function(t,e,n){function r(t,e,n,r,i,o,a){var s=(t-x)*w|0,c=(e-_)*E|0,l=(n-b)*S|0,v=I((r-x)*w),y=I((i-_)*E),g=I((o-b)*S);s<0?s=0:s>=u&&(s=u-1),c<0?c=0:c>=h&&(c=h-1),l<0?l=0:l>=p&&(l=p-1),v<0?v=0:v>=u&&(v=u-1),y<0?y=0:y>=h&&(y=h-1),g<0?g=0:g>=p&&(g=p-1),s*=d,c*=f,l*=m,v*=d,y*=f,g*=m;for(var M=s;M<=v;M+=d)for(var A=c;A<=y;A+=f)for(var C=l;C<=g;C+=m){var T=M+A+C;L[T][P[T]++]=a}}for(var i=t.numObjects(),o=t.bodies,c=this.aabbMax,l=this.aabbMin,u=this.nx,h=this.ny,p=this.nz,d=h*p,f=p,m=1,v=c.x,y=c.y,g=c.z,x=l.x,_=l.y,b=l.z,w=u/(v-x),E=h/(y-_),S=p/(g-b),M=(v-x)/u,A=(y-_)/h,C=(g-b)/p,T=.5*Math.sqrt(M*M+A*A+C*C),N=a.types,R=N.SPHERE,O=N.PLANE,L=(N.BOX,N.COMPOUND,N.CONVEXPOLYHEDRON,this.bins),P=this.binLengths,k=this.bins.length,D=0;D!==k;D++)P[D]=0;for(var I=Math.ceil,l=Math.min,c=Math.max,D=0;D!==i;D++){var q=o[D],B=q.shape;switch(B.type){case R:var V=q.position.x,F=q.position.y,z=q.position.z,U=B.radius;r(V-U,F-U,z-U,V+U,F+U,z+U,q);break;case O:B.worldNormalNeedsUpdate&&B.computeWorldNormal(q.quaternion);var j=B.worldNormal,H=x+.5*M-q.position.x,G=_+.5*A-q.position.y,W=b+.5*C-q.position.z,X=s;X.set(H,G,W);for(var Z=0,K=0;Z!==u;Z++,K+=d,X.y=G,X.x+=M)for(var Y=0,Q=0;Y!==h;Y++,Q+=f,X.z=W,X.y+=A)for(var J=0,$=0;J!==p;J++,$+=m,X.z+=C)if(X.dot(j)<T){var tt=K+Q+$;L[tt][P[tt]++]=q}break;default:q.aabbNeedsUpdate&&q.computeAABB(),r(q.aabb.lowerBound.x,q.aabb.lowerBound.y,q.aabb.lowerBound.z,q.aabb.upperBound.x,q.aabb.upperBound.y,q.aabb.upperBound.z,q)}}for(var D=0;D!==k;D++){var et=P[D];if(et>1)for(var nt=L[D],Z=0;Z!==et;Z++)for(var q=nt[Z],Y=0;Y!==Z;Y++){var rt=nt[Y];this.needBroadphaseCollision(q,rt)&&this.intersectionTest(q,rt,e,n)}}this.makePairsUnique(e,n)}},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(t,e,n){function r(){i.apply(this)}e.exports=r;var i=t("./Broadphase"),o=t("./AABB");r.prototype=new i,r.prototype.constructor=r,r.prototype.collisionPairs=function(t,e,n){var r,i,o,a,s=t.bodies,c=s.length;for(r=0;r!==c;r++)for(i=0;i!==r;i++)o=s[r],a=s[i],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,e,n)};new o;r.prototype.aabbQuery=function(t,e,n){n=n||[];for(var r=0;r<t.bodies.length;r++){var i=t.bodies[r];i.aabbNeedsUpdate&&i.computeAABB(),i.aabb.overlaps(e)&&n.push(i)}return n}},{"./AABB":3,"./Broadphase":5}],8:[function(t,e,n){function r(){this.matrix={}}e.exports=r,r.prototype.get=function(t,e){if(t=t.id,e=e.id,e>t){var n=e;e=t,t=n}return t+"-"+e in this.matrix},r.prototype.set=function(t,e,n){if(t=t.id,e=e.id,e>t){var r=e;e=t,t=r}n?this.matrix[t+"-"+e]=!0:delete this.matrix[t+"-"+e]},r.prototype.reset=function(){this.matrix={}},r.prototype.setNumObjects=function(t){}},{}],9:[function(t,e,n){function r(t,e){this.from=t?t.clone():new a,this.to=e?e.clone():new a,this._direction=new a,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=r.ANY,this.result=new l,this.hasHit=!1,this.callback=function(t){}}function i(t,e,n,r){r.vsub(e,D),n.vsub(e,f),t.vsub(e,m);var i,o,a=D.dot(D),s=D.dot(f),c=D.dot(m),l=f.dot(f),u=f.dot(m);return(i=l*c-s*u)>=0&&(o=a*u-s*c)>=0&&i+o<a*l-s*s}function o(t,e,n){n.vsub(t,D);var r=D.dot(e);e.mult(r,I),I.vadd(t,I);var i=n.distanceTo(I);return i}e.exports=r;var a=t("../math/Vec3"),s=t("../math/Quaternion"),c=t("../math/Transform"),l=(t("../shapes/ConvexPolyhedron"),t("../shapes/Box"),t("../collision/RaycastResult")),u=t("../shapes/Shape"),h=t("../collision/AABB");r.prototype.constructor=r,r.CLOSEST=1,r.ANY=2,r.ALL=4;var p=new h,d=[];r.prototype.intersectWorld=function(t,e){return this.mode=e.mode||r.ANY,this.result=e.result||new l,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask="undefined"!=typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!=typeof e.collisionFilterGroup?e.collisionFilterGroup:-1,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(p),d.length=0,t.broadphase.aabbQuery(t,p,d),this.intersectBodies(d),this.hasHit};var f=new a,m=new a;r.pointInTriangle=i;var v=new a,y=new s;r.prototype.intersectBody=function(t,e){e&&(this.result=e,this._updateDirection());var n=this.checkCollisionResponse;if((!n||t.collisionResponse)&&0!==(this.collisionFilterGroup&t.collisionFilterMask)&&0!==(t.collisionFilterGroup&this.collisionFilterMask))for(var r=v,i=y,o=0,a=t.shapes.length;o<a;o++){var s=t.shapes[o];if((!n||s.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],i),t.quaternion.vmult(t.shapeOffsets[o],r),r.vadd(t.position,r),this.intersectShape(s,i,r,t),this.result._shouldStop))break}},r.prototype.intersectBodies=function(t,e){e&&(this.result=e,this._updateDirection());for(var n=0,r=t.length;!this.result._shouldStop&&n<r;n++)this.intersectBody(t[n])},r.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},r.prototype.intersectShape=function(t,e,n,r){var i=this.from,a=o(i,this._direction,n);if(!(a>t.boundingSphereRadius)){var s=this[t.type];s&&s.call(this,t,e,n,r)}};var g=(new a,new a,new a),x=new a,_=new a,b=new a;new a,new l;r.prototype.intersectBox=function(t,e,n,r){return this.intersectConvex(t.convexPolyhedronRepresentation,e,n,r)},r.prototype[u.types.BOX]=r.prototype.intersectBox,r.prototype.intersectPlane=function(t,e,n,r){var i=this.from,o=this.to,s=this._direction,c=new a(0,0,1);e.vmult(c,c);var l=new a;i.vsub(n,l);var u=l.dot(c);o.vsub(n,l);var h=l.dot(c);if(!(u*h>0||i.distanceTo(o)<u)){var p=c.dot(s);if(!(Math.abs(p)<this.precision)){var d=new a,f=new a,m=new a;i.vsub(n,d);var v=-c.dot(d)/p;s.scale(v,f),i.vadd(f,m),this.reportIntersection(c,m,t,r,-1)}}},r.prototype[u.types.PLANE]=r.prototype.intersectPlane,r.prototype.getAABB=function(t){var e=this.to,n=this.from;t.lowerBound.x=Math.min(e.x,n.x),t.lowerBound.y=Math.min(e.y,n.y),t.lowerBound.z=Math.min(e.z,n.z),t.upperBound.x=Math.max(e.x,n.x),t.upperBound.y=Math.max(e.y,n.y),t.upperBound.z=Math.max(e.z,n.z)};var w={faceList:[0]};r.prototype.intersectHeightfield=function(t,e,n,i){var o=(t.data,t.elementSize,new a),s=new r(this.from,this.to);c.pointToLocalFrame(n,e,s.from,s.from),c.pointToLocalFrame(n,e,s.to,s.to);var l=[],u=null,h=null,p=null,d=null,f=t.getIndexOfPosition(s.from.x,s.from.y,l,!1);if(f&&(u=l[0],h=l[1],p=l[0],d=l[1]),f=t.getIndexOfPosition(s.to.x,s.to.y,l,!1),f&&((null===u||l[0]<u)&&(u=l[0]),(null===p||l[0]>p)&&(p=l[0]),(null===h||l[1]<h)&&(h=l[1]),(null===d||l[1]>d)&&(d=l[1])),null!==u){var m=[];t.getRectMinMax(u,h,p,d,m);for(var v=(m[0],m[1],u);v<=p;v++)for(var y=h;y<=d;y++){if(this.result._shouldStop)return;if(t.getConvexTrianglePillar(v,y,!1),c.pointToWorldFrame(n,e,t.pillarOffset,o),this.intersectConvex(t.pillarConvex,e,o,i,w),this.result._shouldStop)return;t.getConvexTrianglePillar(v,y,!0),c.pointToWorldFrame(n,e,t.pillarOffset,o),this.intersectConvex(t.pillarConvex,e,o,i,w)}}},r.prototype[u.types.HEIGHTFIELD]=r.prototype.intersectHeightfield;var E=new a,S=new a;r.prototype.intersectSphere=function(t,e,n,r){var i=this.from,o=this.to,a=t.radius,s=Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)+Math.pow(o.z-i.z,2),c=2*((o.x-i.x)*(i.x-n.x)+(o.y-i.y)*(i.y-n.y)+(o.z-i.z)*(i.z-n.z)),l=Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)+Math.pow(i.z-n.z,2)-Math.pow(a,2),u=Math.pow(c,2)-4*s*l,h=E,p=S;if(!(u<0))if(0===u)i.lerp(o,u,h),h.vsub(n,p),p.normalize(),this.reportIntersection(p,h,t,r,-1);else{var d=(-c-Math.sqrt(u))/(2*s),f=(-c+Math.sqrt(u))/(2*s);if(d>=0&&d<=1&&(i.lerp(o,d,h),h.vsub(n,p),p.normalize(),this.reportIntersection(p,h,t,r,-1)),this.result._shouldStop)return;f>=0&&f<=1&&(i.lerp(o,f,h),h.vsub(n,p),p.normalize(),this.reportIntersection(p,h,t,r,-1))}},r.prototype[u.types.SPHERE]=r.prototype.intersectSphere;var M=new a,A=(new a,new a,new a);r.prototype.intersectConvex=function(t,e,n,r,o){for(var a=M,s=A,c=o&&o.faceList||null,l=t.faces,u=t.vertices,h=t.faceNormals,p=this._direction,d=this.from,f=this.to,m=d.distanceTo(f),v=c?c.length:l.length,y=this.result,w=0;!y._shouldStop&&w<v;w++){var E=c?c[w]:w,S=l[E],C=h[E],T=e,N=n;s.copy(u[S[0]]),T.vmult(s,s),s.vadd(N,s),s.vsub(d,s),T.vmult(C,a);var R=p.dot(a);if(!(Math.abs(R)<this.precision)){var O=a.dot(s)/R;if(!(O<0)){p.mult(O,g),g.vadd(d,g),x.copy(u[S[0]]),T.vmult(x,x),N.vadd(x,x);for(var L=1;!y._shouldStop&&L<S.length-1;L++){_.copy(u[S[L]]),b.copy(u[S[L+1]]),T.vmult(_,_),T.vmult(b,b),N.vadd(_,_),N.vadd(b,b);var P=g.distanceTo(d);!i(g,x,_,b)&&!i(g,_,x,b)||P>m||this.reportIntersection(a,g,t,r,E)}}}}},r.prototype[u.types.CONVEXPOLYHEDRON]=r.prototype.intersectConvex;var C=new a,T=new a,N=new a,R=new a,O=new a,L=new a,P=(new h,[]),k=new c;r.prototype.intersectTrimesh=function(t,e,n,r,o){var a=C,s=P,l=k,u=A,h=T,p=N,d=R,f=L,m=O,v=(o&&o.faceList||null,t.indices),y=(t.vertices,t.faceNormals,this.from),w=this.to,E=this._direction;l.position.copy(n),l.quaternion.copy(e),c.vectorToLocalFrame(n,e,E,h),c.pointToLocalFrame(n,e,y,p),c.pointToLocalFrame(n,e,w,d);var S=p.distanceSquared(d);t.tree.rayQuery(this,l,s);for(var M=0,D=s.length;!this.result._shouldStop&&M!==D;M++){var I=s[M];t.getNormal(I,a),t.getVertex(v[3*I],x),x.vsub(p,u);var q=h.dot(a),B=a.dot(u)/q;if(!(B<0)){h.scale(B,g),g.vadd(p,g),t.getVertex(v[3*I+1],_),t.getVertex(v[3*I+2],b);var V=g.distanceSquared(p);!i(g,_,x,b)&&!i(g,x,_,b)||V>S||(c.vectorToWorldFrame(e,a,m),c.pointToWorldFrame(n,e,g,f),this.reportIntersection(m,f,t,r,I))}}s.length=0},r.prototype[u.types.TRIMESH]=r.prototype.intersectTrimesh,r.prototype.reportIntersection=function(t,e,n,i,o){var a=this.from,s=this.to,c=a.distanceTo(e),l=this.result;if(!(this.skipBackfaces&&t.dot(this._direction)>0))switch(l.hitFaceIndex="undefined"!=typeof o?o:-1,this.mode){case r.ALL:this.hasHit=!0,l.set(a,s,t,e,n,i,c),l.hasHit=!0,this.callback(l);break;case r.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(a,s,t,e,n,i,c));break;case r.ANY:this.hasHit=!0,l.hasHit=!0,l.set(a,s,t,e,n,i,c),l._shouldStop=!0}};var D=new a,I=new a},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(t,e,n){function r(){this.rayFromWorld=new i,this.rayToWorld=new i,this.hitNormalWorld=new i,this.hitPointWorld=new i,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}var i=t("../math/Vec3");e.exports=r,r.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},r.prototype.abort=function(){this._shouldStop=!0},r.prototype.set=function(t,e,n,r,i,o,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=o,this.distance=a}},{"../math/Vec3":30}],11:[function(t,e,n){function r(t){i.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var n=e.indexOf(t.body);n!==-1&&e.splice(n,1)},t&&this.setWorld(t)}var i=(t("../shapes/Shape"),t("../collision/Broadphase"));e.exports=r,r.prototype=new i,r.prototype.setWorld=function(t){this.axisList.length=0;for(var e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0},r.insertionSortX=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.x<=r.aabb.lowerBound.x);i--)t[i+1]=t[i];t[i+1]=r}return t},r.insertionSortY=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.y<=r.aabb.lowerBound.y);i--)t[i+1]=t[i];t[i+1]=r}return t},r.insertionSortZ=function(t){for(var e=1,n=t.length;e<n;e++){for(var r=t[e],i=e-1;i>=0&&!(t[i].aabb.lowerBound.z<=r.aabb.lowerBound.z);i--)t[i+1]=t[i];t[i+1]=r}return t},r.prototype.collisionPairs=function(t,e,n){var i,o,a=this.axisList,s=a.length,c=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),i=0;i!==s;i++){var l=a[i];for(o=i+1;o<s;o++){var u=a[o];if(this.needBroadphaseCollision(l,u)){if(!r.checkBounds(l,u,c))break;this.intersectionTest(l,u,e,n)}}}},r.prototype.sortList=function(){for(var t=this.axisList,e=this.axisIndex,n=t.length,i=0;i!==n;i++){var o=t[i];o.aabbNeedsUpdate&&o.computeAABB()}0===e?r.insertionSortX(t):1===e?r.insertionSortY(t):2===e&&r.insertionSortZ(t)},r.checkBounds=function(t,e,n){var r,i;0===n?(r=t.position.x,i=e.position.x):1===n?(r=t.position.y,i=e.position.y):2===n&&(r=t.position.z,i=e.position.z);var o=t.boundingRadius,a=e.boundingRadius,s=r+o,c=i-a;return c<s},r.prototype.autoDetectAxis=function(){for(var t=0,e=0,n=0,r=0,i=0,o=0,a=this.axisList,s=a.length,c=1/s,l=0;l!==s;l++){var u=a[l],h=u.position.x;t+=h,e+=h*h;var p=u.position.y;n+=p,r+=p*p;var d=u.position.z;i+=d,o+=d*d}var f=e-t*t*c,m=r-n*n*c,v=o-i*i*c;f>m?f>v?this.axisIndex=0:this.axisIndex=2:m>v?this.axisIndex=1:this.axisIndex=2},r.prototype.aabbQuery=function(t,e,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var r=this.axisIndex,i="x";1===r&&(i="y"),2===r&&(i="z");for(var o=this.axisList,a=(e.lowerBound[i],e.upperBound[i],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.computeAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(t,e,n){function r(t,e,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,c=n.pivotA?n.pivotA.clone():new s,l=n.pivotB?n.pivotB.clone():new s;this.axisA=n.axisA?n.axisA.clone():new s,this.axisB=n.axisB?n.axisB.clone():new s,i.call(this,t,c,e,l,r),this.collideConnected=!!n.collideConnected,this.angle="undefined"!=typeof n.angle?n.angle:0;var u=this.coneEquation=new o(t,e,n),h=this.twistEquation=new a(t,e,n);this.twistAngle="undefined"!=typeof n.twistAngle?n.twistAngle:0,u.maxForce=0,u.minForce=-r,h.maxForce=0,h.minForce=-r,this.equations.push(u,h)}e.exports=r;var i=(t("./Constraint"),t("./PointToPointConstraint")),o=t("../equations/ConeEquation"),a=t("../equations/RotationalEquation"),s=(t("../equations/ContactEquation"),t("../math/Vec3"));r.prototype=new i,r.constructor=r;new s,new s;r.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.coneEquation,r=this.twistEquation;i.prototype.update.call(this),t.vectorToWorldFrame(this.axisA,n.axisA),e.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(r.axisA,r.axisA),t.vectorToWorldFrame(r.axisA,r.axisA),this.axisB.tangents(r.axisB,r.axisB),e.vectorToWorldFrame(r.axisB,r.axisB),n.angle=this.angle,r.maxAngle=this.twistAngle}},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(t,e,n){function r(t,e,n){n=i.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=r.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}e.exports=r;var i=t("../utils/Utils");r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.prototype.enable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!0},r.prototype.disable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!1},r.idCounter=0},{"../utils/Utils":53}],14:[function(t,e,n){function r(t,e,n,r){i.call(this,t,e),"undefined"==typeof n&&(n=t.position.distanceTo(e.position)),"undefined"==typeof r&&(r=1e6),this.distance=n;var a=this.distanceEquation=new o(t,e);this.equations.push(a),a.minForce=-r,a.maxForce=r}e.exports=r;var i=t("./Constraint"),o=t("../equations/ContactEquation");r.prototype=new i,r.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.distanceEquation,r=.5*this.distance,i=n.ni;e.position.vsub(t.position,i),i.normalize(),i.mult(r,n.ri),i.mult(-r,n.rj)}},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(t,e,n){function r(t,e,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,c=n.pivotA?n.pivotA.clone():new s,l=n.pivotB?n.pivotB.clone():new s;
i.call(this,t,c,e,l,r);var u=this.axisA=n.axisA?n.axisA.clone():new s(1,0,0);u.normalize();var h=this.axisB=n.axisB?n.axisB.clone():new s(1,0,0);h.normalize();var p=this.rotationalEquation1=new o(t,e,n),d=this.rotationalEquation2=new o(t,e,n),f=this.motorEquation=new a(t,e,r);f.enabled=!1,this.equations.push(p,d,f)}e.exports=r;var i=(t("./Constraint"),t("./PointToPointConstraint")),o=t("../equations/RotationalEquation"),a=t("../equations/RotationalMotorEquation"),s=(t("../equations/ContactEquation"),t("../math/Vec3"));r.prototype=new i,r.constructor=r,r.prototype.enableMotor=function(){this.motorEquation.enabled=!0},r.prototype.disableMotor=function(){this.motorEquation.enabled=!1},r.prototype.setMotorSpeed=function(t){this.motorEquation.targetVelocity=t},r.prototype.setMotorMaxForce=function(t){this.motorEquation.maxForce=t,this.motorEquation.minForce=-t};var c=new s,l=new s;r.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.motorEquation,r=this.rotationalEquation1,o=this.rotationalEquation2,a=c,s=l,u=this.axisA,h=this.axisB;i.prototype.update.call(this),t.quaternion.vmult(u,a),e.quaternion.vmult(h,s),a.tangents(r.axisA,o.axisA),r.axisB.copy(s),o.axisB.copy(s),this.motorEquation.enabled&&(t.quaternion.vmult(this.axisA,n.axisA),e.quaternion.vmult(this.axisB,n.axisB))}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(t,e,n){function r(t,e,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6,s=new a,c=new a,l=new a;t.position.vadd(e.position,l),l.scale(.5,l),e.pointToLocalFrame(l,c),t.pointToLocalFrame(l,s),i.call(this,t,s,e,c,r);var u=this.rotationalEquation1=new o(t,e,n),h=this.rotationalEquation2=new o(t,e,n),p=this.rotationalEquation3=new o(t,e,n);this.equations.push(u,h,p)}e.exports=r;var i=(t("./Constraint"),t("./PointToPointConstraint")),o=t("../equations/RotationalEquation"),a=(t("../equations/RotationalMotorEquation"),t("../equations/ContactEquation"),t("../math/Vec3"));r.prototype=new i,r.constructor=r;new a,new a;r.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),r=this.rotationalEquation2,o=this.rotationalEquation3;i.prototype.update.call(this),t.vectorToWorldFrame(a.UNIT_X,n.axisA),e.vectorToWorldFrame(a.UNIT_Y,n.axisB),t.vectorToWorldFrame(a.UNIT_Y,r.axisA),e.vectorToWorldFrame(a.UNIT_Z,r.axisB),t.vectorToWorldFrame(a.UNIT_Z,o.axisA),e.vectorToWorldFrame(a.UNIT_X,o.axisB)}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(t,e,n){function r(t,e,n,r,s){i.call(this,t,n),s="undefined"!=typeof s?s:1e6,this.pivotA=e?e.clone():new a,this.pivotB=r?r.clone():new a;var c=this.equationX=new o(t,n),l=this.equationY=new o(t,n),u=this.equationZ=new o(t,n);this.equations.push(c,l,u),c.minForce=l.minForce=u.minForce=-s,c.maxForce=l.maxForce=u.maxForce=s,c.ni.set(1,0,0),l.ni.set(0,1,0),u.ni.set(0,0,1)}e.exports=r;var i=t("./Constraint"),o=t("../equations/ContactEquation"),a=t("../math/Vec3");r.prototype=new i,r.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.equationX,r=this.equationY,i=this.equationZ;t.quaternion.vmult(this.pivotA,n.ri),e.quaternion.vmult(this.pivotB,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj)}},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(t,e,n){function r(t,e,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6;o.call(this,t,e,-r,r),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.angle="undefined"!=typeof n.angle?n.angle:0}e.exports=r;var i=t("../math/Vec3"),o=(t("../math/Mat3"),t("./Equation"));r.prototype=new o,r.prototype.constructor=r;var a=new i,s=new i;r.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,c=s,l=this.jacobianElementA,u=this.jacobianElementB;r.cross(i,o),i.cross(r,c),l.rotational.copy(c),u.rotational.copy(o);var h=Math.cos(this.angle)-r.dot(i),p=this.computeGW(),d=this.computeGiMf(),f=-h*e-p*n-t*d;return f}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(t,e,n){function r(t,e,n){n="undefined"!=typeof n?n:1e6,i.call(this,t,e,0,n),this.restitution=0,this.ri=new o,this.rj=new o,this.ni=new o}e.exports=r;var i=t("./Equation"),o=t("../math/Vec3");t("../math/Mat3");r.prototype=new i,r.prototype.constructor=r;var a=new o,s=new o,c=new o;r.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.bi,i=this.bj,o=this.ri,l=this.rj,u=a,h=s,p=r.velocity,d=r.angularVelocity,f=(r.force,r.torque,i.velocity),m=i.angularVelocity,v=(i.force,i.torque,c),y=this.jacobianElementA,g=this.jacobianElementB,x=this.ni;o.cross(x,u),l.cross(x,h),x.negate(y.spatial),u.negate(y.rotational),g.spatial.copy(x),g.rotational.copy(h),v.copy(i.position),v.vadd(l,v),v.vsub(r.position,v),v.vsub(o,v);var _=x.dot(v),b=this.restitution+1,w=b*f.dot(x)-b*p.dot(x)+m.dot(h)-d.dot(u),E=this.computeGiMf(),S=-_*e-w*n-t*E;return S};var l=new o,u=new o,h=new o,p=new o,d=new o;r.prototype.getImpactVelocityAlongNormal=function(){var t=l,e=u,n=h,r=p,i=d;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(r,e),t.vsub(e,i),this.ni.dot(i)}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(t,e,n){function r(t,e,n,o){this.id=r.id++,this.minForce="undefined"==typeof n?-1e6:n,this.maxForce="undefined"==typeof o?1e6:o,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new i,this.jacobianElementB=new i,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}e.exports=r;var i=t("../math/JacobianElement"),o=t("../math/Vec3");r.prototype.constructor=r,r.id=0,r.prototype.setSpookParams=function(t,e,n){var r=e,i=t,o=n;this.a=4/(o*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(o*o*i*(1+4*r))},r.prototype.computeB=function(t,e,n){var r=this.computeGW(),i=this.computeGq(),o=this.computeGiMf();return-i*t-r*e-o*n},r.prototype.computeGq=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,o=r.position;return t.spatial.dot(i)+e.spatial.dot(o)};var a=new o;r.prototype.computeGW=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,o=r.velocity,s=n.angularVelocity||a,c=r.angularVelocity||a;return t.multiplyVectors(i,s)+e.multiplyVectors(o,c)},r.prototype.computeGWlambda=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,o=r.vlambda,s=n.wlambda||a,c=r.wlambda||a;return t.multiplyVectors(i,s)+e.multiplyVectors(o,c)};var s=new o,c=new o,l=new o,u=new o;r.prototype.computeGiMf=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,o=n.torque,a=r.force,h=r.torque,p=n.invMassSolve,d=r.invMassSolve;return n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(o,l):l.set(0,0,0),r.invInertiaWorldSolve?r.invInertiaWorldSolve.vmult(h,u):u.set(0,0,0),i.mult(p,s),a.mult(d,c),t.multiplyVectors(s,l)+e.multiplyVectors(c,u)};var h=new o;r.prototype.computeGiMGt=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,o=r.invMassSolve,a=n.invInertiaWorldSolve,s=r.invInertiaWorldSolve,c=i+o;return a&&(a.vmult(t.rotational,h),c+=h.dot(t.rotational)),s&&(s.vmult(e.rotational,h),c+=h.dot(e.rotational)),c};var p=new o;new o,new o,new o,new o,new o;r.prototype.addToWlambda=function(t){var e=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,o=p;e.spatial.mult(r.invMassSolve*t,o),r.vlambda.vadd(o,r.vlambda),n.spatial.mult(i.invMassSolve*t,o),i.vlambda.vadd(o,i.vlambda),r.invInertiaWorldSolve&&(r.invInertiaWorldSolve.vmult(e.rotational,o),o.mult(t,o),r.wlambda.vadd(o,r.wlambda)),i.invInertiaWorldSolve&&(i.invInertiaWorldSolve.vmult(n.rotational,o),o.mult(t,o),i.wlambda.vadd(o,i.wlambda))},r.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(t,e,n){function r(t,e,n){i.call(this,t,e,-n,n),this.ri=new o,this.rj=new o,this.t=new o}e.exports=r;var i=t("./Equation"),o=t("../math/Vec3");t("../math/Mat3");r.prototype=new i,r.prototype.constructor=r;var a=new o,s=new o;r.prototype.computeB=function(t){var e=(this.a,this.b),n=(this.bi,this.bj,this.ri),r=this.rj,i=a,o=s,c=this.t;n.cross(c,i),r.cross(c,o);var l=this.jacobianElementA,u=this.jacobianElementB;c.negate(l.spatial),i.negate(l.rotational),u.spatial.copy(c),u.rotational.copy(o);var h=this.computeGW(),p=this.computeGiMf(),d=-h*e-t*p;return d}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(t,e,n){function r(t,e,n){n=n||{};var r="undefined"!=typeof n.maxForce?n.maxForce:1e6;o.call(this,t,e,-r,r),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.maxAngle=Math.PI/2}e.exports=r;var i=t("../math/Vec3"),o=(t("../math/Mat3"),t("./Equation"));r.prototype=new o,r.prototype.constructor=r;var a=new i,s=new i;r.prototype.computeB=function(t){var e=this.a,n=this.b,r=this.axisA,i=this.axisB,o=a,c=s,l=this.jacobianElementA,u=this.jacobianElementB;r.cross(i,o),i.cross(r,c),l.rotational.copy(c),u.rotational.copy(o);var h=Math.cos(this.maxAngle)-r.dot(i),p=this.computeGW(),d=this.computeGiMf(),f=-h*e-p*n-t*d;return f}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(t,e,n){function r(t,e,n){n="undefined"!=typeof n?n:1e6,o.call(this,t,e,-n,n),this.axisA=new i,this.axisB=new i,this.targetVelocity=0}e.exports=r;var i=t("../math/Vec3"),o=(t("../math/Mat3"),t("./Equation"));r.prototype=new o,r.prototype.constructor=r,r.prototype.computeB=function(t){var e=(this.a,this.b),n=(this.bi,this.bj,this.axisA),r=this.axisB,i=this.jacobianElementA,o=this.jacobianElementB;i.rotational.copy(n),r.negate(o.rotational);var a=this.computeGW()-this.targetVelocity,s=this.computeGiMf(),c=-a*e-t*s;return c}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(t,e,n){function r(t,e,n){n=i.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=r.idCounter++,this.materials=[t,e],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}var i=t("../utils/Utils");e.exports=r,r.idCounter=0},{"../utils/Utils":53}],25:[function(t,e,n){function r(t){var e="";t=t||{},"string"==typeof t?(e=t,t={}):"object"==typeof t&&(e=""),this.name=e,this.id=r.idCounter++,this.friction="undefined"!=typeof t.friction?t.friction:-1,this.restitution="undefined"!=typeof t.restitution?t.restitution:-1}e.exports=r,r.idCounter=0},{}],26:[function(t,e,n){function r(){this.spatial=new i,this.rotational=new i}e.exports=r;var i=t("./Vec3");r.prototype.multiplyElement=function(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)},r.prototype.multiplyVectors=function(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}},{"./Vec3":30}],27:[function(t,e,n){function r(t){t?this.elements=t:this.elements=[0,0,0,0,0,0,0,0,0]}e.exports=r;var i=t("./Vec3");r.prototype.identity=function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1},r.prototype.setZero=function(){var t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0},r.prototype.setTrace=function(t){var e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z},r.prototype.getTrace=function(t){var t=t||new i,e=this.elements;t.x=e[0],t.y=e[4],t.z=e[8]},r.prototype.vmult=function(t,e){e=e||new i;var n=this.elements,r=t.x,o=t.y,a=t.z;return e.x=n[0]*r+n[1]*o+n[2]*a,e.y=n[3]*r+n[4]*o+n[5]*a,e.z=n[6]*r+n[7]*o+n[8]*a,e},r.prototype.smult=function(t){for(var e=0;e<this.elements.length;e++)this.elements[e]*=t},r.prototype.mmult=function(t,e){for(var n=e||new r,i=0;i<3;i++)for(var o=0;o<3;o++){for(var a=0,s=0;s<3;s++)a+=t.elements[i+3*s]*this.elements[s+3*o];n.elements[i+3*o]=a}return n},r.prototype.scale=function(t,e){e=e||new r;for(var n=this.elements,i=e.elements,o=0;3!==o;o++)i[3*o+0]=t.x*n[3*o+0],i[3*o+1]=t.y*n[3*o+1],i[3*o+2]=t.z*n[3*o+2];return e},r.prototype.solve=function(t,e){e=e||new i;for(var n=3,r=4,o=[],a=0;a<n*r;a++)o.push(0);var a,s;for(a=0;a<3;a++)for(s=0;s<3;s++)o[a+r*s]=this.elements[a+3*s];o[3]=t.x,o[7]=t.y,o[11]=t.z;var c,l,u=3,h=u,p=4;do{if(a=h-u,0===o[a+r*a])for(s=a+1;s<h;s++)if(0!==o[a+r*s]){c=p;do l=p-c,o[l+r*a]+=o[l+r*s];while(--c);break}if(0!==o[a+r*a])for(s=a+1;s<h;s++){var d=o[a+r*s]/o[a+r*a];c=p;do l=p-c,o[l+r*s]=l<=a?0:o[l+r*s]-o[l+r*a]*d;while(--c)}}while(--u);if(e.z=o[2*r+3]/o[2*r+2],e.y=(o[1*r+3]-o[1*r+2]*e.z)/o[1*r+1],e.x=(o[0*r+3]-o[0*r+2]*e.z-o[0*r+1]*e.y)/o[0*r+0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw"Could not solve equation! Got x=["+e.toString()+"], b=["+t.toString()+"], A=["+this.toString()+"]";return e},r.prototype.e=function(t,e,n){return void 0===n?this.elements[e+3*t]:void(this.elements[e+3*t]=n)},r.prototype.copy=function(t){for(var e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this},r.prototype.toString=function(){for(var t="",e=",",n=0;n<9;n++)t+=this.elements[n]+e;return t},r.prototype.reverse=function(t){t=t||new r;for(var e=3,n=6,i=[],o=0;o<e*n;o++)i.push(0);var o,a;for(o=0;o<3;o++)for(a=0;a<3;a++)i[o+n*a]=this.elements[o+3*a];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;var s,c,l=3,u=l,h=n;do{if(o=u-l,0===i[o+n*o])for(a=o+1;a<u;a++)if(0!==i[o+n*a]){s=h;do c=h-s,i[c+n*o]+=i[c+n*a];while(--s);break}if(0!==i[o+n*o])for(a=o+1;a<u;a++){var p=i[o+n*a]/i[o+n*o];s=h;do c=h-s,i[c+n*a]=c<=o?0:i[c+n*a]-i[c+n*o]*p;while(--s)}}while(--l);o=2;do{a=o-1;do{var p=i[o+n*a]/i[o+n*o];s=n;do c=n-s,i[c+n*a]=i[c+n*a]-i[c+n*o]*p;while(--s)}while(a--)}while(--o);o=2;do{var p=1/i[o+n*o];s=n;do c=n-s,i[c+n*o]=i[c+n*o]*p;while(--s)}while(o--);o=2;do{a=2;do{if(c=i[e+a+n*o],isNaN(c)||c===1/0)throw"Could not reverse! A=["+this.toString()+"]";t.e(o,a,c)}while(a--)}while(o--);return t},r.prototype.setRotationFromQuaternion=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,o=e+e,a=n+n,s=r+r,c=e*o,l=e*a,u=e*s,h=n*a,p=n*s,d=r*s,f=i*o,m=i*a,v=i*s,y=this.elements;return y[0]=1-(h+d),y[1]=l-v,y[2]=u+m,y[3]=l+v,y[4]=1-(c+d),y[5]=p-f,y[6]=u-m,y[7]=p+f,y[8]=1-(c+h),this},r.prototype.transpose=function(t){t=t||new r;for(var e=t.elements,n=this.elements,i=0;3!==i;i++)for(var o=0;3!==o;o++)e[3*i+o]=n[3*o+i];return t}},{"./Vec3":30}],28:[function(t,e,n){function r(t,e,n,r){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0,this.w=void 0!==r?r:1}e.exports=r;var i=t("./Vec3");r.prototype.set=function(t,e,n,r){this.x=t,this.y=e,this.z=n,this.w=r},r.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},r.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},r.prototype.setFromAxisAngle=function(t,e){var n=Math.sin(.5*e);this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(.5*e)},r.prototype.toAxisAngle=function(t){t=t||new i,this.normalize();var e=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,e]};var o=new i,a=new i;r.prototype.setFromVectors=function(t,e){if(t.isAntiparallelTo(e)){var n=o,r=a;t.tangents(n,r),this.setFromAxisAngle(n,Math.PI)}else{var i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Math.pow(t.norm(),2)*Math.pow(e.norm(),2))+t.dot(e),this.normalize()}};var s=new i,c=new i,l=new i;r.prototype.mult=function(t,e){e=e||new r;var n=this.w,i=s,o=c,a=l;return i.set(this.x,this.y,this.z),o.set(t.x,t.y,t.z),e.w=n*t.w-i.dot(o),i.cross(o,a),e.x=n*o.x+t.w*i.x+a.x,e.y=n*o.y+t.w*i.y+a.y,e.z=n*o.z+t.w*i.z+a.z,e},r.prototype.inverse=function(t){var e=this.x,n=this.y,i=this.z,o=this.w;t=t||new r,this.conjugate(t);var a=1/(e*e+n*n+i*i+o*o);return t.x*=a,t.y*=a,t.z*=a,t.w*=a,t},r.prototype.conjugate=function(t){return t=t||new r,t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t},r.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t)},r.prototype.normalizeFast=function(){var t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t)},r.prototype.vmult=function(t,e){e=e||new i;var n=t.x,r=t.y,o=t.z,a=this.x,s=this.y,c=this.z,l=this.w,u=l*n+s*o-c*r,h=l*r+c*n-a*o,p=l*o+a*r-s*n,d=-a*n-s*r-c*o;return e.x=u*l+d*-a+h*-c-p*-s,e.y=h*l+d*-s+p*-a-u*-c,e.z=p*l+d*-c+u*-s-h*-a,e},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},r.prototype.toEuler=function(t,e){e=e||"YZX";var n,r,i,o=this.x,a=this.y,s=this.z,c=this.w;switch(e){case"YZX":var l=o*a+s*c;if(l>.499&&(n=2*Math.atan2(o,c),r=Math.PI/2,i=0),l<-.499&&(n=-2*Math.atan2(o,c),r=-Math.PI/2,i=0),isNaN(n)){var u=o*o,h=a*a,p=s*s;n=Math.atan2(2*a*c-2*o*s,1-2*h-2*p),r=Math.asin(2*l),i=Math.atan2(2*o*c-2*a*s,1-2*u-2*p)}break;default:throw new Error("Euler order "+e+" not supported yet.")}t.y=n,t.z=r,t.x=i},r.prototype.setFromEuler=function(t,e,n,r){r=r||"XYZ";var i=Math.cos(t/2),o=Math.cos(e/2),a=Math.cos(n/2),s=Math.sin(t/2),c=Math.sin(e/2),l=Math.sin(n/2);return"XYZ"===r?(this.x=s*o*a+i*c*l,this.y=i*c*a-s*o*l,this.z=i*o*l+s*c*a,this.w=i*o*a-s*c*l):"YXZ"===r?(this.x=s*o*a+i*c*l,this.y=i*c*a-s*o*l,this.z=i*o*l-s*c*a,this.w=i*o*a+s*c*l):"ZXY"===r?(this.x=s*o*a-i*c*l,this.y=i*c*a+s*o*l,this.z=i*o*l+s*c*a,this.w=i*o*a-s*c*l):"ZYX"===r?(this.x=s*o*a-i*c*l,this.y=i*c*a+s*o*l,this.z=i*o*l-s*c*a,this.w=i*o*a+s*c*l):"YZX"===r?(this.x=s*o*a+i*c*l,this.y=i*c*a+s*o*l,this.z=i*o*l-s*c*a,this.w=i*o*a-s*c*l):"XZY"===r&&(this.x=s*o*a-i*c*l,this.y=i*c*a-s*o*l,this.z=i*o*l+s*c*a,this.w=i*o*a+s*c*l),this},r.prototype.clone=function(){return new r(this.x,this.y,this.z,this.w)}},{"./Vec3":30}],29:[function(t,e,n){function r(t){t=t||{},this.position=new i,t.position&&this.position.copy(t.position),this.quaternion=new o,t.quaternion&&this.quaternion.copy(t.quaternion)}var i=t("./Vec3"),o=t("./Quaternion");e.exports=r;var a=new o;r.pointToLocalFrame=function(t,e,n,r){var r=r||new i;return n.vsub(t,r),e.conjugate(a),a.vmult(r,r),r},r.prototype.pointToLocal=function(t,e){return r.pointToLocalFrame(this.position,this.quaternion,t,e)},r.pointToWorldFrame=function(t,e,n,r){var r=r||new i;return e.vmult(n,r),r.vadd(t,r),r},r.prototype.pointToWorld=function(t,e){return r.pointToWorldFrame(this.position,this.quaternion,t,e)},r.prototype.vectorToWorldFrame=function(t,e){var e=e||new i;return this.quaternion.vmult(t,e),e},r.vectorToWorldFrame=function(t,e,n){return t.vmult(e,n),n},r.vectorToLocalFrame=function(t,e,n,r){var r=r||new i;return e.w*=-1,e.vmult(n,r),e.w*=-1,r}},{"./Quaternion":28,"./Vec3":30}],30:[function(t,e,n){function r(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}e.exports=r;var i=t("./Mat3");r.ZERO=new r(0,0,0),r.UNIT_X=new r(1,0,0),r.UNIT_Y=new r(0,1,0),r.UNIT_Z=new r(0,0,1),r.prototype.cross=function(t,e){var n=t.x,i=t.y,o=t.z,a=this.x,s=this.y,c=this.z;return e=e||new r,e.x=s*o-c*i,e.y=c*n-a*o,e.z=a*i-s*n,e},r.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},r.prototype.setZero=function(){this.x=this.y=this.z=0},r.prototype.vadd=function(t,e){return e?(e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z,void 0):new r(this.x+t.x,this.y+t.y,this.z+t.z)},r.prototype.vsub=function(t,e){return e?(e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,void 0):new r(this.x-t.x,this.y-t.y,this.z-t.z)},r.prototype.crossmat=function(){return new i([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},r.prototype.normalize=function(){var t=this.x,e=this.y,n=this.z,r=Math.sqrt(t*t+e*e+n*n);if(r>0){var i=1/r;this.x*=i,this.y*=i,this.z*=i}else this.x=0,this.y=0,this.z=0;return r},r.prototype.unit=function(t){t=t||new r;var e=this.x,n=this.y,i=this.z,o=Math.sqrt(e*e+n*n+i*i);return o>0?(o=1/o,t.x=e*o,t.y=n*o,t.z=i*o):(t.x=1,t.y=0,t.z=0),t},r.prototype.norm=function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},r.prototype.length=r.prototype.norm,r.prototype.norm2=function(){return this.dot(this)},r.prototype.lengthSquared=r.prototype.norm2,r.prototype.distanceTo=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z;return Math.sqrt((i-e)*(i-e)+(o-n)*(o-n)+(a-r)*(a-r))},r.prototype.distanceSquared=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z;return(i-e)*(i-e)+(o-n)*(o-n)+(a-r)*(a-r)},r.prototype.mult=function(t,e){e=e||new r;var n=this.x,i=this.y,o=this.z;return e.x=t*n,e.y=t*i,e.z=t*o,e},r.prototype.scale=r.prototype.mult,r.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},r.prototype.negate=function(t){return t=t||new r,t.x=-this.x,t.y=-this.y,t.z=-this.z,t};var o=new r,a=new r;r.prototype.tangents=function(t,e){var n=this.norm();if(n>0){var r=o,i=1/n;r.set(this.x*i,this.y*i,this.z*i);var s=a;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,t)):(s.set(0,1,0),r.cross(s,t)),r.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)},r.prototype.toString=function(){return this.x+","+this.y+","+this.z},r.prototype.toArray=function(){return[this.x,this.y,this.z]},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},r.prototype.lerp=function(t,e,n){var r=this.x,i=this.y,o=this.z;n.x=r+(t.x-r)*e,n.y=i+(t.y-i)*e,n.z=o+(t.z-o)*e},r.prototype.almostEquals=function(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)},r.prototype.almostZero=function(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)};var s=new r;r.prototype.isAntiparallelTo=function(t,e){return this.negate(s),s.almostEquals(t,e)},r.prototype.clone=function(){return new r(this.x,this.y,this.z)}},{"./Mat3":27}],31:[function(t,e,n){function r(t){t=t||{},i.apply(this),this.id=r.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new o,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:1,this.collisionResponse=!0,this.position=new o,t.position&&this.position.copy(t.position),this.previousPosition=new o,this.initPosition=new o,this.velocity=new o,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new o,this.force=new o;var e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?r.STATIC:r.DYNAMIC,typeof t.type==typeof r.STATIC&&(this.type=t.type),this.allowSleep="undefined"==typeof t.allowSleep||t.allowSleep,this.sleepState=0,this.sleepSpeedLimit="undefined"!=typeof t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit="undefined"!=typeof t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new o,this.quaternion=new s,t.quaternion&&this.quaternion.copy(t.quaternion),this.initQuaternion=new s,this.angularVelocity=new o,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new o,this.interpolatedPosition=new o,this.interpolatedQuaternion=new s,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new o,this.invInertia=new o,this.invInertiaWorld=new a,this.invMassSolve=0,this.invInertiaSolve=new o,this.invInertiaWorldSolve=new a,this.fixedRotation="undefined"!=typeof t.fixedRotation&&t.fixedRotation,this.angularDamping="undefined"!=typeof t.angularDamping?t.angularDamping:.01,this.aabb=new c,this.aabbNeedsUpdate=!0,this.wlambda=new o,t.shape&&this.addShape(t.shape),this.updateMassProperties()}e.exports=r;var i=t("../utils/EventTarget"),o=(t("../shapes/Shape"),t("../math/Vec3")),a=t("../math/Mat3"),s=t("../math/Quaternion"),c=(t("../material/Material"),t("../collision/AABB")),l=t("../shapes/Box");r.prototype=new i,r.prototype.constructor=r,r.DYNAMIC=1,r.STATIC=2,r.KINEMATIC=4,r.AWAKE=0,r.SLEEPY=1,r.SLEEPING=2,r.idCounter=0,r.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=0,t===r.SLEEPING&&this.dispatchEvent({type:"wakeup"})},r.prototype.sleep=function(){this.sleepState=r.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},r.sleepyEvent={type:"sleepy"},r.sleepEvent={type:"sleep"},r.prototype.sleepTick=function(t){if(this.allowSleep){var e=this.sleepState,n=this.velocity.norm2()+this.angularVelocity.norm2(),i=Math.pow(this.sleepSpeedLimit,2);e===r.AWAKE&&n<i?(this.sleepState=r.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(r.sleepyEvent)):e===r.SLEEPY&&n>i?this.wakeUp():e===r.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(r.sleepEvent))}},r.prototype.updateSolveMassProperties=function(){this.sleepState===r.SLEEPING||this.type===r.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},r.prototype.pointToLocalFrame=function(t,e){var e=e||new o;return t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e},r.prototype.vectorToLocalFrame=function(t,e){var e=e||new o;return this.quaternion.conjugate().vmult(t,e),e},r.prototype.pointToWorldFrame=function(t,e){var e=e||new o;return this.quaternion.vmult(t,e),e.vadd(this.position,e),e},r.prototype.vectorToWorldFrame=function(t,e){var e=e||new o;return this.quaternion.vmult(t,e),e};var u=new o,h=new s;r.prototype.addShape=function(t,e,n){var r=new o,i=new s;return e&&r.copy(e),n&&i.copy(n),this.shapes.push(t),this.shapeOffsets.push(r),this.shapeOrientations.push(i),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},r.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=this.shapeOffsets,n=t.length,r=0,i=0;i!==n;i++){var o=t[i];o.updateBoundingSphereRadius();var a=e[i].norm(),s=o.boundingSphereRadius;a+s>r&&(r=a+s)}this.boundingRadius=r};var p=new c;r.prototype.computeAABB=function(){for(var t=this.shapes,e=this.shapeOffsets,n=this.shapeOrientations,r=t.length,i=u,o=h,a=this.quaternion,s=this.aabb,c=p,l=0;l!==r;l++){var d=t[l];n[l].mult(a,o),o.vmult(e[l],i),i.vadd(this.position,i),d.calculateWorldAABB(i,o,c.lowerBound,c.upperBound),0===l?s.copy(c):s.extend(c)}this.aabbNeedsUpdate=!1};var d=new a,f=new a;new a;r.prototype.updateInertiaWorld=function(t){var e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){var n=d,r=f;n.setRotationFromQuaternion(this.quaternion),n.transpose(r),n.scale(e,n),n.mmult(r,this.invInertiaWorld)}else;};var m=new o,v=new o;r.prototype.applyForce=function(t,e){if(this.type===r.DYNAMIC){var n=m;e.vsub(this.position,n);var i=v;n.cross(t,i),this.force.vadd(t,this.force),this.torque.vadd(i,this.torque)}};var y=new o,g=new o;r.prototype.applyLocalForce=function(t,e){if(this.type===r.DYNAMIC){var n=y,i=g;this.vectorToWorldFrame(t,n),this.pointToWorldFrame(e,i),this.applyForce(n,i)}};var x=new o,_=new o,b=new o;r.prototype.applyImpulse=function(t,e){if(this.type===r.DYNAMIC){var n=x;e.vsub(this.position,n);var i=_;i.copy(t),i.mult(this.invMass,i),this.velocity.vadd(i,this.velocity);var o=b;n.cross(t,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}};var w=new o,E=new o;r.prototype.applyLocalImpulse=function(t,e){if(this.type===r.DYNAMIC){var n=w,i=E;this.vectorToWorldFrame(t,n),this.pointToWorldFrame(e,i),this.applyImpulse(n,i)}};var S=new o;r.prototype.updateMassProperties=function(){var t=S;this.invMass=this.mass>0?1/this.mass:0;var e=this.inertia,n=this.fixedRotation;this.computeAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),l.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!n?1/e.x:0,e.y>0&&!n?1/e.y:0,e.z>0&&!n?1/e.z:0),this.updateInertiaWorld(!0)},r.prototype.getVelocityAtWorldPoint=function(t,e){var n=new o;return t.vsub(this.position,n),this.angularVelocity.cross(n,e),this.velocity.vadd(e,e),e}},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(t,e,n){function r(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis="undefined"!=typeof t.indexRightAxis?t.indexRightAxis:1,this.indexForwardAxis="undefined"!=typeof t.indexForwardAxis?t.indexForwardAxis:0,this.indexUpAxis="undefined"!=typeof t.indexUpAxis?t.indexUpAxis:2}function i(t,e,n,r,i){var a=0,s=n,c=b,l=w,u=E;t.getVelocityAtWorldPoint(s,c),e.getVelocityAtWorldPoint(s,l),c.vsub(l,u);var h=r.dot(u),p=o(t,n,r),d=o(e,n,r),f=1,m=f/(p+d);return a=-h*m,i<a&&(a=i),a<-i&&(a=-i),a}function o(t,e,n){var r=S,i=M,o=A,a=C;return e.vsub(t.position,r),r.cross(n,i),t.invInertiaWorld.vmult(i,a),a.cross(r,o),t.invMass+n.dot(o)}function a(t,e,n,r,i,o){var a=i.norm2();if(a>1.1)return 0;var s=T,c=N,l=R;t.getVelocityAtWorldPoint(e,s),n.getVelocityAtWorldPoint(r,c),s.vsub(c,l);var u=i.dot(l),h=.2,p=1/(t.invMass+n.invMass),o=-h*u*p;return o}var s=(t("./Body"),t("../math/Vec3")),c=t("../math/Quaternion"),l=(t("../collision/RaycastResult"),t("../collision/Ray")),u=t("../objects/WheelInfo");e.exports=r;var h=(new s,new s,new s,new s),p=new s,d=new s;new l;r.prototype.addWheel=function(t){t=t||{};var e=new u(t),n=this.wheelInfos.length;return this.wheelInfos.push(e),n},r.prototype.setSteeringValue=function(t,e){var n=this.wheelInfos[e];n.steering=t};new s;r.prototype.applyEngineForce=function(t,e){this.wheelInfos[e].engineForce=t},r.prototype.setBrake=function(t,e){this.wheelInfos[e].brake=t},r.prototype.addToWorld=function(t){this.constraints;t.add(this.chassisBody);var e=this;this.preStepCallback=function(){e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t},r.prototype.getVehicleAxisWorld=function(t,e){e.set(0===t?1:0,1===t?1:0,2===t?1:0),this.chassisBody.vectorToWorldFrame(e,e)},r.prototype.updateVehicle=function(t){for(var e=this.wheelInfos,n=e.length,r=this.chassisBody,i=0;i<n;i++)this.updateWheelTransform(i);this.currentVehicleSpeedKmHour=3.6*r.velocity.norm();var o=new s;this.getVehicleAxisWorld(this.indexForwardAxis,o),o.dot(r.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(var i=0;i<n;i++)this.castRay(e[i]);this.updateSuspension(t);for(var a=new s,c=new s,i=0;i<n;i++){var l=e[i],u=l.suspensionForce;u>l.maxSuspensionForce&&(u=l.maxSuspensionForce),l.raycastResult.hitNormalWorld.scale(u*t,a),l.raycastResult.hitPointWorld.vsub(r.position,c),r.applyImpulse(a,l.raycastResult.hitPointWorld)}this.updateFriction(t);var h=new s,p=new s,d=new s;for(i=0;i<n;i++){var l=e[i];r.getVelocityAtWorldPoint(l.chassisConnectionPointWorld,d);var f=1;switch(this.indexUpAxis){case 1:f=-1}if(l.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,p);var m=p.dot(l.raycastResult.hitNormalWorld);l.raycastResult.hitNormalWorld.scale(m,h),p.vsub(h,p);var v=p.dot(d);l.deltaRotation=f*v*t/l.radius}!l.sliding&&l.isInContact||0===l.engineForce||!l.useCustomSlidingRotationalSpeed||(l.deltaRotation=(l.engineForce>0?1:-1)*l.customSlidingRotationalSpeed*t),Math.abs(l.brake)>Math.abs(l.engineForce)&&(l.deltaRotation=0),l.rotation+=l.deltaRotation,l.deltaRotation*=.99}},r.prototype.updateSuspension=function(t){for(var e=this.chassisBody,n=e.mass,r=this.wheelInfos,i=r.length,o=0;o<i;o++){var a=r[o];if(a.isInContact){var s,c=a.suspensionRestLength,l=a.suspensionLength,u=c-l;
s=a.suspensionStiffness*u*a.clippedInvContactDotSuspension;var h,p=a.suspensionRelativeVelocity;h=p<0?a.dampingCompression:a.dampingRelaxation,s-=h*p,a.suspensionForce=s*n,a.suspensionForce<0&&(a.suspensionForce=0)}else a.suspensionForce=0}},r.prototype.removeFromWorld=function(t){this.constraints;t.remove(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null};var f=new s,m=new s;r.prototype.castRay=function(t){var e=f,n=m;this.updateWheelTransformWorld(t);var r=this.chassisBody,i=-1,o=t.suspensionRestLength+t.radius;t.directionWorld.scale(o,e);var a=t.chassisConnectionPointWorld;a.vadd(e,n);var c=t.raycastResult;c.reset();var l=r.collisionResponse;r.collisionResponse=!1,this.world.rayTest(a,n,c),r.collisionResponse=l;var u=c.body;if(t.raycastResult.groundObject=0,u){i=c.distance,t.raycastResult.hitNormalWorld=c.hitNormalWorld,t.isInContact=!0;var h=c.distance;t.suspensionLength=h-t.radius;var p=t.suspensionRestLength-t.maxSuspensionTravel,d=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<p&&(t.suspensionLength=p),t.suspensionLength>d&&(t.suspensionLength=d,t.raycastResult.reset());var v=t.raycastResult.hitNormalWorld.dot(t.directionWorld),y=new s;r.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,y);var g=t.raycastResult.hitNormalWorld.dot(y);if(v>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=10;else{var x=-1/v;t.suspensionRelativeVelocity=g*x,t.clippedInvContactDotSuspension=x}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return i},r.prototype.updateWheelTransformWorld=function(t){t.isInContact=!1;var e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)},r.prototype.updateWheelTransform=function(t){var e=h,n=p,r=d,i=this.wheelInfos[t];this.updateWheelTransformWorld(i),i.directionLocal.scale(-1,e),n.copy(i.axleLocal),e.cross(n,r),r.normalize(),n.normalize();var o=i.steering,a=new c;a.setFromAxisAngle(e,o);var s=new c;s.setFromAxisAngle(n,i.rotation);var l=i.worldTransform.quaternion;this.chassisBody.quaternion.mult(a,l),l.mult(s,l),l.normalize();var u=i.worldTransform.position;u.copy(i.directionWorld),u.scale(i.suspensionLength,u),u.vadd(i.chassisConnectionPointWorld,u)};var v=[new s(1,0,0),new s(0,1,0),new s(0,0,1)];r.prototype.getWheelTransformWorld=function(t){return this.wheelInfos[t].worldTransform};var y=new s,g=[],x=[],_=1;r.prototype.updateFriction=function(t){for(var e=y,n=this.wheelInfos,r=n.length,o=this.chassisBody,c=x,l=g,u=0,h=0;h<r;h++){var p=n[h],d=p.raycastResult.body;d&&u++,p.sideImpulse=0,p.forwardImpulse=0,c[h]||(c[h]=new s),l[h]||(l[h]=new s)}for(var h=0;h<r;h++){var p=n[h],d=p.raycastResult.body;if(d){var f=l[h],m=this.getWheelTransformWorld(h);m.vectorToWorldFrame(v[this.indexRightAxis],f);var b=p.raycastResult.hitNormalWorld,w=f.dot(b);b.scale(w,e),f.vsub(e,f),f.normalize(),b.cross(f,c[h]),c[h].normalize(),p.sideImpulse=a(o,p.raycastResult.hitPointWorld,d,p.raycastResult.hitPointWorld,f),p.sideImpulse*=_}}var E=1,S=.5;this.sliding=!1;for(var h=0;h<r;h++){var p=n[h],d=p.raycastResult.body,M=0;if(p.slipInfo=1,d){var A=0,C=p.brake?p.brake:A;M=i(o,d,p.raycastResult.hitPointWorld,c[h],C),M+=p.engineForce*t;var T=C/M;p.slipInfo*=T}if(p.forwardImpulse=0,p.skidInfo=1,d){p.skidInfo=1;var N=p.suspensionForce*t*p.frictionSlip,R=N,O=N*R;p.forwardImpulse=M;var L=p.forwardImpulse*S,P=p.sideImpulse*E,k=L*L+P*P;if(p.sliding=!1,k>O){this.sliding=!0,p.sliding=!0;var T=N/Math.sqrt(k);p.skidInfo*=T}}}if(this.sliding)for(var h=0;h<r;h++){var p=n[h];0!==p.sideImpulse&&p.skidInfo<1&&(p.forwardImpulse*=p.skidInfo,p.sideImpulse*=p.skidInfo)}for(var h=0;h<r;h++){var p=n[h],D=new s;if(D.copy(p.raycastResult.hitPointWorld),0!==p.forwardImpulse){var I=new s;c[h].scale(p.forwardImpulse,I),o.applyImpulse(I,D)}if(0!==p.sideImpulse){var d=p.raycastResult.body,q=new s;q.copy(p.raycastResult.hitPointWorld);var B=new s;l[h].scale(p.sideImpulse,B),o.pointToLocalFrame(D,D),D["xyz"[this.indexUpAxis]]*=p.rollInfluence,o.pointToWorldFrame(D,D),o.applyImpulse(B,D),B.scale(-1,B),d.applyImpulse(B,q)}}};var b=new s,w=new s,E=new s,S=new s,M=new s,A=new s,C=new s,T=new s,N=new s,R=new s},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(t,e,n){function r(t){if(this.wheelBodies=[],this.coordinateSystem="undefined"==typeof t.coordinateSystem?new s(1,2,3):t.coordinateSystem.clone(),this.chassisBody=t.chassisBody,!this.chassisBody){var e=new a(new s(5,2,.5));this.chassisBody=new i(1,e)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}var i=t("./Body"),o=t("../shapes/Sphere"),a=t("../shapes/Box"),s=t("../math/Vec3"),c=t("../constraints/HingeConstraint");e.exports=r,r.prototype.addWheel=function(t){t=t||{};var e=t.body;e||(e=new i(1,new o(1.2))),this.wheelBodies.push(e),this.wheelForces.push(0);var n=(new s,"undefined"!=typeof t.position?t.position.clone():new s),r=new s;this.chassisBody.pointToWorldFrame(n,r),e.position.set(r.x,r.y,r.z);var a="undefined"!=typeof t.axis?t.axis.clone():new s(0,1,0);this.wheelAxes.push(a);var l=new c(this.chassisBody,e,{pivotA:n,axisA:a,pivotB:s.ZERO,axisB:a,collideConnected:!1});return this.constraints.push(l),this.wheelBodies.length-1},r.prototype.setSteeringValue=function(t,e){var n=this.wheelAxes[e],r=Math.cos(t),i=Math.sin(t),o=n.x,a=n.y;this.constraints[e].axisA.set(r*o-i*a,i*o+r*a,0)},r.prototype.setMotorSpeed=function(t,e){var n=this.constraints[e];n.enableMotor(),n.motorTargetVelocity=t},r.prototype.disableMotor=function(t){var e=this.constraints[t];e.disableMotor()};var l=new s;r.prototype.setWheelForce=function(t,e){this.wheelForces[e]=t},r.prototype.applyWheelForce=function(t,e){var n=this.wheelAxes[e],r=this.wheelBodies[e],i=r.torque;n.scale(t,l),r.vectorToWorldFrame(l,l),i.vadd(l,i)},r.prototype.addToWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)t.add(n[r]);for(var r=0;r<e.length;r++)t.addConstraint(e[r]);t.addEventListener("preStep",this._update.bind(this))},r.prototype._update=function(){for(var t=this.wheelForces,e=0;e<t.length;e++)this.applyWheelForce(t[e],e)},r.prototype.removeFromWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),r=0;r<n.length;r++)t.remove(n[r]);for(var r=0;r<e.length;r++)t.removeConstraint(e[r])};var u=new s;r.prototype.getWheelSpeed=function(t){var e=this.wheelAxes[t],n=this.wheelBodies[t],r=n.angularVelocity;return this.chassisBody.vectorToWorldFrame(e,u),r.dot(u)}},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(t,e,n){function r(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}e.exports=r;var i=(t("../shapes/Shape"),t("../math/Vec3"));t("../math/Quaternion"),t("../shapes/Particle"),t("../objects/Body"),t("../material/Material");r.prototype.add=function(t){this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])},r.prototype.remove=function(t){var e=this.particles.indexOf(t);e!==-1&&(this.particles.splice(e,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var o=new i;r.prototype.getNeighbors=function(t,e){for(var n=this.particles.length,r=t.id,i=this.smoothingRadius*this.smoothingRadius,a=o,s=0;s!==n;s++){var c=this.particles[s];c.position.vsub(t.position,a),r!==c.id&&a.norm2()<i&&e.push(c)}};var a=new i,s=new i,c=new i,l=new i,u=new i,h=new i;r.prototype.update=function(){for(var t=this.particles.length,e=a,n=this.speedOfSound,r=this.eps,i=0;i!==t;i++){var o=this.particles[i],p=this.neighbors[i];p.length=0,this.getNeighbors(o,p),p.push(this.particles[i]);for(var d=p.length,f=0,m=0;m!==d;m++){o.position.vsub(p[m].position,e);var v=e.norm(),y=this.w(v);f+=p[m].mass*y}this.densities[i]=f,this.pressures[i]=n*n*(this.densities[i]-this.density)}for(var g=s,x=c,_=l,b=u,w=h,i=0;i!==t;i++){var E=this.particles[i];g.set(0,0,0),x.set(0,0,0);for(var S,M,p=this.neighbors[i],d=p.length,m=0;m!==d;m++){var A=p[m];E.position.vsub(A.position,b);var C=b.norm();S=-A.mass*(this.pressures[i]/(this.densities[i]*this.densities[i]+r)+this.pressures[m]/(this.densities[m]*this.densities[m]+r)),this.gradw(b,_),_.mult(S,_),g.vadd(_,g),A.velocity.vsub(E.velocity,w),w.mult(1/(1e-4+this.densities[i]*this.densities[m])*this.viscosity*A.mass,w),M=this.nablaw(C),w.mult(M,w),x.vadd(w,x)}x.mult(E.mass,x),g.mult(E.mass,g),E.force.vadd(x,E.force),E.force.vadd(g,E.force)}},r.prototype.w=function(t){var e=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(e,9))*Math.pow(e*e-t*t,3)},r.prototype.gradw=function(t,e){var n=t.norm(),r=this.smoothingRadius;t.mult(945/(32*Math.PI*Math.pow(r,9))*Math.pow(r*r-n*n,2),e)},r.prototype.nablaw=function(t){var e=this.smoothingRadius,n=945/(32*Math.PI*Math.pow(e,9))*(e*e-t*t)*(7*t*t-3*e*e);return n}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(t,e,n){function r(t,e,n){n=n||{},this.restLength="number"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=t,this.bodyB=e,this.localAnchorA=new i,this.localAnchorB=new i,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}var i=t("../math/Vec3");e.exports=r,r.prototype.setWorldAnchorA=function(t){this.bodyA.pointToLocalFrame(t,this.localAnchorA)},r.prototype.setWorldAnchorB=function(t){this.bodyB.pointToLocalFrame(t,this.localAnchorB)},r.prototype.getWorldAnchorA=function(t){this.bodyA.pointToWorldFrame(this.localAnchorA,t)},r.prototype.getWorldAnchorB=function(t){this.bodyB.pointToWorldFrame(this.localAnchorB,t)};var o=new i,a=new i,s=new i,c=new i,l=new i,u=new i,h=new i,p=new i,d=new i,f=new i,m=new i;r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,v=o,y=a,g=s,x=c,_=m,b=l,w=u,E=h,S=p,M=d,A=f;this.getWorldAnchorA(b),this.getWorldAnchorB(w),b.vsub(r.position,E),w.vsub(i.position,S),w.vsub(b,v);var C=v.norm();y.copy(v),y.normalize(),i.velocity.vsub(r.velocity,g),i.angularVelocity.cross(S,_),g.vadd(_,g),r.angularVelocity.cross(E,_),g.vsub(_,g),y.mult(-t*(C-n)-e*g.dot(y),x),r.force.vsub(x,r.force),i.force.vadd(x,i.force),E.cross(x,M),S.cross(x,A),r.torque.vsub(M,r.torque),i.torque.vadd(A,i.torque)}},{"../math/Vec3":30}],36:[function(t,e,n){function r(t){t=s.defaults(t,{chassisConnectionPointLocal:new i,chassisConnectionPointWorld:new i,directionLocal:new i,directionWorld:new i,axleLocal:new i,axleWorld:new i,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new a,this.worldTransform=new o,this.isInContact=!1}var i=t("../math/Vec3"),o=t("../math/Transform"),a=t("../collision/RaycastResult"),s=t("../utils/Utils");e.exports=r;var c=new i,l=new i,c=new i;r.prototype.updateWheel=function(t){var e=this.raycastResult;if(this.isInContact){var n=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,l),t.getVelocityAtWorldPoint(l,c);var r=e.hitNormalWorld.dot(c);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var i=-1/n;this.suspensionRelativeVelocity=r*i,this.clippedInvContactDotSuspension=i}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(t,e,n){function r(t){i.call(this),this.type=i.types.BOX,this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3"),a=t("./ConvexPolyhedron");r.prototype=new i,r.prototype.constructor=r,r.prototype.updateConvexPolyhedronRepresentation=function(){var t=this.halfExtents.x,e=this.halfExtents.y,n=this.halfExtents.z,r=o,i=[new r((-t),(-e),(-n)),new r(t,(-e),(-n)),new r(t,e,(-n)),new r((-t),e,(-n)),new r((-t),(-e),n),new r(t,(-e),n),new r(t,e,n),new r((-t),e,n)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],c=([new r(0,0,1),new r(0,1,0),new r(1,0,0)],new a(i,s));this.convexPolyhedronRepresentation=c,c.material=this.material},r.prototype.calculateLocalInertia=function(t,e){return e=e||new o,r.calculateInertia(this.halfExtents,t,e),e},r.calculateInertia=function(t,e,n){var r=t;n.x=1/12*e*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*e*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*e*(2*r.y*2*r.y+2*r.x*2*r.x)},r.prototype.getSideNormals=function(t,e){var n=t,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==e)for(var i=0;i!==n.length;i++)e.vmult(n[i],n[i]);return n},r.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var s=new o;new o;r.prototype.forEachWorldCorner=function(t,e,n){for(var r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]],o=0;o<i.length;o++)s.set(i[o][0],i[o][1],i[o][2]),e.vmult(s,s),t.vadd(s,s),n(s.x,s.y,s.z)};var c=[new o,new o,new o,new o,new o,new o,new o,new o];r.prototype.calculateWorldAABB=function(t,e,n,r){var i=this.halfExtents;c[0].set(i.x,i.y,i.z),c[1].set(-i.x,i.y,i.z),c[2].set(-i.x,-i.y,i.z),c[3].set(-i.x,-i.y,-i.z),c[4].set(i.x,-i.y,-i.z),c[5].set(i.x,i.y,-i.z),c[6].set(-i.x,i.y,-i.z),c[7].set(i.x,-i.y,i.z);var o=c[0];e.vmult(o,o),t.vadd(o,o),r.copy(o),n.copy(o);for(var a=1;a<8;a++){var o=c[a];e.vmult(o,o),t.vadd(o,o);var s=o.x,l=o.y,u=o.z;s>r.x&&(r.x=s),l>r.y&&(r.y=l),u>r.z&&(r.z=u),s<n.x&&(n.x=s),l<n.y&&(n.y=l),u<n.z&&(n.z=u)}}},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(t,e,n){function r(t,e,n){i.call(this),this.type=i.types.CONVEXPOLYHEDRON,this.vertices=t||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=e||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3"),a=(t("../math/Quaternion"),t("../math/Transform"));r.prototype=new i,r.prototype.constructor=r;var s=new o;r.prototype.computeEdges=function(){var t=this.faces,e=this.vertices,n=(e.length,this.uniqueEdges);n.length=0;for(var r=s,i=0;i!==t.length;i++)for(var o=t[i],a=o.length,c=0;c!==a;c++){var l=(c+1)%a;e[o[c]].vsub(e[o[l]],r),r.normalize();for(var u=!1,h=0;h!==n.length;h++)if(n[h].almostEquals(r)||n[h].almostEquals(r)){u=!0;break}u||n.push(r.clone())}},r.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var t=0;t<this.faces.length;t++){for(var e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error("Vertex "+this.faces[t][e]+" not found!");var n=this.faceNormals[t]||new o;this.getFaceNormal(t,n),n.negate(n),this.faceNormals[t]=n;var r=this.vertices[this.faces[t][0]];if(n.dot(r)<0){console.error(".faceNormals["+t+"] = Vec3("+n.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(var e=0;e<this.faces[t].length;e++)console.warn(".vertices["+this.faces[t][e]+"] = Vec3("+this.vertices[this.faces[t][e]].toString()+")")}}};var c=new o,l=new o;r.computeNormal=function(t,e,n,r){e.vsub(t,l),n.vsub(e,c),c.cross(l,r),r.isZero()||r.normalize()},r.prototype.getFaceNormal=function(t,e){var n=this.faces[t],i=this.vertices[n[0]],o=this.vertices[n[1]],a=this.vertices[n[2]];return r.computeNormal(i,o,a,e)};var u=new o;r.prototype.clipAgainstHull=function(t,e,n,r,i,a,s,c,l){for(var h=u,p=-1,d=-Number.MAX_VALUE,f=0;f<n.faces.length;f++){h.copy(n.faceNormals[f]),i.vmult(h,h);var m=h.dot(a);m>d&&(d=m,p=f)}for(var v=[],y=n.faces[p],g=y.length,x=0;x<g;x++){var _=n.vertices[y[x]],b=new o;b.copy(_),i.vmult(b,b),r.vadd(b,b),v.push(b)}p>=0&&this.clipFaceAgainstHull(a,t,e,v,s,c,l)};var h=new o,p=new o,d=new o,f=new o,m=new o,v=new o;r.prototype.findSeparatingAxis=function(t,e,n,r,i,o,a,s){var c=h,l=p,u=d,y=f,g=m,x=v,_=Number.MAX_VALUE,b=this,w=0;if(b.uniqueAxes)for(var E=0;E!==b.uniqueAxes.length;E++){n.vmult(b.uniqueAxes[E],c);var S=b.testSepAxis(c,t,e,n,r,i);if(S===!1)return!1;S<_&&(_=S,o.copy(c))}else for(var M=a?a.length:b.faces.length,E=0;E<M;E++){var A=a?a[E]:E;c.copy(b.faceNormals[A]),n.vmult(c,c);var S=b.testSepAxis(c,t,e,n,r,i);if(S===!1)return!1;S<_&&(_=S,o.copy(c))}if(t.uniqueAxes)for(var E=0;E!==t.uniqueAxes.length;E++){i.vmult(t.uniqueAxes[E],l),w++;var S=b.testSepAxis(l,t,e,n,r,i);if(S===!1)return!1;S<_&&(_=S,o.copy(l))}else for(var C=s?s.length:t.faces.length,E=0;E<C;E++){var A=s?s[E]:E;l.copy(t.faceNormals[A]),i.vmult(l,l),w++;var S=b.testSepAxis(l,t,e,n,r,i);if(S===!1)return!1;S<_&&(_=S,o.copy(l))}for(var T=0;T!==b.uniqueEdges.length;T++){n.vmult(b.uniqueEdges[T],y);for(var N=0;N!==t.uniqueEdges.length;N++)if(i.vmult(t.uniqueEdges[N],g),y.cross(g,x),!x.almostZero()){x.normalize();var R=b.testSepAxis(x,t,e,n,r,i);if(R===!1)return!1;R<_&&(_=R,o.copy(x))}}return r.vsub(e,u),u.dot(o)>0&&o.negate(o),!0};var y=[],g=[];r.prototype.testSepAxis=function(t,e,n,i,o,a){var s=this;r.project(s,t,n,i,y),r.project(e,t,o,a,g);var c=y[0],l=y[1],u=g[0],h=g[1];if(c<h||u<l)return!1;var p=c-h,d=u-l,f=p<d?p:d;return f};var x=new o,_=new o;r.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(x,_);var n=_.x-x.x,r=_.y-x.y,i=_.z-x.z;e.x=1/12*t*(2*r*2*r+2*i*2*i),e.y=1/12*t*(2*n*2*n+2*i*2*i),e.z=1/12*t*(2*r*2*r+2*n*2*n)},r.prototype.getPlaneConstantOfFace=function(t){var e=this.faces[t],n=this.faceNormals[t],r=this.vertices[e[0]],i=-n.dot(r);return i};var b=new o,w=new o,E=new o,S=new o,M=new o,A=new o,C=new o,T=new o;r.prototype.clipFaceAgainstHull=function(t,e,n,r,i,o,a){for(var s=b,c=w,l=E,u=S,h=M,p=A,d=C,f=T,m=this,v=[],y=r,g=v,x=-1,_=Number.MAX_VALUE,N=0;N<m.faces.length;N++){s.copy(m.faceNormals[N]),n.vmult(s,s);var R=s.dot(t);R<_&&(_=R,x=N)}if(!(x<0)){var O=m.faces[x];O.connectedFaces=[];for(var L=0;L<m.faces.length;L++)for(var P=0;P<m.faces[L].length;P++)O.indexOf(m.faces[L][P])!==-1&&L!==x&&O.connectedFaces.indexOf(L)===-1&&O.connectedFaces.push(L);for(var k=(y.length,O.length),D=0;D<k;D++){var I=m.vertices[O[D]],q=m.vertices[O[(D+1)%k]];I.vsub(q,c),l.copy(c),n.vmult(l,l),e.vadd(l,l),u.copy(this.faceNormals[x]),n.vmult(u,u),e.vadd(u,u),l.cross(u,h),h.negate(h),p.copy(I),n.vmult(p,p),e.vadd(p,p);var B,V=(-p.dot(h),O.connectedFaces[D]);d.copy(this.faceNormals[V]);var F=this.getPlaneConstantOfFace(V);f.copy(d),n.vmult(f,f);var B=F-f.dot(e);for(this.clipFaceAgainstPlane(y,g,f,B);y.length;)y.shift();for(;g.length;)y.push(g.shift())}d.copy(this.faceNormals[x]);var F=this.getPlaneConstantOfFace(x);f.copy(d),n.vmult(f,f);for(var B=F-f.dot(e),L=0;L<y.length;L++){var z=f.dot(y[L])+B;if(z<=i&&(console.log("clamped: depth="+z+" to minDist="+(i+"")),z=i),z<=o){var U=y[L];if(z<=0){var j={point:U,normal:f,depth:z};a.push(j)}}}}},r.prototype.clipFaceAgainstPlane=function(t,e,n,r){var i,a,s=t.length;if(s<2)return e;var c=t[t.length-1],l=t[0];i=n.dot(c)+r;for(var u=0;u<s;u++){if(l=t[u],a=n.dot(l)+r,i<0)if(a<0){var h=new o;h.copy(l),e.push(h)}else{var h=new o;c.lerp(l,i/(i-a),h),e.push(h)}else if(a<0){var h=new o;c.lerp(l,i/(i-a),h),e.push(h),e.push(l)}c=l,i=a}return e},r.prototype.computeWorldVertices=function(t,e){for(var n=this.vertices.length;this.worldVertices.length<n;)this.worldVertices.push(new o);for(var r=this.vertices,i=this.worldVertices,a=0;a!==n;a++)e.vmult(r[a],i[a]),t.vadd(i[a],i[a]);this.worldVerticesNeedsUpdate=!1};new o;r.prototype.computeLocalAABB=function(t,e){var n=this.vertices.length,r=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<n;i++){var o=r[i];o.x<t.x?t.x=o.x:o.x>e.x&&(e.x=o.x),o.y<t.y?t.y=o.y:o.y>e.y&&(e.y=o.y),o.z<t.z?t.z=o.z:o.z>e.z&&(e.z=o.z)}},r.prototype.computeWorldFaceNormals=function(t){for(var e=this.faceNormals.length;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new o);for(var n=this.faceNormals,r=this.worldFaceNormals,i=0;i!==e;i++)t.vmult(n[i],r[i]);this.worldFaceNormalsNeedsUpdate=!1},r.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=0,r=e.length;n!==r;n++){var i=e[n].norm2();i>t&&(t=i)}this.boundingSphereRadius=Math.sqrt(t)};var N=new o;r.prototype.calculateWorldAABB=function(t,e,n,r){for(var i,o,a,s,c,l,u=this.vertices.length,h=this.vertices,p=0;p<u;p++){N.copy(h[p]),e.vmult(N,N),t.vadd(N,N);var d=N;d.x<i||void 0===i?i=d.x:(d.x>s||void 0===s)&&(s=d.x),d.y<o||void 0===o?o=d.y:(d.y>c||void 0===c)&&(c=d.y),d.z<a||void 0===a?a=d.z:(d.z>l||void 0===l)&&(l=d.z)}n.set(i,o,a),r.set(s,c,l)},r.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},r.prototype.getAveragePointLocal=function(t){t=t||new o;for(var e=this.vertices.length,n=this.vertices,r=0;r<e;r++)t.vadd(n[r],t);return t.mult(1/e,t),t},r.prototype.transformAllPoints=function(t,e){var n=this.vertices.length,r=this.vertices;if(e){for(var i=0;i<n;i++){var o=r[i];e.vmult(o,o)}for(var i=0;i<this.faceNormals.length;i++){var o=this.faceNormals[i];e.vmult(o,o)}}if(t)for(var i=0;i<n;i++){var o=r[i];o.vadd(t,o)}};var R=new o,O=new o,L=new o;r.prototype.pointIsInside=function(t){var e=this.vertices.length,n=this.vertices,r=this.faces,i=this.faceNormals,o=null,a=this.faces.length,s=R;this.getAveragePointLocal(s);for(var c=0;c<a;c++){var e=(this.faces[c].length,i[c]),l=n[r[c][0]],u=O;t.vsub(l,u);var h=e.dot(u),p=L;s.vsub(l,p);var d=e.dot(p);if(h<0&&d>0||h>0&&d<0)return!1}return o?1:-1};var P=(new o,new o),k=new o;r.project=function(t,e,n,r,i){var o=t.vertices.length,s=P,c=0,l=0,u=k,h=t.vertices;u.setZero(),a.vectorToLocalFrame(n,r,e,s),a.pointToLocalFrame(n,r,u,u);var p=u.dot(s);l=c=h[0].dot(s);for(var d=1;d<o;d++){var f=h[d].dot(s);f>c&&(c=f),f<l&&(l=f)}if(l-=p,c-=p,l>c){var m=l;l=c,c=m}i[0]=c,i[1]=l}},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(t,e,n){function r(t,e,n,r){var s=r,c=[],l=[],u=[],h=[],p=[],d=Math.cos,f=Math.sin;c.push(new o(e*d(0),e*f(0),.5*-n)),h.push(0),c.push(new o(t*d(0),t*f(0),.5*n)),p.push(1);for(var m=0;m<s;m++){var v=2*Math.PI/s*(m+1),y=2*Math.PI/s*(m+.5);m<s-1?(c.push(new o(e*d(v),e*f(v),.5*-n)),h.push(2*m+2),c.push(new o(t*d(v),t*f(v),.5*n)),p.push(2*m+3),u.push([2*m+2,2*m+3,2*m+1,2*m])):u.push([0,1,2*m+1,2*m]),(s%2===1||m<s/2)&&l.push(new o(d(y),f(y),0))}u.push(p),l.push(new o(0,0,1));for(var g=[],m=0;m<h.length;m++)g.push(h[h.length-m-1]);u.push(g),this.type=i.types.CONVEXPOLYHEDRON,a.call(this,c,u,l)}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3"),a=(t("../math/Quaternion"),t("./ConvexPolyhedron"));r.prototype=new a},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(t,e,n){function r(t,e){e=s.defaults(e,{maxValue:null,minValue:null,elementSize:1}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,null===e.minValue&&this.updateMinValue(),null===e.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,i.call(this),this.pillarConvex=new o,this.pillarOffset=new a,this.type=i.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}var i=t("./Shape"),o=t("./ConvexPolyhedron"),a=t("../math/Vec3"),s=t("../utils/Utils");e.exports=r,r.prototype=new i,r.prototype.update=function(){this._cachedPillars={}},r.prototype.updateMinValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var r=0;r!==t[n].length;r++){var i=t[n][r];i<e&&(e=i)}this.minValue=e},r.prototype.updateMaxValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var r=0;r!==t[n].length;r++){var i=t[n][r];i>e&&(e=i)}this.maxValue=e},r.prototype.setHeightValueAtIndex=function(t,e,n){var r=this.data;r[t][e]=n,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)},r.prototype.getRectMinMax=function(t,e,n,r,i){i=i||[];for(var o=this.data,a=this.minValue,s=t;s<=n;s++)for(var c=e;c<=r;c++){var l=o[s][c];l>a&&(a=l)}i[0]=this.minValue,i[1]=a},r.prototype.getIndexOfPosition=function(t,e,n,r){var i=this.elementSize,o=this.data,a=Math.floor(t/i),s=Math.floor(e/i);return n[0]=a,n[1]=s,r&&(a<0&&(a=0),s<0&&(s=0),a>=o.length-1&&(a=o.length-1),s>=o[0].length-1&&(s=o[0].length-1)),!(a<0||s<0||a>=o.length-1||s>=o[0].length-1)},r.prototype.getHeightAt=function(t,e,n){var r=[];this.getIndexOfPosition(t,e,r,n);var i=[];return this.getRectMinMax(r[0],r[1]+1,r[0],r[1]+1,i),(i[0]+i[1])/2},r.prototype.getCacheConvexTrianglePillarKey=function(t,e,n){return t+"_"+e+"_"+(n?1:0)},r.prototype.getCachedConvexTrianglePillar=function(t,e,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},r.prototype.setCachedConvexTrianglePillar=function(t,e,n,r,i){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]={convex:r,offset:i}},r.prototype.clearCachedConvexTrianglePillar=function(t,e,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},r.prototype.getConvexTrianglePillar=function(t,e,n){var r=this.pillarConvex,i=this.pillarOffset;if(this.cacheEnabled){var s=this.getCachedConvexTrianglePillar(t,e,n);if(s)return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);r=new o,i=new a,this.pillarConvex=r,this.pillarOffset=i}var s=this.data,c=this.elementSize,l=r.faces;r.vertices.length=6;for(var u=0;u<6;u++)r.vertices[u]||(r.vertices[u]=new a);l.length=5;for(var u=0;u<5;u++)l[u]||(l[u]=[]);var h=r.vertices,p=(Math.min(s[t][e],s[t+1][e],s[t][e+1],s[t+1][e+1])-this.minValue)/2+this.minValue;n?(i.set((t+.75)*c,(e+.75)*c,p),h[0].set(.25*c,.25*c,s[t+1][e+1]-p),h[1].set(-.75*c,.25*c,s[t][e+1]-p),h[2].set(.25*c,-.75*c,s[t+1][e]-p),h[3].set(.25*c,.25*c,-p-1),h[4].set(-.75*c,.25*c,-p-1),h[5].set(.25*c,-.75*c,-p-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(i.set((t+.25)*c,(e+.25)*c,p),h[0].set(-.25*c,-.25*c,s[t][e]-p),h[1].set(.75*c,-.25*c,s[t+1][e]-p),h[2].set(-.25*c,.75*c,s[t][e+1]-p),h[3].set(-.25*c,-.25*c,-p-1),h[4].set(.75*c,-.25*c,-p-1),h[5].set(-.25*c,.75*c,-p-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),r.computeNormals(),r.computeEdges(),r.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,n,r,i)},r.prototype.calculateLocalInertia=function(t,e){return e=e||new a,e.set(0,0,0),e},r.prototype.volume=function(){return Number.MAX_VALUE},r.prototype.calculateWorldAABB=function(t,e,n,r){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),r.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},r.prototype.updateBoundingSphereRadius=function(){var t=this.data,e=this.elementSize;this.boundingSphereRadius=new a(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(t,e,n){function r(){i.call(this),this.type=i.types.PARTICLE}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3");r.prototype=new i,r.prototype.constructor=r,r.prototype.calculateLocalInertia=function(t,e){return e=e||new o,e.set(0,0,0),e},r.prototype.volume=function(){return 0},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},r.prototype.calculateWorldAABB=function(t,e,n,r){n.copy(t),r.copy(t)}},{"../math/Vec3":30,"./Shape":43}],42:[function(t,e,n){function r(){i.call(this),this.type=i.types.PLANE,this.worldNormal=new o,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3");r.prototype=new i,r.prototype.constructor=r,r.prototype.computeWorldNormal=function(t){var e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1},r.prototype.calculateLocalInertia=function(t,e){return e=e||new o},r.prototype.volume=function(){return Number.MAX_VALUE};var a=new o;r.prototype.calculateWorldAABB=function(t,e,n,r){a.set(0,0,1),e.vmult(a,a);var i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===a.x&&(r.x=t.x),1===a.y&&(r.y=t.y),1===a.z&&(r.z=t.z),a.x===-1&&(n.x=t.x),a.y===-1&&(n.y=t.y),a.z===-1&&(n.z=t.z)},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},{"../math/Vec3":30,"./Shape":43}],43:[function(t,e,n){function r(){this.id=r.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}e.exports=r;var r=t("./Shape");t("../math/Vec3"),t("../math/Quaternion"),t("../material/Material");r.prototype.constructor=r,r.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},r.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},r.prototype.calculateLocalInertia=function(t,e){throw"calculateLocalInertia() not implemented for shape type "+this.type},r.idCounter=0,r.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(t,e,n){function r(t){if(i.call(this),this.radius=void 0!==t?Number(t):1,this.type=i.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");
this.updateBoundingSphereRadius()}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3");r.prototype=new i,r.prototype.constructor=r,r.prototype.calculateLocalInertia=function(t,e){e=e||new o;var n=2*t*this.radius*this.radius/5;return e.x=n,e.y=n,e.z=n,e},r.prototype.volume=function(){return 4*Math.PI*this.radius/3},r.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},r.prototype.calculateWorldAABB=function(t,e,n,r){for(var i=this.radius,o=["x","y","z"],a=0;a<o.length;a++){var s=o[a];n[s]=t[s]-i,r[s]=t[s]+i}}},{"../math/Vec3":30,"./Shape":43}],45:[function(t,e,n){function r(t,e){i.call(this),this.type=i.types.TRIMESH,this.vertices=new Float32Array(t),this.indices=new Int16Array(e),this.normals=new Float32Array(e.length),this.aabb=new s,this.edges=null,this.scale=new o(1,1,1),this.tree=new c,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}e.exports=r;var i=t("./Shape"),o=t("../math/Vec3"),a=(t("../math/Quaternion"),t("../math/Transform")),s=t("../collision/AABB"),c=t("../utils/Octree");r.prototype=new i,r.prototype.constructor=r;var l=new o;r.prototype.updateTree=function(){var t=this.tree;t.reset(),t.aabb.copy(this.aabb);var e=this.scale;t.aabb.lowerBound.x*=1/e.x,t.aabb.lowerBound.y*=1/e.y,t.aabb.lowerBound.z*=1/e.z,t.aabb.upperBound.x*=1/e.x,t.aabb.upperBound.y*=1/e.y,t.aabb.upperBound.z*=1/e.z;for(var n=new s,r=new o,i=new o,a=new o,c=[r,i,a],l=0;l<this.indices.length/3;l++){var u=3*l;this._getUnscaledVertex(this.indices[u],r),this._getUnscaledVertex(this.indices[u+1],i),this._getUnscaledVertex(this.indices[u+2],a),n.setFromPoints(c),t.insert(n,l)}t.removeEmptyNodes()};var u=new s;r.prototype.getTrianglesInAABB=function(t,e){u.copy(t);var n=this.scale,r=n.x,i=n.y,o=n.z,a=u.lowerBound,s=u.upperBound;return a.x/=r,a.y/=i,a.z/=o,s.x/=r,s.y/=i,s.z/=o,this.tree.aabbQuery(u,e)},r.prototype.setScale=function(t){var e=this.scale.x===this.scale.y===this.scale.z,n=t.x===t.y===t.z;e&&n||this.updateNormals(),this.scale.copy(t),this.updateAABB(),this.updateBoundingSphereRadius()},r.prototype.updateNormals=function(){for(var t=l,e=this.normals,n=0;n<this.indices.length/3;n++){var i=3*n,o=this.indices[i],a=this.indices[i+1],s=this.indices[i+2];this.getVertex(o,m),this.getVertex(a,v),this.getVertex(s,y),r.computeNormal(v,m,y,t),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z}},r.prototype.updateEdges=function(){for(var t={},e=function(e,n){var r=i<o?i+"_"+o:o+"_"+i;t[r]=!0},n=0;n<this.indices.length/3;n++){var r=3*n,i=this.indices[r],o=this.indices[r+1],a=this.indices[r+2];e(i,o),e(o,a),e(a,i)}var s=Object.keys(t);this.edges=new Int16Array(2*s.length);for(var n=0;n<s.length;n++){var c=s[n].split("_");this.edges[2*n]=parseInt(c[0],10),this.edges[2*n+1]=parseInt(c[1],10)}},r.prototype.getEdgeVertex=function(t,e,n){var r=this.edges[2*t+(e?1:0)];this.getVertex(r,n)};var h=new o,p=new o;r.prototype.getEdgeVector=function(t,e){var n=h,r=p;this.getEdgeVertex(t,0,n),this.getEdgeVertex(t,1,r),r.vsub(n,e)};var d=new o,f=new o;r.computeNormal=function(t,e,n,r){e.vsub(t,f),n.vsub(e,d),d.cross(f,r),r.isZero()||r.normalize()};var m=new o,v=new o,y=new o;r.prototype.getVertex=function(t,e){var n=this.scale;return this._getUnscaledVertex(t,e),e.x*=n.x,e.y*=n.y,e.z*=n.z,e},r.prototype._getUnscaledVertex=function(t,e){var n=3*t,r=this.vertices;return e.set(r[n],r[n+1],r[n+2])},r.prototype.getWorldVertex=function(t,e,n,r){return this.getVertex(t,r),a.pointToWorldFrame(e,n,r,r),r},r.prototype.getTriangleVertices=function(t,e,n,r){var i=3*t;this.getVertex(this.indices[i],e),this.getVertex(this.indices[i+1],n),this.getVertex(this.indices[i+2],r)},r.prototype.getNormal=function(t,e){var n=3*t;return e.set(this.normals[n],this.normals[n+1],this.normals[n+2])};var g=new s;r.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(g);var n=g.upperBound.x-g.lowerBound.x,r=g.upperBound.y-g.lowerBound.y,i=g.upperBound.z-g.lowerBound.z;return e.set(1/12*t*(2*r*2*r+2*i*2*i),1/12*t*(2*n*2*n+2*i*2*i),1/12*t*(2*r*2*r+2*n*2*n))};var x=new o;r.prototype.computeLocalAABB=function(t){var e=t.lowerBound,n=t.upperBound,r=this.vertices.length,i=(this.vertices,x);this.getVertex(0,i),e.copy(i),n.copy(i);for(var o=0;o!==r;o++)this.getVertex(o,i),i.x<e.x?e.x=i.x:i.x>n.x&&(n.x=i.x),i.y<e.y?e.y=i.y:i.y>n.y&&(n.y=i.y),i.z<e.z?e.z=i.z:i.z>n.z&&(n.z=i.z)},r.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},r.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=new o,r=0,i=e.length/3;r!==i;r++){this.getVertex(r,n);var a=n.norm2();a>t&&(t=a)}this.boundingSphereRadius=Math.sqrt(t)};var _=(new o,new a),b=new s;r.prototype.calculateWorldAABB=function(t,e,n,r){var i=_,o=b;i.position=t,i.quaternion=e,this.aabb.toWorldFrame(i,o),n.copy(o.lowerBound),r.copy(o.upperBound)},r.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},r.createTorus=function(t,e,n,i,o){t=t||1,e=e||.5,n=n||8,i=i||6,o=o||2*Math.PI;for(var a=[],s=[],c=0;c<=n;c++)for(var l=0;l<=i;l++){var u=l/i*o,h=c/n*Math.PI*2,p=(t+e*Math.cos(h))*Math.cos(u),d=(t+e*Math.cos(h))*Math.sin(u),f=e*Math.sin(h);a.push(p,d,f)}for(var c=1;c<=n;c++)for(var l=1;l<=i;l++){var m=(i+1)*c+l-1,v=(i+1)*(c-1)+l-1,y=(i+1)*(c-1)+l,g=(i+1)*c+l;s.push(m,v,g),s.push(v,y,g)}return new r(a,s)}},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(t,e,n){function r(){i.call(this),this.iterations=10,this.tolerance=1e-7}e.exports=r;var i=(t("../math/Vec3"),t("../math/Quaternion"),t("./Solver"));r.prototype=new i;var o=[],a=[],s=[];r.prototype.solve=function(t,e){var n,r,i,c,l,u,h=0,p=this.iterations,d=this.tolerance*this.tolerance,f=this.equations,m=f.length,v=e.bodies,y=v.length,g=t;if(0!==m)for(var x=0;x!==y;x++)v[x].updateSolveMassProperties();var _=a,b=s,w=o;_.length=m,b.length=m,w.length=m;for(var x=0;x!==m;x++){var E=f[x];w[x]=0,b[x]=E.computeB(g),_[x]=1/E.computeC()}if(0!==m){for(var x=0;x!==y;x++){var S=v[x],M=S.vlambda,A=S.wlambda;M.set(0,0,0),A&&A.set(0,0,0)}for(h=0;h!==p;h++){c=0;for(var C=0;C!==m;C++){var E=f[C];n=b[C],r=_[C],u=w[C],l=E.computeGWlambda(),i=r*(n-l-E.eps*u),u+i<E.minForce?i=E.minForce-u:u+i>E.maxForce&&(i=E.maxForce-u),w[C]+=i,c+=i>0?i:-i,E.addToWlambda(i)}if(c*c<d)break}for(var x=0;x!==y;x++){var S=v[x],T=S.velocity,N=S.angularVelocity;T.vadd(S.vlambda,T),N&&N.vadd(S.wlambda,N)}}return h}},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(t,e,n){function r(){this.equations=[]}e.exports=r,r.prototype.solve=function(t,e){return 0},r.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},r.prototype.removeEquation=function(t){var e=this.equations,n=e.indexOf(t);n!==-1&&e.splice(n,1)},r.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(t,e,n){function r(t){for(c.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=t,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}function i(t){for(var e=t.length,n=0;n!==e;n++){var r=t[n];if(!(r.visited||r.body.type&d))return r}return!1}function o(t,e,n,r){for(f.push(t),t.visited=!0,e(t,n,r);f.length;)for(var o,a=f.pop();o=i(a.children);)o.visited=!0,e(o,n,r),f.push(o)}function a(t,e,n){e.push(t.body);for(var r=t.eqs.length,i=0;i!==r;i++){var o=t.eqs[i];n.indexOf(o)===-1&&n.push(o)}}function s(t,e){return e.id-t.id}e.exports=r;var c=(t("../math/Vec3"),t("../math/Quaternion"),t("./Solver")),l=t("../objects/Body");r.prototype=new c;var u=[],h=[],p={bodies:[]},d=l.STATIC,f=[];r.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},r.prototype.solve=function(t,e){for(var n=u,r=this.nodePool,c=e.bodies,l=this.equations,d=l.length,f=c.length,m=this.subsolver;r.length<f;)r.push(this.createNode());n.length=f;for(var v=0;v<f;v++)n[v]=r[v];for(var v=0;v!==f;v++){var y=n[v];y.body=c[v],y.children.length=0,y.eqs.length=0,y.visited=!1}for(var g=0;g!==d;g++){var x=l[g],v=c.indexOf(x.bi),_=c.indexOf(x.bj),b=n[v],w=n[_];b.children.push(w),b.eqs.push(x),w.children.push(b),w.eqs.push(x)}var E,S=0,M=h;m.tolerance=this.tolerance,m.iterations=this.iterations;for(var A=p;E=i(n);){M.length=0,A.bodies.length=0,o(E,a,A.bodies,M);var C=M.length;M=M.sort(s);for(var v=0;v!==C;v++)m.addEquation(M[v]);m.solve(t,A);m.removeAllEquations(),S++}return S}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(t,e,n){var r=function(){};e.exports=r,r.prototype={constructor:r,addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e),this},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[t])return this;var r=n[t].indexOf(e);return r!==-1&&n[t].splice(r,1),this},dispatchEvent:function(t){if(void 0===this._listeners)return this;var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=0,i=n.length;r<i;r++)n[r].call(this,t)}return this}}},{}],50:[function(t,e,n){function r(t){t=t||{},this.root=t.root||null,this.aabb=t.aabb?t.aabb.clone():new o,this.data=[],this.children=[]}function i(t,e){e=e||{},e.root=null,e.aabb=t,r.call(this,e),this.maxDepth="undefined"!=typeof e.maxDepth?e.maxDepth:8}var o=t("../collision/AABB"),a=t("../math/Vec3");e.exports=i,i.prototype=new r,r.prototype.reset=function(t,e){this.children.length=this.data.length=0},r.prototype.insert=function(t,e,n){var r=this.data;if(n=n||0,!this.aabb.contains(t))return!1;var i=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var o=!1;i.length||(this.subdivide(),o=!0);for(var a=0;8!==a;a++)if(i[a].insert(t,e,n+1))return!0;o&&(i.length=0)}return r.push(e),!0};var s=new a;r.prototype.subdivide=function(){var t=this.aabb,e=t.lowerBound,n=t.upperBound,i=this.children;i.push(new r({aabb:new o({lowerBound:new a(0,0,0)})}),new r({aabb:new o({lowerBound:new a(1,0,0)})}),new r({aabb:new o({lowerBound:new a(1,1,0)})}),new r({aabb:new o({lowerBound:new a(1,1,1)})}),new r({aabb:new o({lowerBound:new a(0,1,1)})}),new r({aabb:new o({lowerBound:new a(0,0,1)})}),new r({aabb:new o({lowerBound:new a(1,0,1)})}),new r({aabb:new o({lowerBound:new a(0,1,0)})})),n.vsub(e,s),s.scale(.5,s);for(var c=this.root||this,l=0;8!==l;l++){var u=i[l];u.root=c;var h=u.aabb.lowerBound;h.x*=s.x,h.y*=s.y,h.z*=s.z,h.vadd(e,h),h.vadd(s,u.aabb.upperBound)}},r.prototype.aabbQuery=function(t,e){for(var n=(this.data,this.children,[this]);n.length;){var r=n.pop();r.aabb.overlaps(t)&&Array.prototype.push.apply(e,r.data),Array.prototype.push.apply(n,r.children)}return e};var c=new o;r.prototype.rayQuery=function(t,e,n){return t.getAABB(c),c.toLocalFrame(e,c),this.aabbQuery(c,n),n},r.prototype.removeEmptyNodes=function(){for(var t=[this];t.length;){for(var e=t.pop(),n=e.children.length-1;n>=0;n--)e.children[n].data.length||e.children.splice(n,1);Array.prototype.push.apply(t,e.children)}}},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(t,e,n){function r(){this.objects=[],this.type=Object}e.exports=r,r.prototype.release=function(){for(var t=arguments.length,e=0;e!==t;e++)this.objects.push(arguments[e])},r.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},r.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},{}],52:[function(t,e,n){function r(){this.data={keys:[]}}e.exports=r,r.prototype.get=function(t,e){if(t>e){var n=e;e=t,t=n}return this.data[t+"-"+e]},r.prototype.set=function(t,e,n){if(t>e){var r=e;e=t,t=r}var i=t+"-"+e;this.get(t,e)||this.data.keys.push(i),this.data[i]=n},r.prototype.reset=function(){for(var t=this.data,e=t.keys;e.length>0;){var n=e.pop();delete t[n]}}},{}],53:[function(t,e,n){function r(){}e.exports=r,r.defaults=function(t,e){t=t||{};for(var n in e)n in t||(t[n]=e[n]);return t}},{}],54:[function(t,e,n){function r(){o.call(this),this.type=i}e.exports=r;var i=t("../math/Vec3"),o=t("./Pool");r.prototype=new o,r.prototype.constructObject=function(){return new i}},{"../math/Vec3":30,"./Pool":51}],55:[function(t,e,n){function r(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new h,this.world=t,this.currentContactMaterial=null,this.enableFrictionReduction=!1}function i(t,e,n){for(var r=null,i=t.length,o=0;o!==i;o++){var a=t[o],s=z;t[(o+1)%i].vsub(a,s);var c=U;s.cross(e,c);var l=j;n.vsub(a,l);var u=c.dot(l);if(!(null===r||u>0&&r===!0||u<=0&&r===!1))return!1;null===r&&(r=u>0)}return!0}e.exports=r;var o=t("../collision/AABB"),a=t("../shapes/Shape"),s=t("../collision/Ray"),c=t("../math/Vec3"),l=t("../math/Transform"),u=(t("../shapes/ConvexPolyhedron"),t("../math/Quaternion")),h=(t("../solver/Solver"),t("../utils/Vec3Pool")),p=t("../equations/ContactEquation"),d=t("../equations/FrictionEquation");r.prototype.createContactEquation=function(t,e,n,r,i,o){var a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=t,a.bj=e):a=new p(t,e),a.enabled=t.collisionResponse&&e.collisionResponse&&n.collisionResponse&&r.collisionResponse;var s=this.currentContactMaterial;a.restitution=s.restitution,a.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);var c=n.material||t.material,l=r.material||e.material;return c&&l&&c.restitution>=0&&l.restitution>=0&&(a.restitution=c.restitution*l.restitution),a.si=i||n,a.sj=o||r,a},r.prototype.createFrictionEquationsFromContact=function(t,e){var n=t.bi,r=t.bj,i=t.si,o=t.sj,a=this.world,s=this.currentContactMaterial,c=s.friction,l=i.material||n.material,u=o.material||r.material;if(l&&u&&l.friction>=0&&u.friction>=0&&(c=l.friction*u.friction),c>0){var h=c*a.gravity.length(),p=n.invMass+r.invMass;p>0&&(p=1/p);var f=this.frictionEquationPool,m=f.length?f.pop():new d(n,r,h*p),v=f.length?f.pop():new d(n,r,h*p);return m.bi=v.bi=n,m.bj=v.bj=r,m.minForce=v.minForce=-h*p,m.maxForce=v.maxForce=h*p,m.ri.copy(t.ri),m.rj.copy(t.rj),v.ri.copy(t.ri),v.rj.copy(t.rj),t.ni.tangents(m.t,v.t),m.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),v.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),m.enabled=v.enabled=t.enabled,e.push(m,v),!0}return!1};var f=new c,m=new c,v=new c;r.prototype.createFrictionFromAverage=function(t){var e=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(e,this.frictionResult)&&1!==t){var n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];f.setZero(),m.setZero(),v.setZero();for(var i=e.bi,o=(e.bj,0);o!==t;o++)e=this.result[this.result.length-1-o],e.bodyA!==i?(f.vadd(e.ni,f),m.vadd(e.ri,m),v.vadd(e.rj,v)):(f.vsub(e.ni,f),m.vadd(e.rj,m),v.vadd(e.ri,v));var a=1/t;m.scale(a,n.ri),v.scale(a,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),f.normalize(),f.tangents(n.t,r.t)}};var y=new c,g=new c,x=new u,_=new u;r.prototype.getContacts=function(t,e,n,r,i,o,a){this.contactPointPool=i,this.frictionEquationPool=a,this.result=r,this.frictionResult=o;for(var s=x,c=_,l=y,u=g,h=0,p=t.length;h!==p;h++){var d=t[h],f=e[h],m=null;d.material&&f.material&&(m=n.getContactMaterial(d.material,f.material)||null);for(var v=0;v<d.shapes.length;v++){d.quaternion.mult(d.shapeOrientations[v],s),d.quaternion.vmult(d.shapeOffsets[v],l),l.vadd(d.position,l);for(var b=d.shapes[v],w=0;w<f.shapes.length;w++){f.quaternion.mult(f.shapeOrientations[w],c),f.quaternion.vmult(f.shapeOffsets[w],u),u.vadd(f.position,u);var E=f.shapes[w];if(!(l.distanceTo(u)>b.boundingSphereRadius+E.boundingSphereRadius)){var S=null;b.material&&E.material&&(S=n.getContactMaterial(b.material,E.material)||null),this.currentContactMaterial=S||m||n.defaultContactMaterial;var M=this[b.type|E.type];M&&(b.type<E.type?M.call(this,b,E,l,u,s,c,d,f,b,E):M.call(this,E,b,u,l,c,s,f,d,b,E))}}}}};r.prototype[a.types.BOX|a.types.BOX]=r.prototype.boxBox=function(t,e,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,n,r,i,o,a,s,t,e)},r.prototype[a.types.BOX|a.types.CONVEXPOLYHEDRON]=r.prototype.boxConvex=function(t,e,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s,t,e)},r.prototype[a.types.BOX|a.types.PARTICLE]=r.prototype.boxParticle=function(t,e,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s,t,e)},r.prototype[a.types.SPHERE]=r.prototype.sphereSphere=function(t,e,n,r,i,o,a,s){var c=this.createContactEquation(a,s,t,e);r.vsub(n,c.ni),c.ni.normalize(),c.ri.copy(c.ni),c.rj.copy(c.ni),c.ri.mult(t.radius,c.ri),c.rj.mult(-e.radius,c.rj),c.ri.vadd(n,c.ri),c.ri.vsub(a.position,c.ri),c.rj.vadd(r,c.rj),c.rj.vsub(s.position,c.rj),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)};var b=new c,w=new c,E=new c;r.prototype[a.types.PLANE|a.types.TRIMESH]=r.prototype.planeTrimesh=function(t,e,n,r,i,o,a,s){var u=new c,h=b;h.set(0,0,1),i.vmult(h,h);for(var p=0;p<e.vertices.length/3;p++){e.getVertex(p,u);var d=new c;d.copy(u),l.pointToWorldFrame(r,o,d,u);var f=w;u.vsub(n,f);var m=h.dot(f);if(m<=0){var v=this.createContactEquation(a,s,t,e);v.ni.copy(h);var y=E;h.scale(f.dot(h),y),u.vsub(y,y),v.ri.copy(y),v.ri.vsub(a.position,v.ri),v.rj.copy(u),v.rj.vsub(s.position,v.rj),this.result.push(v),this.createFrictionEquationsFromContact(v,this.frictionResult)}}};var S=new c,M=new c,A=(new c,new c),C=new c,T=new c,N=new c,R=new c,O=new c,L=new c,P=new c,k=new c,D=new c,I=new c,q=new o,B=[];r.prototype[a.types.SPHERE|a.types.TRIMESH]=r.prototype.sphereTrimesh=function(t,e,n,r,i,o,a,c){var u=T,h=N,p=R,d=O,f=L,m=P,v=q,y=C,g=M,x=B;l.pointToLocalFrame(r,o,n,f);var _=t.radius;v.lowerBound.set(f.x-_,f.y-_,f.z-_),v.upperBound.set(f.x+_,f.y+_,f.z+_),e.getTrianglesInAABB(v,x);for(var b=A,w=t.radius*t.radius,E=0;E<x.length;E++)for(var V=0;V<3;V++)if(e.getVertex(e.indices[3*x[E]+V],b),b.vsub(f,g),g.norm2()<=w){y.copy(b),l.pointToWorldFrame(r,o,y,b),b.vsub(n,g);var F=this.createContactEquation(a,c,t,e);F.ni.copy(g),F.ni.normalize(),F.ri.copy(F.ni),F.ri.scale(t.radius,F.ri),F.ri.vadd(n,F.ri),F.ri.vsub(a.position,F.ri),F.rj.copy(b),F.rj.vsub(c.position,F.rj),this.result.push(F),this.createFrictionEquationsFromContact(F,this.frictionResult)}for(var E=0;E<x.length;E++)for(var V=0;V<3;V++){e.getVertex(e.indices[3*x[E]+V],u),e.getVertex(e.indices[3*x[E]+(V+1)%3],h),h.vsub(u,p),f.vsub(h,m);var z=m.dot(p);f.vsub(u,m);var U=m.dot(p);if(U>0&&z<0){f.vsub(u,m),d.copy(p),d.normalize(),U=m.dot(d),d.scale(U,m),m.vadd(u,m);var j=m.distanceTo(f);if(j<t.radius){var F=this.createContactEquation(a,c,t,e);m.vsub(f,F.ni),F.ni.normalize(),F.ni.scale(t.radius,F.ri),l.pointToWorldFrame(r,o,m,m),m.vsub(c.position,F.rj),l.vectorToWorldFrame(o,F.ni,F.ni),l.vectorToWorldFrame(o,F.ri,F.ri),this.result.push(F),this.createFrictionEquationsFromContact(F,this.frictionResult)}}}for(var H=k,G=D,W=I,X=S,E=0,Z=x.length;E!==Z;E++){e.getTriangleVertices(x[E],H,G,W),e.getNormal(x[E],X),f.vsub(H,m);var j=m.dot(X);if(X.scale(j,m),f.vsub(m,m),j=m.distanceTo(f),s.pointInTriangle(m,H,G,W)&&j<t.radius){var F=this.createContactEquation(a,c,t,e);m.vsub(f,F.ni),F.ni.normalize(),F.ni.scale(t.radius,F.ri),l.pointToWorldFrame(r,o,m,m),m.vsub(c.position,F.rj),l.vectorToWorldFrame(o,F.ni,F.ni),l.vectorToWorldFrame(o,F.ri,F.ri),this.result.push(F),this.createFrictionEquationsFromContact(F,this.frictionResult)}}x.length=0};var V=new c,F=new c;r.prototype[a.types.SPHERE|a.types.PLANE]=r.prototype.spherePlane=function(t,e,n,r,i,o,a,s){var c=this.createContactEquation(a,s,t,e);if(c.ni.set(0,0,1),o.vmult(c.ni,c.ni),c.ni.negate(c.ni),c.ni.normalize(),c.ni.mult(t.radius,c.ri),n.vsub(r,V),c.ni.mult(c.ni.dot(V),F),V.vsub(F,c.rj),-V.dot(c.ni)<=t.radius){var l=c.ri,u=c.rj;l.vadd(n,l),l.vsub(a.position,l),u.vadd(r,u),u.vsub(s.position,u),this.result.push(c),this.createFrictionEquationsFromContact(c,this.frictionResult)}};var z=new c,U=new c,j=new c,H=new c,G=new c,W=new c,X=new c,Z=[new c,new c,new c,new c,new c,new c],K=new c,Y=new c,Q=new c,J=new c;r.prototype[a.types.SPHERE|a.types.BOX]=r.prototype.sphereBox=function(t,e,n,r,i,o,a,s){var c=this.v3pool,l=Z;n.vsub(r,H),e.getSideNormals(l,o);for(var u=t.radius,h=!1,p=Y,d=Q,f=J,m=null,v=0,y=0,g=0,x=null,_=0,b=l.length;_!==b&&h===!1;_++){var w=G;w.copy(l[_]);var E=w.norm();w.normalize();var S=H.dot(w);if(S<E+u&&S>0){var M=W,A=X;M.copy(l[(_+1)%3]),A.copy(l[(_+2)%3]);var C=M.norm(),T=A.norm();M.normalize(),A.normalize();var N=H.dot(M),R=H.dot(A);if(N<C&&N>-C&&R<T&&R>-T){var O=Math.abs(S-E-u);(null===x||O<x)&&(x=O,y=N,g=R,m=E,p.copy(w),d.copy(M),f.copy(A),v++)}}}if(v){h=!0;var L=this.createContactEquation(a,s,t,e);p.mult(-u,L.ri),L.ni.copy(p),L.ni.negate(L.ni),p.mult(m,p),d.mult(y,d),p.vadd(d,p),f.mult(g,f),p.vadd(f,L.rj),L.ri.vadd(n,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}for(var P=c.get(),k=K,D=0;2!==D&&!h;D++)for(var I=0;2!==I&&!h;I++)for(var q=0;2!==q&&!h;q++)if(P.set(0,0,0),D?P.vadd(l[0],P):P.vsub(l[0],P),I?P.vadd(l[1],P):P.vsub(l[1],P),q?P.vadd(l[2],P):P.vsub(l[2],P),r.vadd(P,k),k.vsub(n,k),k.norm2()<u*u){h=!0;var L=this.createContactEquation(a,s,t,e);L.ri.copy(k),L.ri.normalize(),L.ni.copy(L.ri),L.ri.mult(u,L.ri),L.rj.copy(P),L.ri.vadd(n,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(r,L.rj),L.rj.vsub(s.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}c.release(P),P=null;for(var B=c.get(),V=c.get(),L=c.get(),F=c.get(),O=c.get(),z=l.length,D=0;D!==z&&!h;D++)for(var I=0;I!==z&&!h;I++)if(D%3!==I%3){l[I].cross(l[D],B),B.normalize(),l[D].vadd(l[I],V),L.copy(n),L.vsub(V,L),L.vsub(r,L);var U=L.dot(B);B.mult(U,F);for(var q=0;q===D%3||q===I%3;)q++;O.copy(n),O.vsub(F,O),O.vsub(V,O),O.vsub(r,O);var j=Math.abs(U),$=O.norm();if(j<l[q].norm()&&$<u){h=!0;var tt=this.createContactEquation(a,s,t,e);V.vadd(F,tt.rj),tt.rj.copy(tt.rj),O.negate(tt.ni),tt.ni.normalize(),tt.ri.copy(tt.rj),tt.ri.vadd(r,tt.ri),tt.ri.vsub(n,tt.ri),tt.ri.normalize(),tt.ri.mult(u,tt.ri),tt.ri.vadd(n,tt.ri),tt.ri.vsub(a.position,tt.ri),tt.rj.vadd(r,tt.rj),tt.rj.vsub(s.position,tt.rj),this.result.push(tt),this.createFrictionEquationsFromContact(tt,this.frictionResult)}}c.release(B,V,L,F,O)};var $=new c,tt=new c,et=new c,nt=new c,rt=new c,it=new c,ot=new c,at=new c,st=new c,ct=new c;r.prototype[a.types.SPHERE|a.types.CONVEXPOLYHEDRON]=r.prototype.sphereConvex=function(t,e,n,r,o,a,s,c){var l=this.v3pool;n.vsub(r,$);for(var u=e.faceNormals,h=e.faces,p=e.vertices,d=t.radius,f=0;f!==p.length;f++){var m=p[f],v=rt;a.vmult(m,v),r.vadd(v,v);var y=nt;if(v.vsub(n,y),y.norm2()<d*d){x=!0;var g=this.createContactEquation(s,c,t,e);return g.ri.copy(y),g.ri.normalize(),g.ni.copy(g.ri),g.ri.mult(d,g.ri),v.vsub(r,g.rj),g.ri.vadd(n,g.ri),g.ri.vsub(s.position,g.ri),g.rj.vadd(r,g.rj),g.rj.vsub(c.position,g.rj),this.result.push(g),void this.createFrictionEquationsFromContact(g,this.frictionResult)}}for(var x=!1,f=0,_=h.length;f!==_&&x===!1;f++){var b=u[f],w=h[f],E=it;a.vmult(b,E);var S=ot;a.vmult(p[w[0]],S),S.vadd(r,S);var M=at;E.mult(-d,M),n.vadd(M,M);var A=st;M.vsub(S,A);var C=A.dot(E),T=ct;if(n.vsub(S,T),C<0&&T.dot(E)>0){for(var N=[],R=0,O=w.length;R!==O;R++){var L=l.get();a.vmult(p[w[R]],L),r.vadd(L,L),N.push(L)}if(i(N,E,n)){x=!0;var g=this.createContactEquation(s,c,t,e);E.mult(-d,g.ri),E.negate(g.ni);var P=l.get();E.mult(-C,P);var k=l.get();E.mult(-d,k),n.vsub(r,g.rj),g.rj.vadd(k,g.rj),g.rj.vadd(P,g.rj),g.rj.vadd(r,g.rj),g.rj.vsub(c.position,g.rj),g.ri.vadd(n,g.ri),g.ri.vsub(s.position,g.ri),l.release(P),l.release(k),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult);for(var R=0,D=N.length;R!==D;R++)l.release(N[R]);return}for(var R=0;R!==w.length;R++){var I=l.get(),q=l.get();a.vmult(p[w[(R+1)%w.length]],I),a.vmult(p[w[(R+2)%w.length]],q),r.vadd(I,I),r.vadd(q,q);var B=tt;q.vsub(I,B);var V=et;B.unit(V);var F=l.get(),z=l.get();n.vsub(I,z);var U=z.dot(V);V.mult(U,F),F.vadd(I,F);var j=l.get();if(F.vsub(n,j),U>0&&U*U<B.norm2()&&j.norm2()<d*d){var g=this.createContactEquation(s,c,t,e);F.vsub(r,g.rj),F.vsub(n,g.ni),g.ni.normalize(),g.ni.mult(d,g.ri),g.rj.vadd(r,g.rj),g.rj.vsub(c.position,g.rj),g.ri.vadd(n,g.ri),g.ri.vsub(s.position,g.ri),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult);for(var R=0,D=N.length;R!==D;R++)l.release(N[R]);return l.release(I),l.release(q),l.release(F),l.release(j),void l.release(z)}l.release(I),l.release(q),l.release(F),l.release(j),l.release(z)}for(var R=0,D=N.length;R!==D;R++)l.release(N[R])}}};new c,new c;r.prototype[a.types.PLANE|a.types.BOX]=r.prototype.planeBox=function(t,e,n,r,i,o,a,s){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.planeConvex(t,e.convexPolyhedronRepresentation,n,r,i,o,a,s)};var lt=new c,ut=new c,ht=new c,pt=new c;r.prototype[a.types.PLANE|a.types.CONVEXPOLYHEDRON]=r.prototype.planeConvex=function(t,e,n,r,i,o,a,s){var c=lt,l=ut;l.set(0,0,1),i.vmult(l,l);for(var u=0,h=ht,p=0;p!==e.vertices.length;p++){c.copy(e.vertices[p]),o.vmult(c,c),r.vadd(c,c),c.vsub(n,h);var d=l.dot(h);if(d<=0){var f=this.createContactEquation(a,s,t,e),m=pt;l.mult(l.dot(h),m),c.vsub(m,m),m.vsub(n,f.ri),f.ni.copy(l),c.vsub(r,f.rj),f.ri.vadd(n,f.ri),f.ri.vsub(a.position,f.ri),f.rj.vadd(r,f.rj),f.rj.vsub(s.position,f.rj),this.result.push(f),u++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(f,this.frictionResult)}}this.enableFrictionReduction&&u&&this.createFrictionFromAverage(u)};var dt=new c,ft=new c;r.prototype[a.types.CONVEXPOLYHEDRON]=r.prototype.convexConvex=function(t,e,n,r,i,o,a,s,c,l,u,h){var p=dt;if(!(n.distanceTo(r)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,n,i,r,o,p,u,h)){var d=[],f=ft;t.clipAgainstHull(n,i,e,r,o,p,-100,100,d);for(var m=0,v=0;v!==d.length;v++){var y=this.createContactEquation(a,s,t,e,c,l),g=y.ri,x=y.rj;p.negate(y.ni),d[v].normal.negate(f),f.mult(d[v].depth,f),d[v].point.vadd(f,g),x.copy(d[v].point),g.vsub(n,g),x.vsub(r,x),g.vadd(n,g),g.vsub(a.position,g),x.vadd(r,x),x.vsub(s.position,x),this.result.push(y),m++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(y,this.frictionResult)}this.enableFrictionReduction&&m&&this.createFrictionFromAverage(m)}};var mt=new c,vt=new c,yt=new c;r.prototype[a.types.PLANE|a.types.PARTICLE]=r.prototype.planeParticle=function(t,e,n,r,i,o,a,s){var c=mt;c.set(0,0,1),a.quaternion.vmult(c,c);var l=vt;r.vsub(a.position,l);var u=c.dot(l);if(u<=0){var h=this.createContactEquation(s,a,e,t);h.ni.copy(c),h.ni.negate(h.ni),h.ri.set(0,0,0);var p=yt;c.mult(c.dot(r),p),r.vsub(p,p),h.rj.copy(p),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}};var gt=new c;r.prototype[a.types.PARTICLE|a.types.SPHERE]=r.prototype.sphereParticle=function(t,e,n,r,i,o,a,s){var c=gt;c.set(0,0,1),r.vsub(n,c);var l=c.norm2();if(l<=t.radius*t.radius){var u=this.createContactEquation(s,a,e,t);c.normalize(),u.rj.copy(c),u.rj.mult(t.radius,u.rj),u.ni.copy(c),u.ni.negate(u.ni),u.ri.set(0,0,0),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}};var xt=new u,_t=new c,bt=(new c,new c),wt=new c,Et=new c;r.prototype[a.types.PARTICLE|a.types.CONVEXPOLYHEDRON]=r.prototype.convexParticle=function(t,e,n,r,i,o,a,s){var c=-1,l=bt,u=Et,h=null,p=0,d=_t;if(d.copy(r),d.vsub(n,d),i.conjugate(xt),xt.vmult(d,d),t.pointIsInside(d)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,i),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(i);for(var f=0,m=t.faces.length;f!==m;f++){var v=[t.worldVertices[t.faces[f][0]]],y=t.worldFaceNormals[f];r.vsub(v[0],wt);var g=-y.dot(wt);(null===h||Math.abs(g)<Math.abs(h))&&(h=g,c=f,l.copy(y),p++)}if(c!==-1){var x=this.createContactEquation(s,a,e,t);l.mult(h,u),u.vadd(r,u),u.vsub(n,u),x.rj.copy(u),l.negate(x.ni),x.ri.set(0,0,0);var _=x.ri,b=x.rj;_.vadd(r,_),_.vsub(s.position,_),b.vadd(n,b),b.vsub(a.position,b),this.result.push(x),this.createFrictionEquationsFromContact(x,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},r.prototype[a.types.BOX|a.types.HEIGHTFIELD]=r.prototype.boxHeightfield=function(t,e,n,r,i,o,a,s){t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,n,r,i,o,a,s)};var St=new c,Mt=new c,At=[0];r.prototype[a.types.CONVEXPOLYHEDRON|a.types.HEIGHTFIELD]=r.prototype.convexHeightfield=function(t,e,n,r,i,o,a,s){var c=e.data,u=e.elementSize,h=t.boundingSphereRadius,p=Mt,d=At,f=St;l.pointToLocalFrame(r,o,n,f);var m=Math.floor((f.x-h)/u)-1,v=Math.ceil((f.x+h)/u)+1,y=Math.floor((f.y-h)/u)-1,g=Math.ceil((f.y+h)/u)+1;if(!(v<0||g<0||m>c.length||y>c[0].length)){m<0&&(m=0),v<0&&(v=0),y<0&&(y=0),g<0&&(g=0),m>=c.length&&(m=c.length-1),v>=c.length&&(v=c.length-1),g>=c[0].length&&(g=c[0].length-1),y>=c[0].length&&(y=c[0].length-1);var x=[];e.getRectMinMax(m,y,v,g,x);var _=x[0],b=x[1];if(!(f.z-h>b||f.z+h<_))for(var w=m;w<v;w++)for(var E=y;E<g;E++)e.getConvexTrianglePillar(w,E,!1),l.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,n,p,i,o,a,s,null,null,d,null),e.getConvexTrianglePillar(w,E,!0),l.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.convexConvex(t,e.pillarConvex,n,p,i,o,a,s,null,null,d,null)}};var Ct=new c,Tt=new c;r.prototype[a.types.SPHERE|a.types.HEIGHTFIELD]=r.prototype.sphereHeightfield=function(t,e,n,r,i,o,a,s){var c=e.data,u=t.radius,h=e.elementSize,p=Tt,d=Ct;l.pointToLocalFrame(r,o,n,d);var f=Math.floor((d.x-u)/h)-1,m=Math.ceil((d.x+u)/h)+1,v=Math.floor((d.y-u)/h)-1,y=Math.ceil((d.y+u)/h)+1;if(!(m<0||y<0||f>c.length||y>c[0].length)){f<0&&(f=0),m<0&&(m=0),v<0&&(v=0),y<0&&(y=0),f>=c.length&&(f=c.length-1),m>=c.length&&(m=c.length-1),y>=c[0].length&&(y=c[0].length-1),v>=c[0].length&&(v=c[0].length-1);var g=[];e.getRectMinMax(f,v,m,y,g);var x=g[0],_=g[1];if(!(d.z-u>_||d.z+u<x))for(var b=this.result,w=f;w<m;w++)for(var E=v;E<y;E++){var S=b.length;e.getConvexTrianglePillar(w,E,!1),l.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,n,p,i,o,a,s),e.getConvexTrianglePillar(w,E,!0),l.pointToWorldFrame(r,o,e.pillarOffset,p),n.distanceTo(p)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&this.sphereConvex(t,e.pillarConvex,n,p,i,o,a,s);var M=b.length-S;if(M>2)return}}}},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(t,e,n){function r(){l.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new o,this.broadphase=new g,this.bodies=[],this.solver=new s,this.constraints=[],this.narrowphase=new c(this),
this.collisionMatrix=new u,this.collisionMatrixPrevious=new u,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new f,this.defaultMaterial=new h("default"),this.defaultContactMaterial=new p(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}e.exports=r;var i=t("../shapes/Shape"),o=t("../math/Vec3"),a=t("../math/Quaternion"),s=t("../solver/GSSolver"),c=(t("../utils/Vec3Pool"),t("../equations/ContactEquation"),t("../equations/FrictionEquation"),t("./Narrowphase")),l=t("../utils/EventTarget"),u=t("../collision/ArrayCollisionMatrix"),h=t("../material/Material"),p=t("../material/ContactMaterial"),d=t("../objects/Body"),f=t("../utils/TupleDictionary"),m=t("../collision/RaycastResult"),v=t("../collision/AABB"),y=t("../collision/Ray"),g=t("../collision/NaiveBroadphase");r.prototype=new l;var x=(new v,new y);if(r.prototype.getContactMaterial=function(t,e){return this.contactMaterialTable.get(t.id,e.id)},r.prototype.numObjects=function(){return this.bodies.length},r.prototype.collisionMatrixTick=function(){var t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset()},r.prototype.add=r.prototype.addBody=function(t){this.bodies.indexOf(t)===-1&&(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof d&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.dispatchEvent(this.addBodyEvent))},r.prototype.addConstraint=function(t){this.constraints.push(t)},r.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);e!==-1&&this.constraints.splice(e,1)},r.prototype.rayTest=function(t,e,n){n instanceof m?this.raycastClosest(t,e,{skipBackfaces:!0},n):this.raycastAll(t,e,{skipBackfaces:!0},n)},r.prototype.raycastAll=function(t,e,n,r){return n.mode=y.ALL,n.from=t,n.to=e,n.callback=r,x.intersectWorld(this,n)},r.prototype.raycastAny=function(t,e,n,r){return n.mode=y.ANY,n.from=t,n.to=e,n.result=r,x.intersectWorld(this,n)},r.prototype.raycastClosest=function(t,e,n,r){return n.mode=y.CLOSEST,n.from=t,n.to=e,n.result=r,x.intersectWorld(this,n)},r.prototype.remove=function(t){t.world=null;var e=this.bodies.length-1,n=this.bodies,r=n.indexOf(t);if(r!==-1){n.splice(r,1);for(var i=0;i!==n.length;i++)n[i].index=i;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,this.dispatchEvent(this.removeBodyEvent)}},r.prototype.removeBody=r.prototype.remove,r.prototype.addMaterial=function(t){this.materials.push(t)},r.prototype.addContactMaterial=function(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)},"undefined"==typeof performance&&(performance={}),!performance.now){var _=Date.now();performance.timing&&performance.timing.navigationStart&&(_=performance.timing.navigationStart),performance.now=function(){return Date.now()-_}}var b=new o;r.prototype.step=function(t,e,n){if(n=n||10,e=e||0,0===e)this.internalStep(t),this.time+=t;else{var r=Math.floor((this.time+e)/t)-Math.floor(this.time/t);r=Math.min(r,n);for(var i=performance.now(),o=0;o!==r&&(this.internalStep(t),!(performance.now()-i>1e3*t));o++);this.time+=e;for(var a=this.time%t,s=a/t,c=b,l=this.bodies,u=0;u!==l.length;u++){var h=l[u];h.type!==d.STATIC&&h.sleepState!==d.SLEEPING?(h.position.vsub(h.previousPosition,c),c.scale(s,c),h.position.vadd(c,h.interpolatedPosition)):(h.interpolatedPosition.copy(h.position),h.interpolatedQuaternion.copy(h.quaternion))}}};var w={type:"postStep"},E={type:"preStep"},S={type:"collide",body:null,contact:null},M=[],A=[],C=[],T=[],N=(new o,new o,new o,new o,new o,new o,new o,new o,new o,new a,new a),R=new a,O=new o;r.prototype.internalStep=function(t){this.dt=t;var e,n=this.contacts,r=C,o=T,a=this.numObjects(),s=this.bodies,c=this.solver,l=this.gravity,u=this.doProfiling,h=this.profile,p=d.DYNAMIC,f=this.constraints,m=A,v=(l.norm(),l.x),y=l.y,g=l.z,x=0;for(u&&(e=performance.now()),x=0;x!==a;x++){var _=s[x];if(_.type&p){var b=_.force,L=_.mass;b.x+=L*v,b.y+=L*y,b.z+=L*g}}for(var x=0,P=this.subsystems.length;x!==P;x++)this.subsystems[x].update();u&&(e=performance.now()),r.length=0,o.length=0,this.broadphase.collisionPairs(this,r,o),u&&(h.broadphase=performance.now()-e);var k=f.length;for(x=0;x!==k;x++){var D=f[x];if(!D.collideConnected)for(var I=r.length-1;I>=0;I-=1)(D.bodyA===r[I]&&D.bodyB===o[I]||D.bodyB===r[I]&&D.bodyA===o[I])&&(r.splice(I,1),o.splice(I,1))}this.collisionMatrixTick(),u&&(e=performance.now());var q=M,B=n.length;for(x=0;x!==B;x++)q.push(n[x]);n.length=0;var V=this.frictionEquations.length;for(x=0;x!==V;x++)m.push(this.frictionEquations[x]);this.frictionEquations.length=0,this.narrowphase.getContacts(r,o,this,n,q,this.frictionEquations,m),u&&(h.narrowphase=performance.now()-e),u&&(e=performance.now());for(var x=0;x<this.frictionEquations.length;x++)c.addEquation(this.frictionEquations[x]);for(var F=n.length,z=0;z!==F;z++){var U,D=n[z],_=D.bi,j=D.bj;D.si,D.sj;U=_.material&&j.material?this.getContactMaterial(_.material,j.material)||this.defaultContactMaterial:this.defaultContactMaterial;var H=U.friction;if(_.material&&j.material&&(_.material.friction>=0&&j.material.friction>=0&&(H=_.material.friction*j.material.friction),_.material.restitution>=0&&j.material.restitution>=0&&(D.restitution=_.material.restitution*j.material.restitution)),c.addEquation(D),_.allowSleep&&_.type===d.DYNAMIC&&_.sleepState===d.SLEEPING&&j.sleepState===d.AWAKE&&j.type!==d.STATIC){var G=j.velocity.norm2()+j.angularVelocity.norm2(),W=Math.pow(j.sleepSpeedLimit,2);G>=2*W&&(_._wakeUpAfterNarrowphase=!0)}if(j.allowSleep&&j.type===d.DYNAMIC&&j.sleepState===d.SLEEPING&&_.sleepState===d.AWAKE&&_.type!==d.STATIC){var X=_.velocity.norm2()+_.angularVelocity.norm2(),Z=Math.pow(_.sleepSpeedLimit,2);X>=2*Z&&(j._wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(_,j,!0),this.collisionMatrixPrevious.get(_,j)||(S.body=j,S.contact=D,_.dispatchEvent(S),S.body=_,j.dispatchEvent(S))}for(u&&(h.makeContactConstraints=performance.now()-e,e=performance.now()),x=0;x!==a;x++){var _=s[x];_._wakeUpAfterNarrowphase&&(_.wakeUp(),_._wakeUpAfterNarrowphase=!1)}var k=f.length;for(x=0;x!==k;x++){var D=f[x];D.update();for(var I=0,K=D.equations.length;I!==K;I++){var Y=D.equations[I];c.addEquation(Y)}}c.solve(t,this),u&&(h.solve=performance.now()-e),c.removeAllEquations();var Q=Math.pow;for(x=0;x!==a;x++){var _=s[x];if(_.type&p){var J=Q(1-_.linearDamping,t),$=_.velocity;$.mult(J,$);var tt=_.angularVelocity;if(tt){var et=Q(1-_.angularDamping,t);tt.mult(et,tt)}}}for(this.dispatchEvent(E),x=0;x!==a;x++){var _=s[x];_.preStep&&_.preStep.call(_)}u&&(e=performance.now());var nt=N,rt=R,it=this.stepnumber,ot=d.DYNAMIC|d.KINEMATIC,at=it%(this.quatNormalizeSkip+1)===0,st=this.quatNormalizeFast,ct=.5*t;i.types.PLANE,i.types.CONVEXPOLYHEDRON;for(x=0;x!==a;x++){var lt=s[x],ut=lt.force,ht=lt.torque;if(lt.type&ot&&lt.sleepState!==d.SLEEPING){var pt=lt.velocity,dt=lt.angularVelocity,ft=lt.position,mt=lt.quaternion,vt=lt.invMass,yt=lt.invInertiaWorld;pt.x+=ut.x*vt*t,pt.y+=ut.y*vt*t,pt.z+=ut.z*vt*t,lt.angularVelocity&&(yt.vmult(ht,O),O.mult(t,O),O.vadd(dt,dt)),ft.x+=pt.x*t,ft.y+=pt.y*t,ft.z+=pt.z*t,lt.angularVelocity&&(nt.set(dt.x,dt.y,dt.z,0),nt.mult(mt,rt),mt.x+=ct*rt.x,mt.y+=ct*rt.y,mt.z+=ct*rt.z,mt.w+=ct*rt.w,at&&(st?mt.normalizeFast():mt.normalize())),lt.aabb&&(lt.aabbNeedsUpdate=!0),lt.updateInertiaWorld&&lt.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,u&&(h.integrate=performance.now()-e),this.time+=t,this.stepnumber+=1,this.dispatchEvent(w),x=0;x!==a;x++){var _=s[x],gt=_.postStep;gt&&gt.call(_)}if(this.allowSleep)for(x=0;x!==a;x++)s[x].sleepTick(this.time)},r.prototype.clearForces=function(){for(var t=this.bodies,e=t.length,n=0;n!==e;n++){var r=t[n];r.force,r.torque;r.force.set(0,0,0),r.torque.set(0,0,0)}}},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2)})},function(t,e,n){var r=n(487),i=r.GRAVITY,o=r.CONTACT_MATERIAL;t.exports={schema:{gravity:{"default":i},friction:{"default":o.friction},restitution:{"default":o.restitution},contactEquationStiffness:{"default":o.contactEquationStiffness},contactEquationRelaxation:{"default":o.contactEquationRelaxation},frictionEquationStiffness:{"default":o.frictionEquationStiffness},frictionEquationRegularization:{"default":o.frictionEquationRegularization},maxInterval:{"default":4/60},debug:{"default":!1}},update:function(t){var e=this.data,n=this.schema;for(var r in e)e[r]!==(t?t[r]:n[r]["default"])&&this.system.setOption(r,e[r])}}},function(t,e){t.exports={GRAVITY:-9.8,MAX_INTERVAL:4/60,ITERATIONS:10,CONTACT_MATERIAL:{friction:.01,restitution:.3,contactEquationStiffness:1e8,contactEquationRelaxation:3,frictionEquationStiffness:1e8,frictionEquationRegularization:3}}},function(t,e,n){var r=n(489);t.exports=AFRAME.utils.extend({},r,{dependencies:["position","quaternion","velocity"],schema:{mass:{"default":5},linearDamping:{"default":.01},angularDamping:{"default":.01},shape:{"default":"auto",oneOf:["auto","box","hull"]}},step:function(){this.syncFromPhysics()}})},function(t,e,n){var r=n(485),i=n(490);n(492),t.exports={dependencies:["position"],init:function(){this.initBody()},initBody:function(){this.system=this.el.sceneEl.systems.physics;var t,e;"auto"!==this.data.shape&&(e={type:i.Type[this.data.shape.toUpperCase()]}),t=i(this.el.object3D,e),t&&this.el.sceneEl.hasLoaded?this.initBody_(t):t&&!this.el.sceneEl.hasLoaded?this.el.sceneEl.addEventListener("loaded",this.initBody_.bind(this,t)):this.el.sceneEl.hasLoaded?this.el.addEventListener("model-loaded",function(t){this.initBody_(i(t.detail.model,e))}.bind(this)):this.el.sceneEl.addEventListener("loaded",function(){t=i(this.el.object3D,e),t?this.initBody_(t):this.el.addEventListener("model-loaded",function(t){this.initBody_(i(t.detail.model,e))}.bind(this))}.bind(this))},initBody_:function(t){var e=this.el,n=this.data,i=e.getAttribute("position");i||(i={x:0,y:0,z:0},e.setAttribute("position",i)),this.el.hasAttribute("scale")&&(t.setScale?t.setScale(this.el.getAttribute("scale")):console.warn("Physics body scaling could not be applied.")),this.body=new r.Body({mass:n.mass||0,material:this.system.material,position:new r.Vec3(i.x,i.y,i.z),linearDamping:n.linearDamping,angularDamping:n.angularDamping}),this.body.addShape(t,t.offset,t.orientation);var o=e.getAttribute("rotation")||{x:0,y:0,z:0};this.body.quaternion.setFromEuler(THREE.Math.degToRad(o.x),THREE.Math.degToRad(o.y),THREE.Math.degToRad(o.z),"XYZ").normalize(),this.system.debug&&this.createWireframe(this.body,t),this.el.body=this.body,this.body.el=this.el,this.loaded=!0,this.play(),this.el.emit("body-loaded",{body:this.el.body})},play:function(){this.loaded&&(this.system.addBehavior(this,this.system.Phase.SIMULATE),this.system.addBody(this.body),this.wireframe&&this.el.sceneEl.object3D.add(this.wireframe),this.syncToPhysics())},pause:function(){this.loaded&&(this.system.removeBehavior(this,this.system.Phase.SIMULATE),this.system.removeBody(this.body),this.wireframe&&this.el.sceneEl.object3D.remove(this.wireframe))},remove:function(){this.pause(),delete this.body.el,delete this.body,delete this.el.body,delete this.wireframe},createWireframe:function(t,e){var n=e.offset,i=e.orientation,o=r.shape2mesh(t).children[0];this.wireframe=new THREE.EdgesHelper(o,16711680),n&&(this.wireframe.offset=n.clone()),i&&(i.inverse(i),this.wireframe.orientation=new THREE.Quaternion(i.x,i.y,i.z,i.w)),this.syncWireframe()},syncWireframe:function(){var t,e=this.wireframe;this.wireframe&&(e.quaternion.copy(this.body.quaternion),e.orientation&&e.quaternion.multiply(e.orientation),e.position.copy(this.body.position),e.offset&&(t=e.offset.clone().applyQuaternion(e.quaternion),e.position.add(t)),e.updateMatrix())},syncToPhysics:function(){var t=this.body;t&&(this.el.components.velocity&&t.velocity.copy(this.el.getComputedAttribute("velocity")),this.el.components.position&&t.position.copy(this.el.getComputedAttribute("position")),this.wireframe&&this.syncWireframe())},syncFromPhysics:function(){this.body&&(this.el.setAttribute("quaternion",this.body.quaternion),this.el.setAttribute("position",this.body.position),this.wireframe&&this.syncWireframe())}}},function(t,e,n){function r(t){var e,n,r,i,o=new THREE.BoundingBoxHelper(t);return o.update(),e=o.box,isFinite(e.min.lengthSq())?(n=new f.Box(new f.Vec3((e.max.x-e.min.x)/2,(e.max.y-e.min.y)/2,(e.max.z-e.min.z)/2)),t.updateMatrixWorld(),i=new THREE.Vector3,i.setFromMatrixPosition(t.matrixWorld),r=o.position.sub(i),r.lengthSq()&&(n.offset=r),n):null}function i(t){var e,n,r,i,o=1e-4,a=h(t);if(!a||!a.vertices.length)return null;for(e=0;e<a.vertices.length;e++)a.vertices[e].x+=(Math.random()-.5)*o,a.vertices[e].y+=(Math.random()-.5)*o,a.vertices[e].z+=(Math.random()-.5)*o;for(i=m(a),n=new Array(i.vertices.length),e=0;e<i.vertices.length;e++)n[e]=new f.Vec3(i.vertices[e].x,i.vertices[e].y,i.vertices[e].z);for(r=new Array(i.faces.length),e=0;e<i.faces.length;e++)r[e]=[i.faces[e].a,i.faces[e].b,i.faces[e].c];return new f.ConvexPolyhedron(n,r)}function o(t){var e=p(t);if(!e.length)return null;t.computeBoundingBox();var n=t.boundingBox;return new f.Box(new f.Vec3((n.max.x-n.min.x)/2,(n.max.y-n.min.y)/2,(n.max.z-n.min.z)/2))}function a(t){var e,n=t.parameters;return e=new f.Cylinder(n.radiusTop,n.radiusBottom,n.height,n.radialSegments),e.orientation=new f.Quaternion,e.orientation.setFromEuler(THREE.Math.degToRad(-90),0,0,"XYZ").normalize(),e}function s(t){t.computeBoundingBox();var e=t.boundingBox;return new f.Box(new f.Vec3((e.max.x-e.min.x)/2||.1,(e.max.y-e.min.y)/2||.1,(e.max.z-e.min.z)/2||.1))}function c(t){return new f.Sphere(t.parameters.radius)}function l(t){var e=new THREE.BufferGeometry;return e.fromGeometry(t),u(e)}function u(t){var e,n=p(t);return n.length?(e=Object.keys(n).map(Number),new f.Trimesh(n,e)):null}function h(t){var e,n,r=d(t),i=new THREE.Geometry,o=new THREE.Geometry;if(0===r.length)return null;if(1===r.length)return r[0].geometry;for(;n=r.pop();)n.geometry instanceof THREE.BufferGeometry?(i.fromBufferGeometry(n.geometry),o.merge(i,n.userData.matrix||n.matrix)):o.merge(n.geometry,n.userData.matrix||n.matrix),delete n.userData.matrix;return e=new THREE.Matrix4,e.scale(t.scale),o.applyMatrix(e),o}function p(t){return t.attributes||(t=(new THREE.BufferGeometry).fromGeometry(t)),t.attributes.position.array}function d(t){var e=[],n=new THREE.Matrix4;return t.traverse(function(r){r.updateMatrix(),"Mesh"===r.type?e.push(r):r===t||r.matrix.equals(n)||r.traverse(function(t){t.updateMatrix(),t.userData.matrix=t.userData.matrix||t.matrix.clone(),t.userData.matrix.multiply(r.matrix)})}),e}var f=n(485),m=n(491),v={BOX:"Box",HULL:"ConvexPolyhedron"};t.exports=f.mesh2shape=function(t,e){if(e=e||{},e.type===v.BOX)return r(t);if(e.type===v.HULL)return i(t);if(e.type)throw new Error('[CANNON.mesh2shape] Invalid type "%s".',e.type);var n=h(t);if(!n)return null;switch(n.type){case"BoxGeometry":case"BoxBufferGeometry":return o(n);case"CylinderGeometry":case"CylinderBufferGeometry":return a(n);case"PlaneGeometry":case"PlaneBufferGeometry":return s(n);case"SphereGeometry":case"SphereBufferGeometry":return c(n);case"TubeGeometry":return l(n);case"Geometry":case"BufferGeometry":return u(n);default:return console.warn('Unrecognized geometry: "%s". Using bounding box as shape.',n.type),o(n)}},f.mesh2shape.Type=v},function(t,e){t.exports=function(){function t(){m=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector3,g=new THREE.Vector3,x=new THREE.Vector3,_=new THREE.Vector3,b=new THREE.Vector3,w=new THREE.Vector3,E=new THREE.Vector3,S=new THREE.Vector3}function e(t){for(;A.length>0;)i(A.shift(),t)}function n(t,e){if(void 0!==t.normal)return t.normal;var n=e[t[0]],r=e[t[1]],i=e[t[2]];return m.subVectors(r,n),v.subVectors(i,n),_.crossVectors(v,m),_.normalize(),t.normal=_.clone()}function r(t,e,r){var i=r[t[0]],o=[],a=n(t,r);e.sort(function(t,e){return o[t.x/3]=void 0!==o[t.x/3]?o[t.x/3]:a.dot(g.subVectors(t,i)),o[e.x/3]=void 0!==o[e.x/3]?o[e.x/3]:a.dot(x.subVectors(e,i)),o[t.x/3]-o[e.x/3]});var s=e.length;for(1===s&&(o[e[0].x/3]=a.dot(g.subVectors(e[0],i)));s-- >0&&o[e[s].x/3]>0;);s+1<e.length&&o[e[s+1].x/3]>0&&(t.visiblePoints=e.splice(s+1))}function i(t,e){for(var i,o,a=M.length,s=[t],c=e.indexOf(t.visiblePoints.pop());a-- >0;)o=M[a],o!==t&&(i=n(o,e).dot(b.subVectors(e[c],e[o[0]])),i>0&&s.push(o));var l,u,h,p,d=a=s.length,f=1===a,m=[],v=0,y=[];[s[0][0],s[0][1],s[0][1],s[0][2],s[0][2],s[0][0]];if(1===s.length)o=s[0],m=[o[0],o[1],o[1],o[2],o[2],o[0]],A.indexOf(o)>-1&&A.splice(A.indexOf(o),1),o.visiblePoints&&(y=y.concat(o.visiblePoints)),M.splice(M.indexOf(o),1);else for(;a-- >0;){o=s[a],A.indexOf(o)>-1&&A.splice(A.indexOf(o),1),o.visiblePoints&&(y=y.concat(o.visiblePoints)),M.splice(M.indexOf(o),1);var g;for(cEdgeIndex=0;cEdgeIndex<3;){for(g=!1,d=s.length,h=o[cEdgeIndex],p=o[(cEdgeIndex+1)%3];d-- >0&&!g;)if(l=s[d],v=0,l!==o)for(;v<3&&!g;)u=v+1,g=l[v]===h&&l[u%3]===p||l[v]===p&&l[u%3]===h,v++;g&&!f||(m.push(h),m.push(p)),cEdgeIndex++}}a=0;for(var x,_=m.length/2;a<_;)x=[m[2*a+1],c,m[2*a]],r(x,y,e),M.push(x),void 0!==x.visiblePoints&&A.push(x),a++}var o,a,s,c,l,u,h,p,d,f,m,v,y,g,x,_,b,w,E,S,M=[],A=[],C=0,T=function(){var t=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o){return t.subVectors(o,r),e.subVectors(i,r),n.crossVectors(t,e),n.normalize()}}(),N=function(){var t=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o){t.subVectors(i,r),e.subVectors(o,r),n.subVectors(o,i);var a=e.dot(t);if(a<0)return e.dot(e);var s=t.dot(t);return a>=s?n.dot(n):e.dot(e)-a*a/s}}();return function(n){for(t(),points=n.vertices,M=[],A=[],b=o=points.length,a=points.slice(0,6),C=0;b-- >0;)points[b].x<a[0].x&&(a[0]=points[b]),points[b].x>a[1].x&&(a[1]=points[b]),points[b].y<a[2].y&&(a[2]=points[b]),points[b].y<a[3].y&&(a[3]=points[b]),points[b].z<a[4].z&&(a[4]=points[b]),points[b].z<a[5].z&&(a[5]=points[b]);for(c=b=6;b-- >0;)for(c=b-1;c-- >0;)C<(s=a[b].distanceToSquared(a[c]))&&(C=s,l=a[b],u=a[c]);for(b=6,C=0;b-- >0;)s=N(l,u,a[b]),C<s&&(C=s,h=a[b]);for(d=T(l,u,h),f=d.dot(l),C=0,b=o;b-- >0;)s=Math.abs(points[b].dot(d)-f),C<s&&(C=s,p=points[b]);var i=points.indexOf(l),m=points.indexOf(u),v=points.indexOf(h),y=points.indexOf(p),g=[[v,m,i],[m,y,i],[v,y,m],[i,y,v]];w.subVectors(u,l).normalize(),E.subVectors(h,l).normalize(),S.subVectors(p,l).normalize();var x=S.dot((new THREE.Vector3).crossVectors(E,w));x<0&&(g[0].reverse(),g[1].reverse(),g[2].reverse(),g[3].reverse());var _=points.slice();_.splice(_.indexOf(l),1),_.splice(_.indexOf(u),1),_.splice(_.indexOf(h),1),_.splice(_.indexOf(p),1);for(var b=g.length;b-- >0;)r(g[b],_,points),void 0!==g[b].visiblePoints&&A.push(g[b]),M.push(g[b]);e(points);for(var R=M.length;R-- >0;)n.faces[R]=new THREE.Face3(M[R][2],M[R][1],M[R][0],M[R].normal);return n.normalsNeedUpdate=!0,n}}()},function(t,e,n){var r=n(485);r.shape2mesh=function(t){for(var e=new THREE.Object3D,n=0;n<t.shapes.length;n++){var i,o=t.shapes[n];switch(o.type){case r.Shape.types.SPHERE:var a=new THREE.SphereGeometry(o.radius,8,8);i=new THREE.Mesh(a,this.currentMaterial);break;case r.Shape.types.PARTICLE:i=new THREE.Mesh(this.particleGeo,this.particleMaterial);var s=this.settings;i.scale.set(s.particleSize,s.particleSize,s.particleSize);break;case r.Shape.types.PLANE:var c=new THREE.PlaneGeometry(10,10,4,4);i=new THREE.Object3D;var l=new THREE.Object3D,u=new THREE.Mesh(c,this.currentMaterial);u.scale.set(100,100,100),l.add(u),u.castShadow=!0,u.receiveShadow=!0,i.add(l);break;case r.Shape.types.BOX:var h=new THREE.BoxGeometry(2*o.halfExtents.x,2*o.halfExtents.y,2*o.halfExtents.z);i=new THREE.Mesh(h,this.currentMaterial);break;case r.Shape.types.CONVEXPOLYHEDRON:for(var p=new THREE.Geometry,d=0;d<o.vertices.length;d++){var f=o.vertices[d];p.vertices.push(new THREE.Vector3(f.x,f.y,f.z))}for(var d=0;d<o.faces.length;d++)for(var m=o.faces[d],v=m[0],y=1;y<m.length-1;y++){var g=m[y],x=m[y+1];p.faces.push(new THREE.Face3(v,g,x))}p.computeBoundingSphere(),p.computeFaceNormals(),i=new THREE.Mesh(p,this.currentMaterial);break;case r.Shape.types.HEIGHTFIELD:for(var c=new THREE.Geometry,_=new r.Vec3,b=new r.Vec3,w=new r.Vec3,E=0;E<o.data.length-1;E++)for(var S=0;S<o.data[E].length-1;S++)for(var M=0;M<2;M++){o.getConvexTrianglePillar(E,S,0===M),_.copy(o.pillarConvex.vertices[0]),b.copy(o.pillarConvex.vertices[1]),w.copy(o.pillarConvex.vertices[2]),_.vadd(o.pillarOffset,_),b.vadd(o.pillarOffset,b),w.vadd(o.pillarOffset,w),c.vertices.push(new THREE.Vector3(_.x,_.y,_.z),new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(w.x,w.y,w.z));var d=c.vertices.length-3;c.faces.push(new THREE.Face3(d,d+1,d+2))}c.computeBoundingSphere(),c.computeFaceNormals(),i=new THREE.Mesh(c,this.currentMaterial);break;case r.Shape.types.TRIMESH:for(var c=new THREE.Geometry,_=new r.Vec3,b=new r.Vec3,w=new r.Vec3,d=0;d<o.indices.length/3;d++){o.getTriangleVertices(d,_,b,w),c.vertices.push(new THREE.Vector3(_.x,_.y,_.z),new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(w.x,w.y,w.z));var y=c.vertices.length-3;c.faces.push(new THREE.Face3(y,y+1,y+2))}c.computeBoundingSphere(),c.computeFaceNormals(),i=new THREE.Mesh(c,this.currentMaterial);break;default:throw"Visual type not recognized: "+o.type}if(i.receiveShadow=!0,i.castShadow=!0,i.children)for(var d=0;d<i.children.length;d++)if(i.children[d].castShadow=!0,i.children[d].receiveShadow=!0,i.children[d])for(var y=0;y<i.children[d].length;y++)i.children[d].children[y].castShadow=!0,i.children[d].children[y].receiveShadow=!0;var A=t.shapeOffsets[n],C=t.shapeOrientations[n];i.position.set(A.x,A.y,A.z),i.quaternion.set(C.x,C.y,C.z,C.w),e.add(i)}return e},t.exports=r.shape2mesh},function(t,e,n){var r=n(485),i=1e-6;t.exports={dependencies:["velocity"],schema:{mass:{"default":5},radius:{"default":1.3},height:{"default":1.764},linearDamping:{"default":.05},enableSlopes:{"default":!0}},init:function(){this.system=this.el.sceneEl.systems.physics,this.system.addBehavior(this,this.system.Phase.SIMULATE);var t=this.el,e=this.data,n=(new r.Vec3).copy(t.getAttribute("position"));this.body=new r.Body({shape:new r.Sphere(e.radius),material:this.system.material,position:n,mass:e.mass,linearDamping:e.linearDamping,fixedRotation:!0}),this.body.position.y-=e.height-e.radius,this.body.el=this.el,this.system.addBody(this.body)},remove:function(){this.system.removeBody(this.body),this.system.removeBehavior(this,this.system.Phase.SIMULATE)},step:function(){var t=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(o,a){if(!isNaN(a)){var s,c,l=this.body,u=this.data,h=!1,p=-(1/0);a=Math.min(a,1e3*this.system.maxInterval),r.set(0,0,0),t.copy(this.el.getAttribute("velocity")),l.velocity.copy(t),l.position.copy(this.el.getAttribute("position"));for(var d,f=0;d=this.system.world.contacts[f];f++){if(l.id===d.bi.id)d.ni.negate(n);else{if(l.id!==d.bj.id)continue;n.copy(d.ni)}h=l.velocity.dot(n)<-i,h&&n.y<=.5?t=t.projectOnPlane(n):n.y>.5&&(s=l.id===d.bi.id?Math.abs(d.rj.y+d.bj.position.y):Math.abs(d.ri.y+d.bi.position.y),s>p&&(p=s,r.copy(n),c=l.id===d.bi.id?d.bj:d.bi))}if(e.copy(t).normalize(),c&&e.y<.5?(u.enableSlopes?r.y<1-i&&(r=this.raycastToGround(c,r)):r.set(0,1,0),t=t.projectOnPlane(r)):t.add(this.system.world.gravity.scale(4*a/1e3)),c&&c.el&&c.el.components.velocity){var m=c.el.getAttribute("velocity");l.position.copy({x:l.position.x+m.x*a/1e3,y:l.position.y+m.y*a/1e3,z:l.position.z+m.z*a/1e3}),this.el.setAttribute("position",l.position)}l.position.y-=u.height-u.radius,l.velocity.copy(t),this.el.setAttribute("velocity",t)}}}(),raycastToGround:function(t,e){var n,i,o=this.body.position,a=this.body.position.clone();return a.y-=this.data.height,n=new r.Ray(o,a),n._updateDirection(),n.intersectBody(t),n.hasHit?(i=n.result.hitNormalWorld,Math.abs(i.y)>Math.abs(e.y)?i:e):e}}},function(t,e,n){var r=n(489);t.exports=AFRAME.utils.extend({},r,{schema:{shape:{"default":"auto",oneOf:["auto","box","hull"]}},step:function(){this.syncToPhysics()}})},function(t,e,n){var r=n(485),i=n(487),o=i.CONTACT_MATERIAL;t.exports={Phase:{SIMULATE:"sim",RENDER:"render"},init:function(){this.maxInterval=i.MAX_INTERVAL,this.debug=!1,this.children={},this.children[this.Phase.SIMULATE]=[],this.children[this.Phase.RENDER]=[],this.listeners={},this.world=new r.World,this.world.quatNormalizeSkip=0,this.world.quatNormalizeFast=!1,this.world.solver.iterations=i.ITERATIONS,this.world.gravity.set(0,i.GRAVITY,0),this.world.broadphase=new r.NaiveBroadphase,this.material=new r.Material({name:"defaultMaterial"}),this.contactMaterial=new r.ContactMaterial(this.material,this.material,{friction:o.friction,restitution:o.restitution,contactEquationStiffness:o.contactEquationStiffness,contactEquationRelaxation:o.contactEquationRelaxation,frictionEquationStiffness:o.frictionEquationStiffness,frictionEquationRegularization:o.frictionEquationRegularization}),this.world.addContactMaterial(this.contactMaterial)},tick:function(t,e){if(!isNaN(e)){this.world.step(Math.min(e/1e3,this.maxInterval));var n;for(n=0;n<this.children[this.Phase.SIMULATE].length;n++)this.children[this.Phase.SIMULATE][n].step(t,e);for(n=0;n<this.children[this.Phase.RENDER].length;n++)this.children[this.Phase.RENDER][n].step(t,e)}},addBody:function(t){this.listeners[t.id]=function(e){t.el.emit("collide",e)},t.addEventListener("collide",this.listeners[t.id]),this.world.addBody(t)},removeBody:function(t){t.removeEventListener("collide",this.listeners[t.id]),delete this.listeners[t.id],this.world.removeBody(t)},addBehavior:function(t,e){this.children[e].push(t)},removeBehavior:function(t,e){this.children[e].splice(this.children[e].indexOf(t),1)},setOption:function(t,e){switch(t){case"maxInterval":return this.setMaxInterval(e);case"gravity":return this.setGravity(e);case"debug":return this.setDebug(e);case"friction":case"restitution":case"contactEquationStiffness":case"contactEquationRelaxation":case"frictionEquationStiffness":case"frictionEquationRegularization":return this.setContactMaterialProperty(t,e);default:console.error('Option "%s" not recognized.',t)}},setMaxInterval:function(t){this.maxInterval=t},setGravity:function(t){this.world.gravity.y=t},setDebug:function(t){this.debug=t,console.warn('[physics] Option "debug" cannot be dynamically updated yet')},setContactMaterialProperty:function(t,e){this.contactMaterial[t]=e}}},function(t,e){t.exports={schema:{defaultRotation:{type:"vec3"},enableDefaultRotation:{"default":!1}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.addEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){var t=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!t)throw new Error("No `checkpoint-controls` component found.");t.components["checkpoint-controls"].setCheckpoint(this.el)}}},function(t,e){var n=-9.8,r=-15;t.exports={dependencies:["velocity"],schema:{on:{"default":"keydown:Space gamepadbuttondown:0"},playerHeight:{"default":1.764},enableDoubleJump:{"default":!1},distance:{"default":5},soundJump:{"default":""},soundLand:{"default":""},debug:{"default":!1}},init:function(){this.isOnObject=!0,this.velocity=0,this.numJumps=0;var t=this.beginJump.bind(this),e=this.data.on.split(" ");this.bindings={};for(var n=0;n<e.length;n++)this.bindings[e[n]]=t,this.el.addEventListener(e[n],t)},remove:function(){for(var t in this.bindings)this.bindings.hasOwnProperty(t)&&(this.el.removeEventListener(t,this.bindings[t]),delete this.bindings[t])},beginJump:function(){if(this.isOnObject||this.data.enableDoubleJump&&1===this.numJumps){var t=this.data,e=Math.sqrt(-2*t.distance*(n+r)),i=this.el.getAttribute("velocity");this.el.setAttribute("velocity",{x:i.x,y:e,z:i.z}),this.numJumps++}}}},function(t,e){t.exports={dependencies:["velocity"],schema:{axis:{"default":"x",oneOf:["x","y","z"]},min:{"default":0},max:{"default":0},speed:{"default":1}},init:function(){var t={x:0,y:0,z:0};t[this.data.axis]=this.data.speed,this.el.setAttribute("velocity",t),this.el.sceneEl.addBehavior&&this.el.sceneEl.addBehavior(this)},remove:function(){},update:function(){this.tick()},tick:function(){var t=this.data,e=this.el.getAttribute("velocity"),n=this.el.getAttribute("position");e[t.axis]>0&&n[t.axis]>t.max?(e[t.axis]=-t.speed,this.el.setAttribute("velocity",e)):e[t.axis]<0&&n[t.axis]<t.min&&(e[t.axis]=t.speed,this.el.setAttribute("velocity",e))}}},function(t,e,n){t.exports={"a-grid":n(500),"a-ocean":n(501),"a-tube":n(502),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,t.registerPrimitive("a-grid",this["a-grid"]),t.registerComponent("ocean",this["a-ocean"].Component),t.registerPrimitive("a-ocean",this["a-ocean"].Primitive),t.registerComponent("tube",this["a-tube"].Component),t.registerPrimitive("a-tube",this["a-tube"].Primitive),this._registered=!0)}}},function(t,e){t.exports={defaultAttributes:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.rawgit.com/donmccurdy/aframe-extras/v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",depth:"geometry.depth",src:"material.src"}}},function(t,e){t.exports.Primitive={defaultAttributes:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",color:"ocean.color",opacity:"ocean.opacity"}},t.exports.Component={schema:{width:{"default":10,min:0},depth:{"default":10,min:0},density:{"default":10},amplitude:{"default":.1},amplitudeVariance:{"default":.3},speed:{"default":1},speedVariance:{"default":2},color:{"default":8049399},opacity:{"default":.8}},init:function(){var t=this.el,e=this.data,n=t.components.material,r=new THREE.PlaneGeometry(e.width,e.depth,e.density,e.density);r.mergeVertices(),this.waves=[];for(var i,o=0,a=r.vertices.length;o<a;o++)i=r.vertices[o],this.waves.push({z:i.z,ang:Math.random()*Math.PI*2,amp:e.amplitude+Math.random()*e.amplitudeVariance,speed:(e.speed+Math.random()*e.speedVariance)/1e3});n||(n={},n.material=new THREE.MeshPhongMaterial({color:e.color,transparent:e.opacity<1,opacity:e.opacity,shading:THREE.FlatShading})),this.mesh=new THREE.Mesh(r,n.material),t.object3D.add(this.mesh)},remove:function(){this.el.object3D.remove(this.mesh)},tick:function(t,e){if(!isNaN(e)){for(var n,r,i=this.mesh.geometry.vertices,o=0;n=i[o];o++)r=this.waves[o],n.z=r.z+Math.sin(r.ang)*r.amp,r.ang+=r.speed*e;this.mesh.geometry.verticesNeedUpdate=!0}}}},function(t,e){t.exports.Primitive={defaultAttributes:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius",radialSegments:"tube.radialSegments",closed:"tube.closed"}},t.exports.Component={schema:{path:{"default":[]},segments:{"default":64},radius:{"default":1},radialSegments:{"default":8},closed:{"default":!1}},init:function(){var t=this.el,e=this.data,n=t.components.material;if(!e.path.length)return void console.error("[a-tube] `path` property expected but not found.");var r=new THREE.CatmullRomCurve3(e.path.map(function(t){return t=t.split(" "),new THREE.Vector3(Number(t[0]),Number(t[1]),Number(t[2]))})),i=new THREE.TubeGeometry(r,e.segments,e.radius,e.radialSegments,e.closed);
n||(n={},n.material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(i,n.material),this.el.setObject3D("mesh",this.mesh)},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}}},function(t,e,n){t.exports={shadow:n(504),"shadow-light":n(505),registerAll:function(t){this._registered||(t=t||window.AFRAME,t=t.aframeCore||t,t.components.shadow||t.registerComponent("shadow",this.shadow),t.components["shadow-light"]||t.registerComponent("shadow-light",this["shadow-light"]),this._registered=!0)}}},function(t,e){t.exports={schema:{cast:{"default":!1},receive:{"default":!1}},init:function(){this.el.addEventListener("model-loaded",this.update.bind(this))},update:function(){var t=this.data;this.el.object3D.traverse(function(e){e instanceof THREE.Mesh&&(e.castShadow=t.cast,e.receiveShadow=t.receive)})},remove:function(){}}},function(t,e){t.exports={schema:{angle:{"default":Math.PI/3},castShadow:{"default":!1},color:{"default":"#FFF"},groundColor:{"default":"#FFF"},decay:{"default":1},distance:{"default":0},exponent:{"default":10},intensity:{"default":1},shadowBias:{"default":0},shadowCameraFar:{"default":5e3},shadowCameraFov:{"default":50},shadowCameraNear:{"default":.5},shadowDarkness:{"default":.5},shadowMapHeight:{"default":512},shadowMapWidth:{"default":512},type:{"default":"directional"}},init:function(){var t=this.el;this.light=this.getLight(),t.object3D.add(this.light),t.sceneEl.systems.light.registerLight(t),t.sceneEl.hasLoaded||t.sceneEl.addEventListener("loaded",this.play.bind(this))},update:function(t){t&&(this.el.object3D.remove(this.light),this.light=this.getLight(),this.el.object3D.add(this.light))},play:function(){var t=this.el,e=t.sceneEl.renderer;e&&!e.shadowMap.enabled&&(e.shadowMap.enabled=!0)},getLight:function(){var t=this.data,e=new THREE.Color(t.color).getHex(),n=t.intensity,r=t.type;switch(r&&(r=r.toLowerCase()),r){case"ambient":return new THREE.AmbientLight(e);case"directional":return this.setShadow(new THREE.DirectionalLight(e,n));case"hemisphere":return new THREE.HemisphereLight(e,t.groundColor,n);case"point":return this.setShadow(new THREE.PointLight(e,n,t.distance,t.decay));case"spot":return this.setShadow(new THREE.SpotLight(e,n,t.distance,t.angle,t.exponent,t.decay));default:return new THREE.AmbientLight(e)}},setShadow:function(t){var e=this.data;return e.castShadow?(t.castShadow=e.castShadow,t.shadow.camera.near=e.shadowCameraNear,t.shadow.camera.far=e.shadowCameraFar,t.shadow.camera.fov=e.shadowCameraFov,t.shadow.darkness=e.shadowDarkness,t.shadow.mapSize.height=e.shadowMapHeight,t.shadow.mapSize.width=e.shadowMapWidth,t):t}}},function(t,e,n){function r(t){return new THREE.TextGeometry(t.text,t)}n(507),n(508),n(509),AFRAME.registerComponent("text",{schema:{bevelEnabled:{"default":!1},bevelSize:{"default":8,min:0},bevelThickness:{"default":12,min:0},curveSegments:{"default":12,min:0},font:{"default":"helvetiker"},height:{"default":.05,min:0},size:{"default":.5,min:0},style:{"default":"normal",oneOf:["normal","italics"]},text:{"default":""},weight:{"default":"normal",oneOf:["normal","bold"]}},update:function(t){this.el.getOrCreateObject3D("mesh",THREE.Mesh).geometry=r(this.data)}})},function(t,e){THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face.toLowerCase()][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(t){var e=t.familyName.toLowerCase(),n=this;return n.faces[e]=n.faces[e]||{},n.faces[e][t.cssFontWeight]=n.faces[e][t.cssFontWeight]||{},n.faces[e][t.cssFontWeight][t.cssFontStyle]=t,n.faces[e][t.cssFontWeight][t.cssFontStyle]=t,t},drawText:function(t){var e,n=this.getFace(),r=this.size/n.resolution,i=0,o=String(t).split(""),a=o.length,s=[];for(e=0;e<a;e++){var c=new THREE.Path,l=this.extractGlyphPoints(o[e],n,r,i,c);i+=l.offset,s.push(l.path)}var u=i/2;return{paths:s,offset:u}},extractGlyphPoints:function(t,e,n,r,i){var o,a,s,c,l,u,h,p,d,f,m,v,y,g,x,_,b,w,E,S=[],M=THREE.ShapeUtils.b2,A=THREE.ShapeUtils.b3,C=e.glyphs[t]||e.glyphs["?"];if(C){if(C.o)for(c=C._cachedOutline||(C._cachedOutline=C.o.split(" ")),u=c.length,h=n,p=n,o=0;o<u;)switch(l=c[o++]){case"m":d=c[o++]*h+r,f=c[o++]*p,i.moveTo(d,f);break;case"l":d=c[o++]*h+r,f=c[o++]*p,i.lineTo(d,f);break;case"q":if(m=c[o++]*h+r,v=c[o++]*p,x=c[o++]*h+r,_=c[o++]*p,i.quadraticCurveTo(x,_,m,v),E=S[S.length-1])for(y=E.x,g=E.y,a=1,s=this.divisions;a<=s;a++){var T=a/s;M(T,y,x,m),M(T,g,_,v)}break;case"b":if(m=c[o++]*h+r,v=c[o++]*p,x=c[o++]*h+r,_=c[o++]*p,b=c[o++]*h+r,w=c[o++]*p,i.bezierCurveTo(x,_,b,w,m,v),E=S[S.length-1])for(y=E.x,g=E.y,a=1,s=this.divisions;a<=s;a++){var T=a/s;A(T,y,x,b,m),A(T,g,_,w,v)}}return{offset:C.ha*n,path:i}}}},THREE.FontUtils.generateShapes=function(t,e){e=e||{};var n=void 0!==e.size?e.size:100,r=void 0!==e.curveSegments?e.curveSegments:4,i=void 0!==e.font?e.font:"helvetiker",o=void 0!==e.weight?e.weight:"normal",a=void 0!==e.style?e.style:"normal";THREE.FontUtils.size=n,THREE.FontUtils.divisions=r,THREE.FontUtils.face=i,THREE.FontUtils.weight=o,THREE.FontUtils.style=a;for(var s=THREE.FontUtils.drawText(t),c=s.paths,l=[],u=0,h=c.length;u<h;u++)Array.prototype.push.apply(l,c[u].toShapes());return l},THREE.typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},"undefined"!=typeof self&&(self._typeface_js=THREE.typeface_js)},function(t,e){THREE.TextGeometry=function(t,e){e=e||{};var n=THREE.FontUtils.generateShapes(t,e);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,n,e),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry},function(t,e){_typeface_js&&_typeface_js.loadFace&&_typeface_js.loadFace({glyphs:{"":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},"":{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},"":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},"":{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},"":{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},"":{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},"":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},"":{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"":{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},"":{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},"":{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},"":{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"":{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},"":{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},"":{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},"":{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},"":{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},"":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},"":{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},"":{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},"":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},"":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"":{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"":{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},"":{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},"":{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},"":{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},"":{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},"":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"":{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},"":{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"":{x_min:0,x_max:0,ha:853},"":{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},"":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},"":{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},"":{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "
},"":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},"":{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},"":{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},"":{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},"":{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},"":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},"":{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"":{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},"":{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},"":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},"":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},"":{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},"":{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},"":{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},"":{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},"":{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},"":{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},"":{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},"":{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},"":{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},"":{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"":{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},"":{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},"":{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},"":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},"":{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},"":{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},"":{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},"":{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},"":{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"":{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},"":{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"":{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},"":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},"":{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},"":{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},"":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},"":{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},"":{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},"":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "
}},cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:{yMin:-334,xMin:-111,yMax:1189,xMax:1672},resolution:1e3,original_font_information:{postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) agenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"agenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"agenta ltd",font_sub_family_name:"Regular"},descender:-334,familyName:"Helvetiker",lineHeight:1522,underlineThickness:50})},function(t,e){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var n=n||function(){var t=[];return{REVISION:"8",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)},update:function(e){if(0===t.length)return!1;var n=0,r=t.length;for(e=void 0!==e?e:Date.now();n<r;)t[n].update(e)?n++:(t.splice(n,1),r--);return!0}}}();n.Tween=function(t){var e=t,r={},i={},o=1e3,a=0,s=null,c=n.Easing.Linear.None,l=n.Interpolation.Linear,u=[],h=null,p=!1,d=null,f=null;this.to=function(t,e){return void 0!==e&&(o=e),i=t,this},this.start=function(t){n.add(this),p=!1,s=void 0!==t?t:Date.now(),s+=a;for(var o in i)if(null!==e[o]&&o in e){if(i[o]instanceof Array){if(0===i[o].length)continue;i[o]=[e[o]].concat(i[o])}r[o]=e[o]}return this},this.stop=function(){return n.remove(this),this},this.delay=function(t){return a=t,this},this.easing=function(t){return c=t,this},this.interpolation=function(t){return l=t,this},this.chain=function(){return u=arguments,this},this.onStart=function(t){return h=t,this},this.onUpdate=function(t){return d=t,this},this.onComplete=function(t){return f=t,this},this.update=function(t){if(t<s)return!0;p===!1&&(null!==h&&h.call(e),p=!0);var n=(t-s)/o;n=n>1?1:n;var a=c(n);for(var m in r){var v=r[m],y=i[m];y instanceof Array?e[m]=l(y,a):e[m]=v+(y-v)*a}if(null!==d&&d.call(e,a),1==n){null!==f&&f.call(e);for(var g=0,x=u.length;g<x;g++)u[g].start(t);return!1}return!0}},n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},Out:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Interpolation={Linear:function(t,e){var r=t.length-1,i=r*e,o=Math.floor(i),a=n.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[r],t[r-1],r-i):a(t[o],t[o+1>r?r:o+1],i-o)},Bezier:function(t,e){var r,i=0,o=t.length-1,a=Math.pow,s=n.Interpolation.Utils.Bernstein;for(r=0;r<=o;r++)i+=a(1-e,o-r)*a(e,r)*t[r]*s(o,r);return i},CatmullRom:function(t,e){var r=t.length-1,i=r*e,o=Math.floor(i),a=n.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(o=Math.floor(i=r*(1+e))),a(t[(o-1+r)%r],t[o],t[(o+1)%r],t[(o+2)%r],i-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[r]-(a(t[r],t[r],t[r-1],t[r-1],i-r)-t[r]):a(t[o?o-1:0],t[o],t[r<o+1?r:o+1],t[r<o+2?r:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var r=n.Interpolation.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var n,r=1;if(t[e])return t[e];for(n=e;n>1;n--)r*=n;return t[e]=r}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,c=i*s;return(2*e-2*n+o+a)*c+(-3*e+3*n-2*o-a)*s+o*i+e}}},t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=n(512),p=r(h),d=n(513),f=r(d),m=n(517),v=r(m),y=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.head_height_0=13,n.head_height_1=14,n.head_height_2=16,n.head_height_3=18,n.head_height_4=20,n.head_height_5=22,n.head_height_6=24,n.head_height_7=26,n.head_height_8=28,n.head_height_9=30,n.row_1=-130,n.row_2=-118,n.row_3=-106,n.row_4=-94,n.row_5=-82,n.row_6=-68,n.row_7=-56,n.row_8=-35,n.row_9=-23,n.row_10=-12,n.row_11=-1,n.row_12=10,n.row_13=21,n.row_14=32,n.row_15=43,n.row_16=54,n.row_17=65,n.SO_1=-2.4,n.SO_2=2.5,n.SO_3=-7.3,n.SO_4=7.4,n.SO_5=-12.2,n.SO_6=12.2,n.SO_7=-17.1,n.SO_8=17.1,n.SO_9=-22,n.SO_10=22,n.SO_11=-26.8,n.SO_12=26.8,n.SO_13=-31.7,n.SO_14=31.7,n.SO_15=-36.5,n.SO_16=36.5,n.SO_17=-41.4,n.SO_18=41.4,n.SE_1=0,n.SE_2=4.8,n.SE_3=-5,n.SE_4=9.5,n.SE_5=-9.5,n.SE_6=14.6,n.SE_7=-14.6,n.SE_8=19.3,n.SE_9=-19.3,n.SE_10=26.8,n.SE_11=-26.8,n.SE_12=31.7,n.SE_13=-31.7,n.SE_14=36.5,n.SE_15=-36.5,n.SE_16=41.4,n.SE_17=-41.4,n.SB_1=-9.6,n.SB_2=9.6,n.SB_3=-14.5,n.SB_4=14.5,n.SB_5=-19.4,n.SB_6=19.4,n.SB_7=-24.3,n.SB_8=24.3,n.SB_9=-29.2,n.SB_10=29.2,n.SB_11=-33.9,n.SB_12=33.9,n.SB_13=-38.8,n.SB_14=38.8,n.SB_15=-43.7,n.SB_16=43.7,n.SB_17=-48.6,n.SB_18=48.6,n.SB_19=-53.5,n.SB_20=53.5,n.seatCoordinates={CV_change_seat:{x:0,y:38,z:-125},CV_intro:{x:0,y:10,z:64},CV_intro_2:{x:0,y:25,z:0},S1_1:{x:n.SO_1,y:n.head_height_0,z:n.row_1},S1_2:{x:n.SO_2,y:n.head_height_0,z:n.row_1},S1_3:{x:n.SO_3,y:n.head_height_0,z:n.row_1},S1_4:{x:n.SO_4,y:n.head_height_0,z:n.row_1},S1_5:{x:n.SO_5,y:n.head_height_0,z:n.row_1},S1_6:{x:n.SO_6,y:n.head_height_0,z:n.row_1},S1_7:{x:n.SO_7,y:n.head_height_0,z:n.row_1},S1_8:{x:n.SO_8,y:n.head_height_0,z:n.row_1},S1_9:{x:n.SO_9,y:n.head_height_0,z:n.row_1},S1_10:{x:n.SO_10,y:n.head_height_0,z:n.row_1},S1_11:{x:n.SO_11,y:n.head_height_0,z:n.row_1},S1_12:{x:n.SO_12,y:n.head_height_0,z:n.row_1},S1_13:{x:n.SO_13,y:n.head_height_0,z:n.row_1},S1_14:{x:n.SO_14,y:n.head_height_0,z:n.row_1},S1_15:{x:n.SO_15,y:n.head_height_0,z:n.row_1},S1_16:{x:n.SO_16,y:n.head_height_0,z:n.row_1},S1_17:{x:n.SO_17,y:n.head_height_0,z:n.row_1},S1_18:{x:n.SO_18,y:n.head_height_0,z:n.row_1},S2_1:{x:n.SE_1,y:n.head_height_0,z:n.row_2},S2_2:{x:n.SE_2,y:n.head_height_0,z:n.row_2},S2_3:{x:n.SE_3,y:n.head_height_0,z:n.row_2},S2_4:{x:n.SE_4,y:n.head_height_0,z:n.row_2},S2_5:{x:n.SE_5,y:n.head_height_0,z:n.row_2},S2_6:{x:n.SE_6,y:n.head_height_0,z:n.row_2},S2_7:{x:n.SE_7,y:n.head_height_0,z:n.row_2},S2_8:{x:n.SE_8,y:n.head_height_0,z:n.row_2},S2_9:{x:n.SE_9,y:n.head_height_0,z:n.row_2},S2_10:{x:n.SE_10,y:n.head_height_0,z:n.row_2},S2_11:{x:n.SE_11,y:n.head_height_0,z:n.row_2},S2_12:{x:n.SE_12,y:n.head_height_0,z:n.row_2},S2_13:{x:n.SE_13,y:n.head_height_0,z:n.row_2},S2_14:{x:n.SE_14,y:n.head_height_0,z:n.row_2},S2_15:{x:n.SE_15,y:n.head_height_0,z:n.row_2},S2_16:{x:n.SE_16,y:n.head_height_0,z:n.row_2},S2_17:{x:n.SE_17,y:n.head_height_0,z:n.row_2},S3_1:{x:n.SO_1,y:n.head_height_0,z:n.row_3},S3_2:{x:n.SO_2,y:n.head_height_0,z:n.row_3},S3_3:{x:n.SO_3,y:n.head_height_0,z:n.row_3},S3_4:{x:n.SO_4,y:n.head_height_0,z:n.row_3},S3_5:{x:n.SO_5,y:n.head_height_0,z:n.row_3},S3_6:{x:n.SO_6,y:n.head_height_0,z:n.row_3},S3_7:{x:n.SO_7,y:n.head_height_0,z:n.row_3},S3_8:{x:n.SO_8,y:n.head_height_0,z:n.row_3},S3_9:{x:n.SO_9,y:n.head_height_0,z:n.row_3},S3_10:{x:n.SO_10,y:n.head_height_0,z:n.row_3},S3_11:{x:n.SO_11,y:n.head_height_0,z:n.row_3},S3_12:{x:n.SO_12,y:n.head_height_0,z:n.row_3},S3_13:{x:n.SO_13,y:n.head_height_0,z:n.row_3},S3_14:{x:n.SO_14,y:n.head_height_0,z:n.row_3},S3_15:{x:n.SO_15,y:n.head_height_0,z:n.row_3},S3_16:{x:n.SO_16,y:n.head_height_0,z:n.row_3},S3_17:{x:n.SO_17,y:n.head_height_0,z:n.row_3},S3_18:{x:n.SO_18,y:n.head_height_0,z:n.row_3},S4_1:{x:n.SE_1,y:n.head_height_0,z:n.row_4},S4_2:{x:n.SE_2,y:n.head_height_0,z:n.row_4},S4_3:{x:n.SE_3,y:n.head_height_0,z:n.row_4},S4_4:{x:n.SE_4,y:n.head_height_0,z:n.row_4},S4_5:{x:n.SE_5,y:n.head_height_0,z:n.row_4},S4_6:{x:n.SE_6,y:n.head_height_0,z:n.row_4},S4_7:{x:n.SE_7,y:n.head_height_0,z:n.row_4},S4_8:{x:n.SE_8,y:n.head_height_0,z:n.row_4},S4_9:{x:n.SE_9,y:n.head_height_0,z:n.row_4},S4_10:{x:n.SE_10,y:n.head_height_0,z:n.row_4},S4_11:{x:n.SE_11,y:n.head_height_0,z:n.row_4},S4_12:{x:n.SE_12,y:n.head_height_0,z:n.row_4},S4_13:{x:n.SE_13,y:n.head_height_0,z:n.row_4},S4_14:{x:n.SE_14,y:n.head_height_0,z:n.row_4},S4_15:{x:n.SE_15,y:n.head_height_0,z:n.row_4},S4_16:{x:n.SE_16,y:n.head_height_0,z:n.row_4},S4_17:{x:n.SE_17,y:n.head_height_0,z:n.row_4},S5_1:{x:n.SO_1,y:n.head_height_0,z:n.row_5},S5_2:{x:n.SO_2,y:n.head_height_0,z:n.row_5},S5_3:{x:n.SO_3,y:n.head_height_0,z:n.row_5},S5_4:{x:n.SO_4,y:n.head_height_0,z:n.row_5},S5_5:{x:n.SO_5,y:n.head_height_0,z:n.row_5},S5_6:{x:n.SO_6,y:n.head_height_0,z:n.row_5},S5_7:{x:n.SO_7,y:n.head_height_0,z:n.row_5},S5_8:{x:n.SO_8,y:n.head_height_0,z:n.row_5},S5_9:{x:n.SO_9,y:n.head_height_0,z:n.row_5},S5_10:{x:n.SO_10,y:n.head_height_0,z:n.row_5},S5_11:{x:n.SO_11,y:n.head_height_0,z:n.row_5},S5_12:{x:n.SO_12,y:n.head_height_0,z:n.row_5},S5_13:{x:n.SO_13,y:n.head_height_0,z:n.row_5},S5_14:{x:n.SO_14,y:n.head_height_0,z:n.row_5},S5_15:{x:n.SO_15,y:n.head_height_0,z:n.row_5},S5_16:{x:n.SO_16,y:n.head_height_0,z:n.row_5},S5_17:{x:n.SO_17,y:n.head_height_0,z:n.row_5},S5_18:{x:n.SO_18,y:n.head_height_0,z:n.row_5},S6_1:{x:n.SE_1,y:n.head_height_0,z:n.row_6},S6_2:{x:n.SE_2,y:n.head_height_0,z:n.row_6},S6_3:{x:n.SE_3,y:n.head_height_0,z:n.row_6},S6_4:{x:n.SE_4,y:n.head_height_0,z:n.row_6},S6_5:{x:n.SE_5,y:n.head_height_0,z:n.row_6},S6_6:{x:n.SE_6,y:n.head_height_0,z:n.row_6},S6_7:{x:n.SE_7,y:n.head_height_0,z:n.row_6},S6_8:{x:n.SE_8,y:n.head_height_0,z:n.row_6},S6_9:{x:n.SE_9,y:n.head_height_0,z:n.row_6},S6_10:{x:n.SE_10,y:n.head_height_0,z:n.row_6},S6_11:{x:n.SE_11,y:n.head_height_0,z:n.row_6},S6_12:{x:n.SE_12,y:n.head_height_0,z:n.row_6},S6_13:{x:n.SE_13,y:n.head_height_0,z:n.row_6},S6_14:{x:n.SE_14,y:n.head_height_0,z:n.row_6},S6_15:{x:n.SE_15,y:n.head_height_0,z:n.row_6},S6_16:{x:n.SE_16,y:n.head_height_0,z:n.row_6},S6_17:{x:n.SE_17,y:n.head_height_0,z:n.row_6},S7_1:{x:n.SO_1,y:n.head_height_0,z:n.row_7},S7_2:{x:n.SO_2,y:n.head_height_0,z:n.row_7},S7_3:{x:n.SO_3,y:n.head_height_0,z:n.row_7},S7_4:{x:n.SO_4,y:n.head_height_0,z:n.row_7},S7_5:{x:n.SO_5,y:n.head_height_0,z:n.row_7},S7_6:{x:n.SO_6,y:n.head_height_0,z:n.row_7},S7_7:{x:n.SO_7,y:n.head_height_0,z:n.row_7},S7_8:{x:n.SO_8,y:n.head_height_0,z:n.row_7},S7_9:{x:n.SO_9,y:n.head_height_0,z:n.row_7},S7_10:{x:n.SO_10,y:n.head_height_0,z:n.row_7},S7_11:{x:n.SO_11,y:n.head_height_0,z:n.row_7},S7_12:{x:n.SO_12,y:n.head_height_0,z:n.row_7},S7_13:{x:n.SO_13,y:n.head_height_0,z:n.row_7},S7_14:{x:n.SO_14,y:n.head_height_0,z:n.row_7},S7_15:{x:n.SO_15,y:n.head_height_0,z:n.row_7},S7_16:{x:n.SO_16,y:n.head_height_0,z:n.row_7},S7_17:{x:n.SO_17,y:n.head_height_0,z:n.row_7},S7_18:{x:n.SO_18,y:n.head_height_0,z:n.row_7},S8_1:{x:n.SB_1,y:n.head_height_0,z:n.row_8},S8_2:{x:n.SB_2,y:n.head_height_0,z:n.row_8},S8_3:{x:n.SB_3,y:n.head_height_0,z:n.row_8},S8_4:{x:n.SB_4,y:n.head_height_0,z:n.row_8},S8_5:{x:n.SB_5,y:n.head_height_0,z:n.row_8},S8_6:{x:n.SB_6,y:n.head_height_0,z:n.row_8},S8_7:{x:n.SB_7,y:n.head_height_0,z:n.row_8},S8_8:{x:n.SB_8,y:n.head_height_0,z:n.row_8},S8_9:{x:n.SB_9,y:n.head_height_0,z:n.row_8},S8_10:{x:n.SB_10,y:n.head_height_0,z:n.row_8},S8_11:{x:n.SB_11,y:n.head_height_0,z:n.row_8},S8_12:{x:n.SB_12,y:n.head_height_0,z:n.row_8},S8_13:{x:n.SB_13,y:n.head_height_0,z:n.row_8},S8_14:{x:n.SB_14,y:n.head_height_0,z:n.row_8},S8_15:{x:n.SB_15,y:n.head_height_0,z:n.row_8},S8_16:{x:n.SB_16,y:n.head_height_0,z:n.row_8},S8_17:{x:n.SB_17,y:n.head_height_0,z:n.row_8},S8_18:{x:n.SB_18,y:n.head_height_0,z:n.row_8},S8_19:{x:n.SB_19,y:n.head_height_0,z:n.row_8},S8_20:{x:n.SB_20,y:n.head_height_0,z:n.row_8},S9_1:{x:n.SB_1,y:n.head_height_1,z:n.row_9},S9_2:{x:n.SB_2,y:n.head_height_1,z:n.row_9},S9_3:{x:n.SB_3,y:n.head_height_1,z:n.row_9},S9_4:{x:n.SB_4,y:n.head_height_1,z:n.row_9},S9_5:{x:n.SB_5,y:n.head_height_1,z:n.row_9},S9_6:{x:n.SB_6,y:n.head_height_1,z:n.row_9},S9_7:{x:n.SB_7,y:n.head_height_1,z:n.row_9},S9_8:{x:n.SB_8,y:n.head_height_1,z:n.row_9},S9_9:{x:n.SB_9,y:n.head_height_1,z:n.row_9},S9_10:{x:n.SB_10,y:n.head_height_1,z:n.row_9},S9_11:{x:n.SB_11,y:n.head_height_1,z:n.row_9},S9_12:{x:n.SB_12,y:n.head_height_1,z:n.row_9},S9_13:{x:n.SB_13,y:n.head_height_1,z:n.row_9},S9_14:{x:n.SB_14,y:n.head_height_1,z:n.row_9},S9_15:{x:n.SB_15,y:n.head_height_1,z:n.row_9},S9_16:{x:n.SB_16,y:n.head_height_1,z:n.row_9},S9_17:{x:n.SB_17,y:n.head_height_1,z:n.row_9},S9_18:{x:n.SB_18,y:n.head_height_1,z:n.row_9},S9_19:{x:n.SB_19,y:n.head_height_1,z:n.row_9},S9_20:{x:n.SB_20,y:n.head_height_1,z:n.row_9},S10_1:{x:n.SB_1,y:n.head_height_2,z:n.row_10},S10_2:{x:n.SB_2,y:n.head_height_2,z:n.row_10},S10_3:{x:n.SB_3,y:n.head_height_2,z:n.row_10},S10_4:{x:n.SB_4,y:n.head_height_2,z:n.row_10},S10_5:{x:n.SB_5,y:n.head_height_2,z:n.row_10},S10_6:{x:n.SB_6,y:n.head_height_2,z:n.row_10},S10_7:{x:n.SB_7,y:n.head_height_2,z:n.row_10},S10_8:{x:n.SB_8,y:n.head_height_2,z:n.row_10},S10_9:{x:n.SB_9,y:n.head_height_2,z:n.row_10},S10_10:{x:n.SB_10,y:n.head_height_2,z:n.row_10},S10_11:{x:n.SB_11,y:n.head_height_2,z:n.row_10},S10_12:{x:n.SB_12,y:n.head_height_2,z:n.row_10},S10_13:{x:n.SB_13,y:n.head_height_2,z:n.row_10},S10_14:{x:n.SB_14,y:n.head_height_2,z:n.row_10},S10_15:{x:n.SB_15,y:n.head_height_2,z:n.row_10},S10_16:{x:n.SB_16,y:n.head_height_2,z:n.row_10},S10_17:{x:n.SB_17,y:n.head_height_2,z:n.row_10},S10_18:{x:n.SB_18,y:n.head_height_2,z:n.row_10},S10_19:{x:n.SB_19,y:n.head_height_2,z:n.row_10},S10_20:{x:n.SB_20,y:n.head_height_2,z:n.row_10},S11_1:{x:n.SB_1,y:n.head_height_3,z:n.row_11},S11_2:{x:n.SB_2,y:n.head_height_3,z:n.row_11},S11_3:{x:n.SB_3,y:n.head_height_3,z:n.row_11},S11_4:{x:n.SB_4,y:n.head_height_3,z:n.row_11},S11_5:{x:n.SB_5,y:n.head_height_3,z:n.row_11},S11_6:{x:n.SB_6,y:n.head_height_3,z:n.row_11},S11_7:{x:n.SB_7,y:n.head_height_3,z:n.row_11},S11_8:{x:n.SB_8,y:n.head_height_3,z:n.row_11},S11_9:{x:n.SB_9,y:n.head_height_3,z:n.row_11},S11_10:{x:n.SB_10,y:n.head_height_3,z:n.row_11},S11_11:{x:n.SB_11,y:n.head_height_3,z:n.row_11},S11_12:{x:n.SB_12,y:n.head_height_3,z:n.row_11},S11_13:{x:n.SB_13,y:n.head_height_3,z:n.row_11},S11_14:{x:n.SB_14,y:n.head_height_3,z:n.row_11},S11_15:{x:n.SB_15,y:n.head_height_3,z:n.row_11},S11_16:{x:n.SB_16,y:n.head_height_3,z:n.row_11},S11_17:{x:n.SB_17,y:n.head_height_3,z:n.row_11},S11_18:{x:n.SB_18,y:n.head_height_3,z:n.row_11},S11_19:{x:n.SB_19,y:n.head_height_3,z:n.row_11},S11_20:{x:n.SB_20,y:n.head_height_3,z:n.row_11},S12_1:{x:n.SB_1,y:n.head_height_4,z:n.row_12},S12_2:{x:n.SB_2,y:n.head_height_4,z:n.row_12},S12_3:{x:n.SB_3,y:n.head_height_4,z:n.row_12},S12_4:{x:n.SB_4,y:n.head_height_4,z:n.row_12},S12_5:{x:n.SB_5,y:n.head_height_4,z:n.row_12},S12_6:{x:n.SB_6,y:n.head_height_4,z:n.row_12},S12_7:{x:n.SB_7,y:n.head_height_4,z:n.row_12},S12_8:{x:n.SB_8,y:n.head_height_4,z:n.row_12},S12_9:{x:n.SB_9,y:n.head_height_4,z:n.row_12},S12_10:{x:n.SB_10,y:n.head_height_4,z:n.row_12},S12_11:{x:n.SB_11,y:n.head_height_4,z:n.row_12},S12_12:{x:n.SB_12,y:n.head_height_4,z:n.row_12},S12_13:{x:n.SB_13,y:n.head_height_4,z:n.row_12},S12_14:{x:n.SB_14,y:n.head_height_4,z:n.row_12},S12_15:{x:n.SB_15,y:n.head_height_4,z:n.row_12},S12_16:{x:n.SB_16,y:n.head_height_4,z:n.row_12},S12_17:{x:n.SB_17,y:n.head_height_4,z:n.row_12},S12_18:{x:n.SB_18,y:n.head_height_4,z:n.row_12},S12_19:{x:n.SB_19,y:n.head_height_4,z:n.row_12},S12_20:{x:n.SB_20,y:n.head_height_4,z:n.row_12},S13_1:{x:n.SB_5,y:n.head_height_5,z:n.row_13},S13_2:{x:n.SB_6,y:n.head_height_5,z:n.row_13},S13_3:{x:n.SB_7,y:n.head_height_5,z:n.row_13},S13_4:{x:n.SB_8,y:n.head_height_5,z:n.row_13},S13_5:{x:n.SB_9,y:n.head_height_5,z:n.row_13},S13_6:{x:n.SB_10,y:n.head_height_5,z:n.row_13},S13_7:{x:n.SB_11,y:n.head_height_5,z:n.row_13},S13_8:{x:n.SB_12,y:n.head_height_5,z:n.row_13},S13_9:{x:n.SB_13,y:n.head_height_5,z:n.row_13},S13_10:{x:n.SB_14,y:n.head_height_5,z:n.row_13},S13_11:{x:n.SB_15,y:n.head_height_5,z:n.row_13},S13_12:{x:n.SB_16,y:n.head_height_5,z:n.row_13},S13_13:{x:n.SB_17,y:n.head_height_5,z:n.row_13},S13_14:{x:n.SB_18,y:n.head_height_5,z:n.row_13},S13_15:{x:n.SB_19,y:n.head_height_5,z:n.row_13},S13_16:{x:n.SB_20,y:n.head_height_5,z:n.row_13},S14_1:{x:n.SB_5,y:n.head_height_6,z:n.row_14},S14_2:{x:n.SB_6,y:n.head_height_6,z:n.row_14},S14_3:{x:n.SB_7,y:n.head_height_6,z:n.row_14},S14_4:{x:n.SB_8,y:n.head_height_6,z:n.row_14},S14_5:{x:n.SB_9,y:n.head_height_6,z:n.row_14},S14_6:{x:n.SB_10,y:n.head_height_6,z:n.row_14},S14_7:{x:n.SB_11,y:n.head_height_6,z:n.row_14},S14_8:{x:n.SB_12,y:n.head_height_6,z:n.row_14},S14_9:{x:n.SB_13,y:n.head_height_6,z:n.row_14},S14_10:{x:n.SB_14,y:n.head_height_6,z:n.row_14},S14_11:{x:n.SB_15,y:n.head_height_6,z:n.row_14},S14_12:{x:n.SB_16,y:n.head_height_6,z:n.row_14},S14_13:{x:n.SB_17,y:n.head_height_6,z:n.row_14},S14_14:{x:n.SB_18,y:n.head_height_6,z:n.row_14},S14_15:{x:n.SB_19,y:n.head_height_6,z:n.row_14},S14_16:{x:n.SB_20,y:n.head_height_6,z:n.row_14},S15_1:{x:n.SB_5,y:n.head_height_7,z:n.row_15},S15_2:{x:n.SB_6,y:n.head_height_7,z:n.row_15},S15_3:{x:n.SB_7,y:n.head_height_7,z:n.row_15},S15_4:{x:n.SB_8,y:n.head_height_7,z:n.row_15},S15_5:{x:n.SB_9,y:n.head_height_7,z:n.row_15},S15_6:{x:n.SB_10,y:n.head_height_7,z:n.row_15},S15_7:{x:n.SB_11,y:n.head_height_7,z:n.row_15},S15_8:{x:n.SB_12,y:n.head_height_7,z:n.row_15},S15_9:{x:n.SB_13,y:n.head_height_7,z:n.row_15},S15_10:{x:n.SB_14,y:n.head_height_7,z:n.row_15},S15_11:{x:n.SB_15,y:n.head_height_7,z:n.row_15},S15_12:{x:n.SB_16,y:n.head_height_7,z:n.row_15},S15_13:{x:n.SB_17,y:n.head_height_7,z:n.row_15},S15_14:{x:n.SB_18,y:n.head_height_7,z:n.row_15},S15_15:{x:n.SB_19,y:n.head_height_7,z:n.row_15},S15_16:{x:n.SB_20,y:n.head_height_7,z:n.row_15},S16_1:{x:n.SB_3,y:n.head_height_8,z:n.row_16},S16_2:{x:n.SB_4,y:n.head_height_8,z:n.row_16},S16_3:{x:n.SB_5,y:n.head_height_8,z:n.row_16},S16_4:{x:n.SB_6,y:n.head_height_8,z:n.row_16},S16_5:{x:n.SB_7,y:n.head_height_8,z:n.row_16},S16_6:{x:n.SB_8,y:n.head_height_8,z:n.row_16},S16_7:{x:n.SB_9,y:n.head_height_8,z:n.row_16},S16_8:{x:n.SB_10,y:n.head_height_8,z:n.row_16},S16_9:{x:n.SB_11,y:n.head_height_8,z:n.row_16},S16_10:{x:n.SB_12,y:n.head_height_8,z:n.row_16},S16_11:{x:n.SB_13,y:n.head_height_8,z:n.row_16},S16_12:{x:n.SB_14,y:n.head_height_8,z:n.row_16},S16_13:{x:n.SB_15,y:n.head_height_8,z:n.row_16},S16_14:{x:n.SB_16,y:n.head_height_8,z:n.row_16},S16_15:{x:n.SB_17,y:n.head_height_8,z:n.row_16},S16_16:{x:n.SB_18,y:n.head_height_8,z:n.row_16},S16_17:{x:n.SB_19,y:n.head_height_8,z:n.row_16},S16_18:{x:n.SB_20,y:n.head_height_8,z:n.row_16},S17_1:{x:n.SB_1,y:n.head_height_9,z:n.row_17},S17_2:{x:n.SB_2,y:n.head_height_9,z:n.row_17},S17_3:{x:n.SB_3,y:n.head_height_9,z:n.row_17},S17_4:{x:n.SB_4,y:n.head_height_9,z:n.row_17},S17_5:{x:n.SB_5,y:n.head_height_9,z:n.row_17},S17_6:{x:n.SB_6,y:n.head_height_9,z:n.row_17},S17_7:{x:n.SB_7,y:n.head_height_9,z:n.row_17},S17_8:{x:n.SB_8,y:n.head_height_9,z:n.row_17},S17_9:{x:n.SB_9,y:n.head_height_9,z:n.row_17},S17_10:{x:n.SB_10,y:n.head_height_9,z:n.row_17},S17_11:{x:n.SB_11,y:n.head_height_9,z:n.row_17},S17_12:{x:n.SB_12,y:n.head_height_9,z:n.row_17},S17_13:{x:n.SB_13,y:n.head_height_9,z:n.row_17},S17_14:{x:n.SB_14,y:n.head_height_9,z:n.row_17},S17_15:{x:n.SB_15,y:n.head_height_9,z:n.row_17},S17_16:{x:n.SB_16,y:n.head_height_9,z:n.row_17},S17_17:{x:n.SB_17,y:n.head_height_9,z:n.row_17},S17_18:{x:n.SB_18,y:n.head_height_9,z:n.row_17},S17_19:{x:n.SB_19,y:n.head_height_9,z:n.row_17},S17_20:{x:n.SB_20,y:n.head_height_9,z:n.row_17}},n.currentCameraPos=n.seatCoordinates.CV_intro,n.textOpacity={x:0},n.navTextOpacity={x:0},n.canvasTextOpacity={x:0},n.state={currentCameraPos:n.currentCameraPos,bookedThisSeatText:"",textOpacity:n.textOpacity,textVisible:!1,navTextVisible:!1,navTextOpacity:n.navTextOpacity,canvasTextVisible:!1,canvasTextOpacity:n.canvasTextOpacity,yourCurrentSeat:"S7_1"},n.tweenUpdate=n.tweenUpdate.bind(n),n.moveToNewView=n.moveToNewView.bind(n),n.idToCoordinates=n.idToCoordinates.bind(n),n.introAnimation=n.introAnimation.bind(n),n.idToBookedSeat=n.idToBookedSeat.bind(n),n.fadeBookedSeatTextIn=n.fadeBookedSeatTextIn.bind(n),n.tweenOpacityUpdate=n.tweenOpacityUpdate.bind(n),n.tweenTextOpacityUpdate=n.tweenTextOpacityUpdate.bind(n),n.fadeBookedSeatTextOut=n.fadeBookedSeatTextOut.bind(n),n.fadeNavTextIn=n.fadeNavTextIn.bind(n),n.fadeNavTextOut=n.fadeNavTextOut.bind(n),n.tweenNavTextOpacityUpdate=n.tweenNavTextOpacityUpdate.bind(n),n.fadeCanvasTextIn=n.fadeCanvasTextIn.bind(n),n.fadeCanvasTextOut=n.fadeCanvasTextOut.bind(n),n.tweenCanvasTextUpdate=n.tweenCanvasTextUpdate.bind(n),n.seatAnimation=n.seatAnimation.bind(n),n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.introAnimation()}},{key:"idToBookedSeat",value:function(){var t=this.state.yourCurrentSeat,e=t.substring(t.lastIndexOf("S")+1,t.lastIndexOf("_")),n=t.substr(t.indexOf("_")+1);this.setState({bookedThisSeatText:"You booked seat number "+n+" from row "+e+". Enjoy your movie!"}),this.fadeBookedSeatTextIn()}},{key:"fadeCanvasTextIn",value:function(){var t=this;this.setState({canvasTextVisible:!0});var e={x:1},n=new TWEEN.Tween(this.canvasTextOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenCanvasTextUpdate),setTimeout(function(){t.fadeCanvasTextOut()},5001)}},{key:"fadeCanvasTextOut",value:function(){var t=this,e={x:0},n=new TWEEN.Tween(this.canvasTextOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenCanvasTextUpdate),setTimeout(function(){t.setState({canvasTextVisible:!1})},1001)}},{key:"tweenCanvasTextUpdate",value:function(){this.setState({canvasTextOpacity:this.canvasTextOpacity})}},{key:"fadeBookedSeatTextIn",value:function(){var t=this;this.setState({textVisible:!0});var e={x:1},n=new TWEEN.Tween(this.textOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenTextOpacityUpdate),setTimeout(function(){t.fadeBookedSeatTextOut()},6e3)}},{key:"fadeBookedSeatTextOut",value:function(){var t=this,e={x:0},n=new TWEEN.Tween(this.textOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenTextOpacityUpdate),setTimeout(function(){t.setState({textVisible:!1})},1001)}},{key:"tweenTextOpacityUpdate",value:function(){this.setState({textOpacity:this.textOpacity})}},{key:"fadeNavTextIn",value:function(){var t=this;this.setState({navTextVisible:!0});var e={x:1},n=new TWEEN.Tween(this.navTextOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.delay(1e4),n.start(),n.onUpdate(this.tweenNavTextOpacityUpdate),setTimeout(function(){t.fadeNavTextOut()},16e3)}},{key:"fadeNavTextOut",value:function(){var t=this,e={x:0},n=new TWEEN.Tween(this.navTextOpacity).to(e,1e3);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenNavTextOpacityUpdate),setTimeout(function(){t.setState({navTextVisible:!1})},1001)}},{key:"tweenNavTextOpacityUpdate",value:function(){this.setState({navTextOpacity:this.navTextOpacity})}},{key:"tweenOpacityUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"moveToNewView",value:function(t,e,n){var r=new TWEEN.Tween(this.currentCameraPos).to(t,e);r.easing(TWEEN.Easing.Cubic.InOut),r.delay(n),r.start(),r.onUpdate(this.tweenUpdate)}},{key:"tweenUpdate",value:function(){this.setState({currentCameraPos:this.currentCameraPos})}},{key:"introAnimation",value:function(){var t=this,e=document.querySelector("#movie");e.play(),this.moveToNewView(this.seatCoordinates.CV_intro_2,4e3,2e3),setTimeout(function(){t.moveToNewView(t.seatCoordinates.S7_1,3e3,0)},6e3),this.fadeNavTextIn()}},{key:"idToCoordinates",value:function(t){this.moveToNewView(this.seatCoordinates[t],4e3,0)}},{key:"seatAnimation",value:function(t){this.setState({yourCurrentSeat:t.target.id}),this.idToCoordinates(t.target.id),this.refs.cursor.revertBackToOriginal(),this.refs.seats.fadeOut()}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{id:"cameraEntity",position:[this.state.currentCameraPos.x,this.state.currentCameraPos.y,this.state.currentCameraPos.z]},u["default"].createElement(f["default"],{handleChangeSeatClick:this.props.handleChangeSeatClick,handleBookSeatClick:this.idToBookedSeat}),u["default"].createElement(v["default"],{ref:"seats",seatAnimation:this.seatAnimation}),u["default"].createElement(c.Entity,{visible:this.state.navTextVisible,material:{color:"white",transparent:!0,shader:"flat",opacity:this.state.navTextOpacity.x},position:[-5,-2,-8],size:.01,text:{text:"Look down to see the navigation"}}),u["default"].createElement(c.Entity,{visible:this.state.canvasTextVisible,material:{color:"white",transparent:!0,shader:"flat",opacity:this.state.canvasTextOpacity.x},position:[-5.5,-3.5,-8],size:.01,text:{text:"Click on a red button to change seat"}}),u["default"].createElement(c.Entity,{visible:this.state.textVisible,material:{color:"white",transparent:!0,shader:"flat",opacity:this.state.textOpacity.x},position:[-9,-4,-8],size:.01,text:{text:this.state.bookedThisSeatText}}),u["default"].createElement(c.Entity,{camera:"","universal-controls":"movementAcceleration: 200","touch-controls":"enabled: false","keyboard-controls":"enabled: true"},u["default"].createElement(p["default"],{ref:"cursor"})))}}]),e}(u["default"].Component);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.geometry_near={primitive:"ring",radiusInner:.014,radiusOuter:.036},n.position={x:0,y:0,z:-2.1},n.initialPos={x:0,y:0,z:-2.1},n.seatChangePos={x:0,y:0,z:-3},n.rotation={x:0,y:0,z:0},n.cursorAnimation=n.cursorAnimation.bind(n),n.cursorAnimation2=n.cursorAnimation2.bind(n),n.tweenRotationUpdate=n.tweenRotationUpdate.bind(n),n.changeColorToColor=n.changeColorToColor.bind(n),n.cursorPosScaleAnimation=n.cursorPosScaleAnimation.bind(n),n.tweenPosUpdate=n.tweenPosUpdate.bind(n),n.revertBackToOriginal=n.revertBackToOriginal.bind(n),n.changeColorToWhite=n.changeColorToWhite.bind(n),n.revertBackToOriginal2=n.revertBackToOriginal2.bind(n),n.cursorPosScaleAnimationBack=n.cursorPosScaleAnimationBack.bind(n),n.state={position:n.position,rotation:n.rotation,geometry:n.geometry_near,color:"#FFFFFF"},n}return a(e,t),s(e,[{key:"cursorAnimation",value:function(){var t={x:0,y:90,z:0},e=new TWEEN.Tween(this.rotation).to(t,300);e.delay(500),e.start(),e.onUpdate(this.tweenRotationUpdate),e.onComplete(this.changeColorToColor)}},{key:"changeColorToColor",
value:function(){this.setState({color:"#FFFFFF"}),this.cursorAnimation2()}},{key:"cursorAnimation2",value:function(){var t={x:0,y:0,z:0},e=new TWEEN.Tween(this.rotation).to(t,300);e.start(),e.onUpdate(this.tweenRotationUpdate),e.onComplete(this.cursorPosScaleAnimation)}},{key:"tweenRotationUpdate",value:function(){this.setState({rotation:this.rotation})}},{key:"cursorPosScaleAnimation",value:function(){var t=new TWEEN.Tween(this.position).to(this.seatChangePos,400);t.start(),t.onUpdate(this.tweenPosUpdate)}},{key:"tweenPosUpdate",value:function(){this.setState({position:this.position})}},{key:"revertBackToOriginal",value:function(){var t={x:0,y:90,z:0},e=new TWEEN.Tween(this.rotation).to(t,300);e.delay(500),e.start(),e.onUpdate(this.tweenRotationUpdate),e.onComplete(this.changeColorToWhite)}},{key:"changeColorToWhite",value:function(){this.setState({color:"#FFFFFF"}),this.revertBackToOriginal2()}},{key:"revertBackToOriginal2",value:function(){var t={x:0,y:0,z:0},e=new TWEEN.Tween(this.rotation).to(t,300);e.start(),e.onUpdate(this.tweenRotationUpdate),e.onComplete(this.cursorPosScaleAnimationBack)}},{key:"cursorPosScaleAnimationBack",value:function(){var t=new TWEEN.Tween(this.position).to(this.initialPos,400);t.start(),t.onUpdate(this.tweenPosUpdate)}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{cursor:"",geometry:this.state.geometry,material:{color:this.state.color,shader:"flat",opacity:.9,transparent:!0},position:[this.state.position.x,this.state.position.y,this.state.position.z],rotation:[this.state.rotation.x,this.state.rotation.y,this.state.rotation.z]},u["default"].createElement(c.Animation,{attribute:"scale",begin:"click",dur:"150",fill:"backwards",to:"0 0 0"}),u["default"].createElement(c.Animation,{begin:"click",git:!0,add:!0,easing:"ease-in",attribute:"scale",fill:"forwards",from:"0.2 0.2 0.2",to:"1 1 1",dur:"400"}))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=n(514),p=r(h),d=n(515),f=r(d),m=n(516),v=r(m),y=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.opacity={x:0},n.state={opacity:{x:0},navBackTextOpacity:{x:0},navBackTextVisible:!1},n.fadeIn=n.fadeIn.bind(n),n.fadeOut=n.fadeOut.bind(n),n.tweenUpdate=n.tweenUpdate.bind(n),n}return a(e,t),s(e,[{key:"fadeIn",value:function(){var t={x:1},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"fadeOut",value:function(){var t={x:0},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"tweenUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"render",value:function(){return u["default"].createElement(c.Entity,null,u["default"].createElement(p["default"],{Opacity:this.state.opacity.back,fadeIn:this.fadeIn,fadeOut:this.fadeOut}),u["default"].createElement(f["default"],{Opacity:this.state.opacity.bookseat,fadeIn:this.fadeIn,fadeOut:this.fadeOut,handleBookSeatClick:this.props.handleBookSeatClick}),u["default"].createElement(v["default"],{handleChangeSeatClick:this.props.handleChangeSeatClick,Opacity:this.state.opacity.x,fadeIn:this.fadeIn,fadeOut:this.fadeOut}))}}]),e}(u["default"].Component);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.opacity={x:0},n.navTextOpacity={x:0},n.state={opacity:{x:0},navTextVisible:!1},n.redirect=n.redirect.bind(n),n.fadeIn=n.fadeIn.bind(n),n.fadeOut=n.fadeOut.bind(n),n.tweenUpdate=n.tweenUpdate.bind(n),n.tweenTextOpacityUpdate=n.tweenTextOpacityUpdate.bind(n),n.fadeTextIn=n.fadeTextIn.bind(n),n.fadeTextOut=n.fadeTextOut.bind(n),n}return a(e,t),s(e,[{key:"redirect",value:function(){window.location="http://www.grandteatret.dk/"}},{key:"fadeIn",value:function(){var t={x:1},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"fadeOut",value:function(){var t={x:0},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"fadeTextIn",value:function(){this.setState({navTextVisible:!0});var t={x:1},e=new TWEEN.Tween(this.navTextOpacity).to(t,300);e.easing(TWEEN.Easing.Cubic.InOut),e.start(),e.onUpdate(this.tweenTextOpacityUpdate)}},{key:"fadeTextOut",value:function(){var t={x:0},e=new TWEEN.Tween(this.navTextOpacity).to(t,300);e.easing(TWEEN.Easing.Cubic.InOut),e.start(),e.onUpdate(this.tweenTextOpacityUpdate)}},{key:"tweenTextOpacityUpdate",value:function(){this.setState({navTextOpacity:this.navTextOpacity})}},{key:"tweenUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{position:[-1,-2,-1],rotation:[-40,45,0]},u["default"].createElement(c.Entity,{position:[0,.8,0]},u["default"].createElement(c.Entity,{visible:this.state.navTextVisible,material:{color:"white",shader:"flat",opacity:this.navTextOpacity.x},position:[-4.15,0,-6],size:.01,text:{text:"Go back to normal website"}})),u["default"].createElement(c.Entity,{onMouseEnter:this.fadeTextIn,onMouseLeave:this.fadeTextOut,onClick:this.redirect},u["default"].createElement("a-image",{src:"#back",width:"0.8",height:"0.5"},u["default"].createElement(c.Animation,{attribute:"width",from:"0.8",to:"1",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"width",from:"1",to:"0.8",dur:"250",begin:"mouseleave"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.5",to:"0.7",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.7",to:"0.5",dur:"250",begin:"mouseleave"}))))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.opacity={x:0},n.btnTextOpacity={x:0},n.state={opacity:{x:0},navTextVisible:!1,btnTextOpacity:{x:0}},n.fadeIn=n.fadeIn.bind(n),n.fadeOut=n.fadeOut.bind(n),n.tweenUpdate=n.tweenUpdate.bind(n),n.fadeTextIn=n.fadeTextIn.bind(n),n.fadeTextOut=n.fadeTextOut.bind(n),n.tweenTextOpacityUpdate=n.tweenTextOpacityUpdate.bind(n),n}return a(e,t),s(e,[{key:"fadeIn",value:function(){var t={x:1},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate),this.fadeTextIn(300)}},{key:"fadeOut",value:function(){var t={x:0},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"tweenUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"fadeTextIn",value:function(){this.setState({navTextVisible:!0});var t={x:1},e=new TWEEN.Tween(this.btnTextOpacity).to(t,300);e.easing(TWEEN.Easing.Cubic.InOut),e.start(),e.onUpdate(this.tweenTextOpacityUpdate)}},{key:"fadeTextOut",value:function(){var t=this,e={x:0},n=new TWEEN.Tween(this.btnTextOpacity).to(e,300);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenTextOpacityUpdate),setTimeout(function(){t.setState({navTextVisible:!1})},400)}},{key:"tweenTextOpacityUpdate",value:function(){this.setState({navTextOpacity:this.btnTextOpacity})}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{position:[0,-2,-1.4],rotation:[-40,0,0]},u["default"].createElement(c.Entity,{position:[0,.8,.1]},u["default"].createElement(c.Entity,{visible:this.state.navTextVisible,material:{color:"white",transparent:!0,shader:"flat",opacity:this.btnTextOpacity.x},position:[-2.2,0,-6],size:.01,text:{text:"Book this seat"}})),u["default"].createElement(c.Entity,{onMouseEnter:this.fadeTextIn,onMouseLeave:this.fadeTextOut,onClick:this.props.handleBookSeatClick},u["default"].createElement("a-image",{src:"#book-seat",width:"0.8",height:"0.5"},u["default"].createElement(c.Animation,{attribute:"width",from:"0.8",to:"1",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"width",from:"1",to:"0.8",dur:"250",begin:"mouseleave"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.5",to:"0.7",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.7",to:"0.5",dur:"250",begin:"mouseleave"}))))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.opacity={x:0},n.navTextOpacity={x:0},n.state={opacity:{x:0},navTextVisible:!1},n.fadeIn=n.fadeIn.bind(n),n.fadeOut=n.fadeOut.bind(n),n.tweenUpdate=n.tweenUpdate.bind(n),n.fadeTextIn=n.fadeTextIn.bind(n),n.fadeTextOut=n.fadeTextOut.bind(n),n.tweenTextOpacityUpdate=n.tweenTextOpacityUpdate.bind(n),n}return a(e,t),s(e,[{key:"fadeIn",value:function(){var t={x:1},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"fadeOut",value:function(){var t={x:0},e=new TWEEN.Tween(this.opacity).to(t,300);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"tweenUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"fadeTextIn",value:function(){this.setState({navTextVisible:!0});var t={x:1},e=new TWEEN.Tween(this.navTextOpacity).to(t,300);e.easing(TWEEN.Easing.Cubic.InOut),e.start(),e.onUpdate(this.tweenTextOpacityUpdate)}},{key:"fadeTextOut",value:function(){var t=this,e={x:0},n=new TWEEN.Tween(this.navTextOpacity).to(e,300);n.easing(TWEEN.Easing.Cubic.InOut),n.start(),n.onUpdate(this.tweenTextOpacityUpdate),setTimeout(function(){t.setState({navTextVisible:!1})},400)}},{key:"tweenTextOpacityUpdate",value:function(){this.setState({navTextOpacity:this.navTextOpacity})}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{position:[1,-2,-1],rotation:[-40,-45,0]},u["default"].createElement(c.Entity,{position:[2.14,.8,0]},u["default"].createElement(c.Entity,{visible:this.state.navTextVisible,material:{color:"white",transparent:!0,shader:"flat",opacity:this.navTextOpacity.x},position:[-4.18,0,-6],size:.01,text:{text:"Change seat"}})),u["default"].createElement(c.Entity,{onMouseEnter:this.fadeTextIn,onMouseLeave:this.fadeTextOut,onClick:this.props.handleChangeSeatClick},u["default"].createElement("a-image",{src:"#change-seat",width:"0.8",height:"0.5"},u["default"].createElement(c.Animation,{attribute:"width",from:"0.8",to:"1",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"width",from:"1",to:"0.8",dur:"250",begin:"mouseleave"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.5",to:"0.7",dur:"250",begin:"mouseenter"}),u["default"].createElement(c.Animation,{attribute:"height",from:"0.7",to:"0.5",dur:"250",begin:"mouseleave"}))))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=n(518),p=r(h),d=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.opacity={x:0},n.Z_Axis=-3,n.row_1=2,n.row_2=1.85,n.row_3=1.7,n.row_4=1.55,n.row_5=1.4,n.row_6=1.25,n.row_7=1.1,n.row_8=.95,n.row_9=.8,n.row_10=.65,n.row_11=.5,n.row_12=.35,n.row_13=.2,n.row_14=.05,n.row_15=-.1,n.row_16=-.25,n.row_17=-.4,n.x_1=0,n.x_2=.25,n.x_3=-.25,n.x_4=.5,n.x_5=-.5,n.x_6=.74,n.x_7=-.75,n.x_8=1,n.x_9=-1,n.x_10=1.25,n.x_11=-1.25,n.x_12=1.5,n.x_13=-1.5,n.x_14=1.75,n.x_15=-1.75,n.x_16=2,n.x_17=-2,n.x_18=2.25,n.x_19=.125,n.x_20=.375,n.x_21=-.125,n.x_22=.625,n.x_23=-.375,n.x_24=.875,n.x_25=-.625,n.x_26=1.125,n.x_27=-.875,n.x_28=-1.125,n.x_29=1.375,n.x_30=-1.375,n.x_31=1.625,n.x_32=-1.625,n.x_33=1.875,n.x_34=-1.875,n.x_35=2.125,n.x_36=-2.125,n.x_37=2.375,n.x_38=-2.375,n.x_39=2.625,n.x_40=-2.625,n.x_41=2.875,n.seatButtonCoordinates=[[{id:"S1_1"},{pos:[n.x_1,n.row_1,n.Z_Axis]}],[{id:"S1_2"},{pos:[n.x_2,n.row_1,n.Z_Axis]}],[{id:"S1_3"},{pos:[n.x_3,n.row_1,n.Z_Axis]}],[{id:"S1_4"},{pos:[n.x_4,n.row_1,n.Z_Axis]}],[{id:"S1_5"},{pos:[n.x_5,n.row_1,n.Z_Axis]}],[{id:"S1_6"},{pos:[n.x_6,n.row_1,n.Z_Axis]}],[{id:"S1_7"},{pos:[n.x_7,n.row_1,n.Z_Axis]}],[{id:"S1_8"},{pos:[n.x_8,n.row_1,n.Z_Axis]}],[{id:"S1_9"},{pos:[n.x_9,n.row_1,n.Z_Axis]}],[{id:"S1_10"},{pos:[n.x_10,n.row_1,n.Z_Axis]}],[{id:"S1_11"},{pos:[n.x_11,n.row_1,n.Z_Axis]}],[{id:"S1_12"},{pos:[n.x_12,n.row_1,n.Z_Axis]}],[{id:"S1_13"},{pos:[n.x_13,n.row_1,n.Z_Axis]}],[{id:"S1_14"},{pos:[n.x_14,n.row_1,n.Z_Axis]}],[{id:"S1_15"},{pos:[n.x_15,n.row_1,n.Z_Axis]}],[{id:"S1_16"},{pos:[n.x_16,n.row_1,n.Z_Axis]}],[{id:"S1_17"},{pos:[n.x_17,n.row_1,n.Z_Axis]}],[{id:"S1_18"},{pos:[n.x_18,n.row_1,n.Z_Axis]}],[{id:"S2_1"},{pos:[n.x_19,n.row_2,n.Z_Axis]}],[{id:"S2_2"},{pos:[n.x_20,n.row_2,n.Z_Axis]}],[{id:"S2_3"},{pos:[n.x_21,n.row_2,n.Z_Axis]}],[{id:"S2_4"},{pos:[n.x_22,n.row_2,n.Z_Axis]}],[{id:"S2_5"},{pos:[n.x_23,n.row_2,n.Z_Axis]}],[{id:"S2_6"},{pos:[n.x_24,n.row_2,n.Z_Axis]}],[{id:"S2_7"},{pos:[n.x_25,n.row_2,n.Z_Axis]}],[{id:"S2_8"},{pos:[n.x_26,n.row_2,n.Z_Axis]}],[{id:"S2_9"},{pos:[n.x_27,n.row_2,n.Z_Axis]}],[{id:"S2_10"},{pos:[n.x_11,n.row_2,n.Z_Axis]}],[{id:"S2_11"},{pos:[n.x_12,n.row_2,n.Z_Axis]}],[{id:"S2_12"},{pos:[n.x_13,n.row_2,n.Z_Axis]}],[{id:"S2_13"},{pos:[n.x_14,n.row_2,n.Z_Axis]}],[{id:"S2_14"},{pos:[n.x_15,n.row_2,n.Z_Axis]}],[{id:"S2_15"},{pos:[n.x_16,n.row_2,n.Z_Axis]}],[{id:"S2_16"},{pos:[n.x_17,n.row_2,n.Z_Axis]}],[{id:"S2_17"},{pos:[n.x_18,n.row_2,n.Z_Axis]}],[{id:"S3_1"},{pos:[n.x_1,n.row_3,n.Z_Axis]}],[{id:"S3_2"},{pos:[n.x_2,n.row_3,n.Z_Axis]}],[{id:"S3_3"},{pos:[n.x_3,n.row_3,n.Z_Axis]}],[{id:"S3_4"},{pos:[n.x_4,n.row_3,n.Z_Axis]}],[{id:"S3_5"},{pos:[n.x_5,n.row_3,n.Z_Axis]}],[{id:"S3_6"},{pos:[n.x_6,n.row_3,n.Z_Axis]}],[{id:"S3_7"},{pos:[n.x_7,n.row_3,n.Z_Axis]}],[{id:"S3_8"},{pos:[n.x_8,n.row_3,n.Z_Axis]}],[{id:"S3_9"},{pos:[n.x_9,n.row_3,n.Z_Axis]}],[{id:"S3_10"},{pos:[n.x_10,n.row_3,n.Z_Axis]}],[{id:"S3_11"},{pos:[n.x_11,n.row_3,n.Z_Axis]}],[{id:"S3_12"},{pos:[n.x_12,n.row_3,n.Z_Axis]}],[{id:"S3_13"},{pos:[n.x_13,n.row_3,n.Z_Axis]}],[{id:"S3_14"},{pos:[n.x_14,n.row_3,n.Z_Axis]}],[{id:"S3_15"},{pos:[n.x_15,n.row_3,n.Z_Axis]}],[{id:"S3_16"},{pos:[n.x_16,n.row_3,n.Z_Axis]}],[{id:"S3_17"},{pos:[n.x_17,n.row_3,n.Z_Axis]}],[{id:"S3_18"},{pos:[n.x_18,n.row_3,n.Z_Axis]}],[{id:"S4_1"},{pos:[n.x_19,n.row_4,n.Z_Axis]}],[{id:"S4_2"},{pos:[n.x_20,n.row_4,n.Z_Axis]}],[{id:"S4_3"},{pos:[n.x_21,n.row_4,n.Z_Axis]}],[{id:"S4_4"},{pos:[n.x_22,n.row_4,n.Z_Axis]}],[{id:"S4_5"},{pos:[n.x_23,n.row_4,n.Z_Axis]}],[{id:"S4_6"},{pos:[n.x_24,n.row_4,n.Z_Axis]}],[{id:"S4_7"},{pos:[n.x_25,n.row_4,n.Z_Axis]}],[{id:"S4_8"},{pos:[n.x_26,n.row_4,n.Z_Axis]}],[{id:"S4_9"},{pos:[n.x_27,n.row_4,n.Z_Axis]}],[{id:"S4_10"},{pos:[n.x_11,n.row_4,n.Z_Axis]}],[{id:"S4_11"},{pos:[n.x_12,n.row_4,n.Z_Axis]}],[{id:"S4_12"},{pos:[n.x_13,n.row_4,n.Z_Axis]}],[{id:"S4_13"},{pos:[n.x_14,n.row_4,n.Z_Axis]}],[{id:"S4_14"},{pos:[n.x_15,n.row_4,n.Z_Axis]}],[{id:"S4_15"},{pos:[n.x_16,n.row_4,n.Z_Axis]}],[{id:"S4_16"},{pos:[n.x_17,n.row_4,n.Z_Axis]}],[{id:"S4_17"},{pos:[n.x_18,n.row_4,n.Z_Axis]}],[{id:"S5_1"},{pos:[n.x_1,n.row_5,n.Z_Axis]}],[{id:"S5_2"},{pos:[n.x_2,n.row_5,n.Z_Axis]}],[{id:"S5_3"},{pos:[n.x_3,n.row_5,n.Z_Axis]}],[{id:"S5_4"},{pos:[n.x_4,n.row_5,n.Z_Axis]}],[{id:"S5_5"},{pos:[n.x_5,n.row_5,n.Z_Axis]}],[{id:"S5_6"},{pos:[n.x_6,n.row_5,n.Z_Axis]}],[{id:"S5_7"},{pos:[n.x_7,n.row_5,n.Z_Axis]}],[{id:"S5_8"},{pos:[n.x_8,n.row_5,n.Z_Axis]}],[{id:"S5_9"},{pos:[n.x_9,n.row_5,n.Z_Axis]}],[{id:"S5_10"},{pos:[n.x_10,n.row_5,n.Z_Axis]}],[{id:"S5_11"},{pos:[n.x_11,n.row_5,n.Z_Axis]}],[{id:"S5_12"},{pos:[n.x_12,n.row_5,n.Z_Axis]}],[{id:"S5_13"},{pos:[n.x_13,n.row_5,n.Z_Axis]}],[{id:"S5_14"},{pos:[n.x_14,n.row_5,n.Z_Axis]}],[{id:"S5_15"},{pos:[n.x_15,n.row_5,n.Z_Axis]}],[{id:"S5_16"},{pos:[n.x_16,n.row_5,n.Z_Axis]}],[{id:"S5_17"},{pos:[n.x_17,n.row_5,n.Z_Axis]}],[{id:"S5_18"},{pos:[n.x_18,n.row_5,n.Z_Axis]}],[{id:"S6_1"},{pos:[n.x_19,n.row_6,n.Z_Axis]}],[{id:"S6_2"},{pos:[n.x_20,n.row_6,n.Z_Axis]}],[{id:"S6_3"},{pos:[n.x_21,n.row_6,n.Z_Axis]}],[{id:"S6_4"},{pos:[n.x_22,n.row_6,n.Z_Axis]}],[{id:"S6_5"},{pos:[n.x_23,n.row_6,n.Z_Axis]}],[{id:"S6_6"},{pos:[n.x_24,n.row_6,n.Z_Axis]}],[{id:"S6_7"},{pos:[n.x_25,n.row_6,n.Z_Axis]}],[{id:"S6_8"},{pos:[n.x_26,n.row_6,n.Z_Axis]}],[{id:"S6_9"},{pos:[n.x_27,n.row_6,n.Z_Axis]}],[{id:"S6_10"},{pos:[n.x_11,n.row_6,n.Z_Axis]}],[{id:"S6_11"},{pos:[n.x_12,n.row_6,n.Z_Axis]}],[{id:"S6_12"},{pos:[n.x_13,n.row_6,n.Z_Axis]}],[{id:"S6_13"},{pos:[n.x_14,n.row_6,n.Z_Axis]}],[{id:"S6_14"},{pos:[n.x_15,n.row_6,n.Z_Axis]}],[{id:"S6_15"},{pos:[n.x_16,n.row_6,n.Z_Axis]}],[{id:"S6_16"},{pos:[n.x_17,n.row_6,n.Z_Axis]}],[{id:"S6_17"},{pos:[n.x_18,n.row_6,n.Z_Axis]}],[{id:"S7_1"},{pos:[n.x_1,n.row_7,n.Z_Axis]}],[{id:"S7_2"},{pos:[n.x_2,n.row_7,n.Z_Axis]}],[{id:"S7_3"},{pos:[n.x_3,n.row_7,n.Z_Axis]}],[{id:"S7_4"},{pos:[n.x_4,n.row_7,n.Z_Axis]}],[{id:"S7_5"},{pos:[n.x_5,n.row_7,n.Z_Axis]}],[{id:"S7_6"},{pos:[n.x_6,n.row_7,n.Z_Axis]}],[{id:"S7_7"},{pos:[n.x_7,n.row_7,n.Z_Axis]}],[{id:"S7_8"},{pos:[n.x_8,n.row_7,n.Z_Axis]}],[{id:"S7_9"},{pos:[n.x_9,n.row_7,n.Z_Axis]}],[{id:"S7_10"},{pos:[n.x_10,n.row_7,n.Z_Axis]}],[{id:"S7_11"},{pos:[n.x_11,n.row_7,n.Z_Axis]}],[{id:"S7_12"},{pos:[n.x_12,n.row_7,n.Z_Axis]}],[{id:"S7_13"},{pos:[n.x_13,n.row_7,n.Z_Axis]}],[{id:"S7_14"},{pos:[n.x_14,n.row_7,n.Z_Axis]}],[{id:"S7_15"},{pos:[n.x_15,n.row_7,n.Z_Axis]}],[{id:"S7_16"},{pos:[n.x_16,n.row_7,n.Z_Axis]}],[{id:"S7_17"},{pos:[n.x_17,n.row_7,n.Z_Axis]}],[{id:"S7_18"},{pos:[n.x_18,n.row_7,n.Z_Axis]}],[{id:"S8_1"},{pos:[n.x_23,n.row_8,n.Z_Axis]}],[{id:"S8_2"},{pos:[n.x_22,n.row_8,n.Z_Axis]}],[{id:"S8_3"},{pos:[n.x_25,n.row_8,n.Z_Axis]}],[{id:"S8_4"},{pos:[n.x_24,n.row_8,n.Z_Axis]}],[{id:"S8_5"},{pos:[n.x_27,n.row_8,n.Z_Axis]}],[{id:"S8_6"},{pos:[n.x_26,n.row_8,n.Z_Axis]}],[{id:"S8_7"},{pos:[n.x_28,n.row_8,n.Z_Axis]}],[{id:"S8_8"},{pos:[n.x_29,n.row_8,n.Z_Axis]}],[{id:"S8_9"},{pos:[n.x_30,n.row_8,n.Z_Axis]}],[{id:"S8_10"},{pos:[n.x_31,n.row_8,n.Z_Axis]}],[{id:"S8_11"},{pos:[n.x_32,n.row_8,n.Z_Axis]}],[{id:"S8_12"},{pos:[n.x_33,n.row_8,n.Z_Axis]}],[{id:"S8_13"},{pos:[n.x_34,n.row_8,n.Z_Axis]}],[{id:"S8_14"},{pos:[n.x_35,n.row_8,n.Z_Axis]}],[{id:"S8_15"},{pos:[n.x_36,n.row_8,n.Z_Axis]}],[{id:"S8_16"},{pos:[n.x_37,n.row_8,n.Z_Axis]}],[{id:"S8_17"},{pos:[n.x_38,n.row_8,n.Z_Axis]}],[{id:"S8_18"},{pos:[n.x_39,n.row_8,n.Z_Axis]}],[{id:"S8_19"},{pos:[n.x_40,n.row_8,n.Z_Axis]}],[{id:"S8_20"},{pos:[n.x_41,n.row_8,n.Z_Axis]}],[{id:"S9_1"},{pos:[n.x_23,n.row_9,n.Z_Axis]}],[{id:"S9_2"},{pos:[n.x_22,n.row_9,n.Z_Axis]}],[{id:"S9_3"},{pos:[n.x_25,n.row_9,n.Z_Axis]}],[{id:"S9_4"},{pos:[n.x_24,n.row_9,n.Z_Axis]}],[{id:"S9_5"},{pos:[n.x_27,n.row_9,n.Z_Axis]}],[{id:"S9_6"},{pos:[n.x_26,n.row_9,n.Z_Axis]}],[{id:"S9_7"},{pos:[n.x_28,n.row_9,n.Z_Axis]}],[{id:"S9_8"},{pos:[n.x_29,n.row_9,n.Z_Axis]}],[{id:"S9_9"},{pos:[n.x_30,n.row_9,n.Z_Axis]}],[{id:"S9_10"},{pos:[n.x_31,n.row_9,n.Z_Axis]}],[{id:"S9_11"},{pos:[n.x_32,n.row_9,n.Z_Axis]}],[{id:"S9_12"},{pos:[n.x_33,n.row_9,n.Z_Axis]}],[{id:"S9_13"},{pos:[n.x_34,n.row_9,n.Z_Axis]}],[{id:"S9_14"},{pos:[n.x_35,n.row_9,n.Z_Axis]}],[{id:"S9_15"},{pos:[n.x_36,n.row_9,n.Z_Axis]}],[{id:"S9_16"},{pos:[n.x_37,n.row_9,n.Z_Axis]}],[{id:"S9_17"},{pos:[n.x_38,n.row_9,n.Z_Axis]}],[{id:"S9_18"},{pos:[n.x_39,n.row_9,n.Z_Axis]}],[{id:"S9_19"},{pos:[n.x_40,n.row_9,n.Z_Axis]}],[{id:"S9_20"},{pos:[n.x_41,n.row_9,n.Z_Axis]}],[{id:"S10_1"},{pos:[n.x_23,n.row_10,n.Z_Axis]}],[{id:"S10_2"},{pos:[n.x_22,n.row_10,n.Z_Axis]}],[{id:"S10_3"},{pos:[n.x_25,n.row_10,n.Z_Axis]}],[{id:"S10_4"},{pos:[n.x_24,n.row_10,n.Z_Axis]}],[{id:"S10_5"},{pos:[n.x_27,n.row_10,n.Z_Axis]}],[{id:"S10_6"},{pos:[n.x_26,n.row_10,n.Z_Axis]}],[{id:"S10_7"},{pos:[n.x_28,n.row_10,n.Z_Axis]}],[{id:"S10_8"},{pos:[n.x_29,n.row_10,n.Z_Axis]}],[{id:"S10_9"},{pos:[n.x_30,n.row_10,n.Z_Axis]}],[{id:"S10_10"},{pos:[n.x_31,n.row_10,n.Z_Axis]}],[{id:"S10_11"},{pos:[n.x_32,n.row_10,n.Z_Axis]}],[{id:"S10_12"},{pos:[n.x_33,n.row_10,n.Z_Axis]}],[{id:"S10_13"},{pos:[n.x_34,n.row_10,n.Z_Axis]}],[{id:"S10_14"},{pos:[n.x_35,n.row_10,n.Z_Axis]}],[{id:"S10_15"},{pos:[n.x_36,n.row_10,n.Z_Axis]}],[{id:"S10_16"},{pos:[n.x_37,n.row_10,n.Z_Axis]}],[{id:"S10_17"},{pos:[n.x_38,n.row_10,n.Z_Axis]}],[{id:"S10_18"},{pos:[n.x_39,n.row_10,n.Z_Axis]}],[{id:"S10_19"},{pos:[n.x_40,n.row_10,n.Z_Axis]}],[{id:"S10_20"},{pos:[n.x_41,n.row_10,n.Z_Axis]}],[{id:"S11_1"},{pos:[n.x_23,n.row_11,n.Z_Axis]}],[{id:"S11_2"},{pos:[n.x_22,n.row_11,n.Z_Axis]}],[{id:"S11_3"},{pos:[n.x_25,n.row_11,n.Z_Axis]}],[{id:"S11_4"},{pos:[n.x_24,n.row_11,n.Z_Axis]}],[{id:"S11_5"},{pos:[n.x_27,n.row_11,n.Z_Axis]}],[{id:"S11_6"},{pos:[n.x_26,n.row_11,n.Z_Axis]}],[{id:"S11_7"},{pos:[n.x_28,n.row_11,n.Z_Axis]}],[{id:"S11_8"},{pos:[n.x_29,n.row_11,n.Z_Axis]}],[{id:"S11_9"},{pos:[n.x_30,n.row_11,n.Z_Axis]}],[{id:"S11_10"},{pos:[n.x_31,n.row_11,n.Z_Axis]}],[{id:"S11_11"},{pos:[n.x_32,n.row_11,n.Z_Axis]}],[{id:"S11_12"},{pos:[n.x_33,n.row_11,n.Z_Axis]}],[{id:"S11_13"},{pos:[n.x_34,n.row_11,n.Z_Axis]}],[{id:"S11_14"},{pos:[n.x_35,n.row_11,n.Z_Axis]}],[{id:"S11_15"},{pos:[n.x_36,n.row_11,n.Z_Axis]}],[{id:"S11_16"},{pos:[n.x_37,n.row_11,n.Z_Axis]}],[{id:"S11_17"},{pos:[n.x_38,n.row_11,n.Z_Axis]}],[{id:"S11_18"},{pos:[n.x_39,n.row_11,n.Z_Axis]}],[{id:"S11_19"},{pos:[n.x_40,n.row_11,n.Z_Axis]}],[{id:"S11_20"},{pos:[n.x_41,n.row_11,n.Z_Axis]}],[{id:"S12_1"},{pos:[n.x_23,n.row_12,n.Z_Axis]}],[{id:"S12_2"},{pos:[n.x_22,n.row_12,n.Z_Axis]}],[{id:"S12_3"},{pos:[n.x_25,n.row_12,n.Z_Axis]}],[{id:"S12_4"},{pos:[n.x_24,n.row_12,n.Z_Axis]}],[{id:"S12_5"},{pos:[n.x_27,n.row_12,n.Z_Axis]}],[{id:"S12_6"},{pos:[n.x_26,n.row_12,n.Z_Axis]}],[{id:"S12_7"},{pos:[n.x_28,n.row_12,n.Z_Axis]}],[{id:"S12_8"},{pos:[n.x_29,n.row_12,n.Z_Axis]}],[{id:"S12_9"},{pos:[n.x_30,n.row_12,n.Z_Axis]}],[{id:"S12_10"},{pos:[n.x_31,n.row_12,n.Z_Axis]}],[{id:"S12_11"},{pos:[n.x_32,n.row_12,n.Z_Axis]}],[{id:"S12_12"},{pos:[n.x_33,n.row_12,n.Z_Axis]}],[{id:"S12_13"},{pos:[n.x_34,n.row_12,n.Z_Axis]}],[{id:"S12_14"},{pos:[n.x_35,n.row_12,n.Z_Axis]}],[{id:"S12_15"},{pos:[n.x_36,n.row_12,n.Z_Axis]}],[{id:"S12_16"},{pos:[n.x_37,n.row_12,n.Z_Axis]}],[{id:"S12_17"},{pos:[n.x_38,n.row_12,n.Z_Axis]}],[{id:"S12_18"},{pos:[n.x_39,n.row_12,n.Z_Axis]}],[{id:"S12_19"},{pos:[n.x_40,n.row_12,n.Z_Axis]}],[{id:"S12_20"},{pos:[n.x_41,n.row_12,n.Z_Axis]}],[{id:"S13_1"},{pos:[n.x_27,n.row_13,n.Z_Axis]}],[{id:"S13_2"},{pos:[n.x_26,n.row_13,n.Z_Axis]}],[{id:"S13_3"},{pos:[n.x_28,n.row_13,n.Z_Axis]}],[{id:"S13_4"},{pos:[n.x_29,n.row_13,n.Z_Axis]}],[{id:"S13_5"},{pos:[n.x_30,n.row_13,n.Z_Axis]}],[{id:"S13_6"},{pos:[n.x_31,n.row_13,n.Z_Axis]}],[{id:"S13_7"},{pos:[n.x_32,n.row_13,n.Z_Axis]}],[{id:"S13_8"},{pos:[n.x_33,n.row_13,n.Z_Axis]}],[{id:"S13_9"},{pos:[n.x_34,n.row_13,n.Z_Axis]}],[{id:"S13_10"},{pos:[n.x_35,n.row_13,n.Z_Axis]}],[{id:"S13_11"},{pos:[n.x_36,n.row_13,n.Z_Axis]}],[{id:"S13_12"},{pos:[n.x_37,n.row_13,n.Z_Axis]}],[{id:"S13_13"},{pos:[n.x_38,n.row_13,n.Z_Axis]}],[{id:"S13_14"},{pos:[n.x_39,n.row_13,n.Z_Axis]}],[{id:"S13_15"},{pos:[n.x_40,n.row_13,n.Z_Axis]}],[{id:"S13_16"},{pos:[n.x_41,n.row_13,n.Z_Axis]}],[{id:"S14_1"},{pos:[n.x_27,n.row_14,n.Z_Axis]}],[{id:"S14_2"},{pos:[n.x_26,n.row_14,n.Z_Axis]}],[{id:"S14_3"},{pos:[n.x_28,n.row_14,n.Z_Axis]}],[{id:"S14_4"},{pos:[n.x_29,n.row_14,n.Z_Axis]}],[{id:"S14_5"},{pos:[n.x_30,n.row_14,n.Z_Axis]}],[{id:"S14_6"},{pos:[n.x_31,n.row_14,n.Z_Axis]}],[{id:"S14_7"},{pos:[n.x_32,n.row_14,n.Z_Axis]}],[{id:"S14_8"},{pos:[n.x_33,n.row_14,n.Z_Axis]}],[{id:"S14_9"},{pos:[n.x_34,n.row_14,n.Z_Axis]}],[{id:"S14_10"},{pos:[n.x_35,n.row_14,n.Z_Axis]}],[{id:"S14_11"},{pos:[n.x_36,n.row_14,n.Z_Axis]}],[{id:"S14_12"},{pos:[n.x_37,n.row_14,n.Z_Axis]}],[{id:"S14_13"},{pos:[n.x_38,n.row_14,n.Z_Axis]}],[{id:"S14_14"},{pos:[n.x_39,n.row_14,n.Z_Axis]}],[{id:"S14_15"},{pos:[n.x_40,n.row_14,n.Z_Axis]}],[{id:"S14_16"},{pos:[n.x_41,n.row_14,n.Z_Axis]}],[{id:"S15_1"},{pos:[n.x_27,n.row_15,n.Z_Axis]}],[{id:"S15_2"},{pos:[n.x_26,n.row_15,n.Z_Axis]}],[{id:"S15_3"},{pos:[n.x_28,n.row_15,n.Z_Axis]}],[{id:"S15_4"},{pos:[n.x_29,n.row_15,n.Z_Axis]}],[{id:"S15_5"},{pos:[n.x_30,n.row_15,n.Z_Axis]}],[{id:"S15_6"},{pos:[n.x_31,n.row_15,n.Z_Axis]}],[{id:"S15_7"},{pos:[n.x_32,n.row_15,n.Z_Axis]}],[{id:"S15_8"},{pos:[n.x_33,n.row_15,n.Z_Axis]}],[{id:"S15_9"},{pos:[n.x_34,n.row_15,n.Z_Axis]}],[{id:"S15_10"},{pos:[n.x_35,n.row_15,n.Z_Axis]}],[{id:"S15_11"},{pos:[n.x_36,n.row_15,n.Z_Axis]}],[{id:"S15_12"},{pos:[n.x_37,n.row_15,n.Z_Axis]}],[{id:"S15_13"},{pos:[n.x_38,n.row_15,n.Z_Axis]}],[{id:"S15_14"},{pos:[n.x_39,n.row_15,n.Z_Axis]}],[{id:"S15_15"},{pos:[n.x_40,n.row_15,n.Z_Axis]}],[{id:"S15_16"},{pos:[n.x_41,n.row_15,n.Z_Axis]}],[{id:"S16_1"},{pos:[n.x_25,n.row_16,n.Z_Axis]}],[{id:"S16_2"},{pos:[n.x_24,n.row_16,n.Z_Axis]}],[{id:"S16_3"},{pos:[n.x_27,n.row_16,n.Z_Axis]}],[{id:"S16_4"},{pos:[n.x_26,n.row_16,n.Z_Axis]}],[{id:"S16_5"},{pos:[n.x_28,n.row_16,n.Z_Axis]}],[{id:"S16_6"},{pos:[n.x_29,n.row_16,n.Z_Axis]}],[{id:"S16_7"},{pos:[n.x_30,n.row_16,n.Z_Axis]}],[{id:"S16_8"},{pos:[n.x_31,n.row_16,n.Z_Axis]}],[{id:"S16_9"},{pos:[n.x_32,n.row_16,n.Z_Axis]}],[{id:"S16_10"},{pos:[n.x_33,n.row_16,n.Z_Axis]}],[{id:"S16_11"},{pos:[n.x_34,n.row_16,n.Z_Axis]}],[{id:"S16_12"},{pos:[n.x_35,n.row_16,n.Z_Axis]}],[{id:"S16_13"},{pos:[n.x_36,n.row_16,n.Z_Axis]}],[{id:"S16_14"},{pos:[n.x_37,n.row_16,n.Z_Axis]}],[{id:"S17_1"},{pos:[n.x_23,n.row_17,n.Z_Axis]}],[{id:"S17_2"},{pos:[n.x_22,n.row_17,n.Z_Axis]}],[{id:"S17_3"},{pos:[n.x_25,n.row_17,n.Z_Axis]}],[{id:"S17_4"},{pos:[n.x_24,n.row_17,n.Z_Axis]}],[{id:"S17_5"},{pos:[n.x_27,n.row_17,n.Z_Axis]}],[{id:"S17_6"},{pos:[n.x_26,n.row_17,n.Z_Axis]}],[{id:"S17_7"},{pos:[n.x_28,n.row_17,n.Z_Axis]}],[{id:"S17_8"},{pos:[n.x_29,n.row_17,n.Z_Axis]}],[{id:"S17_9"},{pos:[n.x_30,n.row_17,n.Z_Axis]}],[{id:"S17_10"},{pos:[n.x_31,n.row_17,n.Z_Axis]}],[{id:"S17_11"},{pos:[n.x_32,n.row_17,n.Z_Axis]}],[{id:"S17_12"},{pos:[n.x_33,n.row_17,n.Z_Axis]}],[{id:"S17_13"},{pos:[n.x_34,n.row_17,n.Z_Axis]}],[{id:"S17_14"},{pos:[n.x_35,n.row_17,n.Z_Axis]}],[{id:"S17_15"},{pos:[n.x_36,n.row_17,n.Z_Axis]}],[{id:"S17_16"},{pos:[n.x_37,n.row_17,n.Z_Axis]}]],n.red="#972323",n.state={opacity:n.opacity,visible:!1},n.fadeIn=n.fadeIn.bind(n),n.tweenUpdate=n.tweenUpdate.bind(n),n.fadeOut=n.fadeOut.bind(n),n}return a(e,t),s(e,[{key:"fadeIn",value:function(){this.setState({visible:!0});var t={x:1},e=new TWEEN.Tween(this.opacity).to(t,500);e.start(),e.onUpdate(this.tweenUpdate)}},{key:"fadeOut",value:function(){var t=this;setTimeout(function(){t.setState({visible:!1})},501);var e={x:0},n=new TWEEN.Tween(this.opacity).to(e,500);n.start(),n.onUpdate(this.tweenUpdate)}},{key:"tweenUpdate",value:function(){this.setState({opacity:this.opacity})}},{key:"render",value:function(){return u["default"].createElement(c.Entity,{visible:this.state.visible},this.seatButtonCoordinates.map(function(t){return u["default"].createElement(p["default"],{componentId:t[0].id,seatPos:t[1].pos,key:t[0].id,Opacity:this.state.opacity.x,seatAnimation:this.props.seatAnimation,buttonColor:this.red})},this))}}]),e}(u["default"].Component);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,
configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.state={opacity:1},n}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement(c.Entity,{position:this.props.seatPos},u["default"].createElement(c.Entity,{visible:!0,material:{color:this.props.buttonColor,transparent:!0,shader:"flat",opacity:this.props.Opacity},geometry:{primitive:"plane",width:.2,height:.1},id:this.props.componentId,opacity:this.props.Opacity,onClick:this.props.seatAnimation}))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(303),l=r(c),u=function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){return l["default"].createElement("a-assets",null,l["default"].createElement("a-asset-item",{id:"cinema-obj",src:"assets/models/grand-teatret.obj"}),l["default"].createElement("a-asset-item",{id:"cinema-mtl",src:"assets/models/grand-teatret.mtl"}),l["default"].createElement("a-asset-item",{id:"cube-obj",src:"assets/models/unwrap_test.obj"}),l["default"].createElement("a-asset-item",{id:"cube-mtl",src:"assets/models/unwrap_test.mtl"}),l["default"].createElement("img",{id:"back",src:"assets/img/back-icon.png"}),l["default"].createElement("img",{id:"book-seat",src:"assets/img/book-seat-icon.png"}),l["default"].createElement("img",{id:"change-seat",src:"assets/img/change-seat-icon.png"}),l["default"].createElement("img",{id:"seat",src:"assets/img/seats/seat.png"}),l["default"].createElement("video",{id:"movie",loop:"true",src:"assets/movie.mp4"}))}}]),e}(l["default"].Component);e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement(c.Entity,{"obj-model":{obj:"#cinema-obj",mtl:"#cinema-mtl"},position:[0,0,-150],rotation:[0,0,0],scale:[.1,.1,.1],material:{color:"#666"}})}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement(c.Entity,null,u["default"].createElement("a-video",{"webkit-playsinline":"",id:"movie",src:"#movie",width:"85.7",height:"46.7",position:"0 40 -163.25"}))}}]),e}(u["default"].Component);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=n(523),p=r(h),d=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.material={color:"#fff",shader:"flat"},n.position_canvas=[0,35,-150],n.position_ceiling_front=[0,70,-90],n.position_ceiling_back=[-30,70,-10],n.position_ceiling_middle=[30,70,-20],n.angleCanvas=90,n.angleCeiling=90,n.rotationCanvas=[180,30,40],n.rotationCeiling=[20,160,20],n}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement(c.Entity,null,u["default"].createElement(p["default"],{Position:this.position_canvas,Rotation:this.rotationCanvas,Angle:this.angleCanvas,Decay:2,Distance:300,Type:"spot",Intensity:.5}),u["default"].createElement(p["default"],{Position:this.position_ceiling_back,Rotation:this.rotationCeiling,Angle:this.angleCeiling,Decay:2,Distance:300,Type:"point",Intensity:.4}),u["default"].createElement(p["default"],{Position:this.position_ceiling_back,Rotation:this.rotationCeiling,Angle:this.angleCeiling,Decay:2,Distance:300,Type:"hemisphere",Intensity:.15}))}}]),e}(u["default"].Component);e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(302),l=n(303),u=r(l),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.material={color:"#fff",shader:"flat"},n}return a(e,t),s(e,[{key:"render",value:function(){return u["default"].createElement(c.Entity,null,u["default"].createElement(c.Entity,{position:this.props.Position,rotation:this.props.Rotation,light:{type:this.props.Type,distance:this.props.Distance,decay:this.props.Decay,intensity:this.props.Intensity,angle:this.props.Angle}}))}}]),e}(u["default"].Component);e["default"]=h}]);